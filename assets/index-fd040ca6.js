(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function dA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function RN(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var CP={exports:{}},c0={},bP={exports:{}},Tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qh=Symbol.for("react.element"),PN=Symbol.for("react.portal"),BN=Symbol.for("react.fragment"),LN=Symbol.for("react.strict_mode"),IN=Symbol.for("react.profiler"),DN=Symbol.for("react.provider"),FN=Symbol.for("react.context"),NN=Symbol.for("react.forward_ref"),UN=Symbol.for("react.suspense"),ON=Symbol.for("react.memo"),kN=Symbol.for("react.lazy"),EE=Symbol.iterator;function GN(t){return t===null||typeof t!="object"?null:(t=EE&&t[EE]||t["@@iterator"],typeof t=="function"?t:null)}var RP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},PP=Object.assign,BP={};function xc(t,e,n){this.props=t,this.context=e,this.refs=BP,this.updater=n||RP}xc.prototype.isReactComponent={};xc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function LP(){}LP.prototype=xc.prototype;function pA(t,e,n){this.props=t,this.context=e,this.refs=BP,this.updater=n||RP}var mA=pA.prototype=new LP;mA.constructor=pA;PP(mA,xc.prototype);mA.isPureReactComponent=!0;var TE=Array.isArray,IP=Object.prototype.hasOwnProperty,gA={current:null},DP={key:!0,ref:!0,__self:!0,__source:!0};function FP(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)IP.call(e,i)&&!DP.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Qh,type:t,key:s,ref:o,props:r,_owner:gA.current}}function zN(t,e){return{$$typeof:Qh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vA(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qh}function HN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var CE=/\/+/g;function dy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?HN(""+t.key):e.toString(36)}function Jm(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Qh:case PN:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+dy(o,0):i,TE(r)?(n="",t!=null&&(n=t.replace(CE,"$&/")+"/"),Jm(r,e,n,"",function(u){return u})):r!=null&&(vA(r)&&(r=zN(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(CE,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",TE(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+dy(s,a);o+=Jm(s,e,n,l,r)}else if(l=GN(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+dy(s,a++),o+=Jm(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Bp(t,e,n){if(t==null)return t;var i=[],r=0;return Jm(t,i,"","",function(s){return e.call(n,s,r++)}),i}function VN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vi={current:null},Km={transition:null},WN={ReactCurrentDispatcher:vi,ReactCurrentBatchConfig:Km,ReactCurrentOwner:gA};Tt.Children={map:Bp,forEach:function(t,e,n){Bp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Bp(t,function(){e++}),e},toArray:function(t){return Bp(t,function(e){return e})||[]},only:function(t){if(!vA(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Tt.Component=xc;Tt.Fragment=BN;Tt.Profiler=IN;Tt.PureComponent=pA;Tt.StrictMode=LN;Tt.Suspense=UN;Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WN;Tt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=PP({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=gA.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)IP.call(e,l)&&!DP.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:Qh,type:t.type,key:r,ref:s,props:i,_owner:o}};Tt.createContext=function(t){return t={$$typeof:FN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:DN,_context:t},t.Consumer=t};Tt.createElement=FP;Tt.createFactory=function(t){var e=FP.bind(null,t);return e.type=t,e};Tt.createRef=function(){return{current:null}};Tt.forwardRef=function(t){return{$$typeof:NN,render:t}};Tt.isValidElement=vA;Tt.lazy=function(t){return{$$typeof:kN,_payload:{_status:-1,_result:t},_init:VN}};Tt.memo=function(t,e){return{$$typeof:ON,type:t,compare:e===void 0?null:e}};Tt.startTransition=function(t){var e=Km.transition;Km.transition={};try{t()}finally{Km.transition=e}};Tt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Tt.useCallback=function(t,e){return vi.current.useCallback(t,e)};Tt.useContext=function(t){return vi.current.useContext(t)};Tt.useDebugValue=function(){};Tt.useDeferredValue=function(t){return vi.current.useDeferredValue(t)};Tt.useEffect=function(t,e){return vi.current.useEffect(t,e)};Tt.useId=function(){return vi.current.useId()};Tt.useImperativeHandle=function(t,e,n){return vi.current.useImperativeHandle(t,e,n)};Tt.useInsertionEffect=function(t,e){return vi.current.useInsertionEffect(t,e)};Tt.useLayoutEffect=function(t,e){return vi.current.useLayoutEffect(t,e)};Tt.useMemo=function(t,e){return vi.current.useMemo(t,e)};Tt.useReducer=function(t,e,n){return vi.current.useReducer(t,e,n)};Tt.useRef=function(t){return vi.current.useRef(t)};Tt.useState=function(t){return vi.current.useState(t)};Tt.useSyncExternalStore=function(t,e,n){return vi.current.useSyncExternalStore(t,e,n)};Tt.useTransition=function(){return vi.current.useTransition()};Tt.version="18.2.0";bP.exports=Tt;var O=bP.exports;const f0=dA(O);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jN=O,XN=Symbol.for("react.element"),JN=Symbol.for("react.fragment"),KN=Object.prototype.hasOwnProperty,YN=jN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QN={key:!0,ref:!0,__self:!0,__source:!0};function NP(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)KN.call(e,i)&&!QN.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:XN,type:t,key:s,ref:o,props:r,_owner:YN.current}}c0.Fragment=JN;c0.jsx=NP;c0.jsxs=NP;CP.exports=c0;var j=CP.exports,qx={},UP={exports:{}},Zi={},OP={exports:{}},kP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,H){var z=I.length;I.push(H);e:for(;0<z;){var $=z-1>>>1,Z=I[$];if(0<r(Z,H))I[$]=H,I[z]=Z,z=$;else break e}}function n(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var H=I[0],z=I.pop();if(z!==H){I[0]=z;e:for(var $=0,Z=I.length,ee=Z>>>1;$<ee;){var ie=2*($+1)-1,Ae=I[ie],ge=ie+1,W=I[ge];if(0>r(Ae,z))ge<Z&&0>r(W,Ae)?(I[$]=W,I[ge]=z,$=ge):(I[$]=Ae,I[ie]=z,$=ie);else if(ge<Z&&0>r(W,z))I[$]=W,I[ge]=z,$=ge;else break e}}return H}function r(I,H){var z=I.sortIndex-H.sortIndex;return z!==0?z:I.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,p=3,m=!1,y=!1,S=!1,M=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(I){for(var H=n(u);H!==null;){if(H.callback===null)i(u);else if(H.startTime<=I)i(u),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(u)}}function w(I){if(S=!1,_(I),!y)if(n(l)!==null)y=!0,ae(C);else{var H=n(u);H!==null&&ne(w,H.startTime-I)}}function C(I,H){y=!1,S&&(S=!1,g(L),L=-1),m=!0;var z=p;try{for(_(H),d=n(l);d!==null&&(!(d.expirationTime>H)||I&&!G());){var $=d.callback;if(typeof $=="function"){d.callback=null,p=d.priorityLevel;var Z=$(d.expirationTime<=H);H=t.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(l)&&i(l),_(H)}else i(l);d=n(l)}if(d!==null)var ee=!0;else{var ie=n(u);ie!==null&&ne(w,ie.startTime-H),ee=!1}return ee}finally{d=null,p=z,m=!1}}var R=!1,P=null,L=-1,b=5,B=-1;function G(){return!(t.unstable_now()-B<b)}function X(){if(P!==null){var I=t.unstable_now();B=I;var H=!0;try{H=P(!0,I)}finally{H?V():(R=!1,P=null)}}else R=!1}var V;if(typeof x=="function")V=function(){x(X)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,J=Y.port2;Y.port1.onmessage=X,V=function(){J.postMessage(null)}}else V=function(){M(X,0)};function ae(I){P=I,R||(R=!0,V())}function ne(I,H){L=M(function(){I(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,ae(C))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(I){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var z=p;p=H;try{return I()}finally{p=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,H){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var z=p;p=I;try{return H()}finally{p=z}},t.unstable_scheduleCallback=function(I,H,z){var $=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?$+z:$):z=$,I){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=z+Z,I={id:h++,callback:H,priorityLevel:I,startTime:z,expirationTime:Z,sortIndex:-1},z>$?(I.sortIndex=z,e(u,I),n(l)===null&&I===n(u)&&(S?(g(L),L=-1):S=!0,ne(w,z-$))):(I.sortIndex=Z,e(l,I),y||m||(y=!0,ae(C))),I},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(I){var H=p;return function(){var z=p;p=H;try{return I.apply(this,arguments)}finally{p=z}}}})(kP);OP.exports=kP;var qN=OP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GP=O,Yi=qN;function Ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zP=new Set,ah={};function Sl(t,e){$u(t,e),$u(t+"Capture",e)}function $u(t,e){for(ah[t]=e,t=0;t<e.length;t++)zP.add(e[t])}var $s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zx=Object.prototype.hasOwnProperty,ZN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bE={},RE={};function $N(t){return Zx.call(RE,t)?!0:Zx.call(bE,t)?!1:ZN.test(t)?RE[t]=!0:(bE[t]=!0,!1)}function eU(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tU(t,e,n,i){if(e===null||typeof e>"u"||eU(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yi(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Kn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Kn[t]=new yi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Kn[e]=new yi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Kn[t]=new yi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Kn[t]=new yi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Kn[t]=new yi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Kn[t]=new yi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Kn[t]=new yi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Kn[t]=new yi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Kn[t]=new yi(t,5,!1,t.toLowerCase(),null,!1,!1)});var yA=/[\-:]([a-z])/g;function xA(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yA,xA);Kn[e]=new yi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yA,xA);Kn[e]=new yi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yA,xA);Kn[e]=new yi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Kn[t]=new yi(t,1,!1,t.toLowerCase(),null,!1,!1)});Kn.xlinkHref=new yi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Kn[t]=new yi(t,1,!1,t.toLowerCase(),null,!0,!0)});function _A(t,e,n,i){var r=Kn.hasOwnProperty(e)?Kn[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tU(e,n,r,i)&&(n=null),i||r===null?$N(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var oo=GP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lp=Symbol.for("react.element"),yu=Symbol.for("react.portal"),xu=Symbol.for("react.fragment"),AA=Symbol.for("react.strict_mode"),$x=Symbol.for("react.profiler"),HP=Symbol.for("react.provider"),VP=Symbol.for("react.context"),SA=Symbol.for("react.forward_ref"),e_=Symbol.for("react.suspense"),t_=Symbol.for("react.suspense_list"),MA=Symbol.for("react.memo"),Bo=Symbol.for("react.lazy"),WP=Symbol.for("react.offscreen"),PE=Symbol.iterator;function Qc(t){return t===null||typeof t!="object"?null:(t=PE&&t[PE]||t["@@iterator"],typeof t=="function"?t:null)}var un=Object.assign,py;function Pf(t){if(py===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);py=e&&e[1]||""}return`
`+py+t}var my=!1;function gy(t,e){if(!t||my)return"";my=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{my=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Pf(t):""}function nU(t){switch(t.tag){case 5:return Pf(t.type);case 16:return Pf("Lazy");case 13:return Pf("Suspense");case 19:return Pf("SuspenseList");case 0:case 2:case 15:return t=gy(t.type,!1),t;case 11:return t=gy(t.type.render,!1),t;case 1:return t=gy(t.type,!0),t;default:return""}}function n_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xu:return"Fragment";case yu:return"Portal";case $x:return"Profiler";case AA:return"StrictMode";case e_:return"Suspense";case t_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case VP:return(t.displayName||"Context")+".Consumer";case HP:return(t._context.displayName||"Context")+".Provider";case SA:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case MA:return e=t.displayName||null,e!==null?e:n_(t.type)||"Memo";case Bo:e=t._payload,t=t._init;try{return n_(t(e))}catch{}}return null}function iU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return n_(e);case 8:return e===AA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function na(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rU(t){var e=jP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ip(t){t._valueTracker||(t._valueTracker=rU(t))}function XP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=jP(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function _g(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function i_(t,e){var n=e.checked;return un({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function BE(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=na(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function JP(t,e){e=e.checked,e!=null&&_A(t,"checked",e,!1)}function r_(t,e){JP(t,e);var n=na(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?s_(t,e.type,n):e.hasOwnProperty("defaultValue")&&s_(t,e.type,na(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function LE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function s_(t,e,n){(e!=="number"||_g(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bf=Array.isArray;function ku(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+na(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function o_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return un({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function IE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ee(92));if(Bf(n)){if(1<n.length)throw Error(Ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:na(n)}}function KP(t,e){var n=na(e.value),i=na(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function DE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function YP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function a_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?YP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Dp,QP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Dp=Dp||document.createElement("div"),Dp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Dp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function lh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var kf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sU=["Webkit","ms","Moz","O"];Object.keys(kf).forEach(function(t){sU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),kf[e]=kf[t]})});function qP(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||kf.hasOwnProperty(t)&&kf[t]?(""+e).trim():e+"px"}function ZP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=qP(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var oU=un({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function l_(t,e){if(e){if(oU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ee(62))}}function u_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var c_=null;function wA(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var f_=null,Gu=null,zu=null;function FE(t){if(t=$h(t)){if(typeof f_!="function")throw Error(Ee(280));var e=t.stateNode;e&&(e=g0(e),f_(t.stateNode,t.type,e))}}function $P(t){Gu?zu?zu.push(t):zu=[t]:Gu=t}function e2(){if(Gu){var t=Gu,e=zu;if(zu=Gu=null,FE(t),e)for(t=0;t<e.length;t++)FE(e[t])}}function t2(t,e){return t(e)}function n2(){}var vy=!1;function i2(t,e,n){if(vy)return t(e,n);vy=!0;try{return t2(t,e,n)}finally{vy=!1,(Gu!==null||zu!==null)&&(n2(),e2())}}function uh(t,e){var n=t.stateNode;if(n===null)return null;var i=g0(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ee(231,e,typeof n));return n}var h_=!1;if($s)try{var qc={};Object.defineProperty(qc,"passive",{get:function(){h_=!0}}),window.addEventListener("test",qc,qc),window.removeEventListener("test",qc,qc)}catch{h_=!1}function aU(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Gf=!1,Ag=null,Sg=!1,d_=null,lU={onError:function(t){Gf=!0,Ag=t}};function uU(t,e,n,i,r,s,o,a,l){Gf=!1,Ag=null,aU.apply(lU,arguments)}function cU(t,e,n,i,r,s,o,a,l){if(uU.apply(this,arguments),Gf){if(Gf){var u=Ag;Gf=!1,Ag=null}else throw Error(Ee(198));Sg||(Sg=!0,d_=u)}}function Ml(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function r2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function NE(t){if(Ml(t)!==t)throw Error(Ee(188))}function fU(t){var e=t.alternate;if(!e){if(e=Ml(t),e===null)throw Error(Ee(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return NE(r),t;if(s===i)return NE(r),e;s=s.sibling}throw Error(Ee(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(Ee(189))}}if(n.alternate!==i)throw Error(Ee(190))}if(n.tag!==3)throw Error(Ee(188));return n.stateNode.current===n?t:e}function s2(t){return t=fU(t),t!==null?o2(t):null}function o2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=o2(t);if(e!==null)return e;t=t.sibling}return null}var a2=Yi.unstable_scheduleCallback,UE=Yi.unstable_cancelCallback,hU=Yi.unstable_shouldYield,dU=Yi.unstable_requestPaint,vn=Yi.unstable_now,pU=Yi.unstable_getCurrentPriorityLevel,EA=Yi.unstable_ImmediatePriority,l2=Yi.unstable_UserBlockingPriority,Mg=Yi.unstable_NormalPriority,mU=Yi.unstable_LowPriority,u2=Yi.unstable_IdlePriority,h0=null,ms=null;function gU(t){if(ms&&typeof ms.onCommitFiberRoot=="function")try{ms.onCommitFiberRoot(h0,t,void 0,(t.current.flags&128)===128)}catch{}}var Vr=Math.clz32?Math.clz32:xU,vU=Math.log,yU=Math.LN2;function xU(t){return t>>>=0,t===0?32:31-(vU(t)/yU|0)|0}var Fp=64,Np=4194304;function Lf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wg(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Lf(a):(s&=o,s!==0&&(i=Lf(s)))}else o=n&~r,o!==0?i=Lf(o):s!==0&&(i=Lf(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Vr(e),r=1<<n,i|=t[n],e&=~r;return i}function _U(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AU(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Vr(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=_U(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function p_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function c2(){var t=Fp;return Fp<<=1,!(Fp&4194240)&&(Fp=64),t}function yy(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vr(e),t[e]=n}function SU(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Vr(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function TA(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Vr(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var zt=0;function f2(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var h2,CA,d2,p2,m2,m_=!1,Up=[],Vo=null,Wo=null,jo=null,ch=new Map,fh=new Map,No=[],MU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function OE(t,e){switch(t){case"focusin":case"focusout":Vo=null;break;case"dragenter":case"dragleave":Wo=null;break;case"mouseover":case"mouseout":jo=null;break;case"pointerover":case"pointerout":ch.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fh.delete(e.pointerId)}}function Zc(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=$h(e),e!==null&&CA(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function wU(t,e,n,i,r){switch(e){case"focusin":return Vo=Zc(Vo,t,e,n,i,r),!0;case"dragenter":return Wo=Zc(Wo,t,e,n,i,r),!0;case"mouseover":return jo=Zc(jo,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return ch.set(s,Zc(ch.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,fh.set(s,Zc(fh.get(s)||null,t,e,n,i,r)),!0}return!1}function g2(t){var e=Ja(t.target);if(e!==null){var n=Ml(e);if(n!==null){if(e=n.tag,e===13){if(e=r2(n),e!==null){t.blockedOn=e,m2(t.priority,function(){d2(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ym(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=g_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);c_=i,n.target.dispatchEvent(i),c_=null}else return e=$h(n),e!==null&&CA(e),t.blockedOn=n,!1;e.shift()}return!0}function kE(t,e,n){Ym(t)&&n.delete(e)}function EU(){m_=!1,Vo!==null&&Ym(Vo)&&(Vo=null),Wo!==null&&Ym(Wo)&&(Wo=null),jo!==null&&Ym(jo)&&(jo=null),ch.forEach(kE),fh.forEach(kE)}function $c(t,e){t.blockedOn===e&&(t.blockedOn=null,m_||(m_=!0,Yi.unstable_scheduleCallback(Yi.unstable_NormalPriority,EU)))}function hh(t){function e(r){return $c(r,t)}if(0<Up.length){$c(Up[0],t);for(var n=1;n<Up.length;n++){var i=Up[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Vo!==null&&$c(Vo,t),Wo!==null&&$c(Wo,t),jo!==null&&$c(jo,t),ch.forEach(e),fh.forEach(e),n=0;n<No.length;n++)i=No[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<No.length&&(n=No[0],n.blockedOn===null);)g2(n),n.blockedOn===null&&No.shift()}var Hu=oo.ReactCurrentBatchConfig,Eg=!0;function TU(t,e,n,i){var r=zt,s=Hu.transition;Hu.transition=null;try{zt=1,bA(t,e,n,i)}finally{zt=r,Hu.transition=s}}function CU(t,e,n,i){var r=zt,s=Hu.transition;Hu.transition=null;try{zt=4,bA(t,e,n,i)}finally{zt=r,Hu.transition=s}}function bA(t,e,n,i){if(Eg){var r=g_(t,e,n,i);if(r===null)by(t,e,i,Tg,n),OE(t,i);else if(wU(r,t,e,n,i))i.stopPropagation();else if(OE(t,i),e&4&&-1<MU.indexOf(t)){for(;r!==null;){var s=$h(r);if(s!==null&&h2(s),s=g_(t,e,n,i),s===null&&by(t,e,i,Tg,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else by(t,e,i,null,n)}}var Tg=null;function g_(t,e,n,i){if(Tg=null,t=wA(i),t=Ja(t),t!==null)if(e=Ml(t),e===null)t=null;else if(n=e.tag,n===13){if(t=r2(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Tg=t,null}function v2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pU()){case EA:return 1;case l2:return 4;case Mg:case mU:return 16;case u2:return 536870912;default:return 16}default:return 16}}var Oo=null,RA=null,Qm=null;function y2(){if(Qm)return Qm;var t,e=RA,n=e.length,i,r="value"in Oo?Oo.value:Oo.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Qm=r.slice(t,1<i?1-i:void 0)}function qm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Op(){return!0}function GE(){return!1}function $i(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Op:GE,this.isPropagationStopped=GE,this}return un(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Op)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Op)},persist:function(){},isPersistent:Op}),e}var _c={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},PA=$i(_c),Zh=un({},_c,{view:0,detail:0}),bU=$i(Zh),xy,_y,ef,d0=un({},Zh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:BA,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ef&&(ef&&t.type==="mousemove"?(xy=t.screenX-ef.screenX,_y=t.screenY-ef.screenY):_y=xy=0,ef=t),xy)},movementY:function(t){return"movementY"in t?t.movementY:_y}}),zE=$i(d0),RU=un({},d0,{dataTransfer:0}),PU=$i(RU),BU=un({},Zh,{relatedTarget:0}),Ay=$i(BU),LU=un({},_c,{animationName:0,elapsedTime:0,pseudoElement:0}),IU=$i(LU),DU=un({},_c,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),FU=$i(DU),NU=un({},_c,{data:0}),HE=$i(NU),UU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GU(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kU[t])?!!e[t]:!1}function BA(){return GU}var zU=un({},Zh,{key:function(t){if(t.key){var e=UU[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?OU[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:BA,charCode:function(t){return t.type==="keypress"?qm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),HU=$i(zU),VU=un({},d0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),VE=$i(VU),WU=un({},Zh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:BA}),jU=$i(WU),XU=un({},_c,{propertyName:0,elapsedTime:0,pseudoElement:0}),JU=$i(XU),KU=un({},d0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YU=$i(KU),QU=[9,13,27,32],LA=$s&&"CompositionEvent"in window,zf=null;$s&&"documentMode"in document&&(zf=document.documentMode);var qU=$s&&"TextEvent"in window&&!zf,x2=$s&&(!LA||zf&&8<zf&&11>=zf),WE=String.fromCharCode(32),jE=!1;function _2(t,e){switch(t){case"keyup":return QU.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function A2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _u=!1;function ZU(t,e){switch(t){case"compositionend":return A2(e);case"keypress":return e.which!==32?null:(jE=!0,WE);case"textInput":return t=e.data,t===WE&&jE?null:t;default:return null}}function $U(t,e){if(_u)return t==="compositionend"||!LA&&_2(t,e)?(t=y2(),Qm=RA=Oo=null,_u=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return x2&&e.locale!=="ko"?null:e.data;default:return null}}var eO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function XE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eO[t.type]:e==="textarea"}function S2(t,e,n,i){$P(i),e=Cg(e,"onChange"),0<e.length&&(n=new PA("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Hf=null,dh=null;function tO(t){I2(t,0)}function p0(t){var e=Mu(t);if(XP(e))return t}function nO(t,e){if(t==="change")return e}var M2=!1;if($s){var Sy;if($s){var My="oninput"in document;if(!My){var JE=document.createElement("div");JE.setAttribute("oninput","return;"),My=typeof JE.oninput=="function"}Sy=My}else Sy=!1;M2=Sy&&(!document.documentMode||9<document.documentMode)}function KE(){Hf&&(Hf.detachEvent("onpropertychange",w2),dh=Hf=null)}function w2(t){if(t.propertyName==="value"&&p0(dh)){var e=[];S2(e,dh,t,wA(t)),i2(tO,e)}}function iO(t,e,n){t==="focusin"?(KE(),Hf=e,dh=n,Hf.attachEvent("onpropertychange",w2)):t==="focusout"&&KE()}function rO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return p0(dh)}function sO(t,e){if(t==="click")return p0(e)}function oO(t,e){if(t==="input"||t==="change")return p0(e)}function aO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kr=typeof Object.is=="function"?Object.is:aO;function ph(t,e){if(Kr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Zx.call(e,r)||!Kr(t[r],e[r]))return!1}return!0}function YE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function QE(t,e){var n=YE(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=YE(n)}}function E2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?E2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function T2(){for(var t=window,e=_g();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_g(t.document)}return e}function IA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lO(t){var e=T2(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&E2(n.ownerDocument.documentElement,n)){if(i!==null&&IA(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=QE(n,s);var o=QE(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uO=$s&&"documentMode"in document&&11>=document.documentMode,Au=null,v_=null,Vf=null,y_=!1;function qE(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;y_||Au==null||Au!==_g(i)||(i=Au,"selectionStart"in i&&IA(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Vf&&ph(Vf,i)||(Vf=i,i=Cg(v_,"onSelect"),0<i.length&&(e=new PA("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Au)))}function kp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Su={animationend:kp("Animation","AnimationEnd"),animationiteration:kp("Animation","AnimationIteration"),animationstart:kp("Animation","AnimationStart"),transitionend:kp("Transition","TransitionEnd")},wy={},C2={};$s&&(C2=document.createElement("div").style,"AnimationEvent"in window||(delete Su.animationend.animation,delete Su.animationiteration.animation,delete Su.animationstart.animation),"TransitionEvent"in window||delete Su.transitionend.transition);function m0(t){if(wy[t])return wy[t];if(!Su[t])return t;var e=Su[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in C2)return wy[t]=e[n];return t}var b2=m0("animationend"),R2=m0("animationiteration"),P2=m0("animationstart"),B2=m0("transitionend"),L2=new Map,ZE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ca(t,e){L2.set(t,e),Sl(e,[t])}for(var Ey=0;Ey<ZE.length;Ey++){var Ty=ZE[Ey],cO=Ty.toLowerCase(),fO=Ty[0].toUpperCase()+Ty.slice(1);ca(cO,"on"+fO)}ca(b2,"onAnimationEnd");ca(R2,"onAnimationIteration");ca(P2,"onAnimationStart");ca("dblclick","onDoubleClick");ca("focusin","onFocus");ca("focusout","onBlur");ca(B2,"onTransitionEnd");$u("onMouseEnter",["mouseout","mouseover"]);$u("onMouseLeave",["mouseout","mouseover"]);$u("onPointerEnter",["pointerout","pointerover"]);$u("onPointerLeave",["pointerout","pointerover"]);Sl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var If="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hO=new Set("cancel close invalid load scroll toggle".split(" ").concat(If));function $E(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,cU(i,e,void 0,t),t.currentTarget=null}function I2(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;$E(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;$E(r,a,u),s=l}}}if(Sg)throw t=d_,Sg=!1,d_=null,t}function Xt(t,e){var n=e[M_];n===void 0&&(n=e[M_]=new Set);var i=t+"__bubble";n.has(i)||(D2(e,t,2,!1),n.add(i))}function Cy(t,e,n){var i=0;e&&(i|=4),D2(n,t,i,e)}var Gp="_reactListening"+Math.random().toString(36).slice(2);function mh(t){if(!t[Gp]){t[Gp]=!0,zP.forEach(function(n){n!=="selectionchange"&&(hO.has(n)||Cy(n,!1,t),Cy(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gp]||(e[Gp]=!0,Cy("selectionchange",!1,e))}}function D2(t,e,n,i){switch(v2(e)){case 1:var r=TU;break;case 4:r=CU;break;default:r=bA}n=r.bind(null,e,n,t),r=void 0,!h_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function by(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Ja(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}i2(function(){var u=s,h=wA(n),d=[];e:{var p=L2.get(t);if(p!==void 0){var m=PA,y=t;switch(t){case"keypress":if(qm(n)===0)break e;case"keydown":case"keyup":m=HU;break;case"focusin":y="focus",m=Ay;break;case"focusout":y="blur",m=Ay;break;case"beforeblur":case"afterblur":m=Ay;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=zE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=PU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=jU;break;case b2:case R2:case P2:m=IU;break;case B2:m=JU;break;case"scroll":m=bU;break;case"wheel":m=YU;break;case"copy":case"cut":case"paste":m=FU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=VE}var S=(e&4)!==0,M=!S&&t==="scroll",g=S?p!==null?p+"Capture":null:p;S=[];for(var x=u,_;x!==null;){_=x;var w=_.stateNode;if(_.tag===5&&w!==null&&(_=w,g!==null&&(w=uh(x,g),w!=null&&S.push(gh(x,w,_)))),M)break;x=x.return}0<S.length&&(p=new m(p,y,null,n,h),d.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==c_&&(y=n.relatedTarget||n.fromElement)&&(Ja(y)||y[eo]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=u,y=y?Ja(y):null,y!==null&&(M=Ml(y),y!==M||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(S=zE,w="onMouseLeave",g="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(S=VE,w="onPointerLeave",g="onPointerEnter",x="pointer"),M=m==null?p:Mu(m),_=y==null?p:Mu(y),p=new S(w,x+"leave",m,n,h),p.target=M,p.relatedTarget=_,w=null,Ja(h)===u&&(S=new S(g,x+"enter",y,n,h),S.target=_,S.relatedTarget=M,w=S),M=w,m&&y)t:{for(S=m,g=y,x=0,_=S;_;_=Wl(_))x++;for(_=0,w=g;w;w=Wl(w))_++;for(;0<x-_;)S=Wl(S),x--;for(;0<_-x;)g=Wl(g),_--;for(;x--;){if(S===g||g!==null&&S===g.alternate)break t;S=Wl(S),g=Wl(g)}S=null}else S=null;m!==null&&eT(d,p,m,S,!1),y!==null&&M!==null&&eT(d,M,y,S,!0)}}e:{if(p=u?Mu(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var C=nO;else if(XE(p))if(M2)C=oO;else{C=rO;var R=iO}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=sO);if(C&&(C=C(t,u))){S2(d,C,n,h);break e}R&&R(t,p,u),t==="focusout"&&(R=p._wrapperState)&&R.controlled&&p.type==="number"&&s_(p,"number",p.value)}switch(R=u?Mu(u):window,t){case"focusin":(XE(R)||R.contentEditable==="true")&&(Au=R,v_=u,Vf=null);break;case"focusout":Vf=v_=Au=null;break;case"mousedown":y_=!0;break;case"contextmenu":case"mouseup":case"dragend":y_=!1,qE(d,n,h);break;case"selectionchange":if(uO)break;case"keydown":case"keyup":qE(d,n,h)}var P;if(LA)e:{switch(t){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else _u?_2(t,n)&&(L="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(x2&&n.locale!=="ko"&&(_u||L!=="onCompositionStart"?L==="onCompositionEnd"&&_u&&(P=y2()):(Oo=h,RA="value"in Oo?Oo.value:Oo.textContent,_u=!0)),R=Cg(u,L),0<R.length&&(L=new HE(L,t,null,n,h),d.push({event:L,listeners:R}),P?L.data=P:(P=A2(n),P!==null&&(L.data=P)))),(P=qU?ZU(t,n):$U(t,n))&&(u=Cg(u,"onBeforeInput"),0<u.length&&(h=new HE("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=P))}I2(d,e)})}function gh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Cg(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=uh(t,n),s!=null&&i.unshift(gh(t,s,r)),s=uh(t,e),s!=null&&i.push(gh(t,s,r))),t=t.return}return i}function Wl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function eT(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=uh(n,s),l!=null&&o.unshift(gh(n,l,a))):r||(l=uh(n,s),l!=null&&o.push(gh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var dO=/\r\n?/g,pO=/\u0000|\uFFFD/g;function tT(t){return(typeof t=="string"?t:""+t).replace(dO,`
`).replace(pO,"")}function zp(t,e,n){if(e=tT(e),tT(t)!==e&&n)throw Error(Ee(425))}function bg(){}var x_=null,__=null;function A_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var S_=typeof setTimeout=="function"?setTimeout:void 0,mO=typeof clearTimeout=="function"?clearTimeout:void 0,nT=typeof Promise=="function"?Promise:void 0,gO=typeof queueMicrotask=="function"?queueMicrotask:typeof nT<"u"?function(t){return nT.resolve(null).then(t).catch(vO)}:S_;function vO(t){setTimeout(function(){throw t})}function Ry(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),hh(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);hh(e)}function Xo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function iT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ac=Math.random().toString(36).slice(2),ps="__reactFiber$"+Ac,vh="__reactProps$"+Ac,eo="__reactContainer$"+Ac,M_="__reactEvents$"+Ac,yO="__reactListeners$"+Ac,xO="__reactHandles$"+Ac;function Ja(t){var e=t[ps];if(e)return e;for(var n=t.parentNode;n;){if(e=n[eo]||n[ps]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=iT(t);t!==null;){if(n=t[ps])return n;t=iT(t)}return e}t=n,n=t.parentNode}return null}function $h(t){return t=t[ps]||t[eo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Mu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ee(33))}function g0(t){return t[vh]||null}var w_=[],wu=-1;function fa(t){return{current:t}}function Kt(t){0>wu||(t.current=w_[wu],w_[wu]=null,wu--)}function jt(t,e){wu++,w_[wu]=t.current,t.current=e}var ia={},oi=fa(ia),Pi=fa(!1),fl=ia;function ec(t,e){var n=t.type.contextTypes;if(!n)return ia;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Bi(t){return t=t.childContextTypes,t!=null}function Rg(){Kt(Pi),Kt(oi)}function rT(t,e,n){if(oi.current!==ia)throw Error(Ee(168));jt(oi,e),jt(Pi,n)}function F2(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Ee(108,iU(t)||"Unknown",r));return un({},n,i)}function Pg(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ia,fl=oi.current,jt(oi,t),jt(Pi,Pi.current),!0}function sT(t,e,n){var i=t.stateNode;if(!i)throw Error(Ee(169));n?(t=F2(t,e,fl),i.__reactInternalMemoizedMergedChildContext=t,Kt(Pi),Kt(oi),jt(oi,t)):Kt(Pi),jt(Pi,n)}var zs=null,v0=!1,Py=!1;function N2(t){zs===null?zs=[t]:zs.push(t)}function _O(t){v0=!0,N2(t)}function ha(){if(!Py&&zs!==null){Py=!0;var t=0,e=zt;try{var n=zs;for(zt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}zs=null,v0=!1}catch(r){throw zs!==null&&(zs=zs.slice(t+1)),a2(EA,ha),r}finally{zt=e,Py=!1}}return null}var Eu=[],Tu=0,Bg=null,Lg=0,mr=[],gr=0,hl=null,Ws=1,js="";function Oa(t,e){Eu[Tu++]=Lg,Eu[Tu++]=Bg,Bg=t,Lg=e}function U2(t,e,n){mr[gr++]=Ws,mr[gr++]=js,mr[gr++]=hl,hl=t;var i=Ws;t=js;var r=32-Vr(i)-1;i&=~(1<<r),n+=1;var s=32-Vr(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Ws=1<<32-Vr(e)+r|n<<r|i,js=s+t}else Ws=1<<s|n<<r|i,js=t}function DA(t){t.return!==null&&(Oa(t,1),U2(t,1,0))}function FA(t){for(;t===Bg;)Bg=Eu[--Tu],Eu[Tu]=null,Lg=Eu[--Tu],Eu[Tu]=null;for(;t===hl;)hl=mr[--gr],mr[gr]=null,js=mr[--gr],mr[gr]=null,Ws=mr[--gr],mr[gr]=null}var Xi=null,Hi=null,Zt=!1,kr=null;function O2(t,e){var n=_r(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function oT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xi=t,Hi=Xo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xi=t,Hi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=hl!==null?{id:Ws,overflow:js}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=_r(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xi=t,Hi=null,!0):!1;default:return!1}}function E_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function T_(t){if(Zt){var e=Hi;if(e){var n=e;if(!oT(t,e)){if(E_(t))throw Error(Ee(418));e=Xo(n.nextSibling);var i=Xi;e&&oT(t,e)?O2(i,n):(t.flags=t.flags&-4097|2,Zt=!1,Xi=t)}}else{if(E_(t))throw Error(Ee(418));t.flags=t.flags&-4097|2,Zt=!1,Xi=t}}}function aT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xi=t}function Hp(t){if(t!==Xi)return!1;if(!Zt)return aT(t),Zt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!A_(t.type,t.memoizedProps)),e&&(e=Hi)){if(E_(t))throw k2(),Error(Ee(418));for(;e;)O2(t,e),e=Xo(e.nextSibling)}if(aT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Hi=Xo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Hi=null}}else Hi=Xi?Xo(t.stateNode.nextSibling):null;return!0}function k2(){for(var t=Hi;t;)t=Xo(t.nextSibling)}function tc(){Hi=Xi=null,Zt=!1}function NA(t){kr===null?kr=[t]:kr.push(t)}var AO=oo.ReactCurrentBatchConfig;function Nr(t,e){if(t&&t.defaultProps){e=un({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Ig=fa(null),Dg=null,Cu=null,UA=null;function OA(){UA=Cu=Dg=null}function kA(t){var e=Ig.current;Kt(Ig),t._currentValue=e}function C_(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Vu(t,e){Dg=t,UA=Cu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ri=!0),t.firstContext=null)}function Sr(t){var e=t._currentValue;if(UA!==t)if(t={context:t,memoizedValue:e,next:null},Cu===null){if(Dg===null)throw Error(Ee(308));Cu=t,Dg.dependencies={lanes:0,firstContext:t}}else Cu=Cu.next=t;return e}var Ka=null;function GA(t){Ka===null?Ka=[t]:Ka.push(t)}function G2(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,GA(e)):(n.next=r.next,r.next=n),e.interleaved=n,to(t,i)}function to(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Lo=!1;function zA(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function z2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ys(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jo(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Pt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,to(t,n)}return r=i.interleaved,r===null?(e.next=e,GA(i)):(e.next=r.next,r.next=e),i.interleaved=e,to(t,n)}function Zm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,TA(t,n)}}function lT(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fg(t,e,n,i){var r=t.updateQueue;Lo=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=u=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,S=a;switch(p=e,m=n,S.tag){case 1:if(y=S.payload,typeof y=="function"){d=y.call(m,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=S.payload,p=typeof y=="function"?y.call(m,d,p):y,p==null)break e;d=un({},d,p);break e;case 2:Lo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=m,l=d):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(1);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);pl|=o,t.lanes=o,t.memoizedState=d}}function uT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Ee(191,r));r.call(i)}}}var H2=new GP.Component().refs;function b_(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:un({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var y0={isMounted:function(t){return(t=t._reactInternals)?Ml(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=mi(),r=Yo(t),s=Ys(i,r);s.payload=e,n!=null&&(s.callback=n),e=Jo(t,s,r),e!==null&&(Wr(e,t,r,i),Zm(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=mi(),r=Yo(t),s=Ys(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Jo(t,s,r),e!==null&&(Wr(e,t,r,i),Zm(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mi(),i=Yo(t),r=Ys(n,i);r.tag=2,e!=null&&(r.callback=e),e=Jo(t,r,i),e!==null&&(Wr(e,t,i,n),Zm(e,t,i))}};function cT(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!ph(n,i)||!ph(r,s):!0}function V2(t,e,n){var i=!1,r=ia,s=e.contextType;return typeof s=="object"&&s!==null?s=Sr(s):(r=Bi(e)?fl:oi.current,i=e.contextTypes,s=(i=i!=null)?ec(t,r):ia),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=y0,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function fT(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&y0.enqueueReplaceState(e,e.state,null)}function R_(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=H2,zA(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Sr(s):(s=Bi(e)?fl:oi.current,r.context=ec(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(b_(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&y0.enqueueReplaceState(r,r.state,null),Fg(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function tf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ee(309));var i=n.stateNode}if(!i)throw Error(Ee(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===H2&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ee(284));if(!n._owner)throw Error(Ee(290,t))}return t}function Vp(t,e){throw t=Object.prototype.toString.call(e),Error(Ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hT(t){var e=t._init;return e(t._payload)}function W2(t){function e(g,x){if(t){var _=g.deletions;_===null?(g.deletions=[x],g.flags|=16):_.push(x)}}function n(g,x){if(!t)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function i(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function r(g,x){return g=Qo(g,x),g.index=0,g.sibling=null,g}function s(g,x,_){return g.index=_,t?(_=g.alternate,_!==null?(_=_.index,_<x?(g.flags|=2,x):_):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,x,_,w){return x===null||x.tag!==6?(x=Uy(_,g.mode,w),x.return=g,x):(x=r(x,_),x.return=g,x)}function l(g,x,_,w){var C=_.type;return C===xu?h(g,x,_.props.children,w,_.key):x!==null&&(x.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Bo&&hT(C)===x.type)?(w=r(x,_.props),w.ref=tf(g,x,_),w.return=g,w):(w=rg(_.type,_.key,_.props,null,g.mode,w),w.ref=tf(g,x,_),w.return=g,w)}function u(g,x,_,w){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=Oy(_,g.mode,w),x.return=g,x):(x=r(x,_.children||[]),x.return=g,x)}function h(g,x,_,w,C){return x===null||x.tag!==7?(x=il(_,g.mode,w,C),x.return=g,x):(x=r(x,_),x.return=g,x)}function d(g,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Uy(""+x,g.mode,_),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Lp:return _=rg(x.type,x.key,x.props,null,g.mode,_),_.ref=tf(g,null,x),_.return=g,_;case yu:return x=Oy(x,g.mode,_),x.return=g,x;case Bo:var w=x._init;return d(g,w(x._payload),_)}if(Bf(x)||Qc(x))return x=il(x,g.mode,_,null),x.return=g,x;Vp(g,x)}return null}function p(g,x,_,w){var C=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return C!==null?null:a(g,x,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Lp:return _.key===C?l(g,x,_,w):null;case yu:return _.key===C?u(g,x,_,w):null;case Bo:return C=_._init,p(g,x,C(_._payload),w)}if(Bf(_)||Qc(_))return C!==null?null:h(g,x,_,w,null);Vp(g,_)}return null}function m(g,x,_,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(_)||null,a(x,g,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Lp:return g=g.get(w.key===null?_:w.key)||null,l(x,g,w,C);case yu:return g=g.get(w.key===null?_:w.key)||null,u(x,g,w,C);case Bo:var R=w._init;return m(g,x,_,R(w._payload),C)}if(Bf(w)||Qc(w))return g=g.get(_)||null,h(x,g,w,C,null);Vp(x,w)}return null}function y(g,x,_,w){for(var C=null,R=null,P=x,L=x=0,b=null;P!==null&&L<_.length;L++){P.index>L?(b=P,P=null):b=P.sibling;var B=p(g,P,_[L],w);if(B===null){P===null&&(P=b);break}t&&P&&B.alternate===null&&e(g,P),x=s(B,x,L),R===null?C=B:R.sibling=B,R=B,P=b}if(L===_.length)return n(g,P),Zt&&Oa(g,L),C;if(P===null){for(;L<_.length;L++)P=d(g,_[L],w),P!==null&&(x=s(P,x,L),R===null?C=P:R.sibling=P,R=P);return Zt&&Oa(g,L),C}for(P=i(g,P);L<_.length;L++)b=m(P,g,L,_[L],w),b!==null&&(t&&b.alternate!==null&&P.delete(b.key===null?L:b.key),x=s(b,x,L),R===null?C=b:R.sibling=b,R=b);return t&&P.forEach(function(G){return e(g,G)}),Zt&&Oa(g,L),C}function S(g,x,_,w){var C=Qc(_);if(typeof C!="function")throw Error(Ee(150));if(_=C.call(_),_==null)throw Error(Ee(151));for(var R=C=null,P=x,L=x=0,b=null,B=_.next();P!==null&&!B.done;L++,B=_.next()){P.index>L?(b=P,P=null):b=P.sibling;var G=p(g,P,B.value,w);if(G===null){P===null&&(P=b);break}t&&P&&G.alternate===null&&e(g,P),x=s(G,x,L),R===null?C=G:R.sibling=G,R=G,P=b}if(B.done)return n(g,P),Zt&&Oa(g,L),C;if(P===null){for(;!B.done;L++,B=_.next())B=d(g,B.value,w),B!==null&&(x=s(B,x,L),R===null?C=B:R.sibling=B,R=B);return Zt&&Oa(g,L),C}for(P=i(g,P);!B.done;L++,B=_.next())B=m(P,g,L,B.value,w),B!==null&&(t&&B.alternate!==null&&P.delete(B.key===null?L:B.key),x=s(B,x,L),R===null?C=B:R.sibling=B,R=B);return t&&P.forEach(function(X){return e(g,X)}),Zt&&Oa(g,L),C}function M(g,x,_,w){if(typeof _=="object"&&_!==null&&_.type===xu&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Lp:e:{for(var C=_.key,R=x;R!==null;){if(R.key===C){if(C=_.type,C===xu){if(R.tag===7){n(g,R.sibling),x=r(R,_.props.children),x.return=g,g=x;break e}}else if(R.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Bo&&hT(C)===R.type){n(g,R.sibling),x=r(R,_.props),x.ref=tf(g,R,_),x.return=g,g=x;break e}n(g,R);break}else e(g,R);R=R.sibling}_.type===xu?(x=il(_.props.children,g.mode,w,_.key),x.return=g,g=x):(w=rg(_.type,_.key,_.props,null,g.mode,w),w.ref=tf(g,x,_),w.return=g,g=w)}return o(g);case yu:e:{for(R=_.key;x!==null;){if(x.key===R)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){n(g,x.sibling),x=r(x,_.children||[]),x.return=g,g=x;break e}else{n(g,x);break}else e(g,x);x=x.sibling}x=Oy(_,g.mode,w),x.return=g,g=x}return o(g);case Bo:return R=_._init,M(g,x,R(_._payload),w)}if(Bf(_))return y(g,x,_,w);if(Qc(_))return S(g,x,_,w);Vp(g,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(n(g,x.sibling),x=r(x,_),x.return=g,g=x):(n(g,x),x=Uy(_,g.mode,w),x.return=g,g=x),o(g)):n(g,x)}return M}var nc=W2(!0),j2=W2(!1),ed={},gs=fa(ed),yh=fa(ed),xh=fa(ed);function Ya(t){if(t===ed)throw Error(Ee(174));return t}function HA(t,e){switch(jt(xh,e),jt(yh,t),jt(gs,ed),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:a_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=a_(e,t)}Kt(gs),jt(gs,e)}function ic(){Kt(gs),Kt(yh),Kt(xh)}function X2(t){Ya(xh.current);var e=Ya(gs.current),n=a_(e,t.type);e!==n&&(jt(yh,t),jt(gs,n))}function VA(t){yh.current===t&&(Kt(gs),Kt(yh))}var nn=fa(0);function Ng(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var By=[];function WA(){for(var t=0;t<By.length;t++)By[t]._workInProgressVersionPrimary=null;By.length=0}var $m=oo.ReactCurrentDispatcher,Ly=oo.ReactCurrentBatchConfig,dl=0,ln=null,bn=null,On=null,Ug=!1,Wf=!1,_h=0,SO=0;function ei(){throw Error(Ee(321))}function jA(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kr(t[n],e[n]))return!1;return!0}function XA(t,e,n,i,r,s){if(dl=s,ln=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$m.current=t===null||t.memoizedState===null?TO:CO,t=n(i,r),Wf){s=0;do{if(Wf=!1,_h=0,25<=s)throw Error(Ee(301));s+=1,On=bn=null,e.updateQueue=null,$m.current=bO,t=n(i,r)}while(Wf)}if($m.current=Og,e=bn!==null&&bn.next!==null,dl=0,On=bn=ln=null,Ug=!1,e)throw Error(Ee(300));return t}function JA(){var t=_h!==0;return _h=0,t}function fs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?ln.memoizedState=On=t:On=On.next=t,On}function Mr(){if(bn===null){var t=ln.alternate;t=t!==null?t.memoizedState:null}else t=bn.next;var e=On===null?ln.memoizedState:On.next;if(e!==null)On=e,bn=t;else{if(t===null)throw Error(Ee(310));bn=t,t={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},On===null?ln.memoizedState=On=t:On=On.next=t}return On}function Ah(t,e){return typeof e=="function"?e(t):e}function Iy(t){var e=Mr(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var i=bn,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((dl&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,ln.lanes|=h,pl|=h}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,Kr(i,e.memoizedState)||(Ri=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,ln.lanes|=s,pl|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Dy(t){var e=Mr(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Kr(s,e.memoizedState)||(Ri=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function J2(){}function K2(t,e){var n=ln,i=Mr(),r=e(),s=!Kr(i.memoizedState,r);if(s&&(i.memoizedState=r,Ri=!0),i=i.queue,KA(q2.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||On!==null&&On.memoizedState.tag&1){if(n.flags|=2048,Sh(9,Q2.bind(null,n,i,r,e),void 0,null),zn===null)throw Error(Ee(349));dl&30||Y2(n,e,r)}return r}function Y2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ln.updateQueue,e===null?(e={lastEffect:null,stores:null},ln.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Q2(t,e,n,i){e.value=n,e.getSnapshot=i,Z2(e)&&$2(t)}function q2(t,e,n){return n(function(){Z2(e)&&$2(t)})}function Z2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kr(t,n)}catch{return!0}}function $2(t){var e=to(t,1);e!==null&&Wr(e,t,1,-1)}function dT(t){var e=fs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ah,lastRenderedState:t},e.queue=t,t=t.dispatch=EO.bind(null,ln,t),[e.memoizedState,t]}function Sh(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ln.updateQueue,e===null?(e={lastEffect:null,stores:null},ln.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function eB(){return Mr().memoizedState}function eg(t,e,n,i){var r=fs();ln.flags|=t,r.memoizedState=Sh(1|e,n,void 0,i===void 0?null:i)}function x0(t,e,n,i){var r=Mr();i=i===void 0?null:i;var s=void 0;if(bn!==null){var o=bn.memoizedState;if(s=o.destroy,i!==null&&jA(i,o.deps)){r.memoizedState=Sh(e,n,s,i);return}}ln.flags|=t,r.memoizedState=Sh(1|e,n,s,i)}function pT(t,e){return eg(8390656,8,t,e)}function KA(t,e){return x0(2048,8,t,e)}function tB(t,e){return x0(4,2,t,e)}function nB(t,e){return x0(4,4,t,e)}function iB(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rB(t,e,n){return n=n!=null?n.concat([t]):null,x0(4,4,iB.bind(null,e,t),n)}function YA(){}function sB(t,e){var n=Mr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&jA(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function oB(t,e){var n=Mr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&jA(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function aB(t,e,n){return dl&21?(Kr(n,e)||(n=c2(),ln.lanes|=n,pl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ri=!0),t.memoizedState=n)}function MO(t,e){var n=zt;zt=n!==0&&4>n?n:4,t(!0);var i=Ly.transition;Ly.transition={};try{t(!1),e()}finally{zt=n,Ly.transition=i}}function lB(){return Mr().memoizedState}function wO(t,e,n){var i=Yo(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},uB(t))cB(e,n);else if(n=G2(t,e,n,i),n!==null){var r=mi();Wr(n,t,i,r),fB(n,e,i)}}function EO(t,e,n){var i=Yo(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(uB(t))cB(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Kr(a,o)){var l=e.interleaved;l===null?(r.next=r,GA(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=G2(t,e,r,i),n!==null&&(r=mi(),Wr(n,t,i,r),fB(n,e,i))}}function uB(t){var e=t.alternate;return t===ln||e!==null&&e===ln}function cB(t,e){Wf=Ug=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function fB(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,TA(t,n)}}var Og={readContext:Sr,useCallback:ei,useContext:ei,useEffect:ei,useImperativeHandle:ei,useInsertionEffect:ei,useLayoutEffect:ei,useMemo:ei,useReducer:ei,useRef:ei,useState:ei,useDebugValue:ei,useDeferredValue:ei,useTransition:ei,useMutableSource:ei,useSyncExternalStore:ei,useId:ei,unstable_isNewReconciler:!1},TO={readContext:Sr,useCallback:function(t,e){return fs().memoizedState=[t,e===void 0?null:e],t},useContext:Sr,useEffect:pT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,eg(4194308,4,iB.bind(null,e,t),n)},useLayoutEffect:function(t,e){return eg(4194308,4,t,e)},useInsertionEffect:function(t,e){return eg(4,2,t,e)},useMemo:function(t,e){var n=fs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=fs();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=wO.bind(null,ln,t),[i.memoizedState,t]},useRef:function(t){var e=fs();return t={current:t},e.memoizedState=t},useState:dT,useDebugValue:YA,useDeferredValue:function(t){return fs().memoizedState=t},useTransition:function(){var t=dT(!1),e=t[0];return t=MO.bind(null,t[1]),fs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ln,r=fs();if(Zt){if(n===void 0)throw Error(Ee(407));n=n()}else{if(n=e(),zn===null)throw Error(Ee(349));dl&30||Y2(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,pT(q2.bind(null,i,s,t),[t]),i.flags|=2048,Sh(9,Q2.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=fs(),e=zn.identifierPrefix;if(Zt){var n=js,i=Ws;n=(i&~(1<<32-Vr(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=_h++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},CO={readContext:Sr,useCallback:sB,useContext:Sr,useEffect:KA,useImperativeHandle:rB,useInsertionEffect:tB,useLayoutEffect:nB,useMemo:oB,useReducer:Iy,useRef:eB,useState:function(){return Iy(Ah)},useDebugValue:YA,useDeferredValue:function(t){var e=Mr();return aB(e,bn.memoizedState,t)},useTransition:function(){var t=Iy(Ah)[0],e=Mr().memoizedState;return[t,e]},useMutableSource:J2,useSyncExternalStore:K2,useId:lB,unstable_isNewReconciler:!1},bO={readContext:Sr,useCallback:sB,useContext:Sr,useEffect:KA,useImperativeHandle:rB,useInsertionEffect:tB,useLayoutEffect:nB,useMemo:oB,useReducer:Dy,useRef:eB,useState:function(){return Dy(Ah)},useDebugValue:YA,useDeferredValue:function(t){var e=Mr();return bn===null?e.memoizedState=t:aB(e,bn.memoizedState,t)},useTransition:function(){var t=Dy(Ah)[0],e=Mr().memoizedState;return[t,e]},useMutableSource:J2,useSyncExternalStore:K2,useId:lB,unstable_isNewReconciler:!1};function rc(t,e){try{var n="",i=e;do n+=nU(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Fy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function P_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var RO=typeof WeakMap=="function"?WeakMap:Map;function hB(t,e,n){n=Ys(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Gg||(Gg=!0,G_=i),P_(t,e)},n}function dB(t,e,n){n=Ys(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){P_(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){P_(t,e),typeof i!="function"&&(Ko===null?Ko=new Set([this]):Ko.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function mT(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new RO;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=VO.bind(null,t,e,n),e.then(t,t))}function gT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vT(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ys(-1,1),e.tag=2,Jo(n,e,1))),n.lanes|=1),t)}var PO=oo.ReactCurrentOwner,Ri=!1;function pi(t,e,n,i){e.child=t===null?j2(e,null,n,i):nc(e,t.child,n,i)}function yT(t,e,n,i,r){n=n.render;var s=e.ref;return Vu(e,r),i=XA(t,e,n,i,s,r),n=JA(),t!==null&&!Ri?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,no(t,e,r)):(Zt&&n&&DA(e),e.flags|=1,pi(t,e,i,r),e.child)}function xT(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!iS(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,pB(t,e,s,i,r)):(t=rg(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ph,n(o,i)&&t.ref===e.ref)return no(t,e,r)}return e.flags|=1,t=Qo(s,i),t.ref=e.ref,t.return=e,e.child=t}function pB(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(ph(s,i)&&t.ref===e.ref)if(Ri=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Ri=!0);else return e.lanes=t.lanes,no(t,e,r)}return B_(t,e,n,i,r)}function mB(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},jt(Ru,zi),zi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,jt(Ru,zi),zi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,jt(Ru,zi),zi|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,jt(Ru,zi),zi|=i;return pi(t,e,r,n),e.child}function gB(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function B_(t,e,n,i,r){var s=Bi(n)?fl:oi.current;return s=ec(e,s),Vu(e,r),n=XA(t,e,n,i,s,r),i=JA(),t!==null&&!Ri?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,no(t,e,r)):(Zt&&i&&DA(e),e.flags|=1,pi(t,e,n,r),e.child)}function _T(t,e,n,i,r){if(Bi(n)){var s=!0;Pg(e)}else s=!1;if(Vu(e,r),e.stateNode===null)tg(t,e),V2(e,n,i),R_(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Sr(u):(u=Bi(n)?fl:oi.current,u=ec(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&fT(e,o,i,u),Lo=!1;var p=e.memoizedState;o.state=p,Fg(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Pi.current||Lo?(typeof h=="function"&&(b_(e,n,h,i),l=e.memoizedState),(a=Lo||cT(e,n,a,i,p,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,z2(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Nr(e.type,a),o.props=u,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Sr(l):(l=Bi(n)?fl:oi.current,l=ec(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&fT(e,o,i,l),Lo=!1,p=e.memoizedState,o.state=p,Fg(e,i,o,r);var y=e.memoizedState;a!==d||p!==y||Pi.current||Lo?(typeof m=="function"&&(b_(e,n,m,i),y=e.memoizedState),(u=Lo||cT(e,n,u,i,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return L_(t,e,n,i,s,r)}function L_(t,e,n,i,r,s){gB(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&sT(e,n,!1),no(t,e,s);i=e.stateNode,PO.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=nc(e,t.child,null,s),e.child=nc(e,null,a,s)):pi(t,e,a,s),e.memoizedState=i.state,r&&sT(e,n,!0),e.child}function vB(t){var e=t.stateNode;e.pendingContext?rT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rT(t,e.context,!1),HA(t,e.containerInfo)}function AT(t,e,n,i,r){return tc(),NA(r),e.flags|=256,pi(t,e,n,i),e.child}var I_={dehydrated:null,treeContext:null,retryLane:0};function D_(t){return{baseLanes:t,cachePool:null,transitions:null}}function yB(t,e,n){var i=e.pendingProps,r=nn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),jt(nn,r&1),t===null)return T_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=S0(o,i,0,null),t=il(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=D_(n),e.memoizedState=I_,t):QA(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return BO(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Qo(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Qo(a,s):(s=il(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?D_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=I_,i}return s=t.child,t=s.sibling,i=Qo(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function QA(t,e){return e=S0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wp(t,e,n,i){return i!==null&&NA(i),nc(e,t.child,null,n),t=QA(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function BO(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Fy(Error(Ee(422))),Wp(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=S0({mode:"visible",children:i.children},r,0,null),s=il(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&nc(e,t.child,null,o),e.child.memoizedState=D_(o),e.memoizedState=I_,s);if(!(e.mode&1))return Wp(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Ee(419)),i=Fy(s,i,void 0),Wp(t,e,o,i)}if(a=(o&t.childLanes)!==0,Ri||a){if(i=zn,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,to(t,r),Wr(i,t,r,-1))}return nS(),i=Fy(Error(Ee(421))),Wp(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=WO.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Hi=Xo(r.nextSibling),Xi=e,Zt=!0,kr=null,t!==null&&(mr[gr++]=Ws,mr[gr++]=js,mr[gr++]=hl,Ws=t.id,js=t.overflow,hl=e),e=QA(e,i.children),e.flags|=4096,e)}function ST(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),C_(t.return,e,n)}function Ny(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function xB(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(pi(t,e,i.children,n),i=nn.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ST(t,n,e);else if(t.tag===19)ST(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(jt(nn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Ng(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Ny(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Ng(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Ny(e,!0,n,null,s);break;case"together":Ny(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function no(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),pl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ee(153));if(e.child!==null){for(t=e.child,n=Qo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function LO(t,e,n){switch(e.tag){case 3:vB(e),tc();break;case 5:X2(e);break;case 1:Bi(e.type)&&Pg(e);break;case 4:HA(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;jt(Ig,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(jt(nn,nn.current&1),e.flags|=128,null):n&e.child.childLanes?yB(t,e,n):(jt(nn,nn.current&1),t=no(t,e,n),t!==null?t.sibling:null);jt(nn,nn.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return xB(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),jt(nn,nn.current),i)break;return null;case 22:case 23:return e.lanes=0,mB(t,e,n)}return no(t,e,n)}var _B,F_,AB,SB;_B=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};F_=function(){};AB=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Ya(gs.current);var s=null;switch(n){case"input":r=i_(t,r),i=i_(t,i),s=[];break;case"select":r=un({},r,{value:void 0}),i=un({},i,{value:void 0}),s=[];break;case"textarea":r=o_(t,r),i=o_(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=bg)}l_(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ah.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ah.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Xt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};SB=function(t,e,n,i){n!==i&&(e.flags|=4)};function nf(t,e){if(!Zt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ti(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function IO(t,e,n){var i=e.pendingProps;switch(FA(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ti(e),null;case 1:return Bi(e.type)&&Rg(),ti(e),null;case 3:return i=e.stateNode,ic(),Kt(Pi),Kt(oi),WA(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Hp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kr!==null&&(V_(kr),kr=null))),F_(t,e),ti(e),null;case 5:VA(e);var r=Ya(xh.current);if(n=e.type,t!==null&&e.stateNode!=null)AB(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Ee(166));return ti(e),null}if(t=Ya(gs.current),Hp(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[ps]=e,i[vh]=s,t=(e.mode&1)!==0,n){case"dialog":Xt("cancel",i),Xt("close",i);break;case"iframe":case"object":case"embed":Xt("load",i);break;case"video":case"audio":for(r=0;r<If.length;r++)Xt(If[r],i);break;case"source":Xt("error",i);break;case"img":case"image":case"link":Xt("error",i),Xt("load",i);break;case"details":Xt("toggle",i);break;case"input":BE(i,s),Xt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Xt("invalid",i);break;case"textarea":IE(i,s),Xt("invalid",i)}l_(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&zp(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&zp(i.textContent,a,t),r=["children",""+a]):ah.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Xt("scroll",i)}switch(n){case"input":Ip(i),LE(i,s,!0);break;case"textarea":Ip(i),DE(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=bg)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=YP(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[ps]=e,t[vh]=i,_B(t,e,!1,!1),e.stateNode=t;e:{switch(o=u_(n,i),n){case"dialog":Xt("cancel",t),Xt("close",t),r=i;break;case"iframe":case"object":case"embed":Xt("load",t),r=i;break;case"video":case"audio":for(r=0;r<If.length;r++)Xt(If[r],t);r=i;break;case"source":Xt("error",t),r=i;break;case"img":case"image":case"link":Xt("error",t),Xt("load",t),r=i;break;case"details":Xt("toggle",t),r=i;break;case"input":BE(t,i),r=i_(t,i),Xt("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=un({},i,{value:void 0}),Xt("invalid",t);break;case"textarea":IE(t,i),r=o_(t,i),Xt("invalid",t);break;default:r=i}l_(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?ZP(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&QP(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&lh(t,l):typeof l=="number"&&lh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ah.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Xt("scroll",t):l!=null&&_A(t,s,l,o))}switch(n){case"input":Ip(t),LE(t,i,!1);break;case"textarea":Ip(t),DE(t);break;case"option":i.value!=null&&t.setAttribute("value",""+na(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?ku(t,!!i.multiple,s,!1):i.defaultValue!=null&&ku(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=bg)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ti(e),null;case 6:if(t&&e.stateNode!=null)SB(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Ee(166));if(n=Ya(xh.current),Ya(gs.current),Hp(e)){if(i=e.stateNode,n=e.memoizedProps,i[ps]=e,(s=i.nodeValue!==n)&&(t=Xi,t!==null))switch(t.tag){case 3:zp(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zp(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ps]=e,e.stateNode=i}return ti(e),null;case 13:if(Kt(nn),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Zt&&Hi!==null&&e.mode&1&&!(e.flags&128))k2(),tc(),e.flags|=98560,s=!1;else if(s=Hp(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(Ee(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ee(317));s[ps]=e}else tc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ti(e),s=!1}else kr!==null&&(V_(kr),kr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||nn.current&1?Pn===0&&(Pn=3):nS())),e.updateQueue!==null&&(e.flags|=4),ti(e),null);case 4:return ic(),F_(t,e),t===null&&mh(e.stateNode.containerInfo),ti(e),null;case 10:return kA(e.type._context),ti(e),null;case 17:return Bi(e.type)&&Rg(),ti(e),null;case 19:if(Kt(nn),s=e.memoizedState,s===null)return ti(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)nf(s,!1);else{if(Pn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ng(t),o!==null){for(e.flags|=128,nf(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return jt(nn,nn.current&1|2),e.child}t=t.sibling}s.tail!==null&&vn()>sc&&(e.flags|=128,i=!0,nf(s,!1),e.lanes=4194304)}else{if(!i)if(t=Ng(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),nf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Zt)return ti(e),null}else 2*vn()-s.renderingStartTime>sc&&n!==1073741824&&(e.flags|=128,i=!0,nf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=vn(),e.sibling=null,n=nn.current,jt(nn,i?n&1|2:n&1),e):(ti(e),null);case 22:case 23:return tS(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?zi&1073741824&&(ti(e),e.subtreeFlags&6&&(e.flags|=8192)):ti(e),null;case 24:return null;case 25:return null}throw Error(Ee(156,e.tag))}function DO(t,e){switch(FA(e),e.tag){case 1:return Bi(e.type)&&Rg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ic(),Kt(Pi),Kt(oi),WA(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return VA(e),null;case 13:if(Kt(nn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ee(340));tc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Kt(nn),null;case 4:return ic(),null;case 10:return kA(e.type._context),null;case 22:case 23:return tS(),null;case 24:return null;default:return null}}var jp=!1,ri=!1,FO=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function bu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){hn(t,e,i)}else n.current=null}function N_(t,e,n){try{n()}catch(i){hn(t,e,i)}}var MT=!1;function NO(t,e){if(x_=Eg,t=T2(),IA(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,d=t,p=null;t:for(;;){for(var m;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===t)break t;if(p===n&&++u===r&&(a=o),p===s&&++h===i&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(__={focusedElem:t,selectionRange:n},Eg=!1,Ue=e;Ue!==null;)if(e=Ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ue=t;else for(;Ue!==null;){e=Ue;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var S=y.memoizedProps,M=y.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?S:Nr(e.type,S),M);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(w){hn(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Ue=t;break}Ue=e.return}return y=MT,MT=!1,y}function jf(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&N_(e,n,s)}r=r.next}while(r!==i)}}function _0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function U_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function MB(t){var e=t.alternate;e!==null&&(t.alternate=null,MB(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ps],delete e[vh],delete e[M_],delete e[yO],delete e[xO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wB(t){return t.tag===5||t.tag===3||t.tag===4}function wT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wB(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function O_(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bg));else if(i!==4&&(t=t.child,t!==null))for(O_(t,e,n),t=t.sibling;t!==null;)O_(t,e,n),t=t.sibling}function k_(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(k_(t,e,n),t=t.sibling;t!==null;)k_(t,e,n),t=t.sibling}var jn=null,Or=!1;function _o(t,e,n){for(n=n.child;n!==null;)EB(t,e,n),n=n.sibling}function EB(t,e,n){if(ms&&typeof ms.onCommitFiberUnmount=="function")try{ms.onCommitFiberUnmount(h0,n)}catch{}switch(n.tag){case 5:ri||bu(n,e);case 6:var i=jn,r=Or;jn=null,_o(t,e,n),jn=i,Or=r,jn!==null&&(Or?(t=jn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):jn.removeChild(n.stateNode));break;case 18:jn!==null&&(Or?(t=jn,n=n.stateNode,t.nodeType===8?Ry(t.parentNode,n):t.nodeType===1&&Ry(t,n),hh(t)):Ry(jn,n.stateNode));break;case 4:i=jn,r=Or,jn=n.stateNode.containerInfo,Or=!0,_o(t,e,n),jn=i,Or=r;break;case 0:case 11:case 14:case 15:if(!ri&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&N_(n,e,o),r=r.next}while(r!==i)}_o(t,e,n);break;case 1:if(!ri&&(bu(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){hn(n,e,a)}_o(t,e,n);break;case 21:_o(t,e,n);break;case 22:n.mode&1?(ri=(i=ri)||n.memoizedState!==null,_o(t,e,n),ri=i):_o(t,e,n);break;default:_o(t,e,n)}}function ET(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new FO),e.forEach(function(i){var r=jO.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Lr(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:jn=a.stateNode,Or=!1;break e;case 3:jn=a.stateNode.containerInfo,Or=!0;break e;case 4:jn=a.stateNode.containerInfo,Or=!0;break e}a=a.return}if(jn===null)throw Error(Ee(160));EB(s,o,r),jn=null,Or=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){hn(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)TB(e,t),e=e.sibling}function TB(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lr(e,t),us(t),i&4){try{jf(3,t,t.return),_0(3,t)}catch(S){hn(t,t.return,S)}try{jf(5,t,t.return)}catch(S){hn(t,t.return,S)}}break;case 1:Lr(e,t),us(t),i&512&&n!==null&&bu(n,n.return);break;case 5:if(Lr(e,t),us(t),i&512&&n!==null&&bu(n,n.return),t.flags&32){var r=t.stateNode;try{lh(r,"")}catch(S){hn(t,t.return,S)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&JP(r,s),u_(a,o);var u=u_(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?ZP(r,d):h==="dangerouslySetInnerHTML"?QP(r,d):h==="children"?lh(r,d):_A(r,h,d,u)}switch(a){case"input":r_(r,s);break;case"textarea":KP(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?ku(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?ku(r,!!s.multiple,s.defaultValue,!0):ku(r,!!s.multiple,s.multiple?[]:"",!1))}r[vh]=s}catch(S){hn(t,t.return,S)}}break;case 6:if(Lr(e,t),us(t),i&4){if(t.stateNode===null)throw Error(Ee(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(S){hn(t,t.return,S)}}break;case 3:if(Lr(e,t),us(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{hh(e.containerInfo)}catch(S){hn(t,t.return,S)}break;case 4:Lr(e,t),us(t);break;case 13:Lr(e,t),us(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||($A=vn())),i&4&&ET(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ri=(u=ri)||h,Lr(e,t),ri=u):Lr(e,t),us(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(Ue=t,h=t.child;h!==null;){for(d=Ue=h;Ue!==null;){switch(p=Ue,m=p.child,p.tag){case 0:case 11:case 14:case 15:jf(4,p,p.return);break;case 1:bu(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){i=p,n=p.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(S){hn(i,n,S)}}break;case 5:bu(p,p.return);break;case 22:if(p.memoizedState!==null){CT(d);continue}}m!==null?(m.return=p,Ue=m):CT(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=qP("display",o))}catch(S){hn(t,t.return,S)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(S){hn(t,t.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Lr(e,t),us(t),i&4&&ET(t);break;case 21:break;default:Lr(e,t),us(t)}}function us(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(wB(n)){var i=n;break e}n=n.return}throw Error(Ee(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(lh(r,""),i.flags&=-33);var s=wT(t);k_(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=wT(t);O_(t,a,o);break;default:throw Error(Ee(161))}}catch(l){hn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function UO(t,e,n){Ue=t,CB(t)}function CB(t,e,n){for(var i=(t.mode&1)!==0;Ue!==null;){var r=Ue,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||jp;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||ri;a=jp;var u=ri;if(jp=o,(ri=l)&&!u)for(Ue=r;Ue!==null;)o=Ue,l=o.child,o.tag===22&&o.memoizedState!==null?bT(r):l!==null?(l.return=o,Ue=l):bT(r);for(;s!==null;)Ue=s,CB(s),s=s.sibling;Ue=r,jp=a,ri=u}TT(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Ue=s):TT(t)}}function TT(t){for(;Ue!==null;){var e=Ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ri||_0(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!ri)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Nr(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&uT(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}uT(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&hh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}ri||e.flags&512&&U_(e)}catch(p){hn(e,e.return,p)}}if(e===t){Ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ue=n;break}Ue=e.return}}function CT(t){for(;Ue!==null;){var e=Ue;if(e===t){Ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ue=n;break}Ue=e.return}}function bT(t){for(;Ue!==null;){var e=Ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_0(4,e)}catch(l){hn(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){hn(e,r,l)}}var s=e.return;try{U_(e)}catch(l){hn(e,s,l)}break;case 5:var o=e.return;try{U_(e)}catch(l){hn(e,o,l)}}}catch(l){hn(e,e.return,l)}if(e===t){Ue=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ue=a;break}Ue=e.return}}var OO=Math.ceil,kg=oo.ReactCurrentDispatcher,qA=oo.ReactCurrentOwner,Ar=oo.ReactCurrentBatchConfig,Pt=0,zn=null,En=null,Jn=0,zi=0,Ru=fa(0),Pn=0,Mh=null,pl=0,A0=0,ZA=0,Xf=null,Ti=null,$A=0,sc=1/0,ks=null,Gg=!1,G_=null,Ko=null,Xp=!1,ko=null,zg=0,Jf=0,z_=null,ng=-1,ig=0;function mi(){return Pt&6?vn():ng!==-1?ng:ng=vn()}function Yo(t){return t.mode&1?Pt&2&&Jn!==0?Jn&-Jn:AO.transition!==null?(ig===0&&(ig=c2()),ig):(t=zt,t!==0||(t=window.event,t=t===void 0?16:v2(t.type)),t):1}function Wr(t,e,n,i){if(50<Jf)throw Jf=0,z_=null,Error(Ee(185));qh(t,n,i),(!(Pt&2)||t!==zn)&&(t===zn&&(!(Pt&2)&&(A0|=n),Pn===4&&Uo(t,Jn)),Li(t,i),n===1&&Pt===0&&!(e.mode&1)&&(sc=vn()+500,v0&&ha()))}function Li(t,e){var n=t.callbackNode;AU(t,e);var i=wg(t,t===zn?Jn:0);if(i===0)n!==null&&UE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&UE(n),e===1)t.tag===0?_O(RT.bind(null,t)):N2(RT.bind(null,t)),gO(function(){!(Pt&6)&&ha()}),n=null;else{switch(f2(i)){case 1:n=EA;break;case 4:n=l2;break;case 16:n=Mg;break;case 536870912:n=u2;break;default:n=Mg}n=FB(n,bB.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function bB(t,e){if(ng=-1,ig=0,Pt&6)throw Error(Ee(327));var n=t.callbackNode;if(Wu()&&t.callbackNode!==n)return null;var i=wg(t,t===zn?Jn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Hg(t,i);else{e=i;var r=Pt;Pt|=2;var s=PB();(zn!==t||Jn!==e)&&(ks=null,sc=vn()+500,nl(t,e));do try{zO();break}catch(a){RB(t,a)}while(1);OA(),kg.current=s,Pt=r,En!==null?e=0:(zn=null,Jn=0,e=Pn)}if(e!==0){if(e===2&&(r=p_(t),r!==0&&(i=r,e=H_(t,r))),e===1)throw n=Mh,nl(t,0),Uo(t,i),Li(t,vn()),n;if(e===6)Uo(t,i);else{if(r=t.current.alternate,!(i&30)&&!kO(r)&&(e=Hg(t,i),e===2&&(s=p_(t),s!==0&&(i=s,e=H_(t,s))),e===1))throw n=Mh,nl(t,0),Uo(t,i),Li(t,vn()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Ee(345));case 2:ka(t,Ti,ks);break;case 3:if(Uo(t,i),(i&130023424)===i&&(e=$A+500-vn(),10<e)){if(wg(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){mi(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=S_(ka.bind(null,t,Ti,ks),e);break}ka(t,Ti,ks);break;case 4:if(Uo(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Vr(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=vn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*OO(i/1960))-i,10<i){t.timeoutHandle=S_(ka.bind(null,t,Ti,ks),i);break}ka(t,Ti,ks);break;case 5:ka(t,Ti,ks);break;default:throw Error(Ee(329))}}}return Li(t,vn()),t.callbackNode===n?bB.bind(null,t):null}function H_(t,e){var n=Xf;return t.current.memoizedState.isDehydrated&&(nl(t,e).flags|=256),t=Hg(t,e),t!==2&&(e=Ti,Ti=n,e!==null&&V_(e)),t}function V_(t){Ti===null?Ti=t:Ti.push.apply(Ti,t)}function kO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Kr(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Uo(t,e){for(e&=~ZA,e&=~A0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vr(e),i=1<<n;t[n]=-1,e&=~i}}function RT(t){if(Pt&6)throw Error(Ee(327));Wu();var e=wg(t,0);if(!(e&1))return Li(t,vn()),null;var n=Hg(t,e);if(t.tag!==0&&n===2){var i=p_(t);i!==0&&(e=i,n=H_(t,i))}if(n===1)throw n=Mh,nl(t,0),Uo(t,e),Li(t,vn()),n;if(n===6)throw Error(Ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ka(t,Ti,ks),Li(t,vn()),null}function eS(t,e){var n=Pt;Pt|=1;try{return t(e)}finally{Pt=n,Pt===0&&(sc=vn()+500,v0&&ha())}}function ml(t){ko!==null&&ko.tag===0&&!(Pt&6)&&Wu();var e=Pt;Pt|=1;var n=Ar.transition,i=zt;try{if(Ar.transition=null,zt=1,t)return t()}finally{zt=i,Ar.transition=n,Pt=e,!(Pt&6)&&ha()}}function tS(){zi=Ru.current,Kt(Ru)}function nl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mO(n)),En!==null)for(n=En.return;n!==null;){var i=n;switch(FA(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Rg();break;case 3:ic(),Kt(Pi),Kt(oi),WA();break;case 5:VA(i);break;case 4:ic();break;case 13:Kt(nn);break;case 19:Kt(nn);break;case 10:kA(i.type._context);break;case 22:case 23:tS()}n=n.return}if(zn=t,En=t=Qo(t.current,null),Jn=zi=e,Pn=0,Mh=null,ZA=A0=pl=0,Ti=Xf=null,Ka!==null){for(e=0;e<Ka.length;e++)if(n=Ka[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Ka=null}return t}function RB(t,e){do{var n=En;try{if(OA(),$m.current=Og,Ug){for(var i=ln.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Ug=!1}if(dl=0,On=bn=ln=null,Wf=!1,_h=0,qA.current=null,n===null||n.return===null){Pn=1,Mh=e,En=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Jn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=gT(o);if(m!==null){m.flags&=-257,vT(m,o,a,s,e),m.mode&1&&mT(s,u,e),e=m,l=u;var y=e.updateQueue;if(y===null){var S=new Set;S.add(l),e.updateQueue=S}else y.add(l);break e}else{if(!(e&1)){mT(s,u,e),nS();break e}l=Error(Ee(426))}}else if(Zt&&a.mode&1){var M=gT(o);if(M!==null){!(M.flags&65536)&&(M.flags|=256),vT(M,o,a,s,e),NA(rc(l,a));break e}}s=l=rc(l,a),Pn!==4&&(Pn=2),Xf===null?Xf=[s]:Xf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=hB(s,l,e);lT(s,g);break e;case 1:a=l;var x=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ko===null||!Ko.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=dB(s,a,e);lT(s,w);break e}}s=s.return}while(s!==null)}LB(n)}catch(C){e=C,En===n&&n!==null&&(En=n=n.return);continue}break}while(1)}function PB(){var t=kg.current;return kg.current=Og,t===null?Og:t}function nS(){(Pn===0||Pn===3||Pn===2)&&(Pn=4),zn===null||!(pl&268435455)&&!(A0&268435455)||Uo(zn,Jn)}function Hg(t,e){var n=Pt;Pt|=2;var i=PB();(zn!==t||Jn!==e)&&(ks=null,nl(t,e));do try{GO();break}catch(r){RB(t,r)}while(1);if(OA(),Pt=n,kg.current=i,En!==null)throw Error(Ee(261));return zn=null,Jn=0,Pn}function GO(){for(;En!==null;)BB(En)}function zO(){for(;En!==null&&!hU();)BB(En)}function BB(t){var e=DB(t.alternate,t,zi);t.memoizedProps=t.pendingProps,e===null?LB(t):En=e,qA.current=null}function LB(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=DO(n,e),n!==null){n.flags&=32767,En=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pn=6,En=null;return}}else if(n=IO(n,e,zi),n!==null){En=n;return}if(e=e.sibling,e!==null){En=e;return}En=e=t}while(e!==null);Pn===0&&(Pn=5)}function ka(t,e,n){var i=zt,r=Ar.transition;try{Ar.transition=null,zt=1,HO(t,e,n,i)}finally{Ar.transition=r,zt=i}return null}function HO(t,e,n,i){do Wu();while(ko!==null);if(Pt&6)throw Error(Ee(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ee(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(SU(t,s),t===zn&&(En=zn=null,Jn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xp||(Xp=!0,FB(Mg,function(){return Wu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ar.transition,Ar.transition=null;var o=zt;zt=1;var a=Pt;Pt|=4,qA.current=null,NO(t,n),TB(n,t),lO(__),Eg=!!x_,__=x_=null,t.current=n,UO(n),dU(),Pt=a,zt=o,Ar.transition=s}else t.current=n;if(Xp&&(Xp=!1,ko=t,zg=r),s=t.pendingLanes,s===0&&(Ko=null),gU(n.stateNode),Li(t,vn()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Gg)throw Gg=!1,t=G_,G_=null,t;return zg&1&&t.tag!==0&&Wu(),s=t.pendingLanes,s&1?t===z_?Jf++:(Jf=0,z_=t):Jf=0,ha(),null}function Wu(){if(ko!==null){var t=f2(zg),e=Ar.transition,n=zt;try{if(Ar.transition=null,zt=16>t?16:t,ko===null)var i=!1;else{if(t=ko,ko=null,zg=0,Pt&6)throw Error(Ee(331));var r=Pt;for(Pt|=4,Ue=t.current;Ue!==null;){var s=Ue,o=s.child;if(Ue.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Ue=u;Ue!==null;){var h=Ue;switch(h.tag){case 0:case 11:case 15:jf(8,h,s)}var d=h.child;if(d!==null)d.return=h,Ue=d;else for(;Ue!==null;){h=Ue;var p=h.sibling,m=h.return;if(MB(h),h===u){Ue=null;break}if(p!==null){p.return=m,Ue=p;break}Ue=m}}}var y=s.alternate;if(y!==null){var S=y.child;if(S!==null){y.child=null;do{var M=S.sibling;S.sibling=null,S=M}while(S!==null)}}Ue=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ue=o;else e:for(;Ue!==null;){if(s=Ue,s.flags&2048)switch(s.tag){case 0:case 11:case 15:jf(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Ue=g;break e}Ue=s.return}}var x=t.current;for(Ue=x;Ue!==null;){o=Ue;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Ue=_;else e:for(o=x;Ue!==null;){if(a=Ue,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:_0(9,a)}}catch(C){hn(a,a.return,C)}if(a===o){Ue=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Ue=w;break e}Ue=a.return}}if(Pt=r,ha(),ms&&typeof ms.onPostCommitFiberRoot=="function")try{ms.onPostCommitFiberRoot(h0,t)}catch{}i=!0}return i}finally{zt=n,Ar.transition=e}}return!1}function PT(t,e,n){e=rc(n,e),e=hB(t,e,1),t=Jo(t,e,1),e=mi(),t!==null&&(qh(t,1,e),Li(t,e))}function hn(t,e,n){if(t.tag===3)PT(t,t,n);else for(;e!==null;){if(e.tag===3){PT(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ko===null||!Ko.has(i))){t=rc(n,t),t=dB(e,t,1),e=Jo(e,t,1),t=mi(),e!==null&&(qh(e,1,t),Li(e,t));break}}e=e.return}}function VO(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=mi(),t.pingedLanes|=t.suspendedLanes&n,zn===t&&(Jn&n)===n&&(Pn===4||Pn===3&&(Jn&130023424)===Jn&&500>vn()-$A?nl(t,0):ZA|=n),Li(t,e)}function IB(t,e){e===0&&(t.mode&1?(e=Np,Np<<=1,!(Np&130023424)&&(Np=4194304)):e=1);var n=mi();t=to(t,e),t!==null&&(qh(t,e,n),Li(t,n))}function WO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),IB(t,n)}function jO(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Ee(314))}i!==null&&i.delete(e),IB(t,n)}var DB;DB=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pi.current)Ri=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ri=!1,LO(t,e,n);Ri=!!(t.flags&131072)}else Ri=!1,Zt&&e.flags&1048576&&U2(e,Lg,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;tg(t,e),t=e.pendingProps;var r=ec(e,oi.current);Vu(e,n),r=XA(null,e,i,t,r,n);var s=JA();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Bi(i)?(s=!0,Pg(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,zA(e),r.updater=y0,e.stateNode=r,r._reactInternals=e,R_(e,i,t,n),e=L_(null,e,i,!0,s,n)):(e.tag=0,Zt&&s&&DA(e),pi(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(tg(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=JO(i),t=Nr(i,t),r){case 0:e=B_(null,e,i,t,n);break e;case 1:e=_T(null,e,i,t,n);break e;case 11:e=yT(null,e,i,t,n);break e;case 14:e=xT(null,e,i,Nr(i.type,t),n);break e}throw Error(Ee(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Nr(i,r),B_(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Nr(i,r),_T(t,e,i,r,n);case 3:e:{if(vB(e),t===null)throw Error(Ee(387));i=e.pendingProps,s=e.memoizedState,r=s.element,z2(t,e),Fg(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=rc(Error(Ee(423)),e),e=AT(t,e,i,n,r);break e}else if(i!==r){r=rc(Error(Ee(424)),e),e=AT(t,e,i,n,r);break e}else for(Hi=Xo(e.stateNode.containerInfo.firstChild),Xi=e,Zt=!0,kr=null,n=j2(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(tc(),i===r){e=no(t,e,n);break e}pi(t,e,i,n)}e=e.child}return e;case 5:return X2(e),t===null&&T_(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,A_(i,r)?o=null:s!==null&&A_(i,s)&&(e.flags|=32),gB(t,e),pi(t,e,o,n),e.child;case 6:return t===null&&T_(e),null;case 13:return yB(t,e,n);case 4:return HA(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=nc(e,null,i,n):pi(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Nr(i,r),yT(t,e,i,r,n);case 7:return pi(t,e,e.pendingProps,n),e.child;case 8:return pi(t,e,e.pendingProps.children,n),e.child;case 12:return pi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,jt(Ig,i._currentValue),i._currentValue=o,s!==null)if(Kr(s.value,o)){if(s.children===r.children&&!Pi.current){e=no(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Ys(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),C_(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ee(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),C_(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}pi(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Vu(e,n),r=Sr(r),i=i(r),e.flags|=1,pi(t,e,i,n),e.child;case 14:return i=e.type,r=Nr(i,e.pendingProps),r=Nr(i.type,r),xT(t,e,i,r,n);case 15:return pB(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Nr(i,r),tg(t,e),e.tag=1,Bi(i)?(t=!0,Pg(e)):t=!1,Vu(e,n),V2(e,i,r),R_(e,i,r,n),L_(null,e,i,!0,t,n);case 19:return xB(t,e,n);case 22:return mB(t,e,n)}throw Error(Ee(156,e.tag))};function FB(t,e){return a2(t,e)}function XO(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(t,e,n,i){return new XO(t,e,n,i)}function iS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function JO(t){if(typeof t=="function")return iS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===SA)return 11;if(t===MA)return 14}return 2}function Qo(t,e){var n=t.alternate;return n===null?(n=_r(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function rg(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")iS(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xu:return il(n.children,r,s,e);case AA:o=8,r|=8;break;case $x:return t=_r(12,n,e,r|2),t.elementType=$x,t.lanes=s,t;case e_:return t=_r(13,n,e,r),t.elementType=e_,t.lanes=s,t;case t_:return t=_r(19,n,e,r),t.elementType=t_,t.lanes=s,t;case WP:return S0(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case HP:o=10;break e;case VP:o=9;break e;case SA:o=11;break e;case MA:o=14;break e;case Bo:o=16,i=null;break e}throw Error(Ee(130,t==null?t:typeof t,""))}return e=_r(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function il(t,e,n,i){return t=_r(7,t,i,e),t.lanes=n,t}function S0(t,e,n,i){return t=_r(22,t,i,e),t.elementType=WP,t.lanes=n,t.stateNode={isHidden:!1},t}function Uy(t,e,n){return t=_r(6,t,null,e),t.lanes=n,t}function Oy(t,e,n){return e=_r(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KO(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yy(0),this.expirationTimes=yy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yy(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function rS(t,e,n,i,r,s,o,a,l){return t=new KO(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=_r(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zA(s),t}function YO(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yu,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function NB(t){if(!t)return ia;t=t._reactInternals;e:{if(Ml(t)!==t||t.tag!==1)throw Error(Ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Bi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ee(171))}if(t.tag===1){var n=t.type;if(Bi(n))return F2(t,n,e)}return e}function UB(t,e,n,i,r,s,o,a,l){return t=rS(n,i,!0,t,r,s,o,a,l),t.context=NB(null),n=t.current,i=mi(),r=Yo(n),s=Ys(i,r),s.callback=e??null,Jo(n,s,r),t.current.lanes=r,qh(t,r,i),Li(t,i),t}function M0(t,e,n,i){var r=e.current,s=mi(),o=Yo(r);return n=NB(n),e.context===null?e.context=n:e.pendingContext=n,e=Ys(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Jo(r,e,o),t!==null&&(Wr(t,r,o,s),Zm(t,r,o)),o}function Vg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function BT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sS(t,e){BT(t,e),(t=t.alternate)&&BT(t,e)}function QO(){return null}var OB=typeof reportError=="function"?reportError:function(t){console.error(t)};function oS(t){this._internalRoot=t}w0.prototype.render=oS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ee(409));M0(t,e,null,null)};w0.prototype.unmount=oS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ml(function(){M0(null,t,null,null)}),e[eo]=null}};function w0(t){this._internalRoot=t}w0.prototype.unstable_scheduleHydration=function(t){if(t){var e=p2();t={blockedOn:null,target:t,priority:e};for(var n=0;n<No.length&&e!==0&&e<No[n].priority;n++);No.splice(n,0,t),n===0&&g2(t)}};function aS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function E0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function LT(){}function qO(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Vg(o);s.call(u)}}var o=UB(e,i,t,0,null,!1,!1,"",LT);return t._reactRootContainer=o,t[eo]=o.current,mh(t.nodeType===8?t.parentNode:t),ml(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=Vg(l);a.call(u)}}var l=rS(t,0,!1,null,null,!1,!1,"",LT);return t._reactRootContainer=l,t[eo]=l.current,mh(t.nodeType===8?t.parentNode:t),ml(function(){M0(e,l,n,i)}),l}function T0(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Vg(o);a.call(l)}}M0(e,o,t,r)}else o=qO(n,e,t,r,i);return Vg(o)}h2=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Lf(e.pendingLanes);n!==0&&(TA(e,n|1),Li(e,vn()),!(Pt&6)&&(sc=vn()+500,ha()))}break;case 13:ml(function(){var i=to(t,1);if(i!==null){var r=mi();Wr(i,t,1,r)}}),sS(t,1)}};CA=function(t){if(t.tag===13){var e=to(t,134217728);if(e!==null){var n=mi();Wr(e,t,134217728,n)}sS(t,134217728)}};d2=function(t){if(t.tag===13){var e=Yo(t),n=to(t,e);if(n!==null){var i=mi();Wr(n,t,e,i)}sS(t,e)}};p2=function(){return zt};m2=function(t,e){var n=zt;try{return zt=t,e()}finally{zt=n}};f_=function(t,e,n){switch(e){case"input":if(r_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=g0(i);if(!r)throw Error(Ee(90));XP(i),r_(i,r)}}}break;case"textarea":KP(t,n);break;case"select":e=n.value,e!=null&&ku(t,!!n.multiple,e,!1)}};t2=eS;n2=ml;var ZO={usingClientEntryPoint:!1,Events:[$h,Mu,g0,$P,e2,eS]},rf={findFiberByHostInstance:Ja,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},$O={bundleType:rf.bundleType,version:rf.version,rendererPackageName:rf.rendererPackageName,rendererConfig:rf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=s2(t),t===null?null:t.stateNode},findFiberByHostInstance:rf.findFiberByHostInstance||QO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jp.isDisabled&&Jp.supportsFiber)try{h0=Jp.inject($O),ms=Jp}catch{}}Zi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZO;Zi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!aS(e))throw Error(Ee(200));return YO(t,e,null,n)};Zi.createRoot=function(t,e){if(!aS(t))throw Error(Ee(299));var n=!1,i="",r=OB;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=rS(t,1,!1,null,null,n,!1,i,r),t[eo]=e.current,mh(t.nodeType===8?t.parentNode:t),new oS(e)};Zi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ee(188)):(t=Object.keys(t).join(","),Error(Ee(268,t)));return t=s2(e),t=t===null?null:t.stateNode,t};Zi.flushSync=function(t){return ml(t)};Zi.hydrate=function(t,e,n){if(!E0(e))throw Error(Ee(200));return T0(null,t,e,!0,n)};Zi.hydrateRoot=function(t,e,n){if(!aS(t))throw Error(Ee(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=OB;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=UB(e,null,t,1,n??null,r,!1,s,o),t[eo]=e.current,mh(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new w0(e)};Zi.render=function(t,e,n){if(!E0(e))throw Error(Ee(200));return T0(null,t,e,!1,n)};Zi.unmountComponentAtNode=function(t){if(!E0(t))throw Error(Ee(40));return t._reactRootContainer?(ml(function(){T0(null,null,t,!1,function(){t._reactRootContainer=null,t[eo]=null})}),!0):!1};Zi.unstable_batchedUpdates=eS;Zi.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!E0(n))throw Error(Ee(200));if(t==null||t._reactInternals===void 0)throw Error(Ee(38));return T0(t,e,n,!1,i)};Zi.version="18.2.0-next-9e3b772b8-20220608";function kB(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kB)}catch(t){console.error(t)}}kB(),UP.exports=Zi;var GB=UP.exports,zB,IT=GB;zB=qx.createRoot=IT.createRoot,qx.hydrateRoot=IT.hydrateRoot;/**
 * @remix-run/router v1.6.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wh(){return wh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wh.apply(this,arguments)}var Qa;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qa||(Qa={}));const DT="popstate";function ek(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return W_("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Wg(r)}return nk(e,n,null,t)}function jr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function tk(){return Math.random().toString(36).substr(2,8)}function FT(t,e){return{usr:t.state,key:t.key,idx:e}}function W_(t,e,n,i){return n===void 0&&(n=null),wh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?C0(e):e,{state:n,key:e&&e.key||i||tk()})}function Wg(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function C0(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function nk(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Qa.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(wh({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Qa.Pop;let M=h(),g=M==null?null:M-u;u=M,l&&l({action:a,location:S.location,delta:g})}function p(M,g){a=Qa.Push;let x=W_(S.location,M,g);n&&n(x,M),u=h()+1;let _=FT(x,u),w=S.createHref(x);try{o.pushState(_,"",w)}catch{r.location.assign(w)}s&&l&&l({action:a,location:S.location,delta:1})}function m(M,g){a=Qa.Replace;let x=W_(S.location,M,g);n&&n(x,M),u=h();let _=FT(x,u),w=S.createHref(x);o.replaceState(_,"",w),s&&l&&l({action:a,location:S.location,delta:0})}function y(M){let g=r.location.origin!=="null"?r.location.origin:r.location.href,x=typeof M=="string"?M:Wg(M);return jr(g,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,g)}let S={get action(){return a},get location(){return t(r,o)},listen(M){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(DT,d),l=M,()=>{r.removeEventListener(DT,d),l=null}},createHref(M){return e(r,M)},createURL:y,encodeLocation(M){let g=y(M);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(M){return o.go(M)}};return S}var NT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(NT||(NT={}));function HB(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function ik(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?C0(t):t;return{pathname:n?n.startsWith("/")?n:rk(n,e):e,search:sk(i),hash:ok(r)}}function rk(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function ky(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function VB(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function WB(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=C0(t):(r=wh({},t),jr(!r.pathname||!r.pathname.includes("?"),ky("?","pathname","search",r)),jr(!r.pathname||!r.pathname.includes("#"),ky("#","pathname","hash",r)),jr(!r.search||!r.search.includes("#"),ky("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(i||o==null)a=n;else{let d=e.length-1;if(o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;r.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=ik(r,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const jB=t=>t.join("/").replace(/\/\/+/g,"/"),sk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ok=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,XB=["post","put","patch","delete"];new Set(XB);const ak=["get",...XB];new Set(ak);/**
 * React Router v6.11.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function j_(){return j_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},j_.apply(this,arguments)}const JB=O.createContext(null),td=O.createContext(null),lS=O.createContext(null),b0=O.createContext({outlet:null,matches:[],isDataRoute:!1});function lk(t,e){let{relative:n}=e===void 0?{}:e;R0()||jr(!1);let{basename:i,navigator:r}=O.useContext(td),{hash:s,pathname:o,search:a}=YB(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:jB([i,o])),r.createHref({pathname:l,search:a,hash:s})}function R0(){return O.useContext(lS)!=null}function uS(){return R0()||jr(!1),O.useContext(lS).location}function KB(t){O.useContext(td).static||O.useLayoutEffect(t)}function uk(){let{isDataRoute:t}=O.useContext(b0);return t?pk():ck()}function ck(){R0()||jr(!1);let t=O.useContext(JB),{basename:e,navigator:n}=O.useContext(td),{matches:i}=O.useContext(b0),{pathname:r}=uS(),s=JSON.stringify(VB(i).map(l=>l.pathnameBase)),o=O.useRef(!1);return KB(()=>{o.current=!0}),O.useCallback(function(l,u){if(u===void 0&&(u={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let h=WB(l,JSON.parse(s),r,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:jB([e,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[e,n,s,r,t])}function YB(t,e){let{relative:n}=e===void 0?{}:e,{matches:i}=O.useContext(b0),{pathname:r}=uS(),s=JSON.stringify(VB(i).map(o=>o.pathnameBase));return O.useMemo(()=>WB(t,JSON.parse(s),r,n==="path"),[t,s,r,n])}var X_;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(X_||(X_={}));var J_;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(J_||(J_={}));function fk(t){let e=O.useContext(JB);return e||jr(!1),e}function hk(t){let e=O.useContext(b0);return e||jr(!1),e}function dk(t){let e=hk(),n=e.matches[e.matches.length-1];return n.route.id||jr(!1),n.route.id}function pk(){let{router:t}=fk(X_.UseNavigateStable),e=dk(J_.UseNavigateStable),n=O.useRef(!1);return KB(()=>{n.current=!0}),O.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,j_({fromRouteId:e},s)))},[t,e])}function mk(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Qa.Pop,navigator:s,static:o=!1}=t;R0()&&jr(!1);let a=e.replace(/^\/*/,"/"),l=O.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof i=="string"&&(i=C0(i));let{pathname:u="/",search:h="",hash:d="",state:p=null,key:m="default"}=i,y=O.useMemo(()=>{let S=HB(u,a);return S==null?null:{location:{pathname:S,search:h,hash:d,state:p,key:m},navigationType:r}},[a,u,h,d,p,m,r]);return y==null?null:O.createElement(td.Provider,{value:l},O.createElement(lS.Provider,{children:n,value:y}))}var UT;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(UT||(UT={}));new Promise(()=>{});/**
 * React Router DOM v6.11.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function K_(){return K_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},K_.apply(this,arguments)}function gk(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function vk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function yk(t,e){return t.button===0&&(!e||e==="_self")&&!vk(t)}const xk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function _k(t){let{basename:e,children:n,window:i}=t,r=O.useRef();r.current==null&&(r.current=ek({window:i,v5Compat:!0}));let s=r.current,[o,a]=O.useState({action:s.action,location:s.location});return O.useLayoutEffect(()=>s.listen(a),[s]),O.createElement(mk,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:s})}const Ak=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Sk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mk=O.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h}=e,d=gk(e,xk),{basename:p}=O.useContext(td),m,y=!1;if(typeof u=="string"&&Sk.test(u)&&(m=u,Ak))try{let x=new URL(window.location.href),_=u.startsWith("//")?new URL(x.protocol+u):new URL(u),w=HB(_.pathname,p);_.origin===x.origin&&w!=null?u=w+_.search+_.hash:y=!0}catch{}let S=lk(u,{relative:r}),M=wk(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:r});function g(x){i&&i(x),x.defaultPrevented||M(x)}return O.createElement("a",K_({},d,{href:m||S,onClick:y||s?i:g,ref:n,target:l}))});var OT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(OT||(OT={}));var kT;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(kT||(kT={}));function wk(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=uk(),l=uS(),u=YB(t,{relative:o});return O.useCallback(h=>{if(yk(h,n)){h.preventDefault();let d=i!==void 0?i:Wg(l)===Wg(u);a(t,{replace:d,state:r,preventScrollReset:s,relative:o})}},[l,a,u,i,r,n,t,s,o])}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const nd="152",Ek={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Tk={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},QB=0,Y_=1,qB=2,Ck=3,ZB=0,P0=1,Kf=2,Ur=3,_s=0,gi=1,yr=2,bk=2,Qs=0,rl=1,Q_=2,q_=3,Z_=4,$B=5,Wa=100,eL=101,tL=102,$_=103,e1=104,nL=200,iL=201,rL=202,sL=203,cS=204,fS=205,oL=206,aL=207,lL=208,uL=209,cL=210,fL=0,hL=1,dL=2,jg=3,pL=4,mL=5,gL=6,vL=7,id=0,yL=1,xL=2,Xr=0,_L=1,AL=2,SL=3,hS=4,ML=5,B0=300,ra=301,sa=302,Eh=303,Th=304,Sc=306,oa=1e3,Xn=1001,oc=1002,dn=1003,Ch=1004,Rk=1004,ju=1005,Pk=1005,rn=1006,L0=1007,Bk=1007,As=1008,Lk=1008,io=1009,wL=1010,EL=1011,dS=1012,TL=1013,Go=1014,Xs=1015,ac=1016,CL=1017,bL=1018,sl=1020,RL=1021,bi=1023,PL=1024,BL=1025,qo=1026,gl=1027,LL=1028,IL=1029,DL=1030,FL=1031,NL=1033,sg=33776,og=33777,ag=33778,lg=33779,t1=35840,n1=35841,i1=35842,r1=35843,UL=36196,s1=37492,o1=37496,a1=37808,l1=37809,u1=37810,c1=37811,f1=37812,h1=37813,d1=37814,p1=37815,m1=37816,g1=37817,v1=37818,y1=37819,x1=37820,_1=37821,ug=36492,OL=36283,A1=36284,S1=36285,M1=36286,kL=2200,GL=2201,zL=2202,lc=2300,vl=2301,cg=2302,qa=2400,Za=2401,bh=2402,I0=2500,pS=2501,HL=0,mS=1,Xg=2,gS=3e3,Ji=3001,VL=3200,WL=3201,da=0,jL=1,Zo="",dt="srgb",Yr="srgb-linear",vS="display-p3",Ik=0,fg=7680,Dk=7681,Fk=7682,Nk=7683,Uk=34055,Ok=34056,kk=5386,Gk=512,zk=513,Hk=514,Vk=515,Wk=516,jk=517,Xk=518,XL=519,Rh=35044,ol=35048,Jk=35040,Kk=35045,Yk=35049,Qk=35041,qk=35046,Zk=35050,$k=35042,eG="100",w1="300 es",Jg=1035;class ao{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const ni=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let GT=1234567;const al=Math.PI/180,uc=180/Math.PI;function Ki(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ni[t&255]+ni[t>>8&255]+ni[t>>16&255]+ni[t>>24&255]+"-"+ni[e&255]+ni[e>>8&255]+"-"+ni[e>>16&15|64]+ni[e>>24&255]+"-"+ni[n&63|128]+ni[n>>8&255]+"-"+ni[n>>16&255]+ni[n>>24&255]+ni[i&255]+ni[i>>8&255]+ni[i>>16&255]+ni[i>>24&255]).toLowerCase()}function pn(t,e,n){return Math.max(e,Math.min(n,t))}function yS(t,e){return(t%e+e)%e}function tG(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function nG(t,e,n){return t!==e?(n-t)/(e-t):0}function Yf(t,e,n){return(1-n)*t+n*e}function iG(t,e,n,i){return Yf(t,e,1-Math.exp(-n*i))}function rG(t,e=1){return e-Math.abs(yS(t,e*2)-e)}function sG(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function oG(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function aG(t,e){return t+Math.floor(Math.random()*(e-t+1))}function lG(t,e){return t+Math.random()*(e-t)}function uG(t){return t*(.5-Math.random())}function cG(t){t!==void 0&&(GT=t);let e=GT+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function fG(t){return t*al}function hG(t){return t*uc}function E1(t){return(t&t-1)===0&&t!==0}function JL(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function KL(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function dG(t,e,n,i,r){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),u=s((e+i)/2),h=o((e+i)/2),d=s((e-i)/2),p=o((e-i)/2),m=s((i-e)/2),y=o((i-e)/2);switch(r){case"XYX":t.set(a*h,l*d,l*p,a*u);break;case"YZY":t.set(l*p,a*h,l*d,a*u);break;case"ZXZ":t.set(l*d,l*p,a*h,a*u);break;case"XZX":t.set(a*h,l*y,l*m,a*u);break;case"YXY":t.set(l*m,a*h,l*y,a*u);break;case"ZYZ":t.set(l*y,l*m,a*h,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Vi(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function gt(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const YL={DEG2RAD:al,RAD2DEG:uc,generateUUID:Ki,clamp:pn,euclideanModulo:yS,mapLinear:tG,inverseLerp:nG,lerp:Yf,damp:iG,pingpong:rG,smoothstep:sG,smootherstep:oG,randInt:aG,randFloat:lG,randFloatSpread:uG,seededRandom:cG,degToRad:fG,radToDeg:hG,isPowerOfTwo:E1,ceilPowerOfTwo:JL,floorPowerOfTwo:KL,setQuaternionFromProperEuler:dG,normalize:gt,denormalize:Vi};class ye{constructor(e=0,n=0){ye.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(pn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class St{constructor(){St.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,n,i,r,s,o,a,l,u){const h=this.elements;return h[0]=e,h[1]=r,h[2]=a,h[3]=n,h[4]=s,h[5]=l,h[6]=i,h[7]=o,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[3],l=i[6],u=i[1],h=i[4],d=i[7],p=i[2],m=i[5],y=i[8],S=r[0],M=r[3],g=r[6],x=r[1],_=r[4],w=r[7],C=r[2],R=r[5],P=r[8];return s[0]=o*S+a*x+l*C,s[3]=o*M+a*_+l*R,s[6]=o*g+a*w+l*P,s[1]=u*S+h*x+d*C,s[4]=u*M+h*_+d*R,s[7]=u*g+h*w+d*P,s[2]=p*S+m*x+y*C,s[5]=p*M+m*_+y*R,s[8]=p*g+m*w+y*P,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8];return n*o*h-n*a*u-i*s*h+i*a*l+r*s*u-r*o*l}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],d=h*o-a*u,p=a*l-h*s,m=u*s-o*l,y=n*d+i*p+r*m;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/y;return e[0]=d*S,e[1]=(r*u-h*i)*S,e[2]=(a*i-r*o)*S,e[3]=p*S,e[4]=(h*n-r*l)*S,e[5]=(r*s-a*n)*S,e[6]=m*S,e[7]=(i*l-u*n)*S,e[8]=(o*n-i*s)*S,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(i*l,i*u,-i*(l*o+u*a)+o+e,-r*u,r*l,-r*(-u*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(Gy.makeScale(e,n)),this}rotate(e){return this.premultiply(Gy.makeRotation(-e)),this}translate(e,n){return this.premultiply(Gy.makeTranslation(e,n)),this}makeTranslation(e,n){return this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Gy=new St;function QL(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const pG={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Pu(t,e){return new pG[t](e)}function Ph(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}const zT={};function Qf(t){t in zT||(zT[t]=!0,console.warn(t))}function Xu(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function zy(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const mG=new St().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),gG=new St().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function vG(t){return t.convertSRGBToLinear().applyMatrix3(gG)}function yG(t){return t.applyMatrix3(mG).convertLinearToSRGB()}const xG={[Yr]:t=>t,[dt]:t=>t.convertSRGBToLinear(),[vS]:vG},_G={[Yr]:t=>t,[dt]:t=>t.convertLinearToSRGB(),[vS]:yG},hr={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return Yr},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const i=xG[e],r=_G[n];if(i===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${n}".`);return r(i(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let jl;class xS{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{jl===void 0&&(jl=Ph("canvas")),jl.width=e.width,jl.height=e.height;const i=jl.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=jl}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Ph("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Xu(s[o]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(Xu(n[i]/255)*255):n[i]=Xu(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class $a{constructor(e=null){this.isSource=!0,this.uuid=Ki(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(Hy(r[o].image)):s.push(Hy(r[o]))}else s=Hy(r);i.url=s}return n||(e.images[this.uuid]=i),i}}function Hy(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?xS.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let AG=0;class $t extends ao{constructor(e=$t.DEFAULT_IMAGE,n=$t.DEFAULT_MAPPING,i=Xn,r=Xn,s=rn,o=As,a=bi,l=io,u=$t.DEFAULT_ANISOTROPY,h=Zo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:AG++}),this.uuid=Ki(),this.name="",this.source=new $a(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ye(0,0),this.repeat=new ye(1,1),this.center=new ye(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new St,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof h=="string"?this.colorSpace=h:(Qf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===Ji?dt:Zo),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==B0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case oa:e.x=e.x-Math.floor(e.x);break;case Xn:e.x=e.x<0?0:1;break;case oc:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case oa:e.y=e.y-Math.floor(e.y);break;case Xn:e.y=e.y<0?0:1;break;case oc:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Qf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===dt?Ji:gS}set encoding(e){Qf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Ji?dt:Zo}}$t.DEFAULT_IMAGE=null;$t.DEFAULT_MAPPING=B0;$t.DEFAULT_ANISOTROPY=1;class Gt{constructor(e=0,n=0,i=0,r=1){Gt.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*n+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*n+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*n+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,s;const l=e.elements,u=l[0],h=l[4],d=l[8],p=l[1],m=l[5],y=l[9],S=l[2],M=l[6],g=l[10];if(Math.abs(h-p)<.01&&Math.abs(d-S)<.01&&Math.abs(y-M)<.01){if(Math.abs(h+p)<.1&&Math.abs(d+S)<.1&&Math.abs(y+M)<.1&&Math.abs(u+m+g-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const _=(u+1)/2,w=(m+1)/2,C=(g+1)/2,R=(h+p)/4,P=(d+S)/4,L=(y+M)/4;return _>w&&_>C?_<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(_),r=R/i,s=P/i):w>C?w<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=R/r,s=L/r):C<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(C),i=P/s,r=L/s),this.set(i,r,s,n),this}let x=Math.sqrt((M-y)*(M-y)+(d-S)*(d-S)+(p-h)*(p-h));return Math.abs(x)<.001&&(x=1),this.x=(M-y)/x,this.y=(d-S)/x,this.z=(p-h)/x,this.w=Math.acos((u+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Qr extends ao{constructor(e=1,n=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Gt(0,0,e,n),this.scissorTest=!1,this.viewport=new Gt(0,0,e,n);const r={width:e,height:n,depth:1};i.encoding!==void 0&&(Qf("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===Ji?dt:Zo),this.texture=new $t(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:rn,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,n,i=1){(this.width!==e||this.height!==n||this.depth!==i)&&(this.width=e,this.height=n,this.depth=i,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new $a(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class D0 extends $t{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=dn,this.minFilter=dn,this.wrapR=Xn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class SG extends Qr{constructor(e=1,n=1,i=1){super(e,n),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new D0(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class _S extends $t{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=dn,this.minFilter=dn,this.wrapR=Xn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class MG extends Qr{constructor(e=1,n=1,i=1){super(e,n),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new _S(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class wG extends Qr{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=n,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,i=e.texture.length;n<i;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class si{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,s,o,a){let l=i[r+0],u=i[r+1],h=i[r+2],d=i[r+3];const p=s[o+0],m=s[o+1],y=s[o+2],S=s[o+3];if(a===0){e[n+0]=l,e[n+1]=u,e[n+2]=h,e[n+3]=d;return}if(a===1){e[n+0]=p,e[n+1]=m,e[n+2]=y,e[n+3]=S;return}if(d!==S||l!==p||u!==m||h!==y){let M=1-a;const g=l*p+u*m+h*y+d*S,x=g>=0?1:-1,_=1-g*g;if(_>Number.EPSILON){const C=Math.sqrt(_),R=Math.atan2(C,g*x);M=Math.sin(M*R)/C,a=Math.sin(a*R)/C}const w=a*x;if(l=l*M+p*w,u=u*M+m*w,h=h*M+y*w,d=d*M+S*w,M===1-a){const C=1/Math.sqrt(l*l+u*u+h*h+d*d);l*=C,u*=C,h*=C,d*=C}}e[n]=l,e[n+1]=u,e[n+2]=h,e[n+3]=d}static multiplyQuaternionsFlat(e,n,i,r,s,o){const a=i[r],l=i[r+1],u=i[r+2],h=i[r+3],d=s[o],p=s[o+1],m=s[o+2],y=s[o+3];return e[n]=a*y+h*d+l*m-u*p,e[n+1]=l*y+h*p+u*d-a*m,e[n+2]=u*y+h*m+a*p-l*d,e[n+3]=h*y-a*d-l*p-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(i/2),h=a(r/2),d=a(s/2),p=l(i/2),m=l(r/2),y=l(s/2);switch(o){case"XYZ":this._x=p*h*d+u*m*y,this._y=u*m*d-p*h*y,this._z=u*h*y+p*m*d,this._w=u*h*d-p*m*y;break;case"YXZ":this._x=p*h*d+u*m*y,this._y=u*m*d-p*h*y,this._z=u*h*y-p*m*d,this._w=u*h*d+p*m*y;break;case"ZXY":this._x=p*h*d-u*m*y,this._y=u*m*d+p*h*y,this._z=u*h*y+p*m*d,this._w=u*h*d-p*m*y;break;case"ZYX":this._x=p*h*d-u*m*y,this._y=u*m*d+p*h*y,this._z=u*h*y-p*m*d,this._w=u*h*d+p*m*y;break;case"YZX":this._x=p*h*d+u*m*y,this._y=u*m*d+p*h*y,this._z=u*h*y-p*m*d,this._w=u*h*d-p*m*y;break;case"XZY":this._x=p*h*d-u*m*y,this._y=u*m*d-p*h*y,this._z=u*h*y+p*m*d,this._w=u*h*d+p*m*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],s=n[8],o=n[1],a=n[5],l=n[9],u=n[2],h=n[6],d=n[10],p=i+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(h-l)*m,this._y=(s-u)*m,this._z=(o-r)*m}else if(i>a&&i>d){const m=2*Math.sqrt(1+i-a-d);this._w=(h-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+u)/m}else if(a>d){const m=2*Math.sqrt(1+a-i-d);this._w=(s-u)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+h)/m}else{const m=2*Math.sqrt(1+d-i-a);this._w=(o-r)/m,this._x=(s+u)/m,this._y=(l+h)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(pn(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,s=e._z,o=e._w,a=n._x,l=n._y,u=n._z,h=n._w;return this._x=i*h+o*a+r*u-s*l,this._y=r*h+o*l+s*a-i*u,this._z=s*h+o*u+i*l-r*a,this._w=o*h-i*a-r*l-s*u,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-n;return this._w=m*o+n*this._w,this._x=m*i+n*this._x,this._y=m*r+n*this._y,this._z=m*s+n*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),h=Math.atan2(u,a),d=Math.sin((1-n)*h)/u,p=Math.sin(n*h)/u;return this._w=o*d+this._w*p,this._x=i*d+this._x*p,this._y=r*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=Math.random(),n=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(r),i*Math.sin(s),i*Math.cos(s),n*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class F{constructor(e=0,n=0,i=0){F.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(HT.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(HT.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6]*r,this.y=s[1]*n+s[4]*i+s[7]*r,this.z=s[2]*n+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*n+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*n+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*n+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*n+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=l*n+o*r-a*i,h=l*i+a*n-s*r,d=l*r+s*i-o*n,p=-s*n-o*i-a*r;return this.x=u*l+p*-s+h*-a-d*-o,this.y=h*l+p*-o+d*-s-u*-a,this.z=d*l+p*-a+u*-o-h*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[4]*i+s[8]*r,this.y=s[1]*n+s[5]*i+s[9]*r,this.z=s[2]*n+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Vy.copy(this).projectOnVector(e),this.sub(Vy)}reflect(e){return this.sub(Vy.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(pn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(n),this.y=i*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Vy=new F,HT=new si;class qr{constructor(e=new F(1/0,1/0,1/0),n=new F(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(Is.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(Is.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=Is.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Xl.copy(e.boundingBox),Xl.applyMatrix4(e.matrixWorld),this.union(Xl);else{const r=e.geometry;if(r!==void 0)if(n&&r.attributes!==void 0&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)Is.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Is)}else r.boundingBox===null&&r.computeBoundingBox(),Xl.copy(r.boundingBox),Xl.applyMatrix4(e.matrixWorld),this.union(Xl)}const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Is),Is.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(sf),Kp.subVectors(this.max,sf),Jl.subVectors(e.a,sf),Kl.subVectors(e.b,sf),Yl.subVectors(e.c,sf),Ao.subVectors(Kl,Jl),So.subVectors(Yl,Kl),ba.subVectors(Jl,Yl);let n=[0,-Ao.z,Ao.y,0,-So.z,So.y,0,-ba.z,ba.y,Ao.z,0,-Ao.x,So.z,0,-So.x,ba.z,0,-ba.x,-Ao.y,Ao.x,0,-So.y,So.x,0,-ba.y,ba.x,0];return!Wy(n,Jl,Kl,Yl,Kp)||(n=[1,0,0,0,1,0,0,0,1],!Wy(n,Jl,Kl,Yl,Kp))?!1:(Yp.crossVectors(Ao,So),n=[Yp.x,Yp.y,Yp.z],Wy(n,Jl,Kl,Yl,Kp))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Is).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Is).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ls[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ls[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ls[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ls[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ls[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ls[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ls[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ls[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ls),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ls=[new F,new F,new F,new F,new F,new F,new F,new F],Is=new F,Xl=new qr,Jl=new F,Kl=new F,Yl=new F,Ao=new F,So=new F,ba=new F,sf=new F,Kp=new F,Yp=new F,Ra=new F;function Wy(t,e,n,i,r){for(let s=0,o=t.length-3;s<=o;s+=3){Ra.fromArray(t,s);const a=r.x*Math.abs(Ra.x)+r.y*Math.abs(Ra.y)+r.z*Math.abs(Ra.z),l=e.dot(Ra),u=n.dot(Ra),h=i.dot(Ra);if(Math.max(-Math.max(l,u,h),Math.min(l,u,h))>a)return!1}return!0}const EG=new qr,of=new F,jy=new F;class Zr{constructor(e=new F,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):EG.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;of.subVectors(e,this.center);const n=of.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.addScaledVector(of,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(jy.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(of.copy(e.center).add(jy)),this.expandByPoint(of.copy(e.center).sub(jy))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ds=new F,Xy=new F,Qp=new F,Mo=new F,Jy=new F,qp=new F,Ky=new F;class rd{constructor(e=new F,n=new F(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ds)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Ds.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Ds.copy(this.origin).addScaledVector(this.direction,n),Ds.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){Xy.copy(e).add(n).multiplyScalar(.5),Qp.copy(n).sub(e).normalize(),Mo.copy(this.origin).sub(Xy);const s=e.distanceTo(n)*.5,o=-this.direction.dot(Qp),a=Mo.dot(this.direction),l=-Mo.dot(Qp),u=Mo.lengthSq(),h=Math.abs(1-o*o);let d,p,m,y;if(h>0)if(d=o*l-a,p=o*a-l,y=s*h,d>=0)if(p>=-y)if(p<=y){const S=1/h;d*=S,p*=S,m=d*(d+o*p+2*a)+p*(o*d+p+2*l)+u}else p=s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+u;else p=-s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+u;else p<=-y?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+u):p<=y?(d=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+u):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+u);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(Xy).addScaledVector(Qp,p),m}intersectSphere(e,n){Ds.subVectors(e.center,this.origin);const i=Ds.dot(this.direction),r=Ds.dot(Ds)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,s,o,a,l;const u=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,p=this.origin;return u>=0?(i=(e.min.x-p.x)*u,r=(e.max.x-p.x)*u):(i=(e.max.x-p.x)*u,r=(e.min.x-p.x)*u),h>=0?(s=(e.min.y-p.y)*h,o=(e.max.y-p.y)*h):(s=(e.max.y-p.y)*h,o=(e.min.y-p.y)*h),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,Ds)!==null}intersectTriangle(e,n,i,r,s){Jy.subVectors(n,e),qp.subVectors(i,e),Ky.crossVectors(Jy,qp);let o=this.direction.dot(Ky),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Mo.subVectors(this.origin,e);const l=a*this.direction.dot(qp.crossVectors(Mo,qp));if(l<0)return null;const u=a*this.direction.dot(Jy.cross(Mo));if(u<0||l+u>o)return null;const h=-a*Mo.dot(Ky);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class st{constructor(){st.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,n,i,r,s,o,a,l,u,h,d,p,m,y,S,M){const g=this.elements;return g[0]=e,g[4]=n,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=u,g[6]=h,g[10]=d,g[14]=p,g[3]=m,g[7]=y,g[11]=S,g[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new st().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,r=1/Ql.setFromMatrixColumn(e,0).length(),s=1/Ql.setFromMatrixColumn(e,1).length(),o=1/Ql.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*s,n[5]=i[5]*s,n[6]=i[6]*s,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),h=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*h,m=o*d,y=a*h,S=a*d;n[0]=l*h,n[4]=-l*d,n[8]=u,n[1]=m+y*u,n[5]=p-S*u,n[9]=-a*l,n[2]=S-p*u,n[6]=y+m*u,n[10]=o*l}else if(e.order==="YXZ"){const p=l*h,m=l*d,y=u*h,S=u*d;n[0]=p+S*a,n[4]=y*a-m,n[8]=o*u,n[1]=o*d,n[5]=o*h,n[9]=-a,n[2]=m*a-y,n[6]=S+p*a,n[10]=o*l}else if(e.order==="ZXY"){const p=l*h,m=l*d,y=u*h,S=u*d;n[0]=p-S*a,n[4]=-o*d,n[8]=y+m*a,n[1]=m+y*a,n[5]=o*h,n[9]=S-p*a,n[2]=-o*u,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const p=o*h,m=o*d,y=a*h,S=a*d;n[0]=l*h,n[4]=y*u-m,n[8]=p*u+S,n[1]=l*d,n[5]=S*u+p,n[9]=m*u-y,n[2]=-u,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*u,y=a*l,S=a*u;n[0]=l*h,n[4]=S-p*d,n[8]=y*d+m,n[1]=d,n[5]=o*h,n[9]=-a*h,n[2]=-u*h,n[6]=m*d+y,n[10]=p-S*d}else if(e.order==="XZY"){const p=o*l,m=o*u,y=a*l,S=a*u;n[0]=l*h,n[4]=-d,n[8]=u*h,n[1]=p*d+S,n[5]=o*h,n[9]=m*d-y,n[2]=y*d-m,n[6]=a*h,n[10]=S*d+p}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(TG,e,CG)}lookAt(e,n,i){const r=this.elements;return ki.subVectors(e,n),ki.lengthSq()===0&&(ki.z=1),ki.normalize(),wo.crossVectors(i,ki),wo.lengthSq()===0&&(Math.abs(i.z)===1?ki.x+=1e-4:ki.z+=1e-4,ki.normalize(),wo.crossVectors(i,ki)),wo.normalize(),Zp.crossVectors(ki,wo),r[0]=wo.x,r[4]=Zp.x,r[8]=ki.x,r[1]=wo.y,r[5]=Zp.y,r[9]=ki.y,r[2]=wo.z,r[6]=Zp.z,r[10]=ki.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[4],l=i[8],u=i[12],h=i[1],d=i[5],p=i[9],m=i[13],y=i[2],S=i[6],M=i[10],g=i[14],x=i[3],_=i[7],w=i[11],C=i[15],R=r[0],P=r[4],L=r[8],b=r[12],B=r[1],G=r[5],X=r[9],V=r[13],Y=r[2],J=r[6],ae=r[10],ne=r[14],I=r[3],H=r[7],z=r[11],$=r[15];return s[0]=o*R+a*B+l*Y+u*I,s[4]=o*P+a*G+l*J+u*H,s[8]=o*L+a*X+l*ae+u*z,s[12]=o*b+a*V+l*ne+u*$,s[1]=h*R+d*B+p*Y+m*I,s[5]=h*P+d*G+p*J+m*H,s[9]=h*L+d*X+p*ae+m*z,s[13]=h*b+d*V+p*ne+m*$,s[2]=y*R+S*B+M*Y+g*I,s[6]=y*P+S*G+M*J+g*H,s[10]=y*L+S*X+M*ae+g*z,s[14]=y*b+S*V+M*ne+g*$,s[3]=x*R+_*B+w*Y+C*I,s[7]=x*P+_*G+w*J+C*H,s[11]=x*L+_*X+w*ae+C*z,s[15]=x*b+_*V+w*ne+C*$,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],h=e[2],d=e[6],p=e[10],m=e[14],y=e[3],S=e[7],M=e[11],g=e[15];return y*(+s*l*d-r*u*d-s*a*p+i*u*p+r*a*m-i*l*m)+S*(+n*l*m-n*u*p+s*o*p-r*o*m+r*u*h-s*l*h)+M*(+n*u*d-n*a*m-s*o*d+i*o*m+s*a*h-i*u*h)+g*(-r*a*h-n*l*d+n*a*p+r*o*d-i*o*p+i*l*h)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],d=e[9],p=e[10],m=e[11],y=e[12],S=e[13],M=e[14],g=e[15],x=d*M*u-S*p*u+S*l*m-a*M*m-d*l*g+a*p*g,_=y*p*u-h*M*u-y*l*m+o*M*m+h*l*g-o*p*g,w=h*S*u-y*d*u+y*a*m-o*S*m-h*a*g+o*d*g,C=y*d*l-h*S*l-y*a*p+o*S*p+h*a*M-o*d*M,R=n*x+i*_+r*w+s*C;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/R;return e[0]=x*P,e[1]=(S*p*s-d*M*s-S*r*m+i*M*m+d*r*g-i*p*g)*P,e[2]=(a*M*s-S*l*s+S*r*u-i*M*u-a*r*g+i*l*g)*P,e[3]=(d*l*s-a*p*s-d*r*u+i*p*u+a*r*m-i*l*m)*P,e[4]=_*P,e[5]=(h*M*s-y*p*s+y*r*m-n*M*m-h*r*g+n*p*g)*P,e[6]=(y*l*s-o*M*s-y*r*u+n*M*u+o*r*g-n*l*g)*P,e[7]=(o*p*s-h*l*s+h*r*u-n*p*u-o*r*m+n*l*m)*P,e[8]=w*P,e[9]=(y*d*s-h*S*s-y*i*m+n*S*m+h*i*g-n*d*g)*P,e[10]=(o*S*s-y*a*s+y*i*u-n*S*u-o*i*g+n*a*g)*P,e[11]=(h*a*s-o*d*s-h*i*u+n*d*u+o*i*m-n*a*m)*P,e[12]=C*P,e[13]=(h*S*r-y*d*r+y*i*p-n*S*p-h*i*M+n*d*M)*P,e[14]=(y*a*r-o*S*r-y*i*l+n*S*l+o*i*M-n*a*M)*P,e[15]=(o*d*r-h*a*r+h*i*l-n*d*l-o*i*p+n*a*p)*P,this}scale(e){const n=this.elements,i=e.x,r=e.y,s=e.z;return n[0]*=i,n[4]*=r,n[8]*=s,n[1]*=i,n[5]*=r,n[9]*=s,n[2]*=i,n[6]*=r,n[10]*=s,n[3]*=i,n[7]*=r,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),s=1-i,o=e.x,a=e.y,l=e.z,u=s*o,h=s*a;return this.set(u*o+i,u*a-r*l,u*l+r*a,0,u*a+r*l,h*a+i,h*l-r*o,0,u*l-r*a,h*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,u=s+s,h=o+o,d=a+a,p=s*u,m=s*h,y=s*d,S=o*h,M=o*d,g=a*d,x=l*u,_=l*h,w=l*d,C=i.x,R=i.y,P=i.z;return r[0]=(1-(S+g))*C,r[1]=(m+w)*C,r[2]=(y-_)*C,r[3]=0,r[4]=(m-w)*R,r[5]=(1-(p+g))*R,r[6]=(M+x)*R,r[7]=0,r[8]=(y+_)*P,r[9]=(M-x)*P,r[10]=(1-(p+S))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;let s=Ql.set(r[0],r[1],r[2]).length();const o=Ql.set(r[4],r[5],r[6]).length(),a=Ql.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Ir.copy(this);const u=1/s,h=1/o,d=1/a;return Ir.elements[0]*=u,Ir.elements[1]*=u,Ir.elements[2]*=u,Ir.elements[4]*=h,Ir.elements[5]*=h,Ir.elements[6]*=h,Ir.elements[8]*=d,Ir.elements[9]*=d,Ir.elements[10]*=d,n.setFromRotationMatrix(Ir),i.x=s,i.y=o,i.z=a,this}makePerspective(e,n,i,r,s,o){const a=this.elements,l=2*s/(n-e),u=2*s/(i-r),h=(n+e)/(n-e),d=(i+r)/(i-r),p=-(o+s)/(o-s),m=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=u,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,n,i,r,s,o){const a=this.elements,l=1/(n-e),u=1/(i-r),h=1/(o-s),d=(n+e)*l,p=(i+r)*u,m=(o+s)*h;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const Ql=new F,Ir=new st,TG=new F(0,0,0),CG=new F(1,1,1),wo=new F,Zp=new F,ki=new F,VT=new st,WT=new si;class sd{constructor(e=0,n=0,i=0,r=sd.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r=this._order){return this._x=e,this._y=n,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],u=r[5],h=r[9],d=r[2],p=r[6],m=r[10];switch(n){case"XYZ":this._y=Math.asin(pn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-pn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(pn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-pn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(pn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-pn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return VT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(VT,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return WT.setFromEuler(this),this.setFromQuaternion(WT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}sd.DEFAULT_ORDER="XYZ";class ll{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let bG=0;const jT=new F,ql=new si,Fs=new st,$p=new F,af=new F,RG=new F,PG=new si,XT=new F(1,0,0),JT=new F(0,1,0),KT=new F(0,0,1),BG={type:"added"},YT={type:"removed"};class Ct extends ao{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:bG++}),this.uuid=Ki(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ct.DEFAULT_UP.clone();const e=new F,n=new sd,i=new si,r=new F(1,1,1);function s(){i.setFromEuler(n,!1)}function o(){n.setFromQuaternion(i,void 0,!1)}n._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new st},normalMatrix:{value:new St}}),this.matrix=new st,this.matrixWorld=new st,this.matrixAutoUpdate=Ct.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Ct.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new ll,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return ql.setFromAxisAngle(e,n),this.quaternion.multiply(ql),this}rotateOnWorldAxis(e,n){return ql.setFromAxisAngle(e,n),this.quaternion.premultiply(ql),this}rotateX(e){return this.rotateOnAxis(XT,e)}rotateY(e){return this.rotateOnAxis(JT,e)}rotateZ(e){return this.rotateOnAxis(KT,e)}translateOnAxis(e,n){return jT.copy(e).applyQuaternion(this.quaternion),this.position.add(jT.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(XT,e)}translateY(e){return this.translateOnAxis(JT,e)}translateZ(e){return this.translateOnAxis(KT,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Fs.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?$p.copy(e):$p.set(e,n,i);const r=this.parent;this.updateWorldMatrix(!0,!1),af.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fs.lookAt(af,$p,this.up):Fs.lookAt($p,af,this.up),this.quaternion.setFromRotationMatrix(Fs),r&&(Fs.extractRotation(r.matrixWorld),ql.setFromRotationMatrix(Fs),this.quaternion.premultiply(ql.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(BG)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(YT)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(YT)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Fs.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Fs.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fs),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n){let i=[];this[e]===n&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectsByProperty(e,n);o.length>0&&(i=i.concat(o))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(af,e,RG),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(af,PG,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,r=n.length;i<r;i++){const s=n[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,h=l.length;u<h;u++){const d=l[u];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),h=o(e.images),d=o(e.shapes),p=o(e.skeletons),m=o(e.animations),y=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),h.length>0&&(i.images=h),d.length>0&&(i.shapes=d),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),y.length>0&&(i.nodes=y)}return i.object=r,i;function o(a){const l=[];for(const u in a){const h=a[u];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Ct.DEFAULT_UP=new F(0,1,0);Ct.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ct.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Dr=new F,Ns=new F,Yy=new F,Us=new F,Zl=new F,$l=new F,QT=new F,Qy=new F,qy=new F,Zy=new F;let em=!1;class Ci{constructor(e=new F,n=new F,i=new F){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),Dr.subVectors(e,n),r.cross(Dr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,n,i,r,s){Dr.subVectors(r,n),Ns.subVectors(i,n),Yy.subVectors(e,n);const o=Dr.dot(Dr),a=Dr.dot(Ns),l=Dr.dot(Yy),u=Ns.dot(Ns),h=Ns.dot(Yy),d=o*u-a*a;if(d===0)return s.set(-2,-1,-1);const p=1/d,m=(u*l-a*h)*p,y=(o*h-a*l)*p;return s.set(1-m-y,y,m)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,Us),Us.x>=0&&Us.y>=0&&Us.x+Us.y<=1}static getUV(e,n,i,r,s,o,a,l){return em===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),em=!0),this.getInterpolation(e,n,i,r,s,o,a,l)}static getInterpolation(e,n,i,r,s,o,a,l){return this.getBarycoord(e,n,i,r,Us),l.setScalar(0),l.addScaledVector(s,Us.x),l.addScaledVector(o,Us.y),l.addScaledVector(a,Us.z),l}static isFrontFacing(e,n,i,r){return Dr.subVectors(i,n),Ns.subVectors(e,n),Dr.cross(Ns).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Dr.subVectors(this.c,this.b),Ns.subVectors(this.a,this.b),Dr.cross(Ns).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ci.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Ci.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,i,r,s){return em===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),em=!0),Ci.getInterpolation(e,this.a,this.b,this.c,n,i,r,s)}getInterpolation(e,n,i,r,s){return Ci.getInterpolation(e,this.a,this.b,this.c,n,i,r,s)}containsPoint(e){return Ci.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ci.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,r=this.b,s=this.c;let o,a;Zl.subVectors(r,i),$l.subVectors(s,i),Qy.subVectors(e,i);const l=Zl.dot(Qy),u=$l.dot(Qy);if(l<=0&&u<=0)return n.copy(i);qy.subVectors(e,r);const h=Zl.dot(qy),d=$l.dot(qy);if(h>=0&&d<=h)return n.copy(r);const p=l*d-h*u;if(p<=0&&l>=0&&h<=0)return o=l/(l-h),n.copy(i).addScaledVector(Zl,o);Zy.subVectors(e,s);const m=Zl.dot(Zy),y=$l.dot(Zy);if(y>=0&&m<=y)return n.copy(s);const S=m*u-l*y;if(S<=0&&u>=0&&y<=0)return a=u/(u-y),n.copy(i).addScaledVector($l,a);const M=h*y-m*d;if(M<=0&&d-h>=0&&m-y>=0)return QT.subVectors(s,r),a=(d-h)/(d-h+(m-y)),n.copy(r).addScaledVector(QT,a);const g=1/(M+S+p);return o=S*g,a=p*g,n.copy(i).addScaledVector(Zl,o).addScaledVector($l,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let LG=0;class Tn extends ao{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:LG++}),this.uuid=Ki(),this.name="",this.type="Material",this.blending=rl,this.side=_s,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=cS,this.blendDst=fS,this.blendEquation=Wa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=jg,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=XL,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=fg,this.stencilZFail=fg,this.stencilZPass=fg,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==rl&&(i.blending=this.blending),this.side!==_s&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const r=n.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=n[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const qL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Fr={h:0,s:0,l:0},tm={h:0,s:0,l:0};function $y(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class Be{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&i===void 0?this.set(e):this.setRGB(e,n,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=dt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,hr.toWorkingColorSpace(this,n),this}setRGB(e,n,i,r=hr.workingColorSpace){return this.r=e,this.g=n,this.b=i,hr.toWorkingColorSpace(this,r),this}setHSL(e,n,i,r=hr.workingColorSpace){if(e=yS(e,1),n=pn(n,0,1),i=pn(i,0,1),n===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+n):i+n-i*n,o=2*i-s;this.r=$y(o,s,e+1/3),this.g=$y(o,s,e),this.b=$y(o,s,e-1/3)}return hr.toWorkingColorSpace(this,r),this}setStyle(e,n=dt){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=dt){const i=qL[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Xu(e.r),this.g=Xu(e.g),this.b=Xu(e.b),this}copyLinearToSRGB(e){return this.r=zy(e.r),this.g=zy(e.g),this.b=zy(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=dt){return hr.fromWorkingColorSpace(ii.copy(this),e),Math.round(pn(ii.r*255,0,255))*65536+Math.round(pn(ii.g*255,0,255))*256+Math.round(pn(ii.b*255,0,255))}getHexString(e=dt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=hr.workingColorSpace){hr.fromWorkingColorSpace(ii.copy(this),n);const i=ii.r,r=ii.g,s=ii.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,u;const h=(a+o)/2;if(a===o)l=0,u=0;else{const d=o-a;switch(u=h<=.5?d/(o+a):d/(2-o-a),o){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=u,e.l=h,e}getRGB(e,n=hr.workingColorSpace){return hr.fromWorkingColorSpace(ii.copy(this),n),e.r=ii.r,e.g=ii.g,e.b=ii.b,e}getStyle(e=dt){hr.fromWorkingColorSpace(ii.copy(this),e);const n=ii.r,i=ii.g,r=ii.b;return e!==dt?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,n,i){return this.getHSL(Fr),Fr.h+=e,Fr.s+=n,Fr.l+=i,this.setHSL(Fr.h,Fr.s,Fr.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(Fr),e.getHSL(tm);const i=Yf(Fr.h,tm.h,n),r=Yf(Fr.s,tm.s,n),s=Yf(Fr.l,tm.l,n);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*n+s[3]*i+s[6]*r,this.g=s[1]*n+s[4]*i+s[7]*r,this.b=s[2]*n+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ii=new Be;Be.NAMES=qL;class Wi extends Tn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Be(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=id,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Hs=IG();function IG(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,h=0;for(;!(u&8388608);)u<<=1,h-=8388608;u&=-8388609,h+=947912704,s[l]=u|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function wi(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=pn(t,-65504,65504),Hs.floatView[0]=t;const e=Hs.uint32View[0],n=e>>23&511;return Hs.baseTable[n]+((e&8388607)>>Hs.shiftTable[n])}function Df(t){const e=t>>10;return Hs.uint32View[0]=Hs.mantissaTable[Hs.offsetTable[e]+(t&1023)]+Hs.exponentTable[e],Hs.floatView[0]}const DG={toHalfFloat:wi,fromHalfFloat:Df},Mn=new F,nm=new ye;class Dt{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=Rh,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)nm.fromBufferAttribute(this,n),nm.applyMatrix3(e),this.setXY(n,nm.x,nm.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)Mn.fromBufferAttribute(this,n),Mn.applyMatrix3(e),this.setXYZ(n,Mn.x,Mn.y,Mn.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)Mn.fromBufferAttribute(this,n),Mn.applyMatrix4(e),this.setXYZ(n,Mn.x,Mn.y,Mn.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)Mn.fromBufferAttribute(this,n),Mn.applyNormalMatrix(e),this.setXYZ(n,Mn.x,Mn.y,Mn.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)Mn.fromBufferAttribute(this,n),Mn.transformDirection(e),this.setXYZ(n,Mn.x,Mn.y,Mn.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Vi(n,this.array)),n}setX(e,n){return this.normalized&&(n=gt(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Vi(n,this.array)),n}setY(e,n){return this.normalized&&(n=gt(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Vi(n,this.array)),n}setZ(e,n){return this.normalized&&(n=gt(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Vi(n,this.array)),n}setW(e,n){return this.normalized&&(n=gt(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=gt(n,this.array),i=gt(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=gt(n,this.array),i=gt(i,this.array),r=gt(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=gt(n,this.array),i=gt(i,this.array),r=gt(r,this.array),s=gt(s,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Rh&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class FG extends Dt{constructor(e,n,i){super(new Int8Array(e),n,i)}}class NG extends Dt{constructor(e,n,i){super(new Uint8Array(e),n,i)}}class UG extends Dt{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}}class OG extends Dt{constructor(e,n,i){super(new Int16Array(e),n,i)}}class AS extends Dt{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class kG extends Dt{constructor(e,n,i){super(new Int32Array(e),n,i)}}class SS extends Dt{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class GG extends Dt{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}getX(e){let n=Df(this.array[e*this.itemSize]);return this.normalized&&(n=Vi(n,this.array)),n}setX(e,n){return this.normalized&&(n=gt(n,this.array)),this.array[e*this.itemSize]=wi(n),this}getY(e){let n=Df(this.array[e*this.itemSize+1]);return this.normalized&&(n=Vi(n,this.array)),n}setY(e,n){return this.normalized&&(n=gt(n,this.array)),this.array[e*this.itemSize+1]=wi(n),this}getZ(e){let n=Df(this.array[e*this.itemSize+2]);return this.normalized&&(n=Vi(n,this.array)),n}setZ(e,n){return this.normalized&&(n=gt(n,this.array)),this.array[e*this.itemSize+2]=wi(n),this}getW(e){let n=Df(this.array[e*this.itemSize+3]);return this.normalized&&(n=Vi(n,this.array)),n}setW(e,n){return this.normalized&&(n=gt(n,this.array)),this.array[e*this.itemSize+3]=wi(n),this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=gt(n,this.array),i=gt(i,this.array)),this.array[e+0]=wi(n),this.array[e+1]=wi(i),this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=gt(n,this.array),i=gt(i,this.array),r=gt(r,this.array)),this.array[e+0]=wi(n),this.array[e+1]=wi(i),this.array[e+2]=wi(r),this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=gt(n,this.array),i=gt(i,this.array),r=gt(r,this.array),s=gt(s,this.array)),this.array[e+0]=wi(n),this.array[e+1]=wi(i),this.array[e+2]=wi(r),this.array[e+3]=wi(s),this}}class Ge extends Dt{constructor(e,n,i){super(new Float32Array(e),n,i)}}class zG extends Dt{constructor(e,n,i){super(new Float64Array(e),n,i)}}let HG=0;const ur=new st,ex=new Ct,eu=new F,Gi=new qr,lf=new qr,Un=new F;class ht extends ao{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:HG++}),this.uuid=Ki(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(QL(e)?SS:AS)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new St().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ur.makeRotationFromQuaternion(e),this.applyMatrix4(ur),this}rotateX(e){return ur.makeRotationX(e),this.applyMatrix4(ur),this}rotateY(e){return ur.makeRotationY(e),this.applyMatrix4(ur),this}rotateZ(e){return ur.makeRotationZ(e),this.applyMatrix4(ur),this}translate(e,n,i){return ur.makeTranslation(e,n,i),this.applyMatrix4(ur),this}scale(e,n,i){return ur.makeScale(e,n,i),this.applyMatrix4(ur),this}lookAt(e){return ex.lookAt(e),ex.updateMatrix(),this.applyMatrix4(ex.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(eu).negate(),this.translate(eu.x,eu.y,eu.z),this}setFromPoints(e){const n=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ge(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new qr);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new F(-1/0,-1/0,-1/0),new F(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){const s=n[i];Gi.setFromBufferAttribute(s),this.morphTargetsRelative?(Un.addVectors(this.boundingBox.min,Gi.min),this.boundingBox.expandByPoint(Un),Un.addVectors(this.boundingBox.max,Gi.max),this.boundingBox.expandByPoint(Un)):(this.boundingBox.expandByPoint(Gi.min),this.boundingBox.expandByPoint(Gi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Zr);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new F,1/0);return}if(e){const i=this.boundingSphere.center;if(Gi.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];lf.setFromBufferAttribute(a),this.morphTargetsRelative?(Un.addVectors(Gi.min,lf.min),Gi.expandByPoint(Un),Un.addVectors(Gi.max,lf.max),Gi.expandByPoint(Un)):(Gi.expandByPoint(lf.min),Gi.expandByPoint(lf.max))}Gi.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Un.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Un));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let u=0,h=a.count;u<h;u++)Un.fromBufferAttribute(a,u),l&&(eu.fromBufferAttribute(e,u),Un.add(eu)),r=Math.max(r,i.distanceToSquared(Un))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=n.position.array,s=n.normal.array,o=n.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Dt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],h=[];for(let B=0;B<a;B++)u[B]=new F,h[B]=new F;const d=new F,p=new F,m=new F,y=new ye,S=new ye,M=new ye,g=new F,x=new F;function _(B,G,X){d.fromArray(r,B*3),p.fromArray(r,G*3),m.fromArray(r,X*3),y.fromArray(o,B*2),S.fromArray(o,G*2),M.fromArray(o,X*2),p.sub(d),m.sub(d),S.sub(y),M.sub(y);const V=1/(S.x*M.y-M.x*S.y);isFinite(V)&&(g.copy(p).multiplyScalar(M.y).addScaledVector(m,-S.y).multiplyScalar(V),x.copy(m).multiplyScalar(S.x).addScaledVector(p,-M.x).multiplyScalar(V),u[B].add(g),u[G].add(g),u[X].add(g),h[B].add(x),h[G].add(x),h[X].add(x))}let w=this.groups;w.length===0&&(w=[{start:0,count:i.length}]);for(let B=0,G=w.length;B<G;++B){const X=w[B],V=X.start,Y=X.count;for(let J=V,ae=V+Y;J<ae;J+=3)_(i[J+0],i[J+1],i[J+2])}const C=new F,R=new F,P=new F,L=new F;function b(B){P.fromArray(s,B*3),L.copy(P);const G=u[B];C.copy(G),C.sub(P.multiplyScalar(P.dot(G))).normalize(),R.crossVectors(L,G);const V=R.dot(h[B])<0?-1:1;l[B*4]=C.x,l[B*4+1]=C.y,l[B*4+2]=C.z,l[B*4+3]=V}for(let B=0,G=w.length;B<G;++B){const X=w[B],V=X.start,Y=X.count;for(let J=V,ae=V+Y;J<ae;J+=3)b(i[J+0]),b(i[J+1]),b(i[J+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Dt(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new F,s=new F,o=new F,a=new F,l=new F,u=new F,h=new F,d=new F;if(e)for(let p=0,m=e.count;p<m;p+=3){const y=e.getX(p+0),S=e.getX(p+1),M=e.getX(p+2);r.fromBufferAttribute(n,y),s.fromBufferAttribute(n,S),o.fromBufferAttribute(n,M),h.subVectors(o,s),d.subVectors(r,s),h.cross(d),a.fromBufferAttribute(i,y),l.fromBufferAttribute(i,S),u.fromBufferAttribute(i,M),a.add(h),l.add(h),u.add(h),i.setXYZ(y,a.x,a.y,a.z),i.setXYZ(S,l.x,l.y,l.z),i.setXYZ(M,u.x,u.y,u.z)}else for(let p=0,m=n.count;p<m;p+=3)r.fromBufferAttribute(n,p+0),s.fromBufferAttribute(n,p+1),o.fromBufferAttribute(n,p+2),h.subVectors(o,s),d.subVectors(r,s),h.cross(d),i.setXYZ(p+0,h.x,h.y,h.z),i.setXYZ(p+1,h.x,h.y,h.z),i.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)Un.fromBufferAttribute(e,n),Un.normalize(),e.setXYZ(n,Un.x,Un.y,Un.z)}toNonIndexed(){function e(a,l){const u=a.array,h=a.itemSize,d=a.normalized,p=new u.constructor(l.length*h);let m=0,y=0;for(let S=0,M=l.length;S<M;S++){a.isInterleavedBufferAttribute?m=l[S]*a.data.stride+a.offset:m=l[S]*h;for(let g=0;g<h;g++)p[y++]=u[m++]}return new Dt(p,h,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new ht,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],u=e(l,i);n.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let h=0,d=u.length;h<d;h++){const p=u[h],m=e(p,i);l.push(m)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],h=[];for(let d=0,p=u.length;d<p;d++){const m=u[d];h.push(m.toJSON(e.data))}h.length>0&&(r[l]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(n));const r=e.attributes;for(const u in r){const h=r[u];this.setAttribute(u,h.clone(n))}const s=e.morphAttributes;for(const u in s){const h=[],d=s[u];for(let p=0,m=d.length;p<m;p++)h.push(d[p].clone(n));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,h=o.length;u<h;u++){const d=o[u];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const qT=new st,cs=new rd,im=new Zr,ZT=new F,tu=new F,nu=new F,iu=new F,tx=new F,rm=new F,sm=new ye,om=new ye,am=new ye,$T=new F,eC=new F,tC=new F,lm=new F,um=new F;class Gn extends Ct{constructor(e=new ht,n=new Wi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;n.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){rm.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const h=a[l],d=s[l];h!==0&&(tx.fromBufferAttribute(d,e),o?rm.addScaledVector(tx,h):rm.addScaledVector(tx.sub(n),h))}n.add(rm)}return n}raycast(e,n){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),im.copy(i.boundingSphere),im.applyMatrix4(s),cs.copy(e.ray).recast(e.near),!(im.containsPoint(cs.origin)===!1&&(cs.intersectSphere(im,ZT)===null||cs.origin.distanceToSquared(ZT)>(e.far-e.near)**2))&&(qT.copy(s).invert(),cs.copy(e.ray).applyMatrix4(qT),!(i.boundingBox!==null&&cs.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,n)))}_computeIntersections(e,n){let i;const r=this.geometry,s=this.material,o=r.index,a=r.attributes.position,l=r.attributes.uv,u=r.attributes.uv1,h=r.attributes.normal,d=r.groups,p=r.drawRange;if(o!==null)if(Array.isArray(s))for(let m=0,y=d.length;m<y;m++){const S=d[m],M=s[S.materialIndex],g=Math.max(S.start,p.start),x=Math.min(o.count,Math.min(S.start+S.count,p.start+p.count));for(let _=g,w=x;_<w;_+=3){const C=o.getX(_),R=o.getX(_+1),P=o.getX(_+2);i=cm(this,M,e,cs,l,u,h,C,R,P),i&&(i.faceIndex=Math.floor(_/3),i.face.materialIndex=S.materialIndex,n.push(i))}}else{const m=Math.max(0,p.start),y=Math.min(o.count,p.start+p.count);for(let S=m,M=y;S<M;S+=3){const g=o.getX(S),x=o.getX(S+1),_=o.getX(S+2);i=cm(this,s,e,cs,l,u,h,g,x,_),i&&(i.faceIndex=Math.floor(S/3),n.push(i))}}else if(a!==void 0)if(Array.isArray(s))for(let m=0,y=d.length;m<y;m++){const S=d[m],M=s[S.materialIndex],g=Math.max(S.start,p.start),x=Math.min(a.count,Math.min(S.start+S.count,p.start+p.count));for(let _=g,w=x;_<w;_+=3){const C=_,R=_+1,P=_+2;i=cm(this,M,e,cs,l,u,h,C,R,P),i&&(i.faceIndex=Math.floor(_/3),i.face.materialIndex=S.materialIndex,n.push(i))}}else{const m=Math.max(0,p.start),y=Math.min(a.count,p.start+p.count);for(let S=m,M=y;S<M;S+=3){const g=S,x=S+1,_=S+2;i=cm(this,s,e,cs,l,u,h,g,x,_),i&&(i.faceIndex=Math.floor(S/3),n.push(i))}}}}function VG(t,e,n,i,r,s,o,a){let l;if(e.side===gi?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===_s,a),l===null)return null;um.copy(a),um.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(um);return u<n.near||u>n.far?null:{distance:u,point:um.clone(),object:t}}function cm(t,e,n,i,r,s,o,a,l,u){t.getVertexPosition(a,tu),t.getVertexPosition(l,nu),t.getVertexPosition(u,iu);const h=VG(t,e,n,i,tu,nu,iu,lm);if(h){r&&(sm.fromBufferAttribute(r,a),om.fromBufferAttribute(r,l),am.fromBufferAttribute(r,u),h.uv=Ci.getInterpolation(lm,tu,nu,iu,sm,om,am,new ye)),s&&(sm.fromBufferAttribute(s,a),om.fromBufferAttribute(s,l),am.fromBufferAttribute(s,u),h.uv1=Ci.getInterpolation(lm,tu,nu,iu,sm,om,am,new ye),h.uv2=h.uv1),o&&($T.fromBufferAttribute(o,a),eC.fromBufferAttribute(o,l),tC.fromBufferAttribute(o,u),h.normal=Ci.getInterpolation(lm,tu,nu,iu,$T,eC,tC,new F),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const d={a,b:l,c:u,normal:new F,materialIndex:0};Ci.getNormal(tu,nu,iu,d.normal),h.face=d}return h}class pa extends ht{constructor(e=1,n=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],h=[],d=[];let p=0,m=0;y("z","y","x",-1,-1,i,n,e,o,s,0),y("z","y","x",1,-1,i,n,-e,o,s,1),y("x","z","y",1,1,e,i,n,r,o,2),y("x","z","y",1,-1,e,i,-n,r,o,3),y("x","y","z",1,-1,e,n,i,r,s,4),y("x","y","z",-1,-1,e,n,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Ge(u,3)),this.setAttribute("normal",new Ge(h,3)),this.setAttribute("uv",new Ge(d,2));function y(S,M,g,x,_,w,C,R,P,L,b){const B=w/P,G=C/L,X=w/2,V=C/2,Y=R/2,J=P+1,ae=L+1;let ne=0,I=0;const H=new F;for(let z=0;z<ae;z++){const $=z*G-V;for(let Z=0;Z<J;Z++){const ee=Z*B-X;H[S]=ee*x,H[M]=$*_,H[g]=Y,u.push(H.x,H.y,H.z),H[S]=0,H[M]=0,H[g]=R>0?1:-1,h.push(H.x,H.y,H.z),d.push(Z/P),d.push(1-z/L),ne+=1}}for(let z=0;z<L;z++)for(let $=0;$<P;$++){const Z=p+$+J*z,ee=p+$+J*(z+1),ie=p+($+1)+J*(z+1),Ae=p+($+1)+J*z;l.push(Z,ee,Ae),l.push(ee,ie,Ae),I+=6}a.addGroup(m,I,b),m+=I,p+=ne}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pa(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function cc(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function hi(t){const e={};for(let n=0;n<t.length;n++){const i=cc(t[n]);for(const r in i)e[r]=i[r]}return e}function WG(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function ZL(t){return t.getRenderTarget()===null?t.outputColorSpace:Yr}const $L={clone:cc,merge:hi};var jG=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,XG=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ss extends Tn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=jG,this.fragmentShader=XG,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=cc(e.uniforms),this.uniformsGroups=WG(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?n.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[r]={type:"m4",value:o.toArray()}:n.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class od extends Ct{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new st,this.projectionMatrix=new st,this.projectionMatrixInverse=new st}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class yn extends od{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=uc*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(al*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return uc*2*Math.atan(Math.tan(al*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,i,r,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(al*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*r/l,n-=o.offsetY*i/u,r*=o.width/l,i*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,n,n-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const ru=-90,su=1;class MS extends Ct{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new yn(ru,su,e,n);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const s=new yn(ru,su,e,n);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new yn(ru,su,e,n);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new yn(ru,su,e,n);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new yn(ru,su,e,n);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const u=new yn(ru,su,e,n);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,-1),this.add(u)}update(e,n){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,u]=this.children,h=e.getRenderTarget(),d=e.toneMapping,p=e.xr.enabled;e.toneMapping=Xr,e.xr.enabled=!1;const m=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(n,r),e.setRenderTarget(i,1),e.render(n,s),e.setRenderTarget(i,2),e.render(n,o),e.setRenderTarget(i,3),e.render(n,a),e.setRenderTarget(i,4),e.render(n,l),i.texture.generateMipmaps=m,e.setRenderTarget(i,5),e.render(n,u),e.setRenderTarget(h),e.toneMapping=d,e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class ad extends $t{constructor(e,n,i,r,s,o,a,l,u,h){e=e!==void 0?e:[],n=n!==void 0?n:ra,super(e,n,i,r,s,o,a,l,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class wS extends Qr{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];n.encoding!==void 0&&(Qf("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Ji?dt:Zo),this.texture=new ad(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:rn}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new pa(5,5,5),s=new Ss({name:"CubemapFromEquirect",uniforms:cc(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:gi,blending:Qs});s.uniforms.tEquirect.value=n;const o=new Gn(r,s),a=n.minFilter;return n.minFilter===As&&(n.minFilter=rn),new MS(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,i,r);e.setRenderTarget(s)}}const nx=new F,JG=new F,KG=new St;class Io{constructor(e=new F(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=nx.subVectors(i,n).cross(JG.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(nx),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:n.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||KG.getNormalMatrix(e),r=this.coplanarPoint(nx).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Pa=new Zr,fm=new F;class F0{constructor(e=new Io,n=new Io,i=new Io,r=new Io,s=new Io,o=new Io){this.planes=[e,n,i,r,s,o]}set(e,n,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const n=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],u=i[5],h=i[6],d=i[7],p=i[8],m=i[9],y=i[10],S=i[11],M=i[12],g=i[13],x=i[14],_=i[15];return n[0].setComponents(a-r,d-l,S-p,_-M).normalize(),n[1].setComponents(a+r,d+l,S+p,_+M).normalize(),n[2].setComponents(a+s,d+u,S+m,_+g).normalize(),n[3].setComponents(a-s,d-u,S-m,_-g).normalize(),n[4].setComponents(a-o,d-h,S-y,_-x).normalize(),n[5].setComponents(a+o,d+h,S+y,_+x).normalize(),this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Pa.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Pa.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Pa)}intersectsSprite(e){return Pa.center.set(0,0,0),Pa.radius=.7071067811865476,Pa.applyMatrix4(e.matrixWorld),this.intersectsSphere(Pa)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(fm.x=r.normal.x>0?e.max.x:e.min.x,fm.y=r.normal.y>0?e.max.y:e.min.y,fm.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(fm)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function eI(){let t=null,e=!1,n=null,i=null;function r(s,o){n(s,o),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function YG(t,e){const n=e.isWebGL2,i=new WeakMap;function r(u,h){const d=u.array,p=u.usage,m=t.createBuffer();t.bindBuffer(h,m),t.bufferData(h,d,p),u.onUploadCallback();let y;if(d instanceof Float32Array)y=t.FLOAT;else if(d instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(n)y=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else y=t.UNSIGNED_SHORT;else if(d instanceof Int16Array)y=t.SHORT;else if(d instanceof Uint32Array)y=t.UNSIGNED_INT;else if(d instanceof Int32Array)y=t.INT;else if(d instanceof Int8Array)y=t.BYTE;else if(d instanceof Uint8Array)y=t.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)y=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:m,type:y,bytesPerElement:d.BYTES_PER_ELEMENT,version:u.version}}function s(u,h,d){const p=h.array,m=h.updateRange;t.bindBuffer(d,u),m.count===-1?t.bufferSubData(d,0,p):(n?t.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):t.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),h.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),i.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const h=i.get(u);h&&(t.deleteBuffer(h.buffer),i.delete(u))}function l(u,h){if(u.isGLBufferAttribute){const p=i.get(u);(!p||p.version<u.version)&&i.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const d=i.get(u);d===void 0?i.set(u,r(u,h)):d.version<u.version&&(s(d.buffer,u,h),d.version=u.version)}return{get:o,remove:a,update:l}}class Mc extends ht{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const s=e/2,o=n/2,a=Math.floor(i),l=Math.floor(r),u=a+1,h=l+1,d=e/a,p=n/l,m=[],y=[],S=[],M=[];for(let g=0;g<h;g++){const x=g*p-o;for(let _=0;_<u;_++){const w=_*d-s;y.push(w,-x,0),S.push(0,0,1),M.push(_/a),M.push(1-g/l)}}for(let g=0;g<l;g++)for(let x=0;x<a;x++){const _=x+u*g,w=x+u*(g+1),C=x+1+u*(g+1),R=x+1+u*g;m.push(_,w,R),m.push(w,C,R)}this.setIndex(m),this.setAttribute("position",new Ge(y,3)),this.setAttribute("normal",new Ge(S,3)),this.setAttribute("uv",new Ge(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mc(e.width,e.height,e.widthSegments,e.heightSegments)}}var QG=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,qG=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ZG=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,$G=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ez=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,tz=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,nz="vec3 transformed = vec3( position );",iz=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,rz=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,sz=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,oz=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,az=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,lz=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,uz=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,cz=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,fz=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,hz=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,dz=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,pz=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,mz=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,gz=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,vz=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,yz=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,xz=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,_z=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Az=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Sz="gl_FragColor = linearToOutputTexel( gl_FragColor );",Mz=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,wz=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Ez=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Tz=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Cz=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,bz=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Rz=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Pz=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Bz=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Lz=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Iz=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Dz=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Fz=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Nz=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Uz=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Oz=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,kz=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Gz=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,zz=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Hz=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Vz=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Wz=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif`,jz=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Xz=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Jz=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Kz=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Yz=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Qz=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,qz=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Zz=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,$z=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,eH=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,tH=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,nH=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,iH=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,rH=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,sH=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,oH=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,aH=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,lH=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,uH=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#ifdef USE_NORMALMAP_TANGENTSPACE
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,cH=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,fH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,hH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,dH=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,pH=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,mH=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,gH=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,vH=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,yH=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,xH=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,_H=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,AH=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,SH=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,MH=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,wH=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,EH=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,TH=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,CH=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,bH=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,RH=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,PH=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,BH=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,LH=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,IH=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,DH=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,FH=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,NH=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,UH=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,OH=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,kH=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,GH=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,zH=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,HH=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,VH=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,WH=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const jH=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,XH=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,JH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,KH=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,YH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,QH=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,qH=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,ZH=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,$H=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,e4=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,t4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,n4=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,i4=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,r4=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,s4=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,o4=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,a4=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,l4=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,u4=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,c4=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,f4=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,h4=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,d4=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,p4=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,m4=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,g4=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,v4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,y4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,x4=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,_4=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,A4=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,S4=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,M4=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,w4=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,mt={alphamap_fragment:QG,alphamap_pars_fragment:qG,alphatest_fragment:ZG,alphatest_pars_fragment:$G,aomap_fragment:ez,aomap_pars_fragment:tz,begin_vertex:nz,beginnormal_vertex:iz,bsdfs:rz,iridescence_fragment:sz,bumpmap_pars_fragment:oz,clipping_planes_fragment:az,clipping_planes_pars_fragment:lz,clipping_planes_pars_vertex:uz,clipping_planes_vertex:cz,color_fragment:fz,color_pars_fragment:hz,color_pars_vertex:dz,color_vertex:pz,common:mz,cube_uv_reflection_fragment:gz,defaultnormal_vertex:vz,displacementmap_pars_vertex:yz,displacementmap_vertex:xz,emissivemap_fragment:_z,emissivemap_pars_fragment:Az,encodings_fragment:Sz,encodings_pars_fragment:Mz,envmap_fragment:wz,envmap_common_pars_fragment:Ez,envmap_pars_fragment:Tz,envmap_pars_vertex:Cz,envmap_physical_pars_fragment:kz,envmap_vertex:bz,fog_vertex:Rz,fog_pars_vertex:Pz,fog_fragment:Bz,fog_pars_fragment:Lz,gradientmap_pars_fragment:Iz,lightmap_fragment:Dz,lightmap_pars_fragment:Fz,lights_lambert_fragment:Nz,lights_lambert_pars_fragment:Uz,lights_pars_begin:Oz,lights_toon_fragment:Gz,lights_toon_pars_fragment:zz,lights_phong_fragment:Hz,lights_phong_pars_fragment:Vz,lights_physical_fragment:Wz,lights_physical_pars_fragment:jz,lights_fragment_begin:Xz,lights_fragment_maps:Jz,lights_fragment_end:Kz,logdepthbuf_fragment:Yz,logdepthbuf_pars_fragment:Qz,logdepthbuf_pars_vertex:qz,logdepthbuf_vertex:Zz,map_fragment:$z,map_pars_fragment:eH,map_particle_fragment:tH,map_particle_pars_fragment:nH,metalnessmap_fragment:iH,metalnessmap_pars_fragment:rH,morphcolor_vertex:sH,morphnormal_vertex:oH,morphtarget_pars_vertex:aH,morphtarget_vertex:lH,normal_fragment_begin:uH,normal_fragment_maps:cH,normal_pars_fragment:fH,normal_pars_vertex:hH,normal_vertex:dH,normalmap_pars_fragment:pH,clearcoat_normal_fragment_begin:mH,clearcoat_normal_fragment_maps:gH,clearcoat_pars_fragment:vH,iridescence_pars_fragment:yH,output_fragment:xH,packing:_H,premultiplied_alpha_fragment:AH,project_vertex:SH,dithering_fragment:MH,dithering_pars_fragment:wH,roughnessmap_fragment:EH,roughnessmap_pars_fragment:TH,shadowmap_pars_fragment:CH,shadowmap_pars_vertex:bH,shadowmap_vertex:RH,shadowmask_pars_fragment:PH,skinbase_vertex:BH,skinning_pars_vertex:LH,skinning_vertex:IH,skinnormal_vertex:DH,specularmap_fragment:FH,specularmap_pars_fragment:NH,tonemapping_fragment:UH,tonemapping_pars_fragment:OH,transmission_fragment:kH,transmission_pars_fragment:GH,uv_pars_fragment:zH,uv_pars_vertex:HH,uv_vertex:VH,worldpos_vertex:WH,background_vert:jH,background_frag:XH,backgroundCube_vert:JH,backgroundCube_frag:KH,cube_vert:YH,cube_frag:QH,depth_vert:qH,depth_frag:ZH,distanceRGBA_vert:$H,distanceRGBA_frag:e4,equirect_vert:t4,equirect_frag:n4,linedashed_vert:i4,linedashed_frag:r4,meshbasic_vert:s4,meshbasic_frag:o4,meshlambert_vert:a4,meshlambert_frag:l4,meshmatcap_vert:u4,meshmatcap_frag:c4,meshnormal_vert:f4,meshnormal_frag:h4,meshphong_vert:d4,meshphong_frag:p4,meshphysical_vert:m4,meshphysical_frag:g4,meshtoon_vert:v4,meshtoon_frag:y4,points_vert:x4,points_frag:_4,shadow_vert:A4,shadow_frag:S4,sprite_vert:M4,sprite_frag:w4},Pe={common:{diffuse:{value:new Be(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new St},alphaMap:{value:null},alphaMapTransform:{value:new St},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new St}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new St}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new St}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new St},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new St},normalScale:{value:new ye(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new St},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new St}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new St}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new St}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Be(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Be(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new St}},sprite:{diffuse:{value:new Be(16777215)},opacity:{value:1},center:{value:new ye(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new St},alphaMap:{value:null},alphaTest:{value:0}}},Gr={basic:{uniforms:hi([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.fog]),vertexShader:mt.meshbasic_vert,fragmentShader:mt.meshbasic_frag},lambert:{uniforms:hi([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,Pe.lights,{emissive:{value:new Be(0)}}]),vertexShader:mt.meshlambert_vert,fragmentShader:mt.meshlambert_frag},phong:{uniforms:hi([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,Pe.lights,{emissive:{value:new Be(0)},specular:{value:new Be(1118481)},shininess:{value:30}}]),vertexShader:mt.meshphong_vert,fragmentShader:mt.meshphong_frag},standard:{uniforms:hi([Pe.common,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.roughnessmap,Pe.metalnessmap,Pe.fog,Pe.lights,{emissive:{value:new Be(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:mt.meshphysical_vert,fragmentShader:mt.meshphysical_frag},toon:{uniforms:hi([Pe.common,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.gradientmap,Pe.fog,Pe.lights,{emissive:{value:new Be(0)}}]),vertexShader:mt.meshtoon_vert,fragmentShader:mt.meshtoon_frag},matcap:{uniforms:hi([Pe.common,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,{matcap:{value:null}}]),vertexShader:mt.meshmatcap_vert,fragmentShader:mt.meshmatcap_frag},points:{uniforms:hi([Pe.points,Pe.fog]),vertexShader:mt.points_vert,fragmentShader:mt.points_frag},dashed:{uniforms:hi([Pe.common,Pe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:mt.linedashed_vert,fragmentShader:mt.linedashed_frag},depth:{uniforms:hi([Pe.common,Pe.displacementmap]),vertexShader:mt.depth_vert,fragmentShader:mt.depth_frag},normal:{uniforms:hi([Pe.common,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,{opacity:{value:1}}]),vertexShader:mt.meshnormal_vert,fragmentShader:mt.meshnormal_frag},sprite:{uniforms:hi([Pe.sprite,Pe.fog]),vertexShader:mt.sprite_vert,fragmentShader:mt.sprite_frag},background:{uniforms:{uvTransform:{value:new St},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:mt.background_vert,fragmentShader:mt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:mt.backgroundCube_vert,fragmentShader:mt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:mt.cube_vert,fragmentShader:mt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:mt.equirect_vert,fragmentShader:mt.equirect_frag},distanceRGBA:{uniforms:hi([Pe.common,Pe.displacementmap,{referencePosition:{value:new F},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:mt.distanceRGBA_vert,fragmentShader:mt.distanceRGBA_frag},shadow:{uniforms:hi([Pe.lights,Pe.fog,{color:{value:new Be(0)},opacity:{value:1}}]),vertexShader:mt.shadow_vert,fragmentShader:mt.shadow_frag}};Gr.physical={uniforms:hi([Gr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new St},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new St},clearcoatNormalScale:{value:new ye(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new St},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new St},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new St},sheen:{value:0},sheenColor:{value:new Be(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new St},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new St},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new St},transmissionSamplerSize:{value:new ye},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new St},attenuationDistance:{value:0},attenuationColor:{value:new Be(0)},specularColor:{value:new Be(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new St},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new St}}]),vertexShader:mt.meshphysical_vert,fragmentShader:mt.meshphysical_frag};const hm={r:0,b:0,g:0};function E4(t,e,n,i,r,s,o){const a=new Be(0);let l=s===!0?0:1,u,h,d=null,p=0,m=null;function y(M,g){let x=!1,_=g.isScene===!0?g.background:null;switch(_&&_.isTexture&&(_=(g.backgroundBlurriness>0?n:e).get(_)),_===null?S(a,l):_&&_.isColor&&(S(_,1),x=!0),t.xr.getEnvironmentBlendMode()){case"opaque":x=!0;break;case"additive":i.buffers.color.setClear(0,0,0,1,o),x=!0;break;case"alpha-blend":i.buffers.color.setClear(0,0,0,0,o),x=!0;break}(t.autoClear||x)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),_&&(_.isCubeTexture||_.mapping===Sc)?(h===void 0&&(h=new Gn(new pa(1,1,1),new Ss({name:"BackgroundCubeMaterial",uniforms:cc(Gr.backgroundCube.uniforms),vertexShader:Gr.backgroundCube.vertexShader,fragmentShader:Gr.backgroundCube.fragmentShader,side:gi,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(R,P,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),h.material.uniforms.envMap.value=_,h.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,h.material.toneMapped=_.colorSpace!==dt,(d!==_||p!==_.version||m!==t.toneMapping)&&(h.material.needsUpdate=!0,d=_,p=_.version,m=t.toneMapping),h.layers.enableAll(),M.unshift(h,h.geometry,h.material,0,0,null)):_&&_.isTexture&&(u===void 0&&(u=new Gn(new Mc(2,2),new Ss({name:"BackgroundMaterial",uniforms:cc(Gr.background.uniforms),vertexShader:Gr.background.vertexShader,fragmentShader:Gr.background.fragmentShader,side:_s,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=_,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=_.colorSpace!==dt,_.matrixAutoUpdate===!0&&_.updateMatrix(),u.material.uniforms.uvTransform.value.copy(_.matrix),(d!==_||p!==_.version||m!==t.toneMapping)&&(u.material.needsUpdate=!0,d=_,p=_.version,m=t.toneMapping),u.layers.enableAll(),M.unshift(u,u.geometry,u.material,0,0,null))}function S(M,g){M.getRGB(hm,ZL(t)),i.buffers.color.setClear(hm.r,hm.g,hm.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(M,g=1){a.set(M),l=g,S(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(M){l=M,S(a,l)},render:y}}function T4(t,e,n,i){const r=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=M(null);let u=l,h=!1;function d(Y,J,ae,ne,I){let H=!1;if(o){const z=S(ne,ae,J);u!==z&&(u=z,m(u.object)),H=g(Y,ne,ae,I),H&&x(Y,ne,ae,I)}else{const z=J.wireframe===!0;(u.geometry!==ne.id||u.program!==ae.id||u.wireframe!==z)&&(u.geometry=ne.id,u.program=ae.id,u.wireframe=z,H=!0)}I!==null&&n.update(I,t.ELEMENT_ARRAY_BUFFER),(H||h)&&(h=!1,L(Y,J,ae,ne),I!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(I).buffer))}function p(){return i.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function m(Y){return i.isWebGL2?t.bindVertexArray(Y):s.bindVertexArrayOES(Y)}function y(Y){return i.isWebGL2?t.deleteVertexArray(Y):s.deleteVertexArrayOES(Y)}function S(Y,J,ae){const ne=ae.wireframe===!0;let I=a[Y.id];I===void 0&&(I={},a[Y.id]=I);let H=I[J.id];H===void 0&&(H={},I[J.id]=H);let z=H[ne];return z===void 0&&(z=M(p()),H[ne]=z),z}function M(Y){const J=[],ae=[],ne=[];for(let I=0;I<r;I++)J[I]=0,ae[I]=0,ne[I]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:J,enabledAttributes:ae,attributeDivisors:ne,object:Y,attributes:{},index:null}}function g(Y,J,ae,ne){const I=u.attributes,H=J.attributes;let z=0;const $=ae.getAttributes();for(const Z in $)if($[Z].location>=0){const ie=I[Z];let Ae=H[Z];if(Ae===void 0&&(Z==="instanceMatrix"&&Y.instanceMatrix&&(Ae=Y.instanceMatrix),Z==="instanceColor"&&Y.instanceColor&&(Ae=Y.instanceColor)),ie===void 0||ie.attribute!==Ae||Ae&&ie.data!==Ae.data)return!0;z++}return u.attributesNum!==z||u.index!==ne}function x(Y,J,ae,ne){const I={},H=J.attributes;let z=0;const $=ae.getAttributes();for(const Z in $)if($[Z].location>=0){let ie=H[Z];ie===void 0&&(Z==="instanceMatrix"&&Y.instanceMatrix&&(ie=Y.instanceMatrix),Z==="instanceColor"&&Y.instanceColor&&(ie=Y.instanceColor));const Ae={};Ae.attribute=ie,ie&&ie.data&&(Ae.data=ie.data),I[Z]=Ae,z++}u.attributes=I,u.attributesNum=z,u.index=ne}function _(){const Y=u.newAttributes;for(let J=0,ae=Y.length;J<ae;J++)Y[J]=0}function w(Y){C(Y,0)}function C(Y,J){const ae=u.newAttributes,ne=u.enabledAttributes,I=u.attributeDivisors;ae[Y]=1,ne[Y]===0&&(t.enableVertexAttribArray(Y),ne[Y]=1),I[Y]!==J&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Y,J),I[Y]=J)}function R(){const Y=u.newAttributes,J=u.enabledAttributes;for(let ae=0,ne=J.length;ae<ne;ae++)J[ae]!==Y[ae]&&(t.disableVertexAttribArray(ae),J[ae]=0)}function P(Y,J,ae,ne,I,H){i.isWebGL2===!0&&(ae===t.INT||ae===t.UNSIGNED_INT)?t.vertexAttribIPointer(Y,J,ae,I,H):t.vertexAttribPointer(Y,J,ae,ne,I,H)}function L(Y,J,ae,ne){if(i.isWebGL2===!1&&(Y.isInstancedMesh||ne.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;_();const I=ne.attributes,H=ae.getAttributes(),z=J.defaultAttributeValues;for(const $ in H){const Z=H[$];if(Z.location>=0){let ee=I[$];if(ee===void 0&&($==="instanceMatrix"&&Y.instanceMatrix&&(ee=Y.instanceMatrix),$==="instanceColor"&&Y.instanceColor&&(ee=Y.instanceColor)),ee!==void 0){const ie=ee.normalized,Ae=ee.itemSize,ge=n.get(ee);if(ge===void 0)continue;const W=ge.buffer,Ve=ge.type,Je=ge.bytesPerElement;if(ee.isInterleavedBufferAttribute){const ve=ee.data,_e=ve.stride,me=ee.offset;if(ve.isInstancedInterleavedBuffer){for(let oe=0;oe<Z.locationSize;oe++)C(Z.location+oe,ve.meshPerAttribute);Y.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=ve.meshPerAttribute*ve.count)}else for(let oe=0;oe<Z.locationSize;oe++)w(Z.location+oe);t.bindBuffer(t.ARRAY_BUFFER,W);for(let oe=0;oe<Z.locationSize;oe++)P(Z.location+oe,Ae/Z.locationSize,Ve,ie,_e*Je,(me+Ae/Z.locationSize*oe)*Je)}else{if(ee.isInstancedBufferAttribute){for(let ve=0;ve<Z.locationSize;ve++)C(Z.location+ve,ee.meshPerAttribute);Y.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let ve=0;ve<Z.locationSize;ve++)w(Z.location+ve);t.bindBuffer(t.ARRAY_BUFFER,W);for(let ve=0;ve<Z.locationSize;ve++)P(Z.location+ve,Ae/Z.locationSize,Ve,ie,Ae*Je,Ae/Z.locationSize*ve*Je)}}else if(z!==void 0){const ie=z[$];if(ie!==void 0)switch(ie.length){case 2:t.vertexAttrib2fv(Z.location,ie);break;case 3:t.vertexAttrib3fv(Z.location,ie);break;case 4:t.vertexAttrib4fv(Z.location,ie);break;default:t.vertexAttrib1fv(Z.location,ie)}}}}R()}function b(){X();for(const Y in a){const J=a[Y];for(const ae in J){const ne=J[ae];for(const I in ne)y(ne[I].object),delete ne[I];delete J[ae]}delete a[Y]}}function B(Y){if(a[Y.id]===void 0)return;const J=a[Y.id];for(const ae in J){const ne=J[ae];for(const I in ne)y(ne[I].object),delete ne[I];delete J[ae]}delete a[Y.id]}function G(Y){for(const J in a){const ae=a[J];if(ae[Y.id]===void 0)continue;const ne=ae[Y.id];for(const I in ne)y(ne[I].object),delete ne[I];delete ae[Y.id]}}function X(){V(),h=!0,u!==l&&(u=l,m(u.object))}function V(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:X,resetDefaultState:V,dispose:b,releaseStatesOfGeometry:B,releaseStatesOfProgram:G,initAttributes:_,enableAttribute:w,disableUnusedAttributes:R}}function C4(t,e,n,i){const r=i.isWebGL2;let s;function o(u){s=u}function a(u,h){t.drawArrays(s,u,h),n.update(h,s,1)}function l(u,h,d){if(d===0)return;let p,m;if(r)p=t,m="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[m](s,u,h,d),n.update(h,s,d)}this.setMode=o,this.render=a,this.renderInstances=l}function b4(t,e,n){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(P){if(P==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),h=n.logarithmicDepthBuffer===!0,d=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),p=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=t.getParameter(t.MAX_TEXTURE_SIZE),y=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),S=t.getParameter(t.MAX_VERTEX_ATTRIBS),M=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),g=t.getParameter(t.MAX_VARYING_VECTORS),x=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),_=p>0,w=o||e.has("OES_texture_float"),C=_&&w,R=o?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:h,maxTextures:d,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:y,maxAttributes:S,maxVertexUniforms:M,maxVaryings:g,maxFragmentUniforms:x,vertexTextures:_,floatFragmentTextures:w,floatVertexTextures:C,maxSamples:R}}function R4(t){const e=this;let n=null,i=0,r=!1,s=!1;const o=new Io,a=new St,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const m=d.length!==0||p||i!==0||r;return r=p,i=d.length,m},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){n=h(d,p,0)},this.setState=function(d,p,m){const y=d.clippingPlanes,S=d.clipIntersection,M=d.clipShadows,g=t.get(d);if(!r||y===null||y.length===0||s&&!M)s?h(null):u();else{const x=s?0:i,_=x*4;let w=g.clippingState||null;l.value=w,w=h(y,p,_,m);for(let C=0;C!==_;++C)w[C]=n[C];g.clippingState=w,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=x}};function u(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(d,p,m,y){const S=d!==null?d.length:0;let M=null;if(S!==0){if(M=l.value,y!==!0||M===null){const g=m+S*4,x=p.matrixWorldInverse;a.getNormalMatrix(x),(M===null||M.length<g)&&(M=new Float32Array(g));for(let _=0,w=m;_!==S;++_,w+=4)o.copy(d[_]).applyMatrix4(x,a),o.normal.toArray(M,w),M[w+3]=o.constant}l.value=M,l.needsUpdate=!0}return e.numPlanes=S,e.numIntersection=0,M}}function P4(t){let e=new WeakMap;function n(o,a){return a===Eh?o.mapping=ra:a===Th&&(o.mapping=sa),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Eh||a===Th)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new wS(l.height/2);return u.fromEquirectangularTexture(t,o),e.set(o,u),o.addEventListener("dispose",r),n(u.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class ma extends od{constructor(e=-1,n=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+n,l=r-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Bu=4,nC=[.125,.215,.35,.446,.526,.582],ja=20,ix=new ma,iC=new Be;let rx=null;const Ga=(1+Math.sqrt(5))/2,ou=1/Ga,rC=[new F(1,1,1),new F(-1,1,1),new F(1,1,-1),new F(-1,1,-1),new F(0,Ga,ou),new F(0,Ga,-ou),new F(ou,0,Ga),new F(-ou,0,Ga),new F(Ga,ou,0),new F(-Ga,ou,0)];class T1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,r=100){rx=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=aC(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=oC(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(rx),e.scissorTest=!1,dm(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===ra||e.mapping===sa?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),rx=this._renderer.getRenderTarget();const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:rn,minFilter:rn,generateMipmaps:!1,type:ac,format:bi,colorSpace:Yr,depthBuffer:!1},r=sC(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=sC(e,n,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=B4(s)),this._blurMaterial=L4(s,e,n)}return r}_compileMaterial(e){const n=new Gn(this._lodPlanes[0],e);this._renderer.compile(n,ix)}_sceneToCubeUV(e,n,i,r){const a=new yn(90,1,n,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,p=h.toneMapping;h.getClearColor(iC),h.toneMapping=Xr,h.autoClear=!1;const m=new Wi({name:"PMREM.Background",side:gi,depthWrite:!1,depthTest:!1}),y=new Gn(new pa,m);let S=!1;const M=e.background;M?M.isColor&&(m.color.copy(M),e.background=null,S=!0):(m.color.copy(iC),S=!0);for(let g=0;g<6;g++){const x=g%3;x===0?(a.up.set(0,l[g],0),a.lookAt(u[g],0,0)):x===1?(a.up.set(0,0,l[g]),a.lookAt(0,u[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,u[g]));const _=this._cubeSize;dm(r,x*_,g>2?_:0,_,_),h.setRenderTarget(r),S&&h.render(y,a),h.render(e,a)}y.geometry.dispose(),y.material.dispose(),h.toneMapping=p,h.autoClear=d,e.background=M}_textureToCubeUV(e,n){const i=this._renderer,r=e.mapping===ra||e.mapping===sa;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=aC()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=oC());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Gn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;dm(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(o,ix)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=rC[(r-1)%rC.length];this._blur(e,r-1,r,s,o)}n.autoClear=i}_blur(e,n,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,n,i,r,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,d=new Gn(this._lodPlanes[r],u),p=u.uniforms,m=this._sizeLods[i]-1,y=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*ja-1),S=s/y,M=isFinite(s)?1+Math.floor(h*S):ja;M>ja&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${ja}`);const g=[];let x=0;for(let P=0;P<ja;++P){const L=P/S,b=Math.exp(-L*L/2);g.push(b),P===0?x+=b:P<M&&(x+=2*b)}for(let P=0;P<g.length;P++)g[P]=g[P]/x;p.envMap.value=e.texture,p.samples.value=M,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:_}=this;p.dTheta.value=y,p.mipInt.value=_-i;const w=this._sizeLods[r],C=3*w*(r>_-Bu?r-_+Bu:0),R=4*(this._cubeSize-w);dm(n,C,R,3*w,2*w),l.setRenderTarget(n),l.render(d,ix)}}function B4(t){const e=[],n=[],i=[];let r=t;const s=t-Bu+1+nC.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);n.push(a);let l=1/a;o>t-Bu?l=nC[o-t+Bu-1]:o===0&&(l=0),i.push(l);const u=1/(a-2),h=-u,d=1+u,p=[h,h,d,h,d,d,h,h,d,d,h,d],m=6,y=6,S=3,M=2,g=1,x=new Float32Array(S*y*m),_=new Float32Array(M*y*m),w=new Float32Array(g*y*m);for(let R=0;R<m;R++){const P=R%3*2/3-1,L=R>2?0:-1,b=[P,L,0,P+2/3,L,0,P+2/3,L+1,0,P,L,0,P+2/3,L+1,0,P,L+1,0];x.set(b,S*y*R),_.set(p,M*y*R);const B=[R,R,R,R,R,R];w.set(B,g*y*R)}const C=new ht;C.setAttribute("position",new Dt(x,S)),C.setAttribute("uv",new Dt(_,M)),C.setAttribute("faceIndex",new Dt(w,g)),e.push(C),r>Bu&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function sC(t,e,n){const i=new Qr(t,e,n);return i.texture.mapping=Sc,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function dm(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function L4(t,e,n){const i=new Float32Array(ja),r=new F(0,1,0);return new Ss({name:"SphericalGaussianBlur",defines:{n:ja,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:ES(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Qs,depthTest:!1,depthWrite:!1})}function oC(){return new Ss({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ES(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Qs,depthTest:!1,depthWrite:!1})}function aC(){return new Ss({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ES(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Qs,depthTest:!1,depthWrite:!1})}function ES(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function I4(t){let e=new WeakMap,n=null;function i(a){if(a&&a.isTexture){const l=a.mapping,u=l===Eh||l===Th,h=l===ra||l===sa;if(u||h)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return n===null&&(n=new T1(t)),d=u?n.fromEquirectangular(a,d):n.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(u&&d&&d.height>0||h&&d&&r(d)){n===null&&(n=new T1(t));const p=u?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function r(a){let l=0;const u=6;for(let h=0;h<u;h++)a[h]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:o}}function D4(t){const e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(i){i.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(i){const r=n(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function F4(t,e,n,i){const r={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const y in p.attributes)e.remove(p.attributes[y]);p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,n.memory.geometries--}function a(d,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,n.memory.geometries++),p}function l(d){const p=d.attributes;for(const y in p)e.update(p[y],t.ARRAY_BUFFER);const m=d.morphAttributes;for(const y in m){const S=m[y];for(let M=0,g=S.length;M<g;M++)e.update(S[M],t.ARRAY_BUFFER)}}function u(d){const p=[],m=d.index,y=d.attributes.position;let S=0;if(m!==null){const x=m.array;S=m.version;for(let _=0,w=x.length;_<w;_+=3){const C=x[_+0],R=x[_+1],P=x[_+2];p.push(C,R,R,P,P,C)}}else{const x=y.array;S=y.version;for(let _=0,w=x.length/3-1;_<w;_+=3){const C=_+0,R=_+1,P=_+2;p.push(C,R,R,P,P,C)}}const M=new(QL(p)?SS:AS)(p,1);M.version=S;const g=s.get(d);g&&e.remove(g),s.set(d,M)}function h(d){const p=s.get(d);if(p){const m=d.index;m!==null&&p.version<m.version&&u(d)}else u(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:h}}function N4(t,e,n,i){const r=i.isWebGL2;let s;function o(p){s=p}let a,l;function u(p){a=p.type,l=p.bytesPerElement}function h(p,m){t.drawElements(s,m,a,p*l),n.update(m,s,1)}function d(p,m,y){if(y===0)return;let S,M;if(r)S=t,M="drawElementsInstanced";else if(S=e.get("ANGLE_instanced_arrays"),M="drawElementsInstancedANGLE",S===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}S[M](s,m,a,p*l,y),n.update(m,s,y)}this.setMode=o,this.setIndex=u,this.render=h,this.renderInstances=d}function U4(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function O4(t,e){return t[0]-e[0]}function k4(t,e){return Math.abs(e[1])-Math.abs(t[1])}function G4(t,e,n){const i={},r=new Float32Array(8),s=new WeakMap,o=new Gt,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,h,d){const p=u.morphTargetInfluences;if(e.isWebGL2===!0){const y=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,S=y!==void 0?y.length:0;let M=s.get(h);if(M===void 0||M.count!==S){let J=function(){V.dispose(),s.delete(h),h.removeEventListener("dispose",J)};var m=J;M!==void 0&&M.texture.dispose();const _=h.morphAttributes.position!==void 0,w=h.morphAttributes.normal!==void 0,C=h.morphAttributes.color!==void 0,R=h.morphAttributes.position||[],P=h.morphAttributes.normal||[],L=h.morphAttributes.color||[];let b=0;_===!0&&(b=1),w===!0&&(b=2),C===!0&&(b=3);let B=h.attributes.position.count*b,G=1;B>e.maxTextureSize&&(G=Math.ceil(B/e.maxTextureSize),B=e.maxTextureSize);const X=new Float32Array(B*G*4*S),V=new D0(X,B,G,S);V.type=Xs,V.needsUpdate=!0;const Y=b*4;for(let ae=0;ae<S;ae++){const ne=R[ae],I=P[ae],H=L[ae],z=B*G*4*ae;for(let $=0;$<ne.count;$++){const Z=$*Y;_===!0&&(o.fromBufferAttribute(ne,$),X[z+Z+0]=o.x,X[z+Z+1]=o.y,X[z+Z+2]=o.z,X[z+Z+3]=0),w===!0&&(o.fromBufferAttribute(I,$),X[z+Z+4]=o.x,X[z+Z+5]=o.y,X[z+Z+6]=o.z,X[z+Z+7]=0),C===!0&&(o.fromBufferAttribute(H,$),X[z+Z+8]=o.x,X[z+Z+9]=o.y,X[z+Z+10]=o.z,X[z+Z+11]=H.itemSize===4?o.w:1)}}M={count:S,texture:V,size:new ye(B,G)},s.set(h,M),h.addEventListener("dispose",J)}let g=0;for(let _=0;_<p.length;_++)g+=p[_];const x=h.morphTargetsRelative?1:1-g;d.getUniforms().setValue(t,"morphTargetBaseInfluence",x),d.getUniforms().setValue(t,"morphTargetInfluences",p),d.getUniforms().setValue(t,"morphTargetsTexture",M.texture,n),d.getUniforms().setValue(t,"morphTargetsTextureSize",M.size)}else{const y=p===void 0?0:p.length;let S=i[h.id];if(S===void 0||S.length!==y){S=[];for(let w=0;w<y;w++)S[w]=[w,0];i[h.id]=S}for(let w=0;w<y;w++){const C=S[w];C[0]=w,C[1]=p[w]}S.sort(k4);for(let w=0;w<8;w++)w<y&&S[w][1]?(a[w][0]=S[w][0],a[w][1]=S[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort(O4);const M=h.morphAttributes.position,g=h.morphAttributes.normal;let x=0;for(let w=0;w<8;w++){const C=a[w],R=C[0],P=C[1];R!==Number.MAX_SAFE_INTEGER&&P?(M&&h.getAttribute("morphTarget"+w)!==M[R]&&h.setAttribute("morphTarget"+w,M[R]),g&&h.getAttribute("morphNormal"+w)!==g[R]&&h.setAttribute("morphNormal"+w,g[R]),r[w]=P,x+=P):(M&&h.hasAttribute("morphTarget"+w)===!0&&h.deleteAttribute("morphTarget"+w),g&&h.hasAttribute("morphNormal"+w)===!0&&h.deleteAttribute("morphNormal"+w),r[w]=0)}const _=h.morphTargetsRelative?1:1-x;d.getUniforms().setValue(t,"morphTargetBaseInfluence",_),d.getUniforms().setValue(t,"morphTargetInfluences",r)}}return{update:l}}function z4(t,e,n,i){let r=new WeakMap;function s(l){const u=i.render.frame,h=l.geometry,d=e.get(l,h);return r.get(d)!==u&&(e.update(d),r.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER)),d}function o(){r=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:s,dispose:o}}const tI=new $t,nI=new D0,iI=new _S,rI=new ad,lC=[],uC=[],cC=new Float32Array(16),fC=new Float32Array(9),hC=new Float32Array(4);function wc(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=lC[r];if(s===void 0&&(s=new Float32Array(r),lC[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function Bn(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Ln(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function N0(t,e){let n=uC[e];n===void 0&&(n=new Int32Array(e),uC[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function H4(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function V4(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Bn(n,e))return;t.uniform2fv(this.addr,e),Ln(n,e)}}function W4(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Bn(n,e))return;t.uniform3fv(this.addr,e),Ln(n,e)}}function j4(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Bn(n,e))return;t.uniform4fv(this.addr,e),Ln(n,e)}}function X4(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Bn(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ln(n,e)}else{if(Bn(n,i))return;hC.set(i),t.uniformMatrix2fv(this.addr,!1,hC),Ln(n,i)}}function J4(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Bn(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ln(n,e)}else{if(Bn(n,i))return;fC.set(i),t.uniformMatrix3fv(this.addr,!1,fC),Ln(n,i)}}function K4(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Bn(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ln(n,e)}else{if(Bn(n,i))return;cC.set(i),t.uniformMatrix4fv(this.addr,!1,cC),Ln(n,i)}}function Y4(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Q4(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Bn(n,e))return;t.uniform2iv(this.addr,e),Ln(n,e)}}function q4(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Bn(n,e))return;t.uniform3iv(this.addr,e),Ln(n,e)}}function Z4(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Bn(n,e))return;t.uniform4iv(this.addr,e),Ln(n,e)}}function $4(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function eV(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Bn(n,e))return;t.uniform2uiv(this.addr,e),Ln(n,e)}}function tV(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Bn(n,e))return;t.uniform3uiv(this.addr,e),Ln(n,e)}}function nV(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Bn(n,e))return;t.uniform4uiv(this.addr,e),Ln(n,e)}}function iV(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(e||tI,r)}function rV(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||iI,r)}function sV(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||rI,r)}function oV(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||nI,r)}function aV(t){switch(t){case 5126:return H4;case 35664:return V4;case 35665:return W4;case 35666:return j4;case 35674:return X4;case 35675:return J4;case 35676:return K4;case 5124:case 35670:return Y4;case 35667:case 35671:return Q4;case 35668:case 35672:return q4;case 35669:case 35673:return Z4;case 5125:return $4;case 36294:return eV;case 36295:return tV;case 36296:return nV;case 35678:case 36198:case 36298:case 36306:case 35682:return iV;case 35679:case 36299:case 36307:return rV;case 35680:case 36300:case 36308:case 36293:return sV;case 36289:case 36303:case 36311:case 36292:return oV}}function lV(t,e){t.uniform1fv(this.addr,e)}function uV(t,e){const n=wc(e,this.size,2);t.uniform2fv(this.addr,n)}function cV(t,e){const n=wc(e,this.size,3);t.uniform3fv(this.addr,n)}function fV(t,e){const n=wc(e,this.size,4);t.uniform4fv(this.addr,n)}function hV(t,e){const n=wc(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function dV(t,e){const n=wc(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function pV(t,e){const n=wc(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function mV(t,e){t.uniform1iv(this.addr,e)}function gV(t,e){t.uniform2iv(this.addr,e)}function vV(t,e){t.uniform3iv(this.addr,e)}function yV(t,e){t.uniform4iv(this.addr,e)}function xV(t,e){t.uniform1uiv(this.addr,e)}function _V(t,e){t.uniform2uiv(this.addr,e)}function AV(t,e){t.uniform3uiv(this.addr,e)}function SV(t,e){t.uniform4uiv(this.addr,e)}function MV(t,e,n){const i=this.cache,r=e.length,s=N0(n,r);Bn(i,s)||(t.uniform1iv(this.addr,s),Ln(i,s));for(let o=0;o!==r;++o)n.setTexture2D(e[o]||tI,s[o])}function wV(t,e,n){const i=this.cache,r=e.length,s=N0(n,r);Bn(i,s)||(t.uniform1iv(this.addr,s),Ln(i,s));for(let o=0;o!==r;++o)n.setTexture3D(e[o]||iI,s[o])}function EV(t,e,n){const i=this.cache,r=e.length,s=N0(n,r);Bn(i,s)||(t.uniform1iv(this.addr,s),Ln(i,s));for(let o=0;o!==r;++o)n.setTextureCube(e[o]||rI,s[o])}function TV(t,e,n){const i=this.cache,r=e.length,s=N0(n,r);Bn(i,s)||(t.uniform1iv(this.addr,s),Ln(i,s));for(let o=0;o!==r;++o)n.setTexture2DArray(e[o]||nI,s[o])}function CV(t){switch(t){case 5126:return lV;case 35664:return uV;case 35665:return cV;case 35666:return fV;case 35674:return hV;case 35675:return dV;case 35676:return pV;case 5124:case 35670:return mV;case 35667:case 35671:return gV;case 35668:case 35672:return vV;case 35669:case 35673:return yV;case 5125:return xV;case 36294:return _V;case 36295:return AV;case 36296:return SV;case 35678:case 36198:case 36298:case 36306:case 35682:return MV;case 35679:case 36299:case 36307:return wV;case 35680:case 36300:case 36308:case 36293:return EV;case 36289:case 36303:case 36311:case 36292:return TV}}class bV{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.setValue=aV(n.type)}}class RV{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.size=n.size,this.setValue=CV(n.type)}}class PV{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,n[a.id],i)}}}const sx=/(\w+)(\])?(\[|\.)?/g;function dC(t,e){t.seq.push(e),t.map[e.id]=e}function BV(t,e,n){const i=t.name,r=i.length;for(sx.lastIndex=0;;){const s=sx.exec(i),o=sx.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===r){dC(n,u===void 0?new bV(a,t,e):new RV(a,t,e));break}else{let d=n.map[a];d===void 0&&(d=new PV(a),dC(n,d)),n=d}}}class hg{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(n,r),o=e.getUniformLocation(n,s.name);BV(s,o,this)}}setValue(e,n,i,r){const s=this.map[n];s!==void 0&&s.setValue(e,i,r)}setOptional(e,n,i){const r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,n){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in n&&i.push(o)}return i}}function pC(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}let LV=0;function IV(t,e){const n=t.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return i.join(`
`)}function DV(t){switch(t){case Yr:return["Linear","( value )"];case dt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),["Linear","( value )"]}}function mC(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),r=t.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+r+`

`+IV(t.getShaderSource(e),o)}else return r}function FV(t,e){const n=DV(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function NV(t,e){let n;switch(e){case _L:n="Linear";break;case AL:n="Reinhard";break;case SL:n="OptimizedCineon";break;case hS:n="ACESFilmic";break;case ML:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function UV(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ff).join(`
`)}function OV(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function kV(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=t.getActiveAttrib(e,r),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function Ff(t){return t!==""}function gC(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function vC(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const GV=/^[ \t]*#include +<([\w\d./]+)>/gm;function C1(t){return t.replace(GV,zV)}function zV(t,e){const n=mt[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return C1(n)}const HV=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function yC(t){return t.replace(HV,VV)}function VV(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function xC(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function WV(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===P0?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Kf?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Ur&&(e="SHADOWMAP_TYPE_VSM"),e}function jV(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ra:case sa:e="ENVMAP_TYPE_CUBE";break;case Sc:e="ENVMAP_TYPE_CUBE_UV";break}return e}function XV(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case sa:e="ENVMAP_MODE_REFRACTION";break}return e}function JV(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case id:e="ENVMAP_BLENDING_MULTIPLY";break;case yL:e="ENVMAP_BLENDING_MIX";break;case xL:e="ENVMAP_BLENDING_ADD";break}return e}function KV(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function YV(t,e,n,i){const r=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=WV(n),u=jV(n),h=XV(n),d=JV(n),p=KV(n),m=n.isWebGL2?"":UV(n),y=OV(s),S=r.createProgram();let M,g,x=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(M=[y].filter(Ff).join(`
`),M.length>0&&(M+=`
`),g=[m,y].filter(Ff).join(`
`),g.length>0&&(g+=`
`)):(M=[xC(n),"#define SHADER_NAME "+n.shaderName,y,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ff).join(`
`),g=[m,xC(n),"#define SHADER_NAME "+n.shaderName,y,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",n.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Xr?"#define TONE_MAPPING":"",n.toneMapping!==Xr?mt.tonemapping_pars_fragment:"",n.toneMapping!==Xr?NV("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",mt.encodings_pars_fragment,FV("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Ff).join(`
`)),o=C1(o),o=gC(o,n),o=vC(o,n),a=C1(a),a=gC(a,n),a=vC(a,n),o=yC(o),a=yC(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,M=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,g=["#define varying in",n.glslVersion===w1?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===w1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const _=x+M+o,w=x+g+a,C=pC(r,r.VERTEX_SHADER,_),R=pC(r,r.FRAGMENT_SHADER,w);if(r.attachShader(S,C),r.attachShader(S,R),n.index0AttributeName!==void 0?r.bindAttribLocation(S,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(S,0,"position"),r.linkProgram(S),t.debug.checkShaderErrors){const b=r.getProgramInfoLog(S).trim(),B=r.getShaderInfoLog(C).trim(),G=r.getShaderInfoLog(R).trim();let X=!0,V=!0;if(r.getProgramParameter(S,r.LINK_STATUS)===!1)if(X=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(r,S,C,R);else{const Y=mC(r,C,"vertex"),J=mC(r,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(S,r.VALIDATE_STATUS)+`

Program Info Log: `+b+`
`+Y+`
`+J)}else b!==""?console.warn("THREE.WebGLProgram: Program Info Log:",b):(B===""||G==="")&&(V=!1);V&&(this.diagnostics={runnable:X,programLog:b,vertexShader:{log:B,prefix:M},fragmentShader:{log:G,prefix:g}})}r.deleteShader(C),r.deleteShader(R);let P;this.getUniforms=function(){return P===void 0&&(P=new hg(r,S)),P};let L;return this.getAttributes=function(){return L===void 0&&(L=kV(r,S)),L},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(S),this.program=void 0},this.name=n.shaderName,this.id=LV++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=C,this.fragmentShader=R,this}let QV=0;class qV{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new ZV(e),n.set(e,i)),i}}class ZV{constructor(e){this.id=QV++,this.code=e,this.usedTimes=0}}function $V(t,e,n,i,r,s,o){const a=new ll,l=new qV,u=[],h=r.isWebGL2,d=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(b){return b===1?"uv1":b===2?"uv2":b===3?"uv3":"uv"}function M(b,B,G,X,V){const Y=X.fog,J=V.geometry,ae=b.isMeshStandardMaterial?X.environment:null,ne=(b.isMeshStandardMaterial?n:e).get(b.envMap||ae),I=ne&&ne.mapping===Sc?ne.image.height:null,H=y[b.type];b.precision!==null&&(m=r.getMaxPrecision(b.precision),m!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",m,"instead."));const z=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,$=z!==void 0?z.length:0;let Z=0;J.morphAttributes.position!==void 0&&(Z=1),J.morphAttributes.normal!==void 0&&(Z=2),J.morphAttributes.color!==void 0&&(Z=3);let ee,ie,Ae,ge;if(H){const Nt=Gr[H];ee=Nt.vertexShader,ie=Nt.fragmentShader}else ee=b.vertexShader,ie=b.fragmentShader,l.update(b),Ae=l.getVertexShaderID(b),ge=l.getFragmentShaderID(b);const W=t.getRenderTarget(),Ve=V.isInstancedMesh===!0,Je=!!b.map,ve=!!b.matcap,_e=!!ne,me=!!b.aoMap,oe=!!b.lightMap,xe=!!b.bumpMap,De=!!b.normalMap,Re=!!b.displacementMap,He=!!b.emissiveMap,Qe=!!b.metalnessMap,We=!!b.roughnessMap,rt=b.clearcoat>0,Mt=b.iridescence>0,k=b.sheen>0,D=b.transmission>0,le=rt&&!!b.clearcoatMap,Se=rt&&!!b.clearcoatNormalMap,we=rt&&!!b.clearcoatRoughnessMap,be=Mt&&!!b.iridescenceMap,nt=Mt&&!!b.iridescenceThicknessMap,Ne=k&&!!b.sheenColorMap,de=k&&!!b.sheenRoughnessMap,ze=!!b.specularMap,qe=!!b.specularColorMap,et=!!b.specularIntensityMap,Oe=D&&!!b.transmissionMap,Ke=D&&!!b.thicknessMap,wt=!!b.gradientMap,Ft=!!b.alphaMap,en=b.alphaTest>0,K=!!b.extensions,fe=!!J.attributes.uv1,Me=!!J.attributes.uv2,Fe=!!J.attributes.uv3;return{isWebGL2:h,shaderID:H,shaderName:b.type,vertexShader:ee,fragmentShader:ie,defines:b.defines,customVertexShaderID:Ae,customFragmentShaderID:ge,isRawShaderMaterial:b.isRawShaderMaterial===!0,glslVersion:b.glslVersion,precision:m,instancing:Ve,instancingColor:Ve&&V.instanceColor!==null,supportsVertexTextures:p,outputColorSpace:W===null?t.outputColorSpace:W.isXRRenderTarget===!0?W.texture.colorSpace:Yr,map:Je,matcap:ve,envMap:_e,envMapMode:_e&&ne.mapping,envMapCubeUVHeight:I,aoMap:me,lightMap:oe,bumpMap:xe,normalMap:De,displacementMap:p&&Re,emissiveMap:He,normalMapObjectSpace:De&&b.normalMapType===jL,normalMapTangentSpace:De&&b.normalMapType===da,metalnessMap:Qe,roughnessMap:We,clearcoat:rt,clearcoatMap:le,clearcoatNormalMap:Se,clearcoatRoughnessMap:we,iridescence:Mt,iridescenceMap:be,iridescenceThicknessMap:nt,sheen:k,sheenColorMap:Ne,sheenRoughnessMap:de,specularMap:ze,specularColorMap:qe,specularIntensityMap:et,transmission:D,transmissionMap:Oe,thicknessMap:Ke,gradientMap:wt,opaque:b.transparent===!1&&b.blending===rl,alphaMap:Ft,alphaTest:en,combine:b.combine,mapUv:Je&&S(b.map.channel),aoMapUv:me&&S(b.aoMap.channel),lightMapUv:oe&&S(b.lightMap.channel),bumpMapUv:xe&&S(b.bumpMap.channel),normalMapUv:De&&S(b.normalMap.channel),displacementMapUv:Re&&S(b.displacementMap.channel),emissiveMapUv:He&&S(b.emissiveMap.channel),metalnessMapUv:Qe&&S(b.metalnessMap.channel),roughnessMapUv:We&&S(b.roughnessMap.channel),clearcoatMapUv:le&&S(b.clearcoatMap.channel),clearcoatNormalMapUv:Se&&S(b.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:we&&S(b.clearcoatRoughnessMap.channel),iridescenceMapUv:be&&S(b.iridescenceMap.channel),iridescenceThicknessMapUv:nt&&S(b.iridescenceThicknessMap.channel),sheenColorMapUv:Ne&&S(b.sheenColorMap.channel),sheenRoughnessMapUv:de&&S(b.sheenRoughnessMap.channel),specularMapUv:ze&&S(b.specularMap.channel),specularColorMapUv:qe&&S(b.specularColorMap.channel),specularIntensityMapUv:et&&S(b.specularIntensityMap.channel),transmissionMapUv:Oe&&S(b.transmissionMap.channel),thicknessMapUv:Ke&&S(b.thicknessMap.channel),alphaMapUv:Ft&&S(b.alphaMap.channel),vertexTangents:De&&!!J.attributes.tangent,vertexColors:b.vertexColors,vertexAlphas:b.vertexColors===!0&&!!J.attributes.color&&J.attributes.color.itemSize===4,vertexUv1s:fe,vertexUv2s:Me,vertexUv3s:Fe,pointsUvs:V.isPoints===!0&&!!J.attributes.uv&&(Je||Ft),fog:!!Y,useFog:b.fog===!0,fogExp2:Y&&Y.isFogExp2,flatShading:b.flatShading===!0,sizeAttenuation:b.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:V.isSkinnedMesh===!0,morphTargets:J.morphAttributes.position!==void 0,morphNormals:J.morphAttributes.normal!==void 0,morphColors:J.morphAttributes.color!==void 0,morphTargetsCount:$,morphTextureStride:Z,numDirLights:B.directional.length,numPointLights:B.point.length,numSpotLights:B.spot.length,numSpotLightMaps:B.spotLightMap.length,numRectAreaLights:B.rectArea.length,numHemiLights:B.hemi.length,numDirLightShadows:B.directionalShadowMap.length,numPointLightShadows:B.pointShadowMap.length,numSpotLightShadows:B.spotShadowMap.length,numSpotLightShadowsWithMaps:B.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:b.dithering,shadowMapEnabled:t.shadowMap.enabled&&G.length>0,shadowMapType:t.shadowMap.type,toneMapping:b.toneMapped?t.toneMapping:Xr,useLegacyLights:t.useLegacyLights,premultipliedAlpha:b.premultipliedAlpha,doubleSided:b.side===yr,flipSided:b.side===gi,useDepthPacking:b.depthPacking>=0,depthPacking:b.depthPacking||0,index0AttributeName:b.index0AttributeName,extensionDerivatives:K&&b.extensions.derivatives===!0,extensionFragDepth:K&&b.extensions.fragDepth===!0,extensionDrawBuffers:K&&b.extensions.drawBuffers===!0,extensionShaderTextureLOD:K&&b.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:h||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||i.has("EXT_shader_texture_lod"),customProgramCacheKey:b.customProgramCacheKey()}}function g(b){const B=[];if(b.shaderID?B.push(b.shaderID):(B.push(b.customVertexShaderID),B.push(b.customFragmentShaderID)),b.defines!==void 0)for(const G in b.defines)B.push(G),B.push(b.defines[G]);return b.isRawShaderMaterial===!1&&(x(B,b),_(B,b),B.push(t.outputColorSpace)),B.push(b.customProgramCacheKey),B.join()}function x(b,B){b.push(B.precision),b.push(B.outputColorSpace),b.push(B.envMapMode),b.push(B.envMapCubeUVHeight),b.push(B.mapUv),b.push(B.alphaMapUv),b.push(B.lightMapUv),b.push(B.aoMapUv),b.push(B.bumpMapUv),b.push(B.normalMapUv),b.push(B.displacementMapUv),b.push(B.emissiveMapUv),b.push(B.metalnessMapUv),b.push(B.roughnessMapUv),b.push(B.clearcoatMapUv),b.push(B.clearcoatNormalMapUv),b.push(B.clearcoatRoughnessMapUv),b.push(B.iridescenceMapUv),b.push(B.iridescenceThicknessMapUv),b.push(B.sheenColorMapUv),b.push(B.sheenRoughnessMapUv),b.push(B.specularMapUv),b.push(B.specularColorMapUv),b.push(B.specularIntensityMapUv),b.push(B.transmissionMapUv),b.push(B.thicknessMapUv),b.push(B.combine),b.push(B.fogExp2),b.push(B.sizeAttenuation),b.push(B.morphTargetsCount),b.push(B.morphAttributeCount),b.push(B.numDirLights),b.push(B.numPointLights),b.push(B.numSpotLights),b.push(B.numSpotLightMaps),b.push(B.numHemiLights),b.push(B.numRectAreaLights),b.push(B.numDirLightShadows),b.push(B.numPointLightShadows),b.push(B.numSpotLightShadows),b.push(B.numSpotLightShadowsWithMaps),b.push(B.shadowMapType),b.push(B.toneMapping),b.push(B.numClippingPlanes),b.push(B.numClipIntersection),b.push(B.depthPacking)}function _(b,B){a.disableAll(),B.isWebGL2&&a.enable(0),B.supportsVertexTextures&&a.enable(1),B.instancing&&a.enable(2),B.instancingColor&&a.enable(3),B.matcap&&a.enable(4),B.envMap&&a.enable(5),B.normalMapObjectSpace&&a.enable(6),B.normalMapTangentSpace&&a.enable(7),B.clearcoat&&a.enable(8),B.iridescence&&a.enable(9),B.alphaTest&&a.enable(10),B.vertexColors&&a.enable(11),B.vertexAlphas&&a.enable(12),B.vertexUv1s&&a.enable(13),B.vertexUv2s&&a.enable(14),B.vertexUv3s&&a.enable(15),B.vertexTangents&&a.enable(16),b.push(a.mask),a.disableAll(),B.fog&&a.enable(0),B.useFog&&a.enable(1),B.flatShading&&a.enable(2),B.logarithmicDepthBuffer&&a.enable(3),B.skinning&&a.enable(4),B.morphTargets&&a.enable(5),B.morphNormals&&a.enable(6),B.morphColors&&a.enable(7),B.premultipliedAlpha&&a.enable(8),B.shadowMapEnabled&&a.enable(9),B.useLegacyLights&&a.enable(10),B.doubleSided&&a.enable(11),B.flipSided&&a.enable(12),B.useDepthPacking&&a.enable(13),B.dithering&&a.enable(14),B.transmission&&a.enable(15),B.sheen&&a.enable(16),B.opaque&&a.enable(17),B.pointsUvs&&a.enable(18),b.push(a.mask)}function w(b){const B=y[b.type];let G;if(B){const X=Gr[B];G=$L.clone(X.uniforms)}else G=b.uniforms;return G}function C(b,B){let G;for(let X=0,V=u.length;X<V;X++){const Y=u[X];if(Y.cacheKey===B){G=Y,++G.usedTimes;break}}return G===void 0&&(G=new YV(t,B,b,s),u.push(G)),G}function R(b){if(--b.usedTimes===0){const B=u.indexOf(b);u[B]=u[u.length-1],u.pop(),b.destroy()}}function P(b){l.remove(b)}function L(){l.dispose()}return{getParameters:M,getProgramCacheKey:g,getUniforms:w,acquireProgram:C,releaseProgram:R,releaseShaderCache:P,programs:u,dispose:L}}function e5(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function i(s,o,a){t.get(s)[o]=a}function r(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:r}}function t5(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function _C(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function AC(){const t=[];let e=0;const n=[],i=[],r=[];function s(){e=0,n.length=0,i.length=0,r.length=0}function o(d,p,m,y,S,M){let g=t[e];return g===void 0?(g={id:d.id,object:d,geometry:p,material:m,groupOrder:y,renderOrder:d.renderOrder,z:S,group:M},t[e]=g):(g.id=d.id,g.object=d,g.geometry=p,g.material=m,g.groupOrder=y,g.renderOrder=d.renderOrder,g.z=S,g.group=M),e++,g}function a(d,p,m,y,S,M){const g=o(d,p,m,y,S,M);m.transmission>0?i.push(g):m.transparent===!0?r.push(g):n.push(g)}function l(d,p,m,y,S,M){const g=o(d,p,m,y,S,M);m.transmission>0?i.unshift(g):m.transparent===!0?r.unshift(g):n.unshift(g)}function u(d,p){n.length>1&&n.sort(d||t5),i.length>1&&i.sort(p||_C),r.length>1&&r.sort(p||_C)}function h(){for(let d=e,p=t.length;d<p;d++){const m=t[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:n,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:h,sort:u}}function n5(){let t=new WeakMap;function e(i,r){const s=t.get(i);let o;return s===void 0?(o=new AC,t.set(i,[o])):r>=s.length?(o=new AC,s.push(o)):o=s[r],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function i5(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new F,color:new Be};break;case"SpotLight":n={position:new F,direction:new F,color:new Be,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new F,color:new Be,distance:0,decay:0};break;case"HemisphereLight":n={direction:new F,skyColor:new Be,groundColor:new Be};break;case"RectAreaLight":n={color:new Be,position:new F,halfWidth:new F,halfHeight:new F};break}return t[e.id]=n,n}}}function r5(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ye};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ye};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ye,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let s5=0;function o5(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function a5(t,e){const n=new i5,i=r5(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let h=0;h<9;h++)r.probe.push(new F);const s=new F,o=new st,a=new st;function l(h,d){let p=0,m=0,y=0;for(let G=0;G<9;G++)r.probe[G].set(0,0,0);let S=0,M=0,g=0,x=0,_=0,w=0,C=0,R=0,P=0,L=0;h.sort(o5);const b=d===!0?Math.PI:1;for(let G=0,X=h.length;G<X;G++){const V=h[G],Y=V.color,J=V.intensity,ae=V.distance,ne=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)p+=Y.r*J*b,m+=Y.g*J*b,y+=Y.b*J*b;else if(V.isLightProbe)for(let I=0;I<9;I++)r.probe[I].addScaledVector(V.sh.coefficients[I],J);else if(V.isDirectionalLight){const I=n.get(V);if(I.color.copy(V.color).multiplyScalar(V.intensity*b),V.castShadow){const H=V.shadow,z=i.get(V);z.shadowBias=H.bias,z.shadowNormalBias=H.normalBias,z.shadowRadius=H.radius,z.shadowMapSize=H.mapSize,r.directionalShadow[S]=z,r.directionalShadowMap[S]=ne,r.directionalShadowMatrix[S]=V.shadow.matrix,w++}r.directional[S]=I,S++}else if(V.isSpotLight){const I=n.get(V);I.position.setFromMatrixPosition(V.matrixWorld),I.color.copy(Y).multiplyScalar(J*b),I.distance=ae,I.coneCos=Math.cos(V.angle),I.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),I.decay=V.decay,r.spot[g]=I;const H=V.shadow;if(V.map&&(r.spotLightMap[P]=V.map,P++,H.updateMatrices(V),V.castShadow&&L++),r.spotLightMatrix[g]=H.matrix,V.castShadow){const z=i.get(V);z.shadowBias=H.bias,z.shadowNormalBias=H.normalBias,z.shadowRadius=H.radius,z.shadowMapSize=H.mapSize,r.spotShadow[g]=z,r.spotShadowMap[g]=ne,R++}g++}else if(V.isRectAreaLight){const I=n.get(V);I.color.copy(Y).multiplyScalar(J),I.halfWidth.set(V.width*.5,0,0),I.halfHeight.set(0,V.height*.5,0),r.rectArea[x]=I,x++}else if(V.isPointLight){const I=n.get(V);if(I.color.copy(V.color).multiplyScalar(V.intensity*b),I.distance=V.distance,I.decay=V.decay,V.castShadow){const H=V.shadow,z=i.get(V);z.shadowBias=H.bias,z.shadowNormalBias=H.normalBias,z.shadowRadius=H.radius,z.shadowMapSize=H.mapSize,z.shadowCameraNear=H.camera.near,z.shadowCameraFar=H.camera.far,r.pointShadow[M]=z,r.pointShadowMap[M]=ne,r.pointShadowMatrix[M]=V.shadow.matrix,C++}r.point[M]=I,M++}else if(V.isHemisphereLight){const I=n.get(V);I.skyColor.copy(V.color).multiplyScalar(J*b),I.groundColor.copy(V.groundColor).multiplyScalar(J*b),r.hemi[_]=I,_++}}x>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Pe.LTC_FLOAT_1,r.rectAreaLTC2=Pe.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Pe.LTC_HALF_1,r.rectAreaLTC2=Pe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=m,r.ambient[2]=y;const B=r.hash;(B.directionalLength!==S||B.pointLength!==M||B.spotLength!==g||B.rectAreaLength!==x||B.hemiLength!==_||B.numDirectionalShadows!==w||B.numPointShadows!==C||B.numSpotShadows!==R||B.numSpotMaps!==P)&&(r.directional.length=S,r.spot.length=g,r.rectArea.length=x,r.point.length=M,r.hemi.length=_,r.directionalShadow.length=w,r.directionalShadowMap.length=w,r.pointShadow.length=C,r.pointShadowMap.length=C,r.spotShadow.length=R,r.spotShadowMap.length=R,r.directionalShadowMatrix.length=w,r.pointShadowMatrix.length=C,r.spotLightMatrix.length=R+P-L,r.spotLightMap.length=P,r.numSpotLightShadowsWithMaps=L,B.directionalLength=S,B.pointLength=M,B.spotLength=g,B.rectAreaLength=x,B.hemiLength=_,B.numDirectionalShadows=w,B.numPointShadows=C,B.numSpotShadows=R,B.numSpotMaps=P,r.version=s5++)}function u(h,d){let p=0,m=0,y=0,S=0,M=0;const g=d.matrixWorldInverse;for(let x=0,_=h.length;x<_;x++){const w=h[x];if(w.isDirectionalLight){const C=r.directional[p];C.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),p++}else if(w.isSpotLight){const C=r.spot[y];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(g),C.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),y++}else if(w.isRectAreaLight){const C=r.rectArea[S];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(g),a.identity(),o.copy(w.matrixWorld),o.premultiply(g),a.extractRotation(o),C.halfWidth.set(w.width*.5,0,0),C.halfHeight.set(0,w.height*.5,0),C.halfWidth.applyMatrix4(a),C.halfHeight.applyMatrix4(a),S++}else if(w.isPointLight){const C=r.point[m];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(g),m++}else if(w.isHemisphereLight){const C=r.hemi[M];C.direction.setFromMatrixPosition(w.matrixWorld),C.direction.transformDirection(g),M++}}}return{setup:l,setupView:u,state:r}}function SC(t,e){const n=new a5(t,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(d){i.push(d)}function a(d){r.push(d)}function l(d){n.setup(i,d)}function u(d){n.setupView(i,d)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function l5(t,e){let n=new WeakMap;function i(s,o=0){const a=n.get(s);let l;return a===void 0?(l=new SC(t,e),n.set(s,[l])):o>=a.length?(l=new SC(t,e),a.push(l)):l=a[o],l}function r(){n=new WeakMap}return{get:i,dispose:r}}class TS extends Tn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=VL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class CS extends Tn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const u5=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,c5=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function f5(t,e,n){let i=new F0;const r=new ye,s=new ye,o=new Gt,a=new TS({depthPacking:WL}),l=new CS,u={},h=n.maxTextureSize,d={[_s]:gi,[gi]:_s,[yr]:yr},p=new Ss({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ye},radius:{value:4}},vertexShader:u5,fragmentShader:c5}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const y=new ht;y.setAttribute("position",new Dt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new Gn(y,p),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=P0;let g=this.type;this.render=function(C,R,P){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||C.length===0)return;const L=t.getRenderTarget(),b=t.getActiveCubeFace(),B=t.getActiveMipmapLevel(),G=t.state;G.setBlending(Qs),G.buffers.color.setClear(1,1,1,1),G.buffers.depth.setTest(!0),G.setScissorTest(!1);const X=g!==Ur&&this.type===Ur,V=g===Ur&&this.type!==Ur;for(let Y=0,J=C.length;Y<J;Y++){const ae=C[Y],ne=ae.shadow;if(ne===void 0){console.warn("THREE.WebGLShadowMap:",ae,"has no shadow.");continue}if(ne.autoUpdate===!1&&ne.needsUpdate===!1)continue;r.copy(ne.mapSize);const I=ne.getFrameExtents();if(r.multiply(I),s.copy(ne.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/I.x),r.x=s.x*I.x,ne.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/I.y),r.y=s.y*I.y,ne.mapSize.y=s.y)),ne.map===null||X===!0||V===!0){const z=this.type!==Ur?{minFilter:dn,magFilter:dn}:{};ne.map!==null&&ne.map.dispose(),ne.map=new Qr(r.x,r.y,z),ne.map.texture.name=ae.name+".shadowMap",ne.camera.updateProjectionMatrix()}t.setRenderTarget(ne.map),t.clear();const H=ne.getViewportCount();for(let z=0;z<H;z++){const $=ne.getViewport(z);o.set(s.x*$.x,s.y*$.y,s.x*$.z,s.y*$.w),G.viewport(o),ne.updateMatrices(ae,z),i=ne.getFrustum(),w(R,P,ne.camera,ae,this.type)}ne.isPointLightShadow!==!0&&this.type===Ur&&x(ne,P),ne.needsUpdate=!1}g=this.type,M.needsUpdate=!1,t.setRenderTarget(L,b,B)};function x(C,R){const P=e.update(S);p.defines.VSM_SAMPLES!==C.blurSamples&&(p.defines.VSM_SAMPLES=C.blurSamples,m.defines.VSM_SAMPLES=C.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),C.mapPass===null&&(C.mapPass=new Qr(r.x,r.y)),p.uniforms.shadow_pass.value=C.map.texture,p.uniforms.resolution.value=C.mapSize,p.uniforms.radius.value=C.radius,t.setRenderTarget(C.mapPass),t.clear(),t.renderBufferDirect(R,null,P,p,S,null),m.uniforms.shadow_pass.value=C.mapPass.texture,m.uniforms.resolution.value=C.mapSize,m.uniforms.radius.value=C.radius,t.setRenderTarget(C.map),t.clear(),t.renderBufferDirect(R,null,P,m,S,null)}function _(C,R,P,L){let b=null;const B=P.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if(B!==void 0)b=B;else if(b=P.isPointLight===!0?l:a,t.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0){const G=b.uuid,X=R.uuid;let V=u[G];V===void 0&&(V={},u[G]=V);let Y=V[X];Y===void 0&&(Y=b.clone(),V[X]=Y),b=Y}if(b.visible=R.visible,b.wireframe=R.wireframe,L===Ur?b.side=R.shadowSide!==null?R.shadowSide:R.side:b.side=R.shadowSide!==null?R.shadowSide:d[R.side],b.alphaMap=R.alphaMap,b.alphaTest=R.alphaTest,b.map=R.map,b.clipShadows=R.clipShadows,b.clippingPlanes=R.clippingPlanes,b.clipIntersection=R.clipIntersection,b.displacementMap=R.displacementMap,b.displacementScale=R.displacementScale,b.displacementBias=R.displacementBias,b.wireframeLinewidth=R.wireframeLinewidth,b.linewidth=R.linewidth,P.isPointLight===!0&&b.isMeshDistanceMaterial===!0){const G=t.properties.get(b);G.light=P}return b}function w(C,R,P,L,b){if(C.visible===!1)return;if(C.layers.test(R.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&b===Ur)&&(!C.frustumCulled||i.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,C.matrixWorld);const X=e.update(C),V=C.material;if(Array.isArray(V)){const Y=X.groups;for(let J=0,ae=Y.length;J<ae;J++){const ne=Y[J],I=V[ne.materialIndex];if(I&&I.visible){const H=_(C,I,L,b);t.renderBufferDirect(P,null,X,H,C,ne)}}}else if(V.visible){const Y=_(C,V,L,b);t.renderBufferDirect(P,null,X,Y,C,null)}}const G=C.children;for(let X=0,V=G.length;X<V;X++)w(G[X],R,P,L,b)}}function h5(t,e,n){const i=n.isWebGL2;function r(){let K=!1;const fe=new Gt;let Me=null;const Fe=new Gt(0,0,0,0);return{setMask:function(je){Me!==je&&!K&&(t.colorMask(je,je,je,je),Me=je)},setLocked:function(je){K=je},setClear:function(je,Nt,Ut,In,Er){Er===!0&&(je*=In,Nt*=In,Ut*=In),fe.set(je,Nt,Ut,In),Fe.equals(fe)===!1&&(t.clearColor(je,Nt,Ut,In),Fe.copy(fe))},reset:function(){K=!1,Me=null,Fe.set(-1,0,0,0)}}}function s(){let K=!1,fe=null,Me=null,Fe=null;return{setTest:function(je){je?W(t.DEPTH_TEST):Ve(t.DEPTH_TEST)},setMask:function(je){fe!==je&&!K&&(t.depthMask(je),fe=je)},setFunc:function(je){if(Me!==je){switch(je){case fL:t.depthFunc(t.NEVER);break;case hL:t.depthFunc(t.ALWAYS);break;case dL:t.depthFunc(t.LESS);break;case jg:t.depthFunc(t.LEQUAL);break;case pL:t.depthFunc(t.EQUAL);break;case mL:t.depthFunc(t.GEQUAL);break;case gL:t.depthFunc(t.GREATER);break;case vL:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Me=je}},setLocked:function(je){K=je},setClear:function(je){Fe!==je&&(t.clearDepth(je),Fe=je)},reset:function(){K=!1,fe=null,Me=null,Fe=null}}}function o(){let K=!1,fe=null,Me=null,Fe=null,je=null,Nt=null,Ut=null,In=null,Er=null;return{setTest:function(Yt){K||(Yt?W(t.STENCIL_TEST):Ve(t.STENCIL_TEST))},setMask:function(Yt){fe!==Yt&&!K&&(t.stencilMask(Yt),fe=Yt)},setFunc:function(Yt,li,er){(Me!==Yt||Fe!==li||je!==er)&&(t.stencilFunc(Yt,li,er),Me=Yt,Fe=li,je=er)},setOp:function(Yt,li,er){(Nt!==Yt||Ut!==li||In!==er)&&(t.stencilOp(Yt,li,er),Nt=Yt,Ut=li,In=er)},setLocked:function(Yt){K=Yt},setClear:function(Yt){Er!==Yt&&(t.clearStencil(Yt),Er=Yt)},reset:function(){K=!1,fe=null,Me=null,Fe=null,je=null,Nt=null,Ut=null,In=null,Er=null}}}const a=new r,l=new s,u=new o,h=new WeakMap,d=new WeakMap;let p={},m={},y=new WeakMap,S=[],M=null,g=!1,x=null,_=null,w=null,C=null,R=null,P=null,L=null,b=!1,B=null,G=null,X=null,V=null,Y=null;const J=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ae=!1,ne=0;const I=t.getParameter(t.VERSION);I.indexOf("WebGL")!==-1?(ne=parseFloat(/^WebGL (\d)/.exec(I)[1]),ae=ne>=1):I.indexOf("OpenGL ES")!==-1&&(ne=parseFloat(/^OpenGL ES (\d)/.exec(I)[1]),ae=ne>=2);let H=null,z={};const $=t.getParameter(t.SCISSOR_BOX),Z=t.getParameter(t.VIEWPORT),ee=new Gt().fromArray($),ie=new Gt().fromArray(Z);function Ae(K,fe,Me,Fe){const je=new Uint8Array(4),Nt=t.createTexture();t.bindTexture(K,Nt),t.texParameteri(K,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(K,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Ut=0;Ut<Me;Ut++)i&&(K===t.TEXTURE_3D||K===t.TEXTURE_2D_ARRAY)?t.texImage3D(fe,0,t.RGBA,1,1,Fe,0,t.RGBA,t.UNSIGNED_BYTE,je):t.texImage2D(fe+Ut,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,je);return Nt}const ge={};ge[t.TEXTURE_2D]=Ae(t.TEXTURE_2D,t.TEXTURE_2D,1),ge[t.TEXTURE_CUBE_MAP]=Ae(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(ge[t.TEXTURE_2D_ARRAY]=Ae(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),ge[t.TEXTURE_3D]=Ae(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),W(t.DEPTH_TEST),l.setFunc(jg),Re(!1),He(Y_),W(t.CULL_FACE),xe(Qs);function W(K){p[K]!==!0&&(t.enable(K),p[K]=!0)}function Ve(K){p[K]!==!1&&(t.disable(K),p[K]=!1)}function Je(K,fe){return m[K]!==fe?(t.bindFramebuffer(K,fe),m[K]=fe,i&&(K===t.DRAW_FRAMEBUFFER&&(m[t.FRAMEBUFFER]=fe),K===t.FRAMEBUFFER&&(m[t.DRAW_FRAMEBUFFER]=fe)),!0):!1}function ve(K,fe){let Me=S,Fe=!1;if(K)if(Me=y.get(fe),Me===void 0&&(Me=[],y.set(fe,Me)),K.isWebGLMultipleRenderTargets){const je=K.texture;if(Me.length!==je.length||Me[0]!==t.COLOR_ATTACHMENT0){for(let Nt=0,Ut=je.length;Nt<Ut;Nt++)Me[Nt]=t.COLOR_ATTACHMENT0+Nt;Me.length=je.length,Fe=!0}}else Me[0]!==t.COLOR_ATTACHMENT0&&(Me[0]=t.COLOR_ATTACHMENT0,Fe=!0);else Me[0]!==t.BACK&&(Me[0]=t.BACK,Fe=!0);Fe&&(n.isWebGL2?t.drawBuffers(Me):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Me))}function _e(K){return M!==K?(t.useProgram(K),M=K,!0):!1}const me={[Wa]:t.FUNC_ADD,[eL]:t.FUNC_SUBTRACT,[tL]:t.FUNC_REVERSE_SUBTRACT};if(i)me[$_]=t.MIN,me[e1]=t.MAX;else{const K=e.get("EXT_blend_minmax");K!==null&&(me[$_]=K.MIN_EXT,me[e1]=K.MAX_EXT)}const oe={[nL]:t.ZERO,[iL]:t.ONE,[rL]:t.SRC_COLOR,[cS]:t.SRC_ALPHA,[cL]:t.SRC_ALPHA_SATURATE,[lL]:t.DST_COLOR,[oL]:t.DST_ALPHA,[sL]:t.ONE_MINUS_SRC_COLOR,[fS]:t.ONE_MINUS_SRC_ALPHA,[uL]:t.ONE_MINUS_DST_COLOR,[aL]:t.ONE_MINUS_DST_ALPHA};function xe(K,fe,Me,Fe,je,Nt,Ut,In){if(K===Qs){g===!0&&(Ve(t.BLEND),g=!1);return}if(g===!1&&(W(t.BLEND),g=!0),K!==$B){if(K!==x||In!==b){if((_!==Wa||R!==Wa)&&(t.blendEquation(t.FUNC_ADD),_=Wa,R=Wa),In)switch(K){case rl:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Q_:t.blendFunc(t.ONE,t.ONE);break;case q_:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Z_:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",K);break}else switch(K){case rl:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Q_:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case q_:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Z_:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",K);break}w=null,C=null,P=null,L=null,x=K,b=In}return}je=je||fe,Nt=Nt||Me,Ut=Ut||Fe,(fe!==_||je!==R)&&(t.blendEquationSeparate(me[fe],me[je]),_=fe,R=je),(Me!==w||Fe!==C||Nt!==P||Ut!==L)&&(t.blendFuncSeparate(oe[Me],oe[Fe],oe[Nt],oe[Ut]),w=Me,C=Fe,P=Nt,L=Ut),x=K,b=!1}function De(K,fe){K.side===yr?Ve(t.CULL_FACE):W(t.CULL_FACE);let Me=K.side===gi;fe&&(Me=!Me),Re(Me),K.blending===rl&&K.transparent===!1?xe(Qs):xe(K.blending,K.blendEquation,K.blendSrc,K.blendDst,K.blendEquationAlpha,K.blendSrcAlpha,K.blendDstAlpha,K.premultipliedAlpha),l.setFunc(K.depthFunc),l.setTest(K.depthTest),l.setMask(K.depthWrite),a.setMask(K.colorWrite);const Fe=K.stencilWrite;u.setTest(Fe),Fe&&(u.setMask(K.stencilWriteMask),u.setFunc(K.stencilFunc,K.stencilRef,K.stencilFuncMask),u.setOp(K.stencilFail,K.stencilZFail,K.stencilZPass)),We(K.polygonOffset,K.polygonOffsetFactor,K.polygonOffsetUnits),K.alphaToCoverage===!0?W(t.SAMPLE_ALPHA_TO_COVERAGE):Ve(t.SAMPLE_ALPHA_TO_COVERAGE)}function Re(K){B!==K&&(K?t.frontFace(t.CW):t.frontFace(t.CCW),B=K)}function He(K){K!==QB?(W(t.CULL_FACE),K!==G&&(K===Y_?t.cullFace(t.BACK):K===qB?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Ve(t.CULL_FACE),G=K}function Qe(K){K!==X&&(ae&&t.lineWidth(K),X=K)}function We(K,fe,Me){K?(W(t.POLYGON_OFFSET_FILL),(V!==fe||Y!==Me)&&(t.polygonOffset(fe,Me),V=fe,Y=Me)):Ve(t.POLYGON_OFFSET_FILL)}function rt(K){K?W(t.SCISSOR_TEST):Ve(t.SCISSOR_TEST)}function Mt(K){K===void 0&&(K=t.TEXTURE0+J-1),H!==K&&(t.activeTexture(K),H=K)}function k(K,fe,Me){Me===void 0&&(H===null?Me=t.TEXTURE0+J-1:Me=H);let Fe=z[Me];Fe===void 0&&(Fe={type:void 0,texture:void 0},z[Me]=Fe),(Fe.type!==K||Fe.texture!==fe)&&(H!==Me&&(t.activeTexture(Me),H=Me),t.bindTexture(K,fe||ge[K]),Fe.type=K,Fe.texture=fe)}function D(){const K=z[H];K!==void 0&&K.type!==void 0&&(t.bindTexture(K.type,null),K.type=void 0,K.texture=void 0)}function le(){try{t.compressedTexImage2D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function Se(){try{t.compressedTexImage3D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function we(){try{t.texSubImage2D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function be(){try{t.texSubImage3D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function nt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function Ne(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function de(){try{t.texStorage2D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function ze(){try{t.texStorage3D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function qe(){try{t.texImage2D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function et(){try{t.texImage3D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function Oe(K){ee.equals(K)===!1&&(t.scissor(K.x,K.y,K.z,K.w),ee.copy(K))}function Ke(K){ie.equals(K)===!1&&(t.viewport(K.x,K.y,K.z,K.w),ie.copy(K))}function wt(K,fe){let Me=d.get(fe);Me===void 0&&(Me=new WeakMap,d.set(fe,Me));let Fe=Me.get(K);Fe===void 0&&(Fe=t.getUniformBlockIndex(fe,K.name),Me.set(K,Fe))}function Ft(K,fe){const Fe=d.get(fe).get(K);h.get(fe)!==Fe&&(t.uniformBlockBinding(fe,Fe,K.__bindingPointIndex),h.set(fe,Fe))}function en(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),i===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),p={},H=null,z={},m={},y=new WeakMap,S=[],M=null,g=!1,x=null,_=null,w=null,C=null,R=null,P=null,L=null,b=!1,B=null,G=null,X=null,V=null,Y=null,ee.set(0,0,t.canvas.width,t.canvas.height),ie.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:W,disable:Ve,bindFramebuffer:Je,drawBuffers:ve,useProgram:_e,setBlending:xe,setMaterial:De,setFlipSided:Re,setCullFace:He,setLineWidth:Qe,setPolygonOffset:We,setScissorTest:rt,activeTexture:Mt,bindTexture:k,unbindTexture:D,compressedTexImage2D:le,compressedTexImage3D:Se,texImage2D:qe,texImage3D:et,updateUBOMapping:wt,uniformBlockBinding:Ft,texStorage2D:de,texStorage3D:ze,texSubImage2D:we,texSubImage3D:be,compressedTexSubImage2D:nt,compressedTexSubImage3D:Ne,scissor:Oe,viewport:Ke,reset:en}}function d5(t,e,n,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,u=r.maxCubemapSize,h=r.maxTextureSize,d=r.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),y=new WeakMap;let S;const M=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(k,D){return g?new OffscreenCanvas(k,D):Ph("canvas")}function _(k,D,le,Se){let we=1;if((k.width>Se||k.height>Se)&&(we=Se/Math.max(k.width,k.height)),we<1||D===!0)if(typeof HTMLImageElement<"u"&&k instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&k instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&k instanceof ImageBitmap){const be=D?KL:Math.floor,nt=be(we*k.width),Ne=be(we*k.height);S===void 0&&(S=x(nt,Ne));const de=le?x(nt,Ne):S;return de.width=nt,de.height=Ne,de.getContext("2d").drawImage(k,0,0,nt,Ne),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+k.width+"x"+k.height+") to ("+nt+"x"+Ne+")."),de}else return"data"in k&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+k.width+"x"+k.height+")."),k;return k}function w(k){return E1(k.width)&&E1(k.height)}function C(k){return a?!1:k.wrapS!==Xn||k.wrapT!==Xn||k.minFilter!==dn&&k.minFilter!==rn}function R(k,D){return k.generateMipmaps&&D&&k.minFilter!==dn&&k.minFilter!==rn}function P(k){t.generateMipmap(k)}function L(k,D,le,Se,we=!1){if(a===!1)return D;if(k!==null){if(t[k]!==void 0)return t[k];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+k+"'")}let be=D;return D===t.RED&&(le===t.FLOAT&&(be=t.R32F),le===t.HALF_FLOAT&&(be=t.R16F),le===t.UNSIGNED_BYTE&&(be=t.R8)),D===t.RG&&(le===t.FLOAT&&(be=t.RG32F),le===t.HALF_FLOAT&&(be=t.RG16F),le===t.UNSIGNED_BYTE&&(be=t.RG8)),D===t.RGBA&&(le===t.FLOAT&&(be=t.RGBA32F),le===t.HALF_FLOAT&&(be=t.RGBA16F),le===t.UNSIGNED_BYTE&&(be=Se===dt&&we===!1?t.SRGB8_ALPHA8:t.RGBA8),le===t.UNSIGNED_SHORT_4_4_4_4&&(be=t.RGBA4),le===t.UNSIGNED_SHORT_5_5_5_1&&(be=t.RGB5_A1)),(be===t.R16F||be===t.R32F||be===t.RG16F||be===t.RG32F||be===t.RGBA16F||be===t.RGBA32F)&&e.get("EXT_color_buffer_float"),be}function b(k,D,le){return R(k,le)===!0||k.isFramebufferTexture&&k.minFilter!==dn&&k.minFilter!==rn?Math.log2(Math.max(D.width,D.height))+1:k.mipmaps!==void 0&&k.mipmaps.length>0?k.mipmaps.length:k.isCompressedTexture&&Array.isArray(k.image)?D.mipmaps.length:1}function B(k){return k===dn||k===Ch||k===ju?t.NEAREST:t.LINEAR}function G(k){const D=k.target;D.removeEventListener("dispose",G),V(D),D.isVideoTexture&&y.delete(D)}function X(k){const D=k.target;D.removeEventListener("dispose",X),J(D)}function V(k){const D=i.get(k);if(D.__webglInit===void 0)return;const le=k.source,Se=M.get(le);if(Se){const we=Se[D.__cacheKey];we.usedTimes--,we.usedTimes===0&&Y(k),Object.keys(Se).length===0&&M.delete(le)}i.remove(k)}function Y(k){const D=i.get(k);t.deleteTexture(D.__webglTexture);const le=k.source,Se=M.get(le);delete Se[D.__cacheKey],o.memory.textures--}function J(k){const D=k.texture,le=i.get(k),Se=i.get(D);if(Se.__webglTexture!==void 0&&(t.deleteTexture(Se.__webglTexture),o.memory.textures--),k.depthTexture&&k.depthTexture.dispose(),k.isWebGLCubeRenderTarget)for(let we=0;we<6;we++)t.deleteFramebuffer(le.__webglFramebuffer[we]),le.__webglDepthbuffer&&t.deleteRenderbuffer(le.__webglDepthbuffer[we]);else{if(t.deleteFramebuffer(le.__webglFramebuffer),le.__webglDepthbuffer&&t.deleteRenderbuffer(le.__webglDepthbuffer),le.__webglMultisampledFramebuffer&&t.deleteFramebuffer(le.__webglMultisampledFramebuffer),le.__webglColorRenderbuffer)for(let we=0;we<le.__webglColorRenderbuffer.length;we++)le.__webglColorRenderbuffer[we]&&t.deleteRenderbuffer(le.__webglColorRenderbuffer[we]);le.__webglDepthRenderbuffer&&t.deleteRenderbuffer(le.__webglDepthRenderbuffer)}if(k.isWebGLMultipleRenderTargets)for(let we=0,be=D.length;we<be;we++){const nt=i.get(D[we]);nt.__webglTexture&&(t.deleteTexture(nt.__webglTexture),o.memory.textures--),i.remove(D[we])}i.remove(D),i.remove(k)}let ae=0;function ne(){ae=0}function I(){const k=ae;return k>=l&&console.warn("THREE.WebGLTextures: Trying to use "+k+" texture units while this GPU supports only "+l),ae+=1,k}function H(k){const D=[];return D.push(k.wrapS),D.push(k.wrapT),D.push(k.wrapR||0),D.push(k.magFilter),D.push(k.minFilter),D.push(k.anisotropy),D.push(k.internalFormat),D.push(k.format),D.push(k.type),D.push(k.generateMipmaps),D.push(k.premultiplyAlpha),D.push(k.flipY),D.push(k.unpackAlignment),D.push(k.colorSpace),D.join()}function z(k,D){const le=i.get(k);if(k.isVideoTexture&&rt(k),k.isRenderTargetTexture===!1&&k.version>0&&le.__version!==k.version){const Se=k.image;if(Se===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Se.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ve(le,k,D);return}}n.bindTexture(t.TEXTURE_2D,le.__webglTexture,t.TEXTURE0+D)}function $(k,D){const le=i.get(k);if(k.version>0&&le.__version!==k.version){Ve(le,k,D);return}n.bindTexture(t.TEXTURE_2D_ARRAY,le.__webglTexture,t.TEXTURE0+D)}function Z(k,D){const le=i.get(k);if(k.version>0&&le.__version!==k.version){Ve(le,k,D);return}n.bindTexture(t.TEXTURE_3D,le.__webglTexture,t.TEXTURE0+D)}function ee(k,D){const le=i.get(k);if(k.version>0&&le.__version!==k.version){Je(le,k,D);return}n.bindTexture(t.TEXTURE_CUBE_MAP,le.__webglTexture,t.TEXTURE0+D)}const ie={[oa]:t.REPEAT,[Xn]:t.CLAMP_TO_EDGE,[oc]:t.MIRRORED_REPEAT},Ae={[dn]:t.NEAREST,[Ch]:t.NEAREST_MIPMAP_NEAREST,[ju]:t.NEAREST_MIPMAP_LINEAR,[rn]:t.LINEAR,[L0]:t.LINEAR_MIPMAP_NEAREST,[As]:t.LINEAR_MIPMAP_LINEAR};function ge(k,D,le){if(le?(t.texParameteri(k,t.TEXTURE_WRAP_S,ie[D.wrapS]),t.texParameteri(k,t.TEXTURE_WRAP_T,ie[D.wrapT]),(k===t.TEXTURE_3D||k===t.TEXTURE_2D_ARRAY)&&t.texParameteri(k,t.TEXTURE_WRAP_R,ie[D.wrapR]),t.texParameteri(k,t.TEXTURE_MAG_FILTER,Ae[D.magFilter]),t.texParameteri(k,t.TEXTURE_MIN_FILTER,Ae[D.minFilter])):(t.texParameteri(k,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(k,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(k===t.TEXTURE_3D||k===t.TEXTURE_2D_ARRAY)&&t.texParameteri(k,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(D.wrapS!==Xn||D.wrapT!==Xn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(k,t.TEXTURE_MAG_FILTER,B(D.magFilter)),t.texParameteri(k,t.TEXTURE_MIN_FILTER,B(D.minFilter)),D.minFilter!==dn&&D.minFilter!==rn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Se=e.get("EXT_texture_filter_anisotropic");if(D.magFilter===dn||D.minFilter!==ju&&D.minFilter!==As||D.type===Xs&&e.has("OES_texture_float_linear")===!1||a===!1&&D.type===ac&&e.has("OES_texture_half_float_linear")===!1)return;(D.anisotropy>1||i.get(D).__currentAnisotropy)&&(t.texParameterf(k,Se.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,r.getMaxAnisotropy())),i.get(D).__currentAnisotropy=D.anisotropy)}}function W(k,D){let le=!1;k.__webglInit===void 0&&(k.__webglInit=!0,D.addEventListener("dispose",G));const Se=D.source;let we=M.get(Se);we===void 0&&(we={},M.set(Se,we));const be=H(D);if(be!==k.__cacheKey){we[be]===void 0&&(we[be]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,le=!0),we[be].usedTimes++;const nt=we[k.__cacheKey];nt!==void 0&&(we[k.__cacheKey].usedTimes--,nt.usedTimes===0&&Y(D)),k.__cacheKey=be,k.__webglTexture=we[be].texture}return le}function Ve(k,D,le){let Se=t.TEXTURE_2D;(D.isDataArrayTexture||D.isCompressedArrayTexture)&&(Se=t.TEXTURE_2D_ARRAY),D.isData3DTexture&&(Se=t.TEXTURE_3D);const we=W(k,D),be=D.source;n.bindTexture(Se,k.__webglTexture,t.TEXTURE0+le);const nt=i.get(be);if(be.version!==nt.__version||we===!0){n.activeTexture(t.TEXTURE0+le),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,D.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,D.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const Ne=C(D)&&w(D.image)===!1;let de=_(D.image,Ne,!1,h);de=Mt(D,de);const ze=w(de)||a,qe=s.convert(D.format,D.colorSpace);let et=s.convert(D.type),Oe=L(D.internalFormat,qe,et,D.colorSpace);ge(Se,D,ze);let Ke;const wt=D.mipmaps,Ft=a&&D.isVideoTexture!==!0,en=nt.__version===void 0||we===!0,K=b(D,de,ze);if(D.isDepthTexture)Oe=t.DEPTH_COMPONENT,a?D.type===Xs?Oe=t.DEPTH_COMPONENT32F:D.type===Go?Oe=t.DEPTH_COMPONENT24:D.type===sl?Oe=t.DEPTH24_STENCIL8:Oe=t.DEPTH_COMPONENT16:D.type===Xs&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),D.format===qo&&Oe===t.DEPTH_COMPONENT&&D.type!==dS&&D.type!==Go&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),D.type=Go,et=s.convert(D.type)),D.format===gl&&Oe===t.DEPTH_COMPONENT&&(Oe=t.DEPTH_STENCIL,D.type!==sl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),D.type=sl,et=s.convert(D.type))),en&&(Ft?n.texStorage2D(t.TEXTURE_2D,1,Oe,de.width,de.height):n.texImage2D(t.TEXTURE_2D,0,Oe,de.width,de.height,0,qe,et,null));else if(D.isDataTexture)if(wt.length>0&&ze){Ft&&en&&n.texStorage2D(t.TEXTURE_2D,K,Oe,wt[0].width,wt[0].height);for(let fe=0,Me=wt.length;fe<Me;fe++)Ke=wt[fe],Ft?n.texSubImage2D(t.TEXTURE_2D,fe,0,0,Ke.width,Ke.height,qe,et,Ke.data):n.texImage2D(t.TEXTURE_2D,fe,Oe,Ke.width,Ke.height,0,qe,et,Ke.data);D.generateMipmaps=!1}else Ft?(en&&n.texStorage2D(t.TEXTURE_2D,K,Oe,de.width,de.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,de.width,de.height,qe,et,de.data)):n.texImage2D(t.TEXTURE_2D,0,Oe,de.width,de.height,0,qe,et,de.data);else if(D.isCompressedTexture)if(D.isCompressedArrayTexture){Ft&&en&&n.texStorage3D(t.TEXTURE_2D_ARRAY,K,Oe,wt[0].width,wt[0].height,de.depth);for(let fe=0,Me=wt.length;fe<Me;fe++)Ke=wt[fe],D.format!==bi?qe!==null?Ft?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,fe,0,0,0,Ke.width,Ke.height,de.depth,qe,Ke.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,fe,Oe,Ke.width,Ke.height,de.depth,0,Ke.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ft?n.texSubImage3D(t.TEXTURE_2D_ARRAY,fe,0,0,0,Ke.width,Ke.height,de.depth,qe,et,Ke.data):n.texImage3D(t.TEXTURE_2D_ARRAY,fe,Oe,Ke.width,Ke.height,de.depth,0,qe,et,Ke.data)}else{Ft&&en&&n.texStorage2D(t.TEXTURE_2D,K,Oe,wt[0].width,wt[0].height);for(let fe=0,Me=wt.length;fe<Me;fe++)Ke=wt[fe],D.format!==bi?qe!==null?Ft?n.compressedTexSubImage2D(t.TEXTURE_2D,fe,0,0,Ke.width,Ke.height,qe,Ke.data):n.compressedTexImage2D(t.TEXTURE_2D,fe,Oe,Ke.width,Ke.height,0,Ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ft?n.texSubImage2D(t.TEXTURE_2D,fe,0,0,Ke.width,Ke.height,qe,et,Ke.data):n.texImage2D(t.TEXTURE_2D,fe,Oe,Ke.width,Ke.height,0,qe,et,Ke.data)}else if(D.isDataArrayTexture)Ft?(en&&n.texStorage3D(t.TEXTURE_2D_ARRAY,K,Oe,de.width,de.height,de.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,de.width,de.height,de.depth,qe,et,de.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,Oe,de.width,de.height,de.depth,0,qe,et,de.data);else if(D.isData3DTexture)Ft?(en&&n.texStorage3D(t.TEXTURE_3D,K,Oe,de.width,de.height,de.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,de.width,de.height,de.depth,qe,et,de.data)):n.texImage3D(t.TEXTURE_3D,0,Oe,de.width,de.height,de.depth,0,qe,et,de.data);else if(D.isFramebufferTexture){if(en)if(Ft)n.texStorage2D(t.TEXTURE_2D,K,Oe,de.width,de.height);else{let fe=de.width,Me=de.height;for(let Fe=0;Fe<K;Fe++)n.texImage2D(t.TEXTURE_2D,Fe,Oe,fe,Me,0,qe,et,null),fe>>=1,Me>>=1}}else if(wt.length>0&&ze){Ft&&en&&n.texStorage2D(t.TEXTURE_2D,K,Oe,wt[0].width,wt[0].height);for(let fe=0,Me=wt.length;fe<Me;fe++)Ke=wt[fe],Ft?n.texSubImage2D(t.TEXTURE_2D,fe,0,0,qe,et,Ke):n.texImage2D(t.TEXTURE_2D,fe,Oe,qe,et,Ke);D.generateMipmaps=!1}else Ft?(en&&n.texStorage2D(t.TEXTURE_2D,K,Oe,de.width,de.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,qe,et,de)):n.texImage2D(t.TEXTURE_2D,0,Oe,qe,et,de);R(D,ze)&&P(Se),nt.__version=be.version,D.onUpdate&&D.onUpdate(D)}k.__version=D.version}function Je(k,D,le){if(D.image.length!==6)return;const Se=W(k,D),we=D.source;n.bindTexture(t.TEXTURE_CUBE_MAP,k.__webglTexture,t.TEXTURE0+le);const be=i.get(we);if(we.version!==be.__version||Se===!0){n.activeTexture(t.TEXTURE0+le),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,D.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,D.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const nt=D.isCompressedTexture||D.image[0].isCompressedTexture,Ne=D.image[0]&&D.image[0].isDataTexture,de=[];for(let fe=0;fe<6;fe++)!nt&&!Ne?de[fe]=_(D.image[fe],!1,!0,u):de[fe]=Ne?D.image[fe].image:D.image[fe],de[fe]=Mt(D,de[fe]);const ze=de[0],qe=w(ze)||a,et=s.convert(D.format,D.colorSpace),Oe=s.convert(D.type),Ke=L(D.internalFormat,et,Oe,D.colorSpace),wt=a&&D.isVideoTexture!==!0,Ft=be.__version===void 0||Se===!0;let en=b(D,ze,qe);ge(t.TEXTURE_CUBE_MAP,D,qe);let K;if(nt){wt&&Ft&&n.texStorage2D(t.TEXTURE_CUBE_MAP,en,Ke,ze.width,ze.height);for(let fe=0;fe<6;fe++){K=de[fe].mipmaps;for(let Me=0;Me<K.length;Me++){const Fe=K[Me];D.format!==bi?et!==null?wt?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+fe,Me,0,0,Fe.width,Fe.height,et,Fe.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+fe,Me,Ke,Fe.width,Fe.height,0,Fe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):wt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+fe,Me,0,0,Fe.width,Fe.height,et,Oe,Fe.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+fe,Me,Ke,Fe.width,Fe.height,0,et,Oe,Fe.data)}}}else{K=D.mipmaps,wt&&Ft&&(K.length>0&&en++,n.texStorage2D(t.TEXTURE_CUBE_MAP,en,Ke,de[0].width,de[0].height));for(let fe=0;fe<6;fe++)if(Ne){wt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+fe,0,0,0,de[fe].width,de[fe].height,et,Oe,de[fe].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+fe,0,Ke,de[fe].width,de[fe].height,0,et,Oe,de[fe].data);for(let Me=0;Me<K.length;Me++){const je=K[Me].image[fe].image;wt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+fe,Me+1,0,0,je.width,je.height,et,Oe,je.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+fe,Me+1,Ke,je.width,je.height,0,et,Oe,je.data)}}else{wt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+fe,0,0,0,et,Oe,de[fe]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+fe,0,Ke,et,Oe,de[fe]);for(let Me=0;Me<K.length;Me++){const Fe=K[Me];wt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+fe,Me+1,0,0,et,Oe,Fe.image[fe]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+fe,Me+1,Ke,et,Oe,Fe.image[fe])}}}R(D,qe)&&P(t.TEXTURE_CUBE_MAP),be.__version=we.version,D.onUpdate&&D.onUpdate(D)}k.__version=D.version}function ve(k,D,le,Se,we){const be=s.convert(le.format,le.colorSpace),nt=s.convert(le.type),Ne=L(le.internalFormat,be,nt,le.colorSpace);i.get(D).__hasExternalTextures||(we===t.TEXTURE_3D||we===t.TEXTURE_2D_ARRAY?n.texImage3D(we,0,Ne,D.width,D.height,D.depth,0,be,nt,null):n.texImage2D(we,0,Ne,D.width,D.height,0,be,nt,null)),n.bindFramebuffer(t.FRAMEBUFFER,k),We(D)?p.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Se,we,i.get(le).__webglTexture,0,Qe(D)):(we===t.TEXTURE_2D||we>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&we<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,Se,we,i.get(le).__webglTexture,0),n.bindFramebuffer(t.FRAMEBUFFER,null)}function _e(k,D,le){if(t.bindRenderbuffer(t.RENDERBUFFER,k),D.depthBuffer&&!D.stencilBuffer){let Se=t.DEPTH_COMPONENT16;if(le||We(D)){const we=D.depthTexture;we&&we.isDepthTexture&&(we.type===Xs?Se=t.DEPTH_COMPONENT32F:we.type===Go&&(Se=t.DEPTH_COMPONENT24));const be=Qe(D);We(D)?p.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,be,Se,D.width,D.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,be,Se,D.width,D.height)}else t.renderbufferStorage(t.RENDERBUFFER,Se,D.width,D.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,k)}else if(D.depthBuffer&&D.stencilBuffer){const Se=Qe(D);le&&We(D)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Se,t.DEPTH24_STENCIL8,D.width,D.height):We(D)?p.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Se,t.DEPTH24_STENCIL8,D.width,D.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,D.width,D.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,k)}else{const Se=D.isWebGLMultipleRenderTargets===!0?D.texture:[D.texture];for(let we=0;we<Se.length;we++){const be=Se[we],nt=s.convert(be.format,be.colorSpace),Ne=s.convert(be.type),de=L(be.internalFormat,nt,Ne,be.colorSpace),ze=Qe(D);le&&We(D)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,ze,de,D.width,D.height):We(D)?p.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ze,de,D.width,D.height):t.renderbufferStorage(t.RENDERBUFFER,de,D.width,D.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function me(k,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,k),!(D.depthTexture&&D.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(D.depthTexture).__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),z(D.depthTexture,0);const Se=i.get(D.depthTexture).__webglTexture,we=Qe(D);if(D.depthTexture.format===qo)We(D)?p.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Se,0,we):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Se,0);else if(D.depthTexture.format===gl)We(D)?p.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Se,0,we):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Se,0);else throw new Error("Unknown depthTexture format")}function oe(k){const D=i.get(k),le=k.isWebGLCubeRenderTarget===!0;if(k.depthTexture&&!D.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");me(D.__webglFramebuffer,k)}else if(le){D.__webglDepthbuffer=[];for(let Se=0;Se<6;Se++)n.bindFramebuffer(t.FRAMEBUFFER,D.__webglFramebuffer[Se]),D.__webglDepthbuffer[Se]=t.createRenderbuffer(),_e(D.__webglDepthbuffer[Se],k,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,D.__webglFramebuffer),D.__webglDepthbuffer=t.createRenderbuffer(),_e(D.__webglDepthbuffer,k,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function xe(k,D,le){const Se=i.get(k);D!==void 0&&ve(Se.__webglFramebuffer,k,k.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),le!==void 0&&oe(k)}function De(k){const D=k.texture,le=i.get(k),Se=i.get(D);k.addEventListener("dispose",X),k.isWebGLMultipleRenderTargets!==!0&&(Se.__webglTexture===void 0&&(Se.__webglTexture=t.createTexture()),Se.__version=D.version,o.memory.textures++);const we=k.isWebGLCubeRenderTarget===!0,be=k.isWebGLMultipleRenderTargets===!0,nt=w(k)||a;if(we){le.__webglFramebuffer=[];for(let Ne=0;Ne<6;Ne++)le.__webglFramebuffer[Ne]=t.createFramebuffer()}else{if(le.__webglFramebuffer=t.createFramebuffer(),be)if(r.drawBuffers){const Ne=k.texture;for(let de=0,ze=Ne.length;de<ze;de++){const qe=i.get(Ne[de]);qe.__webglTexture===void 0&&(qe.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&k.samples>0&&We(k)===!1){const Ne=be?D:[D];le.__webglMultisampledFramebuffer=t.createFramebuffer(),le.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,le.__webglMultisampledFramebuffer);for(let de=0;de<Ne.length;de++){const ze=Ne[de];le.__webglColorRenderbuffer[de]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,le.__webglColorRenderbuffer[de]);const qe=s.convert(ze.format,ze.colorSpace),et=s.convert(ze.type),Oe=L(ze.internalFormat,qe,et,ze.colorSpace,k.isXRRenderTarget===!0),Ke=Qe(k);t.renderbufferStorageMultisample(t.RENDERBUFFER,Ke,Oe,k.width,k.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+de,t.RENDERBUFFER,le.__webglColorRenderbuffer[de])}t.bindRenderbuffer(t.RENDERBUFFER,null),k.depthBuffer&&(le.__webglDepthRenderbuffer=t.createRenderbuffer(),_e(le.__webglDepthRenderbuffer,k,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(we){n.bindTexture(t.TEXTURE_CUBE_MAP,Se.__webglTexture),ge(t.TEXTURE_CUBE_MAP,D,nt);for(let Ne=0;Ne<6;Ne++)ve(le.__webglFramebuffer[Ne],k,D,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ne);R(D,nt)&&P(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(be){const Ne=k.texture;for(let de=0,ze=Ne.length;de<ze;de++){const qe=Ne[de],et=i.get(qe);n.bindTexture(t.TEXTURE_2D,et.__webglTexture),ge(t.TEXTURE_2D,qe,nt),ve(le.__webglFramebuffer,k,qe,t.COLOR_ATTACHMENT0+de,t.TEXTURE_2D),R(qe,nt)&&P(t.TEXTURE_2D)}n.unbindTexture()}else{let Ne=t.TEXTURE_2D;(k.isWebGL3DRenderTarget||k.isWebGLArrayRenderTarget)&&(a?Ne=k.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Ne,Se.__webglTexture),ge(Ne,D,nt),ve(le.__webglFramebuffer,k,D,t.COLOR_ATTACHMENT0,Ne),R(D,nt)&&P(Ne),n.unbindTexture()}k.depthBuffer&&oe(k)}function Re(k){const D=w(k)||a,le=k.isWebGLMultipleRenderTargets===!0?k.texture:[k.texture];for(let Se=0,we=le.length;Se<we;Se++){const be=le[Se];if(R(be,D)){const nt=k.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Ne=i.get(be).__webglTexture;n.bindTexture(nt,Ne),P(nt),n.unbindTexture()}}}function He(k){if(a&&k.samples>0&&We(k)===!1){const D=k.isWebGLMultipleRenderTargets?k.texture:[k.texture],le=k.width,Se=k.height;let we=t.COLOR_BUFFER_BIT;const be=[],nt=k.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ne=i.get(k),de=k.isWebGLMultipleRenderTargets===!0;if(de)for(let ze=0;ze<D.length;ze++)n.bindFramebuffer(t.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ze,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Ne.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+ze,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ne.__webglFramebuffer);for(let ze=0;ze<D.length;ze++){be.push(t.COLOR_ATTACHMENT0+ze),k.depthBuffer&&be.push(nt);const qe=Ne.__ignoreDepthValues!==void 0?Ne.__ignoreDepthValues:!1;if(qe===!1&&(k.depthBuffer&&(we|=t.DEPTH_BUFFER_BIT),k.stencilBuffer&&(we|=t.STENCIL_BUFFER_BIT)),de&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Ne.__webglColorRenderbuffer[ze]),qe===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[nt]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[nt])),de){const et=i.get(D[ze]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,et,0)}t.blitFramebuffer(0,0,le,Se,0,0,le,Se,we,t.NEAREST),m&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,be)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),de)for(let ze=0;ze<D.length;ze++){n.bindFramebuffer(t.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ze,t.RENDERBUFFER,Ne.__webglColorRenderbuffer[ze]);const qe=i.get(D[ze]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Ne.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+ze,t.TEXTURE_2D,qe,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ne.__webglMultisampledFramebuffer)}}function Qe(k){return Math.min(d,k.samples)}function We(k){const D=i.get(k);return a&&k.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&D.__useRenderToTexture!==!1}function rt(k){const D=o.render.frame;y.get(k)!==D&&(y.set(k,D),k.update())}function Mt(k,D){const le=k.colorSpace,Se=k.format,we=k.type;return k.isCompressedTexture===!0||k.format===Jg||le!==Yr&&le!==Zo&&(le===dt?a===!1?e.has("EXT_sRGB")===!0&&Se===bi?(k.format=Jg,k.minFilter=rn,k.generateMipmaps=!1):D=xS.sRGBToLinear(D):(Se!==bi||we!==io)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",le)),D}this.allocateTextureUnit=I,this.resetTextureUnits=ne,this.setTexture2D=z,this.setTexture2DArray=$,this.setTexture3D=Z,this.setTextureCube=ee,this.rebindTextures=xe,this.setupRenderTarget=De,this.updateRenderTargetMipmap=Re,this.updateMultisampleRenderTarget=He,this.setupDepthRenderbuffer=oe,this.setupFrameBufferTexture=ve,this.useMultisampledRTT=We}function sI(t,e,n){const i=n.isWebGL2;function r(s,o=Zo){let a;if(s===io)return t.UNSIGNED_BYTE;if(s===CL)return t.UNSIGNED_SHORT_4_4_4_4;if(s===bL)return t.UNSIGNED_SHORT_5_5_5_1;if(s===wL)return t.BYTE;if(s===EL)return t.SHORT;if(s===dS)return t.UNSIGNED_SHORT;if(s===TL)return t.INT;if(s===Go)return t.UNSIGNED_INT;if(s===Xs)return t.FLOAT;if(s===ac)return i?t.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===RL)return t.ALPHA;if(s===bi)return t.RGBA;if(s===PL)return t.LUMINANCE;if(s===BL)return t.LUMINANCE_ALPHA;if(s===qo)return t.DEPTH_COMPONENT;if(s===gl)return t.DEPTH_STENCIL;if(s===Jg)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===LL)return t.RED;if(s===IL)return t.RED_INTEGER;if(s===DL)return t.RG;if(s===FL)return t.RG_INTEGER;if(s===NL)return t.RGBA_INTEGER;if(s===sg||s===og||s===ag||s===lg)if(o===dt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===sg)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===og)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===ag)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===lg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===sg)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===og)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===ag)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===lg)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===t1||s===n1||s===i1||s===r1)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===t1)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===n1)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===i1)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===r1)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===UL)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===s1||s===o1)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===s1)return o===dt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===o1)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===a1||s===l1||s===u1||s===c1||s===f1||s===h1||s===d1||s===p1||s===m1||s===g1||s===v1||s===y1||s===x1||s===_1)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===a1)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===l1)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===u1)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===c1)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===f1)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===h1)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===d1)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===p1)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===m1)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===g1)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===v1)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===y1)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===x1)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===_1)return o===dt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===ug)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===ug)return o===dt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===OL||s===A1||s===S1||s===M1)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===ug)return a.COMPRESSED_RED_RGTC1_EXT;if(s===A1)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===S1)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===M1)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===sl?i?t.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:r}}class oI extends yn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Js extends Ct{constructor(){super(),this.isGroup=!0,this.type="Group"}}const p5={type:"move"};class ox{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Js,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Js,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new F,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new F),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Js,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new F,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new F),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const i of e.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const S of e.hand.values()){const M=n.getJointPose(S,i),g=this._getHandJoint(u,S);M!==null&&(g.matrix.fromArray(M.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=M.radius),g.visible=M!==null}const h=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],p=h.position.distanceTo(d.position),m=.02,y=.005;u.inputState.pinching&&p>m+y?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=m-y&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(p5)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const i=new Js;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[n.jointName]=i,e.add(i)}return e.joints[n.jointName]}}class aI extends $t{constructor(e,n,i,r,s,o,a,l,u,h){if(h=h!==void 0?h:qo,h!==qo&&h!==gl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===qo&&(i=Go),i===void 0&&h===gl&&(i=sl),super(null,r,s,o,a,l,h,i,u),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:dn,this.minFilter=l!==void 0?l:dn,this.flipY=!1,this.generateMipmaps=!1}}class m5 extends ao{constructor(e,n){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,u=null,h=null,d=null,p=null,m=null,y=null;const S=n.getContextAttributes();let M=null,g=null;const x=[],_=[],w=new Set,C=new Map,R=new yn;R.layers.enable(1),R.viewport=new Gt;const P=new yn;P.layers.enable(2),P.viewport=new Gt;const L=[R,P],b=new oI;b.layers.enable(1),b.layers.enable(2);let B=null,G=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ee){let ie=x[ee];return ie===void 0&&(ie=new ox,x[ee]=ie),ie.getTargetRaySpace()},this.getControllerGrip=function(ee){let ie=x[ee];return ie===void 0&&(ie=new ox,x[ee]=ie),ie.getGripSpace()},this.getHand=function(ee){let ie=x[ee];return ie===void 0&&(ie=new ox,x[ee]=ie),ie.getHandSpace()};function X(ee){const ie=_.indexOf(ee.inputSource);if(ie===-1)return;const Ae=x[ie];Ae!==void 0&&(Ae.update(ee.inputSource,ee.frame,u||o),Ae.dispatchEvent({type:ee.type,data:ee.inputSource}))}function V(){r.removeEventListener("select",X),r.removeEventListener("selectstart",X),r.removeEventListener("selectend",X),r.removeEventListener("squeeze",X),r.removeEventListener("squeezestart",X),r.removeEventListener("squeezeend",X),r.removeEventListener("end",V),r.removeEventListener("inputsourceschange",Y);for(let ee=0;ee<x.length;ee++){const ie=_[ee];ie!==null&&(_[ee]=null,x[ee].disconnect(ie))}B=null,G=null,e.setRenderTarget(M),m=null,p=null,d=null,r=null,g=null,Z.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ee){s=ee,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ee){a=ee,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(ee){u=ee},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return d},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=async function(ee){if(r=ee,r!==null){if(M=e.getRenderTarget(),r.addEventListener("select",X),r.addEventListener("selectstart",X),r.addEventListener("selectend",X),r.addEventListener("squeeze",X),r.addEventListener("squeezestart",X),r.addEventListener("squeezeend",X),r.addEventListener("end",V),r.addEventListener("inputsourceschange",Y),S.xrCompatible!==!0&&await n.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ie={antialias:r.renderState.layers===void 0?S.antialias:!0,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,n,ie),r.updateRenderState({baseLayer:m}),g=new Qr(m.framebufferWidth,m.framebufferHeight,{format:bi,type:io,colorSpace:e.outputColorSpace,stencilBuffer:S.stencil})}else{let ie=null,Ae=null,ge=null;S.depth&&(ge=S.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,ie=S.stencil?gl:qo,Ae=S.stencil?sl:Go);const W={colorFormat:n.RGBA8,depthFormat:ge,scaleFactor:s};d=new XRWebGLBinding(r,n),p=d.createProjectionLayer(W),r.updateRenderState({layers:[p]}),g=new Qr(p.textureWidth,p.textureHeight,{format:bi,type:io,depthTexture:new aI(p.textureWidth,p.textureHeight,Ae,void 0,void 0,void 0,void 0,void 0,void 0,ie),stencilBuffer:S.stencil,colorSpace:e.outputColorSpace,samples:S.antialias?4:0});const Ve=e.properties.get(g);Ve.__ignoreDepthValues=p.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await r.requestReferenceSpace(a),Z.setContext(r),Z.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function Y(ee){for(let ie=0;ie<ee.removed.length;ie++){const Ae=ee.removed[ie],ge=_.indexOf(Ae);ge>=0&&(_[ge]=null,x[ge].disconnect(Ae))}for(let ie=0;ie<ee.added.length;ie++){const Ae=ee.added[ie];let ge=_.indexOf(Ae);if(ge===-1){for(let Ve=0;Ve<x.length;Ve++)if(Ve>=_.length){_.push(Ae),ge=Ve;break}else if(_[Ve]===null){_[Ve]=Ae,ge=Ve;break}if(ge===-1)break}const W=x[ge];W&&W.connect(Ae)}}const J=new F,ae=new F;function ne(ee,ie,Ae){J.setFromMatrixPosition(ie.matrixWorld),ae.setFromMatrixPosition(Ae.matrixWorld);const ge=J.distanceTo(ae),W=ie.projectionMatrix.elements,Ve=Ae.projectionMatrix.elements,Je=W[14]/(W[10]-1),ve=W[14]/(W[10]+1),_e=(W[9]+1)/W[5],me=(W[9]-1)/W[5],oe=(W[8]-1)/W[0],xe=(Ve[8]+1)/Ve[0],De=Je*oe,Re=Je*xe,He=ge/(-oe+xe),Qe=He*-oe;ie.matrixWorld.decompose(ee.position,ee.quaternion,ee.scale),ee.translateX(Qe),ee.translateZ(He),ee.matrixWorld.compose(ee.position,ee.quaternion,ee.scale),ee.matrixWorldInverse.copy(ee.matrixWorld).invert();const We=Je+He,rt=ve+He,Mt=De-Qe,k=Re+(ge-Qe),D=_e*ve/rt*We,le=me*ve/rt*We;ee.projectionMatrix.makePerspective(Mt,k,D,le,We,rt),ee.projectionMatrixInverse.copy(ee.projectionMatrix).invert()}function I(ee,ie){ie===null?ee.matrixWorld.copy(ee.matrix):ee.matrixWorld.multiplyMatrices(ie.matrixWorld,ee.matrix),ee.matrixWorldInverse.copy(ee.matrixWorld).invert()}this.updateCamera=function(ee){if(r===null)return;b.near=P.near=R.near=ee.near,b.far=P.far=R.far=ee.far,(B!==b.near||G!==b.far)&&(r.updateRenderState({depthNear:b.near,depthFar:b.far}),B=b.near,G=b.far);const ie=ee.parent,Ae=b.cameras;I(b,ie);for(let ge=0;ge<Ae.length;ge++)I(Ae[ge],ie);Ae.length===2?ne(b,R,P):b.projectionMatrix.copy(R.projectionMatrix),H(ee,b,ie)};function H(ee,ie,Ae){Ae===null?ee.matrix.copy(ie.matrixWorld):(ee.matrix.copy(Ae.matrixWorld),ee.matrix.invert(),ee.matrix.multiply(ie.matrixWorld)),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale),ee.updateMatrixWorld(!0);const ge=ee.children;for(let W=0,Ve=ge.length;W<Ve;W++)ge[W].updateMatrixWorld(!0);ee.projectionMatrix.copy(ie.projectionMatrix),ee.projectionMatrixInverse.copy(ie.projectionMatrixInverse),ee.isPerspectiveCamera&&(ee.fov=uc*2*Math.atan(1/ee.projectionMatrix.elements[5]),ee.zoom=1)}this.getCamera=function(){return b},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(ee){l=ee,p!==null&&(p.fixedFoveation=ee),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ee)},this.getPlanes=function(){return w};let z=null;function $(ee,ie){if(h=ie.getViewerPose(u||o),y=ie,h!==null){const Ae=h.views;m!==null&&(e.setRenderTargetFramebuffer(g,m.framebuffer),e.setRenderTarget(g));let ge=!1;Ae.length!==b.cameras.length&&(b.cameras.length=0,ge=!0);for(let W=0;W<Ae.length;W++){const Ve=Ae[W];let Je=null;if(m!==null)Je=m.getViewport(Ve);else{const _e=d.getViewSubImage(p,Ve);Je=_e.viewport,W===0&&(e.setRenderTargetTextures(g,_e.colorTexture,p.ignoreDepthValues?void 0:_e.depthStencilTexture),e.setRenderTarget(g))}let ve=L[W];ve===void 0&&(ve=new yn,ve.layers.enable(W),ve.viewport=new Gt,L[W]=ve),ve.matrix.fromArray(Ve.transform.matrix),ve.matrix.decompose(ve.position,ve.quaternion,ve.scale),ve.projectionMatrix.fromArray(Ve.projectionMatrix),ve.projectionMatrixInverse.copy(ve.projectionMatrix).invert(),ve.viewport.set(Je.x,Je.y,Je.width,Je.height),W===0&&(b.matrix.copy(ve.matrix),b.matrix.decompose(b.position,b.quaternion,b.scale)),ge===!0&&b.cameras.push(ve)}}for(let Ae=0;Ae<x.length;Ae++){const ge=_[Ae],W=x[Ae];ge!==null&&W!==void 0&&W.update(ge,ie,u||o)}if(z&&z(ee,ie),ie.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:ie.detectedPlanes});let Ae=null;for(const ge of w)ie.detectedPlanes.has(ge)||(Ae===null&&(Ae=[]),Ae.push(ge));if(Ae!==null)for(const ge of Ae)w.delete(ge),C.delete(ge),i.dispatchEvent({type:"planeremoved",data:ge});for(const ge of ie.detectedPlanes)if(!w.has(ge))w.add(ge),C.set(ge,ie.lastChangedTime),i.dispatchEvent({type:"planeadded",data:ge});else{const W=C.get(ge);ge.lastChangedTime>W&&(C.set(ge,ge.lastChangedTime),i.dispatchEvent({type:"planechanged",data:ge}))}}y=null}const Z=new eI;Z.setAnimationLoop($),this.setAnimationLoop=function(ee){z=ee},this.dispose=function(){}}}function g5(t,e){function n(M,g){M.matrixAutoUpdate===!0&&M.updateMatrix(),g.value.copy(M.matrix)}function i(M,g){g.color.getRGB(M.fogColor.value,ZL(t)),g.isFog?(M.fogNear.value=g.near,M.fogFar.value=g.far):g.isFogExp2&&(M.fogDensity.value=g.density)}function r(M,g,x,_,w){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(M,g):g.isMeshToonMaterial?(s(M,g),d(M,g)):g.isMeshPhongMaterial?(s(M,g),h(M,g)):g.isMeshStandardMaterial?(s(M,g),p(M,g),g.isMeshPhysicalMaterial&&m(M,g,w)):g.isMeshMatcapMaterial?(s(M,g),y(M,g)):g.isMeshDepthMaterial?s(M,g):g.isMeshDistanceMaterial?(s(M,g),S(M,g)):g.isMeshNormalMaterial?s(M,g):g.isLineBasicMaterial?(o(M,g),g.isLineDashedMaterial&&a(M,g)):g.isPointsMaterial?l(M,g,x,_):g.isSpriteMaterial?u(M,g):g.isShadowMaterial?(M.color.value.copy(g.color),M.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(M,g){M.opacity.value=g.opacity,g.color&&M.diffuse.value.copy(g.color),g.emissive&&M.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(M.map.value=g.map,n(g.map,M.mapTransform)),g.alphaMap&&(M.alphaMap.value=g.alphaMap,n(g.alphaMap,M.alphaMapTransform)),g.bumpMap&&(M.bumpMap.value=g.bumpMap,n(g.bumpMap,M.bumpMapTransform),M.bumpScale.value=g.bumpScale,g.side===gi&&(M.bumpScale.value*=-1)),g.normalMap&&(M.normalMap.value=g.normalMap,n(g.normalMap,M.normalMapTransform),M.normalScale.value.copy(g.normalScale),g.side===gi&&M.normalScale.value.negate()),g.displacementMap&&(M.displacementMap.value=g.displacementMap,n(g.displacementMap,M.displacementMapTransform),M.displacementScale.value=g.displacementScale,M.displacementBias.value=g.displacementBias),g.emissiveMap&&(M.emissiveMap.value=g.emissiveMap,n(g.emissiveMap,M.emissiveMapTransform)),g.specularMap&&(M.specularMap.value=g.specularMap,n(g.specularMap,M.specularMapTransform)),g.alphaTest>0&&(M.alphaTest.value=g.alphaTest);const x=e.get(g).envMap;if(x&&(M.envMap.value=x,M.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=g.reflectivity,M.ior.value=g.ior,M.refractionRatio.value=g.refractionRatio),g.lightMap){M.lightMap.value=g.lightMap;const _=t.useLegacyLights===!0?Math.PI:1;M.lightMapIntensity.value=g.lightMapIntensity*_,n(g.lightMap,M.lightMapTransform)}g.aoMap&&(M.aoMap.value=g.aoMap,M.aoMapIntensity.value=g.aoMapIntensity,n(g.aoMap,M.aoMapTransform))}function o(M,g){M.diffuse.value.copy(g.color),M.opacity.value=g.opacity,g.map&&(M.map.value=g.map,n(g.map,M.mapTransform))}function a(M,g){M.dashSize.value=g.dashSize,M.totalSize.value=g.dashSize+g.gapSize,M.scale.value=g.scale}function l(M,g,x,_){M.diffuse.value.copy(g.color),M.opacity.value=g.opacity,M.size.value=g.size*x,M.scale.value=_*.5,g.map&&(M.map.value=g.map,n(g.map,M.uvTransform)),g.alphaMap&&(M.alphaMap.value=g.alphaMap),g.alphaTest>0&&(M.alphaTest.value=g.alphaTest)}function u(M,g){M.diffuse.value.copy(g.color),M.opacity.value=g.opacity,M.rotation.value=g.rotation,g.map&&(M.map.value=g.map,n(g.map,M.mapTransform)),g.alphaMap&&(M.alphaMap.value=g.alphaMap),g.alphaTest>0&&(M.alphaTest.value=g.alphaTest)}function h(M,g){M.specular.value.copy(g.specular),M.shininess.value=Math.max(g.shininess,1e-4)}function d(M,g){g.gradientMap&&(M.gradientMap.value=g.gradientMap)}function p(M,g){M.metalness.value=g.metalness,g.metalnessMap&&(M.metalnessMap.value=g.metalnessMap,n(g.metalnessMap,M.metalnessMapTransform)),M.roughness.value=g.roughness,g.roughnessMap&&(M.roughnessMap.value=g.roughnessMap,n(g.roughnessMap,M.roughnessMapTransform)),e.get(g).envMap&&(M.envMapIntensity.value=g.envMapIntensity)}function m(M,g,x){M.ior.value=g.ior,g.sheen>0&&(M.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),M.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(M.sheenColorMap.value=g.sheenColorMap,n(g.sheenColorMap,M.sheenColorMapTransform)),g.sheenRoughnessMap&&(M.sheenRoughnessMap.value=g.sheenRoughnessMap,n(g.sheenRoughnessMap,M.sheenRoughnessMapTransform))),g.clearcoat>0&&(M.clearcoat.value=g.clearcoat,M.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(M.clearcoatMap.value=g.clearcoatMap,n(g.clearcoatMap,M.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,n(g.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(M.clearcoatNormalMap.value=g.clearcoatNormalMap,n(g.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===gi&&M.clearcoatNormalScale.value.negate())),g.iridescence>0&&(M.iridescence.value=g.iridescence,M.iridescenceIOR.value=g.iridescenceIOR,M.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(M.iridescenceMap.value=g.iridescenceMap,n(g.iridescenceMap,M.iridescenceMapTransform)),g.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=g.iridescenceThicknessMap,n(g.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),g.transmission>0&&(M.transmission.value=g.transmission,M.transmissionSamplerMap.value=x.texture,M.transmissionSamplerSize.value.set(x.width,x.height),g.transmissionMap&&(M.transmissionMap.value=g.transmissionMap,n(g.transmissionMap,M.transmissionMapTransform)),M.thickness.value=g.thickness,g.thicknessMap&&(M.thicknessMap.value=g.thicknessMap,n(g.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=g.attenuationDistance,M.attenuationColor.value.copy(g.attenuationColor)),M.specularIntensity.value=g.specularIntensity,M.specularColor.value.copy(g.specularColor),g.specularColorMap&&(M.specularColorMap.value=g.specularColorMap,n(g.specularColorMap,M.specularColorMapTransform)),g.specularIntensityMap&&(M.specularIntensityMap.value=g.specularIntensityMap,n(g.specularIntensityMap,M.specularIntensityMapTransform))}function y(M,g){g.matcap&&(M.matcap.value=g.matcap)}function S(M,g){const x=e.get(g).light;M.referencePosition.value.setFromMatrixPosition(x.matrixWorld),M.nearDistance.value=x.shadow.camera.near,M.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function v5(t,e,n,i){let r={},s={},o=[];const a=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(x,_){const w=_.program;i.uniformBlockBinding(x,w)}function u(x,_){let w=r[x.id];w===void 0&&(y(x),w=h(x),r[x.id]=w,x.addEventListener("dispose",M));const C=_.program;i.updateUBOMapping(x,C);const R=e.render.frame;s[x.id]!==R&&(p(x),s[x.id]=R)}function h(x){const _=d();x.__bindingPointIndex=_;const w=t.createBuffer(),C=x.__size,R=x.usage;return t.bindBuffer(t.UNIFORM_BUFFER,w),t.bufferData(t.UNIFORM_BUFFER,C,R),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,_,w),w}function d(){for(let x=0;x<a;x++)if(o.indexOf(x)===-1)return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(x){const _=r[x.id],w=x.uniforms,C=x.__cache;t.bindBuffer(t.UNIFORM_BUFFER,_);for(let R=0,P=w.length;R<P;R++){const L=w[R];if(m(L,R,C)===!0){const b=L.__offset,B=Array.isArray(L.value)?L.value:[L.value];let G=0;for(let X=0;X<B.length;X++){const V=B[X],Y=S(V);typeof V=="number"?(L.__data[0]=V,t.bufferSubData(t.UNIFORM_BUFFER,b+G,L.__data)):V.isMatrix3?(L.__data[0]=V.elements[0],L.__data[1]=V.elements[1],L.__data[2]=V.elements[2],L.__data[3]=V.elements[0],L.__data[4]=V.elements[3],L.__data[5]=V.elements[4],L.__data[6]=V.elements[5],L.__data[7]=V.elements[0],L.__data[8]=V.elements[6],L.__data[9]=V.elements[7],L.__data[10]=V.elements[8],L.__data[11]=V.elements[0]):(V.toArray(L.__data,G),G+=Y.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,b,L.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function m(x,_,w){const C=x.value;if(w[_]===void 0){if(typeof C=="number")w[_]=C;else{const R=Array.isArray(C)?C:[C],P=[];for(let L=0;L<R.length;L++)P.push(R[L].clone());w[_]=P}return!0}else if(typeof C=="number"){if(w[_]!==C)return w[_]=C,!0}else{const R=Array.isArray(w[_])?w[_]:[w[_]],P=Array.isArray(C)?C:[C];for(let L=0;L<R.length;L++){const b=R[L];if(b.equals(P[L])===!1)return b.copy(P[L]),!0}}return!1}function y(x){const _=x.uniforms;let w=0;const C=16;let R=0;for(let P=0,L=_.length;P<L;P++){const b=_[P],B={boundary:0,storage:0},G=Array.isArray(b.value)?b.value:[b.value];for(let X=0,V=G.length;X<V;X++){const Y=G[X],J=S(Y);B.boundary+=J.boundary,B.storage+=J.storage}if(b.__data=new Float32Array(B.storage/Float32Array.BYTES_PER_ELEMENT),b.__offset=w,P>0){R=w%C;const X=C-R;R!==0&&X-B.boundary<0&&(w+=C-R,b.__offset=w)}w+=B.storage}return R=w%C,R>0&&(w+=C-R),x.__size=w,x.__cache={},this}function S(x){const _={boundary:0,storage:0};return typeof x=="number"?(_.boundary=4,_.storage=4):x.isVector2?(_.boundary=8,_.storage=8):x.isVector3||x.isColor?(_.boundary=16,_.storage=12):x.isVector4?(_.boundary=16,_.storage=16):x.isMatrix3?(_.boundary=48,_.storage=48):x.isMatrix4?(_.boundary=64,_.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),_}function M(x){const _=x.target;_.removeEventListener("dispose",M);const w=o.indexOf(_.__bindingPointIndex);o.splice(w,1),t.deleteBuffer(r[_.id]),delete r[_.id],delete s[_.id]}function g(){for(const x in r)t.deleteBuffer(r[x]);o=[],r={},s={}}return{bind:l,update:u,dispose:g}}function y5(){const t=Ph("canvas");return t.style.display="block",t}class bS{constructor(e={}){const{canvas:n=y5(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;i!==null?p=i.getContextAttributes().alpha:p=o;let m=null,y=null;const S=[],M=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=dt,this.useLegacyLights=!0,this.toneMapping=Xr,this.toneMappingExposure=1;const g=this;let x=!1,_=0,w=0,C=null,R=-1,P=null;const L=new Gt,b=new Gt;let B=null,G=n.width,X=n.height,V=1,Y=null,J=null;const ae=new Gt(0,0,G,X),ne=new Gt(0,0,G,X);let I=!1;const H=new F0;let z=!1,$=!1,Z=null;const ee=new st,ie=new F,Ae={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ge(){return C===null?V:1}let W=i;function Ve(N,se){for(let he=0;he<N.length;he++){const te=N[he],pe=n.getContext(te,se);if(pe!==null)return pe}return null}try{const N={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${nd}`),n.addEventListener("webglcontextlost",Ke,!1),n.addEventListener("webglcontextrestored",wt,!1),n.addEventListener("webglcontextcreationerror",Ft,!1),W===null){const se=["webgl2","webgl","experimental-webgl"];if(g.isWebGL1Renderer===!0&&se.shift(),W=Ve(se,N),W===null)throw Ve(se)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}W.getShaderPrecisionFormat===void 0&&(W.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(N){throw console.error("THREE.WebGLRenderer: "+N.message),N}let Je,ve,_e,me,oe,xe,De,Re,He,Qe,We,rt,Mt,k,D,le,Se,we,be,nt,Ne,de,ze,qe;function et(){Je=new D4(W),ve=new b4(W,Je,e),Je.init(ve),de=new sI(W,Je,ve),_e=new h5(W,Je,ve),me=new U4(W),oe=new e5,xe=new d5(W,Je,_e,oe,ve,de,me),De=new P4(g),Re=new I4(g),He=new YG(W,ve),ze=new T4(W,Je,He,ve),Qe=new F4(W,He,me,ze),We=new z4(W,Qe,He,me),be=new G4(W,ve,xe),le=new R4(oe),rt=new $V(g,De,Re,Je,ve,ze,le),Mt=new g5(g,oe),k=new n5,D=new l5(Je,ve),we=new E4(g,De,Re,_e,We,p,l),Se=new f5(g,We,ve),qe=new v5(W,me,ve,_e),nt=new C4(W,Je,me,ve),Ne=new N4(W,Je,me,ve),me.programs=rt.programs,g.capabilities=ve,g.extensions=Je,g.properties=oe,g.renderLists=k,g.shadowMap=Se,g.state=_e,g.info=me}et();const Oe=new m5(g,W);this.xr=Oe,this.getContext=function(){return W},this.getContextAttributes=function(){return W.getContextAttributes()},this.forceContextLoss=function(){const N=Je.get("WEBGL_lose_context");N&&N.loseContext()},this.forceContextRestore=function(){const N=Je.get("WEBGL_lose_context");N&&N.restoreContext()},this.getPixelRatio=function(){return V},this.setPixelRatio=function(N){N!==void 0&&(V=N,this.setSize(G,X,!1))},this.getSize=function(N){return N.set(G,X)},this.setSize=function(N,se,he=!0){if(Oe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}G=N,X=se,n.width=Math.floor(N*V),n.height=Math.floor(se*V),he===!0&&(n.style.width=N+"px",n.style.height=se+"px"),this.setViewport(0,0,N,se)},this.getDrawingBufferSize=function(N){return N.set(G*V,X*V).floor()},this.setDrawingBufferSize=function(N,se,he){G=N,X=se,V=he,n.width=Math.floor(N*he),n.height=Math.floor(se*he),this.setViewport(0,0,N,se)},this.getCurrentViewport=function(N){return N.copy(L)},this.getViewport=function(N){return N.copy(ae)},this.setViewport=function(N,se,he,te){N.isVector4?ae.set(N.x,N.y,N.z,N.w):ae.set(N,se,he,te),_e.viewport(L.copy(ae).multiplyScalar(V).floor())},this.getScissor=function(N){return N.copy(ne)},this.setScissor=function(N,se,he,te){N.isVector4?ne.set(N.x,N.y,N.z,N.w):ne.set(N,se,he,te),_e.scissor(b.copy(ne).multiplyScalar(V).floor())},this.getScissorTest=function(){return I},this.setScissorTest=function(N){_e.setScissorTest(I=N)},this.setOpaqueSort=function(N){Y=N},this.setTransparentSort=function(N){J=N},this.getClearColor=function(N){return N.copy(we.getClearColor())},this.setClearColor=function(){we.setClearColor.apply(we,arguments)},this.getClearAlpha=function(){return we.getClearAlpha()},this.setClearAlpha=function(){we.setClearAlpha.apply(we,arguments)},this.clear=function(N=!0,se=!0,he=!0){let te=0;N&&(te|=W.COLOR_BUFFER_BIT),se&&(te|=W.DEPTH_BUFFER_BIT),he&&(te|=W.STENCIL_BUFFER_BIT),W.clear(te)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Ke,!1),n.removeEventListener("webglcontextrestored",wt,!1),n.removeEventListener("webglcontextcreationerror",Ft,!1),k.dispose(),D.dispose(),oe.dispose(),De.dispose(),Re.dispose(),We.dispose(),ze.dispose(),qe.dispose(),rt.dispose(),Oe.dispose(),Oe.removeEventListener("sessionstart",je),Oe.removeEventListener("sessionend",Nt),Z&&(Z.dispose(),Z=null),Ut.stop()};function Ke(N){N.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function wt(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const N=me.autoReset,se=Se.enabled,he=Se.autoUpdate,te=Se.needsUpdate,pe=Se.type;et(),me.autoReset=N,Se.enabled=se,Se.autoUpdate=he,Se.needsUpdate=te,Se.type=pe}function Ft(N){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",N.statusMessage)}function en(N){const se=N.target;se.removeEventListener("dispose",en),K(se)}function K(N){fe(N),oe.remove(N)}function fe(N){const se=oe.get(N).programs;se!==void 0&&(se.forEach(function(he){rt.releaseProgram(he)}),N.isShaderMaterial&&rt.releaseShaderCache(N))}this.renderBufferDirect=function(N,se,he,te,pe,Ze){se===null&&(se=Ae);const tt=pe.isMesh&&pe.matrixWorld.determinant()<0,ot=Nd(N,se,he,te,pe);_e.setMaterial(te,tt);let ct=he.index,vt=1;te.wireframe===!0&&(ct=Qe.getWireframeAttribute(he),vt=2);const yt=he.drawRange,_t=he.attributes.position;let Ot=yt.start*vt,Hn=(yt.start+yt.count)*vt;Ze!==null&&(Ot=Math.max(Ot,Ze.start*vt),Hn=Math.min(Hn,(Ze.start+Ze.count)*vt)),ct!==null?(Ot=Math.max(Ot,0),Hn=Math.min(Hn,ct.count)):_t!=null&&(Ot=Math.max(Ot,0),Hn=Math.min(Hn,_t.count));const Di=Hn-Ot;if(Di<0||Di===1/0)return;ze.setup(pe,te,ot,he,ct);let Tr,Wt=nt;if(ct!==null&&(Tr=He.get(ct),Wt=Ne,Wt.setIndex(Tr)),pe.isMesh)te.wireframe===!0?(_e.setLineWidth(te.wireframeLinewidth*ge()),Wt.setMode(W.LINES)):Wt.setMode(W.TRIANGLES);else if(pe.isLine){let At=te.linewidth;At===void 0&&(At=1),_e.setLineWidth(At*ge()),pe.isLineSegments?Wt.setMode(W.LINES):pe.isLineLoop?Wt.setMode(W.LINE_LOOP):Wt.setMode(W.LINE_STRIP)}else pe.isPoints?Wt.setMode(W.POINTS):pe.isSprite&&Wt.setMode(W.TRIANGLES);if(pe.isInstancedMesh)Wt.renderInstances(Ot,Di,pe.count);else if(he.isInstancedBufferGeometry){const At=he._maxInstanceCount!==void 0?he._maxInstanceCount:1/0,ya=Math.min(he.instanceCount,At);Wt.renderInstances(Ot,Di,ya)}else Wt.render(Ot,Di)},this.compile=function(N,se){function he(te,pe,Ze){te.transparent===!0&&te.side===yr&&te.forceSinglePass===!1?(te.side=gi,te.needsUpdate=!0,Bl(te,pe,Ze),te.side=_s,te.needsUpdate=!0,Bl(te,pe,Ze),te.side=yr):Bl(te,pe,Ze)}y=D.get(N),y.init(),M.push(y),N.traverseVisible(function(te){te.isLight&&te.layers.test(se.layers)&&(y.pushLight(te),te.castShadow&&y.pushShadow(te))}),y.setupLights(g.useLegacyLights),N.traverse(function(te){const pe=te.material;if(pe)if(Array.isArray(pe))for(let Ze=0;Ze<pe.length;Ze++){const tt=pe[Ze];he(tt,N,te)}else he(pe,N,te)}),M.pop(),y=null};let Me=null;function Fe(N){Me&&Me(N)}function je(){Ut.stop()}function Nt(){Ut.start()}const Ut=new eI;Ut.setAnimationLoop(Fe),typeof self<"u"&&Ut.setContext(self),this.setAnimationLoop=function(N){Me=N,Oe.setAnimationLoop(N),N===null?Ut.stop():Ut.start()},Oe.addEventListener("sessionstart",je),Oe.addEventListener("sessionend",Nt),this.render=function(N,se){if(se!==void 0&&se.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(x===!0)return;N.matrixWorldAutoUpdate===!0&&N.updateMatrixWorld(),se.parent===null&&se.matrixWorldAutoUpdate===!0&&se.updateMatrixWorld(),Oe.enabled===!0&&Oe.isPresenting===!0&&(Oe.cameraAutoUpdate===!0&&Oe.updateCamera(se),se=Oe.getCamera()),N.isScene===!0&&N.onBeforeRender(g,N,se,C),y=D.get(N,M.length),y.init(),M.push(y),ee.multiplyMatrices(se.projectionMatrix,se.matrixWorldInverse),H.setFromProjectionMatrix(ee),$=this.localClippingEnabled,z=le.init(this.clippingPlanes,$),m=k.get(N,S.length),m.init(),S.push(m),In(N,se,0,g.sortObjects),m.finish(),g.sortObjects===!0&&m.sort(Y,J),z===!0&&le.beginShadows();const he=y.state.shadowsArray;if(Se.render(he,N,se),z===!0&&le.endShadows(),this.info.autoReset===!0&&this.info.reset(),we.render(m,N),y.setupLights(g.useLegacyLights),se.isArrayCamera){const te=se.cameras;for(let pe=0,Ze=te.length;pe<Ze;pe++){const tt=te[pe];Er(m,N,tt,tt.viewport)}}else Er(m,N,se);C!==null&&(xe.updateMultisampleRenderTarget(C),xe.updateRenderTargetMipmap(C)),N.isScene===!0&&N.onAfterRender(g,N,se),ze.resetDefaultState(),R=-1,P=null,M.pop(),M.length>0?y=M[M.length-1]:y=null,S.pop(),S.length>0?m=S[S.length-1]:m=null};function In(N,se,he,te){if(N.visible===!1)return;if(N.layers.test(se.layers)){if(N.isGroup)he=N.renderOrder;else if(N.isLOD)N.autoUpdate===!0&&N.update(se);else if(N.isLight)y.pushLight(N),N.castShadow&&y.pushShadow(N);else if(N.isSprite){if(!N.frustumCulled||H.intersectsSprite(N)){te&&ie.setFromMatrixPosition(N.matrixWorld).applyMatrix4(ee);const tt=We.update(N),ot=N.material;ot.visible&&m.push(N,tt,ot,he,ie.z,null)}}else if((N.isMesh||N.isLine||N.isPoints)&&(!N.frustumCulled||H.intersectsObject(N))){N.isSkinnedMesh&&N.skeleton.frame!==me.render.frame&&(N.skeleton.update(),N.skeleton.frame=me.render.frame);const tt=We.update(N),ot=N.material;if(te&&(tt.boundingSphere===null&&tt.computeBoundingSphere(),ie.copy(tt.boundingSphere.center).applyMatrix4(N.matrixWorld).applyMatrix4(ee)),Array.isArray(ot)){const ct=tt.groups;for(let vt=0,yt=ct.length;vt<yt;vt++){const _t=ct[vt],Ot=ot[_t.materialIndex];Ot&&Ot.visible&&m.push(N,tt,Ot,he,ie.z,_t)}}else ot.visible&&m.push(N,tt,ot,he,ie.z,null)}}const Ze=N.children;for(let tt=0,ot=Ze.length;tt<ot;tt++)In(Ze[tt],se,he,te)}function Er(N,se,he,te){const pe=N.opaque,Ze=N.transmissive,tt=N.transparent;y.setupLightsView(he),z===!0&&le.setGlobalState(g.clippingPlanes,he),Ze.length>0&&Yt(pe,Ze,se,he),te&&_e.viewport(L.copy(te)),pe.length>0&&li(pe,se,he),Ze.length>0&&li(Ze,se,he),tt.length>0&&li(tt,se,he),_e.buffers.depth.setTest(!0),_e.buffers.depth.setMask(!0),_e.buffers.color.setMask(!0),_e.setPolygonOffset(!1)}function Yt(N,se,he,te){if(Z===null){const ot=ve.isWebGL2;Z=new Qr(1024,1024,{generateMipmaps:!0,type:Je.has("EXT_color_buffer_half_float")?ac:io,minFilter:As,samples:ot&&a===!0?4:0})}const pe=g.getRenderTarget();g.setRenderTarget(Z),g.clear();const Ze=g.toneMapping;g.toneMapping=Xr,li(N,he,te),xe.updateMultisampleRenderTarget(Z),xe.updateRenderTargetMipmap(Z);let tt=!1;for(let ot=0,ct=se.length;ot<ct;ot++){const vt=se[ot],yt=vt.object,_t=vt.geometry,Ot=vt.material,Hn=vt.group;if(Ot.side===yr&&yt.layers.test(te.layers)){const Di=Ot.side;Ot.side=gi,Ot.needsUpdate=!0,er(yt,he,te,_t,Ot,Hn),Ot.side=Di,Ot.needsUpdate=!0,tt=!0}}tt===!0&&(xe.updateMultisampleRenderTarget(Z),xe.updateRenderTargetMipmap(Z)),g.setRenderTarget(pe),g.toneMapping=Ze}function li(N,se,he){const te=se.isScene===!0?se.overrideMaterial:null;for(let pe=0,Ze=N.length;pe<Ze;pe++){const tt=N[pe],ot=tt.object,ct=tt.geometry,vt=te===null?tt.material:te,yt=tt.group;ot.layers.test(he.layers)&&er(ot,se,he,ct,vt,yt)}}function er(N,se,he,te,pe,Ze){N.onBeforeRender(g,se,he,te,pe,Ze),N.modelViewMatrix.multiplyMatrices(he.matrixWorldInverse,N.matrixWorld),N.normalMatrix.getNormalMatrix(N.modelViewMatrix),pe.onBeforeRender(g,se,he,te,N,Ze),pe.transparent===!0&&pe.side===yr&&pe.forceSinglePass===!1?(pe.side=gi,pe.needsUpdate=!0,g.renderBufferDirect(he,se,te,pe,N,Ze),pe.side=_s,pe.needsUpdate=!0,g.renderBufferDirect(he,se,te,pe,N,Ze),pe.side=yr):g.renderBufferDirect(he,se,te,pe,N,Ze),N.onAfterRender(g,se,he,te,pe,Ze)}function Bl(N,se,he){se.isScene!==!0&&(se=Ae);const te=oe.get(N),pe=y.state.lights,Ze=y.state.shadowsArray,tt=pe.state.version,ot=rt.getParameters(N,pe.state,Ze,se,he),ct=rt.getProgramCacheKey(ot);let vt=te.programs;te.environment=N.isMeshStandardMaterial?se.environment:null,te.fog=se.fog,te.envMap=(N.isMeshStandardMaterial?Re:De).get(N.envMap||te.environment),vt===void 0&&(N.addEventListener("dispose",en),vt=new Map,te.programs=vt);let yt=vt.get(ct);if(yt!==void 0){if(te.currentProgram===yt&&te.lightsStateVersion===tt)return Fd(N,ot),yt}else ot.uniforms=rt.getUniforms(N),N.onBuild(he,ot,g),N.onBeforeCompile(ot,g),yt=rt.acquireProgram(ot,ct),vt.set(ct,yt),te.uniforms=ot.uniforms;const _t=te.uniforms;(!N.isShaderMaterial&&!N.isRawShaderMaterial||N.clipping===!0)&&(_t.clippingPlanes=le.uniform),Fd(N,ot),te.needsLights=lv(N),te.lightsStateVersion=tt,te.needsLights&&(_t.ambientLightColor.value=pe.state.ambient,_t.lightProbe.value=pe.state.probe,_t.directionalLights.value=pe.state.directional,_t.directionalLightShadows.value=pe.state.directionalShadow,_t.spotLights.value=pe.state.spot,_t.spotLightShadows.value=pe.state.spotShadow,_t.rectAreaLights.value=pe.state.rectArea,_t.ltc_1.value=pe.state.rectAreaLTC1,_t.ltc_2.value=pe.state.rectAreaLTC2,_t.pointLights.value=pe.state.point,_t.pointLightShadows.value=pe.state.pointShadow,_t.hemisphereLights.value=pe.state.hemi,_t.directionalShadowMap.value=pe.state.directionalShadowMap,_t.directionalShadowMatrix.value=pe.state.directionalShadowMatrix,_t.spotShadowMap.value=pe.state.spotShadowMap,_t.spotLightMatrix.value=pe.state.spotLightMatrix,_t.spotLightMap.value=pe.state.spotLightMap,_t.pointShadowMap.value=pe.state.pointShadowMap,_t.pointShadowMatrix.value=pe.state.pointShadowMatrix);const Ot=yt.getUniforms(),Hn=hg.seqWithValue(Ot.seq,_t);return te.currentProgram=yt,te.uniformsList=Hn,yt}function Fd(N,se){const he=oe.get(N);he.outputColorSpace=se.outputColorSpace,he.instancing=se.instancing,he.skinning=se.skinning,he.morphTargets=se.morphTargets,he.morphNormals=se.morphNormals,he.morphColors=se.morphColors,he.morphTargetsCount=se.morphTargetsCount,he.numClippingPlanes=se.numClippingPlanes,he.numIntersection=se.numClipIntersection,he.vertexAlphas=se.vertexAlphas,he.vertexTangents=se.vertexTangents,he.toneMapping=se.toneMapping}function Nd(N,se,he,te,pe){se.isScene!==!0&&(se=Ae),xe.resetTextureUnits();const Ze=se.fog,tt=te.isMeshStandardMaterial?se.environment:null,ot=C===null?g.outputColorSpace:C.isXRRenderTarget===!0?C.texture.colorSpace:Yr,ct=(te.isMeshStandardMaterial?Re:De).get(te.envMap||tt),vt=te.vertexColors===!0&&!!he.attributes.color&&he.attributes.color.itemSize===4,yt=!!te.normalMap&&!!he.attributes.tangent,_t=!!he.morphAttributes.position,Ot=!!he.morphAttributes.normal,Hn=!!he.morphAttributes.color,Di=te.toneMapped?g.toneMapping:Xr,Tr=he.morphAttributes.position||he.morphAttributes.normal||he.morphAttributes.color,Wt=Tr!==void 0?Tr.length:0,At=oe.get(te),ya=y.state.lights;if(z===!0&&($===!0||N!==P)){const Ht=N===P&&te.id===R;le.setState(te,N,Ht)}let xn=!1;te.version===At.__version?(At.needsLights&&At.lightsStateVersion!==ya.state.version||At.outputColorSpace!==ot||pe.isInstancedMesh&&At.instancing===!1||!pe.isInstancedMesh&&At.instancing===!0||pe.isSkinnedMesh&&At.skinning===!1||!pe.isSkinnedMesh&&At.skinning===!0||At.envMap!==ct||te.fog===!0&&At.fog!==Ze||At.numClippingPlanes!==void 0&&(At.numClippingPlanes!==le.numPlanes||At.numIntersection!==le.numIntersection)||At.vertexAlphas!==vt||At.vertexTangents!==yt||At.morphTargets!==_t||At.morphNormals!==Ot||At.morphColors!==Hn||At.toneMapping!==Di||ve.isWebGL2===!0&&At.morphTargetsCount!==Wt)&&(xn=!0):(xn=!0,At.__version=te.version);let Cr=At.currentProgram;xn===!0&&(Cr=Bl(te,se,pe));let Es=!1,_i=!1,kt=!1;const ft=Cr.getUniforms(),Yn=At.uniforms;if(_e.useProgram(Cr.program)&&(Es=!0,_i=!0,kt=!0),te.id!==R&&(R=te.id,_i=!0),Es||P!==N){if(ft.setValue(W,"projectionMatrix",N.projectionMatrix),ve.logarithmicDepthBuffer&&ft.setValue(W,"logDepthBufFC",2/(Math.log(N.far+1)/Math.LN2)),P!==N&&(P=N,_i=!0,kt=!0),te.isShaderMaterial||te.isMeshPhongMaterial||te.isMeshToonMaterial||te.isMeshStandardMaterial||te.envMap){const Ht=ft.map.cameraPosition;Ht!==void 0&&Ht.setValue(W,ie.setFromMatrixPosition(N.matrixWorld))}(te.isMeshPhongMaterial||te.isMeshToonMaterial||te.isMeshLambertMaterial||te.isMeshBasicMaterial||te.isMeshStandardMaterial||te.isShaderMaterial)&&ft.setValue(W,"isOrthographic",N.isOrthographicCamera===!0),(te.isMeshPhongMaterial||te.isMeshToonMaterial||te.isMeshLambertMaterial||te.isMeshBasicMaterial||te.isMeshStandardMaterial||te.isShaderMaterial||te.isShadowMaterial||pe.isSkinnedMesh)&&ft.setValue(W,"viewMatrix",N.matrixWorldInverse)}if(pe.isSkinnedMesh){ft.setOptional(W,pe,"bindMatrix"),ft.setOptional(W,pe,"bindMatrixInverse");const Ht=pe.skeleton;Ht&&(ve.floatVertexTextures?(Ht.boneTexture===null&&Ht.computeBoneTexture(),ft.setValue(W,"boneTexture",Ht.boneTexture,xe),ft.setValue(W,"boneTextureSize",Ht.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const _n=he.morphAttributes;if((_n.position!==void 0||_n.normal!==void 0||_n.color!==void 0&&ve.isWebGL2===!0)&&be.update(pe,he,Cr),(_i||At.receiveShadow!==pe.receiveShadow)&&(At.receiveShadow=pe.receiveShadow,ft.setValue(W,"receiveShadow",pe.receiveShadow)),te.isMeshGouraudMaterial&&te.envMap!==null&&(Yn.envMap.value=ct,Yn.flipEnvMap.value=ct.isCubeTexture&&ct.isRenderTargetTexture===!1?-1:1),_i&&(ft.setValue(W,"toneMappingExposure",g.toneMappingExposure),At.needsLights&&Pc(Yn,kt),Ze&&te.fog===!0&&Mt.refreshFogUniforms(Yn,Ze),Mt.refreshMaterialUniforms(Yn,te,V,X,Z),hg.upload(W,At.uniformsList,Yn,xe)),te.isShaderMaterial&&te.uniformsNeedUpdate===!0&&(hg.upload(W,At.uniformsList,Yn,xe),te.uniformsNeedUpdate=!1),te.isSpriteMaterial&&ft.setValue(W,"center",pe.center),ft.setValue(W,"modelViewMatrix",pe.modelViewMatrix),ft.setValue(W,"normalMatrix",pe.normalMatrix),ft.setValue(W,"modelMatrix",pe.matrixWorld),te.isShaderMaterial||te.isRawShaderMaterial){const Ht=te.uniformsGroups;for(let br=0,co=Ht.length;br<co;br++)if(ve.isWebGL2){const Vn=Ht[br];qe.update(Vn,Cr),qe.bind(Vn,Cr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Cr}function Pc(N,se){N.ambientLightColor.needsUpdate=se,N.lightProbe.needsUpdate=se,N.directionalLights.needsUpdate=se,N.directionalLightShadows.needsUpdate=se,N.pointLights.needsUpdate=se,N.pointLightShadows.needsUpdate=se,N.spotLights.needsUpdate=se,N.spotLightShadows.needsUpdate=se,N.rectAreaLights.needsUpdate=se,N.hemisphereLights.needsUpdate=se}function lv(N){return N.isMeshLambertMaterial||N.isMeshToonMaterial||N.isMeshPhongMaterial||N.isMeshStandardMaterial||N.isShadowMaterial||N.isShaderMaterial&&N.lights===!0}this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(N,se,he){oe.get(N.texture).__webglTexture=se,oe.get(N.depthTexture).__webglTexture=he;const te=oe.get(N);te.__hasExternalTextures=!0,te.__hasExternalTextures&&(te.__autoAllocateDepthBuffer=he===void 0,te.__autoAllocateDepthBuffer||Je.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),te.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(N,se){const he=oe.get(N);he.__webglFramebuffer=se,he.__useDefaultFramebuffer=se===void 0},this.setRenderTarget=function(N,se=0,he=0){C=N,_=se,w=he;let te=!0,pe=null,Ze=!1,tt=!1;if(N){const ct=oe.get(N);ct.__useDefaultFramebuffer!==void 0?(_e.bindFramebuffer(W.FRAMEBUFFER,null),te=!1):ct.__webglFramebuffer===void 0?xe.setupRenderTarget(N):ct.__hasExternalTextures&&xe.rebindTextures(N,oe.get(N.texture).__webglTexture,oe.get(N.depthTexture).__webglTexture);const vt=N.texture;(vt.isData3DTexture||vt.isDataArrayTexture||vt.isCompressedArrayTexture)&&(tt=!0);const yt=oe.get(N).__webglFramebuffer;N.isWebGLCubeRenderTarget?(pe=yt[se],Ze=!0):ve.isWebGL2&&N.samples>0&&xe.useMultisampledRTT(N)===!1?pe=oe.get(N).__webglMultisampledFramebuffer:pe=yt,L.copy(N.viewport),b.copy(N.scissor),B=N.scissorTest}else L.copy(ae).multiplyScalar(V).floor(),b.copy(ne).multiplyScalar(V).floor(),B=I;if(_e.bindFramebuffer(W.FRAMEBUFFER,pe)&&ve.drawBuffers&&te&&_e.drawBuffers(N,pe),_e.viewport(L),_e.scissor(b),_e.setScissorTest(B),Ze){const ct=oe.get(N.texture);W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_CUBE_MAP_POSITIVE_X+se,ct.__webglTexture,he)}else if(tt){const ct=oe.get(N.texture),vt=se||0;W.framebufferTextureLayer(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,ct.__webglTexture,he||0,vt)}R=-1},this.readRenderTargetPixels=function(N,se,he,te,pe,Ze,tt){if(!(N&&N.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ot=oe.get(N).__webglFramebuffer;if(N.isWebGLCubeRenderTarget&&tt!==void 0&&(ot=ot[tt]),ot){_e.bindFramebuffer(W.FRAMEBUFFER,ot);try{const ct=N.texture,vt=ct.format,yt=ct.type;if(vt!==bi&&de.convert(vt)!==W.getParameter(W.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const _t=yt===ac&&(Je.has("EXT_color_buffer_half_float")||ve.isWebGL2&&Je.has("EXT_color_buffer_float"));if(yt!==io&&de.convert(yt)!==W.getParameter(W.IMPLEMENTATION_COLOR_READ_TYPE)&&!(yt===Xs&&(ve.isWebGL2||Je.has("OES_texture_float")||Je.has("WEBGL_color_buffer_float")))&&!_t){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}se>=0&&se<=N.width-te&&he>=0&&he<=N.height-pe&&W.readPixels(se,he,te,pe,de.convert(vt),de.convert(yt),Ze)}finally{const ct=C!==null?oe.get(C).__webglFramebuffer:null;_e.bindFramebuffer(W.FRAMEBUFFER,ct)}}},this.copyFramebufferToTexture=function(N,se,he=0){const te=Math.pow(2,-he),pe=Math.floor(se.image.width*te),Ze=Math.floor(se.image.height*te);xe.setTexture2D(se,0),W.copyTexSubImage2D(W.TEXTURE_2D,he,0,0,N.x,N.y,pe,Ze),_e.unbindTexture()},this.copyTextureToTexture=function(N,se,he,te=0){const pe=se.image.width,Ze=se.image.height,tt=de.convert(he.format),ot=de.convert(he.type);xe.setTexture2D(he,0),W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,he.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,he.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,he.unpackAlignment),se.isDataTexture?W.texSubImage2D(W.TEXTURE_2D,te,N.x,N.y,pe,Ze,tt,ot,se.image.data):se.isCompressedTexture?W.compressedTexSubImage2D(W.TEXTURE_2D,te,N.x,N.y,se.mipmaps[0].width,se.mipmaps[0].height,tt,se.mipmaps[0].data):W.texSubImage2D(W.TEXTURE_2D,te,N.x,N.y,tt,ot,se.image),te===0&&he.generateMipmaps&&W.generateMipmap(W.TEXTURE_2D),_e.unbindTexture()},this.copyTextureToTexture3D=function(N,se,he,te,pe=0){if(g.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Ze=N.max.x-N.min.x+1,tt=N.max.y-N.min.y+1,ot=N.max.z-N.min.z+1,ct=de.convert(te.format),vt=de.convert(te.type);let yt;if(te.isData3DTexture)xe.setTexture3D(te,0),yt=W.TEXTURE_3D;else if(te.isDataArrayTexture)xe.setTexture2DArray(te,0),yt=W.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,te.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,te.unpackAlignment);const _t=W.getParameter(W.UNPACK_ROW_LENGTH),Ot=W.getParameter(W.UNPACK_IMAGE_HEIGHT),Hn=W.getParameter(W.UNPACK_SKIP_PIXELS),Di=W.getParameter(W.UNPACK_SKIP_ROWS),Tr=W.getParameter(W.UNPACK_SKIP_IMAGES),Wt=he.isCompressedTexture?he.mipmaps[0]:he.image;W.pixelStorei(W.UNPACK_ROW_LENGTH,Wt.width),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,Wt.height),W.pixelStorei(W.UNPACK_SKIP_PIXELS,N.min.x),W.pixelStorei(W.UNPACK_SKIP_ROWS,N.min.y),W.pixelStorei(W.UNPACK_SKIP_IMAGES,N.min.z),he.isDataTexture||he.isData3DTexture?W.texSubImage3D(yt,pe,se.x,se.y,se.z,Ze,tt,ot,ct,vt,Wt.data):he.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),W.compressedTexSubImage3D(yt,pe,se.x,se.y,se.z,Ze,tt,ot,ct,Wt.data)):W.texSubImage3D(yt,pe,se.x,se.y,se.z,Ze,tt,ot,ct,vt,Wt),W.pixelStorei(W.UNPACK_ROW_LENGTH,_t),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,Ot),W.pixelStorei(W.UNPACK_SKIP_PIXELS,Hn),W.pixelStorei(W.UNPACK_SKIP_ROWS,Di),W.pixelStorei(W.UNPACK_SKIP_IMAGES,Tr),pe===0&&te.generateMipmaps&&W.generateMipmap(yt),_e.unbindTexture()},this.initTexture=function(N){N.isCubeTexture?xe.setTextureCube(N,0):N.isData3DTexture?xe.setTexture3D(N,0):N.isDataArrayTexture||N.isCompressedArrayTexture?xe.setTexture2DArray(N,0):xe.setTexture2D(N,0),_e.unbindTexture()},this.resetState=function(){_=0,w=0,C=null,_e.reset(),ze.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===dt?Ji:gS}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Ji?dt:Yr}}class lI extends bS{}lI.prototype.isWebGL1Renderer=!0;class U0{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Be(e),this.density=n}clone(){return new U0(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class O0{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new Be(e),this.near=n,this.far=i}clone(){return new O0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Kg extends Ct{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class ld{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Rh,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ki()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=n.array[i+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ki()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ki()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const fi=new F;class aa{constructor(e,n,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)fi.fromBufferAttribute(this,n),fi.applyMatrix4(e),this.setXYZ(n,fi.x,fi.y,fi.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)fi.fromBufferAttribute(this,n),fi.applyNormalMatrix(e),this.setXYZ(n,fi.x,fi.y,fi.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)fi.fromBufferAttribute(this,n),fi.transformDirection(e),this.setXYZ(n,fi.x,fi.y,fi.z);return this}setX(e,n){return this.normalized&&(n=gt(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=gt(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=gt(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=gt(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Vi(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Vi(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Vi(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Vi(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=gt(n,this.array),i=gt(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=gt(n,this.array),i=gt(i,this.array),r=gt(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=gt(n,this.array),i=gt(i,this.array),r=gt(r,this.array),s=gt(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return new Dt(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new aa(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class RS extends Tn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Be(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let au;const uf=new F,lu=new F,uu=new F,cu=new ye,cf=new ye,uI=new st,pm=new F,ff=new F,mm=new F,MC=new ye,ax=new ye,wC=new ye;class cI extends Ct{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",au===void 0){au=new ht;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new ld(n,5);au.setIndex([0,1,2,0,2,3]),au.setAttribute("position",new aa(i,3,0,!1)),au.setAttribute("uv",new aa(i,2,3,!1))}this.geometry=au,this.material=e!==void 0?e:new RS,this.center=new ye(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),lu.setFromMatrixScale(this.matrixWorld),uI.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),uu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&lu.multiplyScalar(-uu.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;gm(pm.set(-.5,-.5,0),uu,o,lu,r,s),gm(ff.set(.5,-.5,0),uu,o,lu,r,s),gm(mm.set(.5,.5,0),uu,o,lu,r,s),MC.set(0,0),ax.set(1,0),wC.set(1,1);let a=e.ray.intersectTriangle(pm,ff,mm,!1,uf);if(a===null&&(gm(ff.set(-.5,.5,0),uu,o,lu,r,s),ax.set(0,1),a=e.ray.intersectTriangle(pm,mm,ff,!1,uf),a===null))return;const l=e.ray.origin.distanceTo(uf);l<e.near||l>e.far||n.push({distance:l,point:uf.clone(),uv:Ci.getInterpolation(uf,pm,ff,mm,MC,ax,wC,new ye),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function gm(t,e,n,i,r,s){cu.subVectors(t,n).addScalar(.5).multiply(i),r!==void 0?(cf.x=s*cu.x-r*cu.y,cf.y=r*cu.x+s*cu.y):cf.copy(cu),t.copy(e),t.x+=cf.x,t.y+=cf.y,t.applyMatrix4(uI)}const vm=new F,EC=new F;class fI extends Ct{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let i=0,r=n.length;i<r;i++){const s=n[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,i=0){n=Math.abs(n);const r=this.levels;let s;for(s=0;s<r.length&&!(n<r[s].distance);s++);return r.splice(s,0,{distance:n,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let i,r;for(i=1,r=n.length;i<r;i++){let s=n[i].distance;if(n[i].object.visible&&(s-=s*n[i].hysteresis),e<s)break}return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){vm.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(vm);this.getObjectForDistance(r).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){vm.setFromMatrixPosition(e.matrixWorld),EC.setFromMatrixPosition(this.matrixWorld);const i=vm.distanceTo(EC)/e.zoom;n[0].object.visible=!0;let r,s;for(r=1,s=n.length;r<s;r++){let o=n[r].distance;if(n[r].object.visible&&(o-=o*n[r].hysteresis),i>=o)n[r-1].object.visible=!1,n[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)n[r].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const TC=new F,CC=new Gt,bC=new Gt,x5=new F,RC=new st,fu=new F;class PS extends Gn{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new st,this.bindMatrixInverse=new st,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new qr),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)fu.fromBufferAttribute(n,i),this.applyBoneTransform(i,fu),this.boundingBox.expandByPoint(fu)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Zr),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)fu.fromBufferAttribute(n,i),this.applyBoneTransform(i,fu),this.boundingSphere.expandByPoint(fu)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Gt,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){e.fromBufferAttribute(n,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const i=this.skeleton,r=this.geometry;CC.fromBufferAttribute(r.attributes.skinIndex,e),bC.fromBufferAttribute(r.attributes.skinWeight,e),TC.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=bC.getComponent(s);if(o!==0){const a=CC.getComponent(s);RC.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),n.addScaledVector(x5.copy(TC).applyMatrix4(RC),o)}}return n.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,n){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,n)}}class k0 extends Ct{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ju extends $t{constructor(e=null,n=1,i=1,r,s,o,a,l,u=dn,h=dn,d,p){super(null,o,a,l,u,h,r,s,d,p),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const PC=new st,_5=new st;class ud{constructor(e=[],n=[]){this.uuid=Ki(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new st)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new st;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:_5;PC.multiplyMatrices(a,n[s]),PC.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new ud(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=JL(e),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new Ju(n,e,e,bi,Xs);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new k0),this.bones.push(o),this.boneInverses.push(new st().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let r=0,s=n.length;r<s;r++){const o=n[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class fc extends Dt{constructor(e,n,i,r=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const hu=new st,BC=new st,ym=[],LC=new qr,A5=new st,hf=new Gn,df=new Zr;class BS extends Gn{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new fc(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,A5)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new qr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,hu),LC.copy(e.boundingBox).applyMatrix4(hu),this.boundingBox.union(LC)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Zr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,hu),df.copy(e.boundingSphere).applyMatrix4(hu),this.boundingSphere.union(df)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const i=this.matrixWorld,r=this.count;if(hf.geometry=this.geometry,hf.material=this.material,hf.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),df.copy(this.boundingSphere),df.applyMatrix4(i),e.ray.intersectsSphere(df)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,hu),BC.multiplyMatrices(i,hu),hf.matrixWorld=BC,hf.raycast(e,ym);for(let o=0,a=ym.length;o<a;o++){const l=ym[o];l.instanceId=s,l.object=this,n.push(l)}ym.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new fc(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class ai extends Tn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Be(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const IC=new F,DC=new F,FC=new st,lx=new rd,xm=new Zr;class ro extends Ct{constructor(e=new ht,n=new ai){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let r=1,s=n.count;r<s;r++)IC.fromBufferAttribute(n,r-1),DC.fromBufferAttribute(n,r),i[r]=i[r-1],i[r]+=IC.distanceTo(DC);e.setAttribute("lineDistance",new Ge(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),xm.copy(i.boundingSphere),xm.applyMatrix4(r),xm.radius+=s,e.ray.intersectsSphere(xm)===!1)return;FC.copy(r).invert(),lx.copy(e.ray).applyMatrix4(FC);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new F,h=new F,d=new F,p=new F,m=this.isLineSegments?2:1,y=i.index,M=i.attributes.position;if(y!==null){const g=Math.max(0,o.start),x=Math.min(y.count,o.start+o.count);for(let _=g,w=x-1;_<w;_+=m){const C=y.getX(_),R=y.getX(_+1);if(u.fromBufferAttribute(M,C),h.fromBufferAttribute(M,R),lx.distanceSqToSegment(u,h,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(p);L<e.near||L>e.far||n.push({distance:L,point:d.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),x=Math.min(M.count,o.start+o.count);for(let _=g,w=x-1;_<w;_+=m){if(u.fromBufferAttribute(M,_),h.fromBufferAttribute(M,_+1),lx.distanceSqToSegment(u,h,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const R=e.ray.origin.distanceTo(p);R<e.near||R>e.far||n.push({distance:R,point:d.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const NC=new F,UC=new F;class $r extends ro{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let r=0,s=n.count;r<s;r+=2)NC.fromBufferAttribute(n,r),UC.fromBufferAttribute(n,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+NC.distanceTo(UC);e.setAttribute("lineDistance",new Ge(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LS extends ro{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class cd extends Tn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Be(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const OC=new st,b1=new rd,_m=new Zr,Am=new F;let IS=class extends Ct{constructor(e=new ht,n=new cd){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),_m.copy(i.boundingSphere),_m.applyMatrix4(r),_m.radius+=s,e.ray.intersectsSphere(_m)===!1)return;OC.copy(r).invert(),b1.copy(e.ray).applyMatrix4(OC);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,d=i.attributes.position;if(u!==null){const p=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let y=p,S=m;y<S;y++){const M=u.getX(y);Am.fromBufferAttribute(d,M),kC(Am,M,l,r,e,n,this)}}else{const p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let y=p,S=m;y<S;y++)Am.fromBufferAttribute(d,y),kC(Am,y,l,r,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function kC(t,e,n,i,r,s,o){const a=b1.distanceSqToPoint(t);if(a<n){const l=new F;b1.closestPointToPoint(t,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class S5 extends $t{constructor(e,n,i,r,s,o,a,l,u){super(e,n,i,r,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:rn,this.magFilter=s!==void 0?s:rn,this.generateMipmaps=!1;const h=this;function d(){h.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class M5 extends $t{constructor(e,n,i){super({width:e,height:n}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=dn,this.minFilter=dn,this.generateMipmaps=!1,this.needsUpdate=!0}}class DS extends $t{constructor(e,n,i,r,s,o,a,l,u,h,d,p){super(null,o,a,l,u,h,r,s,d,p),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class w5 extends DS{constructor(e,n,i,r,s,o){super(e,n,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Xn}}class E5 extends $t{constructor(e,n,i,r,s,o,a,l,u){super(e,n,i,r,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class es{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,r=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),n.push(s),r=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const i=this.getLengths();let r=0;const s=i.length;let o;n?o=n:o=e*i[s-1];let a=0,l=s-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=i[r]-o,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const h=i[r],p=i[r+1]-h,m=(o-h)/p;return(r+m)/(s-1)}getTangent(e,n){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=n||(o.isVector2?new ye:new F);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n){const i=new F,r=[],s=[],o=[],a=new F,l=new st;for(let m=0;m<=e;m++){const y=m/e;r[m]=this.getTangentAt(y,new F)}s[0]=new F,o[0]=new F;let u=Number.MAX_VALUE;const h=Math.abs(r[0].x),d=Math.abs(r[0].y),p=Math.abs(r[0].z);h<=u&&(u=h,i.set(1,0,0)),d<=u&&(u=d,i.set(0,1,0)),p<=u&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const y=Math.acos(pn(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,y))}o[m].crossVectors(r[m],s[m])}if(n===!0){let m=Math.acos(pn(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let y=1;y<=e;y++)s[y].applyMatrix4(l.makeRotationAxis(r[y],m*y)),o[y].crossVectors(r[y],s[y])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class G0 extends es{constructor(e=0,n=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n){const i=n||new ye,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,m=u-this.aY;l=p*h-m*d+this.aX,u=p*d+m*h+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class hI extends G0{constructor(e,n,i,r,s,o){super(e,n,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function FS(){let t=0,e=0,n=0,i=0;function r(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){r(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,h,d){let p=(o-s)/u-(a-s)/(u+h)+(a-o)/h,m=(a-o)/h-(l-o)/(h+d)+(l-a)/d;p*=h,m*=h,r(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+i*a}}}const Sm=new F,ux=new FS,cx=new FS,fx=new FS;class dI extends es{constructor(e=[],n=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=r}getPoint(e,n=new F){const i=n,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,h;this.closed||a>0?u=r[(a-1)%s]:(Sm.subVectors(r[0],r[1]).add(r[0]),u=Sm);const d=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?h=r[(a+2)%s]:(Sm.subVectors(r[s-1],r[s-2]).add(r[s-1]),h=Sm),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let y=Math.pow(u.distanceToSquared(d),m),S=Math.pow(d.distanceToSquared(p),m),M=Math.pow(p.distanceToSquared(h),m);S<1e-4&&(S=1),y<1e-4&&(y=S),M<1e-4&&(M=S),ux.initNonuniformCatmullRom(u.x,d.x,p.x,h.x,y,S,M),cx.initNonuniformCatmullRom(u.y,d.y,p.y,h.y,y,S,M),fx.initNonuniformCatmullRom(u.z,d.z,p.z,h.z,y,S,M)}else this.curveType==="catmullrom"&&(ux.initCatmullRom(u.x,d.x,p.x,h.x,this.tension),cx.initCatmullRom(u.y,d.y,p.y,h.y,this.tension),fx.initCatmullRom(u.z,d.z,p.z,h.z,this.tension));return i.set(ux.calc(l),cx.calc(l),fx.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new F().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function GC(t,e,n,i,r){const s=(i-e)*.5,o=(r-n)*.5,a=t*t,l=t*a;return(2*n-2*i+s+o)*l+(-3*n+3*i-2*s-o)*a+s*t+n}function T5(t,e){const n=1-t;return n*n*e}function C5(t,e){return 2*(1-t)*t*e}function b5(t,e){return t*t*e}function qf(t,e,n,i){return T5(t,e)+C5(t,n)+b5(t,i)}function R5(t,e){const n=1-t;return n*n*n*e}function P5(t,e){const n=1-t;return 3*n*n*t*e}function B5(t,e){return 3*(1-t)*t*t*e}function L5(t,e){return t*t*t*e}function Zf(t,e,n,i,r){return R5(t,e)+P5(t,n)+B5(t,i)+L5(t,r)}class NS extends es{constructor(e=new ye,n=new ye,i=new ye,r=new ye){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new ye){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Zf(e,r.x,s.x,o.x,a.x),Zf(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class pI extends es{constructor(e=new F,n=new F,i=new F,r=new F){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new F){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Zf(e,r.x,s.x,o.x,a.x),Zf(e,r.y,s.y,o.y,a.y),Zf(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class z0 extends es{constructor(e=new ye,n=new ye){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new ye){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new ye){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class mI extends es{constructor(e=new F,n=new F){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new F){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new F){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class US extends es{constructor(e=new ye,n=new ye,i=new ye){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new ye){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(qf(e,r.x,s.x,o.x),qf(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class OS extends es{constructor(e=new F,n=new F,i=new F){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new F){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(qf(e,r.x,s.x,o.x),qf(e,r.y,s.y,o.y),qf(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class kS extends es{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new ye){const i=n,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],u=r[o],h=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(GC(a,l.x,u.x,h.x,d.x),GC(a,l.y,u.y,h.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new ye().fromArray(r))}return this}}var GS=Object.freeze({__proto__:null,ArcCurve:hI,CatmullRomCurve3:dI,CubicBezierCurve:NS,CubicBezierCurve3:pI,EllipseCurve:G0,LineCurve:z0,LineCurve3:mI,QuadraticBezierCurve:US,QuadraticBezierCurve3:OS,SplineCurve:kS});class gI extends es{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new z0(n,e))}getPoint(e,n){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let i=0,r=this.curves.length;i<r;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const h=l[u];i&&i.equals(h)||(n.push(h),i=h)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){const r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(new GS[r.type]().fromJSON(r))}return this}}class Bh extends gI{constructor(e){super(),this.type="Path",this.currentPoint=new ye,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const i=new z0(this.currentPoint.clone(),new ye(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,r){const s=new US(this.currentPoint.clone(),new ye(e,n),new ye(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,n,i,r,s,o){const a=new NS(this.currentPoint.clone(),new ye(e,n),new ye(i,r),new ye(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),i=new kS(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,i,r,s,o),this}absarc(e,n,i,r,s,o){return this.absellipse(e,n,i,i,r,s,o),this}ellipse(e,n,i,r,s,o,a,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+u,n+h,i,r,s,o,a,l),this}absellipse(e,n,i,r,s,o,a,l){const u=new G0(e,n,i,r,s,o,a,l);if(this.curves.length>0){const d=u.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Ec extends ht{constructor(e=[new ye(0,-.5),new ye(.5,0),new ye(0,.5)],n=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:r},n=Math.floor(n),r=pn(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],h=1/n,d=new F,p=new ye,m=new F,y=new F,S=new F;let M=0,g=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:M=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,m.x=g*1,m.y=-M,m.z=g*0,S.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(S.x,S.y,S.z);break;default:M=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,m.x=g*1,m.y=-M,m.z=g*0,y.copy(m),m.x+=S.x,m.y+=S.y,m.z+=S.z,m.normalize(),l.push(m.x,m.y,m.z),S.copy(y)}for(let x=0;x<=n;x++){const _=i+x*h*r,w=Math.sin(_),C=Math.cos(_);for(let R=0;R<=e.length-1;R++){d.x=e[R].x*w,d.y=e[R].y,d.z=e[R].x*C,o.push(d.x,d.y,d.z),p.x=x/n,p.y=R/(e.length-1),a.push(p.x,p.y);const P=l[3*R+0]*w,L=l[3*R+1],b=l[3*R+0]*C;u.push(P,L,b)}}for(let x=0;x<n;x++)for(let _=0;_<e.length-1;_++){const w=_+x*e.length,C=w,R=w+e.length,P=w+e.length+1,L=w+1;s.push(C,R,L),s.push(P,L,R)}this.setIndex(s),this.setAttribute("position",new Ge(o,3)),this.setAttribute("uv",new Ge(a,2)),this.setAttribute("normal",new Ge(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ec(e.points,e.segments,e.phiStart,e.phiLength)}}class fd extends Ec{constructor(e=1,n=1,i=4,r=8){const s=new Bh;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:i,radialSegments:r}}static fromJSON(e){return new fd(e.radius,e.length,e.capSegments,e.radialSegments)}}class hd extends ht{constructor(e=1,n=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);const s=[],o=[],a=[],l=[],u=new F,h=new ye;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=n;d++,p+=3){const m=i+d/n*r;u.x=e*Math.cos(m),u.y=e*Math.sin(m),o.push(u.x,u.y,u.z),a.push(0,0,1),h.x=(o[p]/e+1)/2,h.y=(o[p+1]/e+1)/2,l.push(h.x,h.y)}for(let d=1;d<=n;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new Ge(o,3)),this.setAttribute("normal",new Ge(a,3)),this.setAttribute("uv",new Ge(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hd(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class wl extends ht{constructor(e=1,n=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const h=[],d=[],p=[],m=[];let y=0;const S=[],M=i/2;let g=0;x(),o===!1&&(e>0&&_(!0),n>0&&_(!1)),this.setIndex(h),this.setAttribute("position",new Ge(d,3)),this.setAttribute("normal",new Ge(p,3)),this.setAttribute("uv",new Ge(m,2));function x(){const w=new F,C=new F;let R=0;const P=(n-e)/i;for(let L=0;L<=s;L++){const b=[],B=L/s,G=B*(n-e)+e;for(let X=0;X<=r;X++){const V=X/r,Y=V*l+a,J=Math.sin(Y),ae=Math.cos(Y);C.x=G*J,C.y=-B*i+M,C.z=G*ae,d.push(C.x,C.y,C.z),w.set(J,P,ae).normalize(),p.push(w.x,w.y,w.z),m.push(V,1-B),b.push(y++)}S.push(b)}for(let L=0;L<r;L++)for(let b=0;b<s;b++){const B=S[b][L],G=S[b+1][L],X=S[b+1][L+1],V=S[b][L+1];h.push(B,G,V),h.push(G,X,V),R+=6}u.addGroup(g,R,0),g+=R}function _(w){const C=y,R=new ye,P=new F;let L=0;const b=w===!0?e:n,B=w===!0?1:-1;for(let X=1;X<=r;X++)d.push(0,M*B,0),p.push(0,B,0),m.push(.5,.5),y++;const G=y;for(let X=0;X<=r;X++){const Y=X/r*l+a,J=Math.cos(Y),ae=Math.sin(Y);P.x=b*ae,P.y=M*B,P.z=b*J,d.push(P.x,P.y,P.z),p.push(0,B,0),R.x=J*.5+.5,R.y=ae*.5*B+.5,m.push(R.x,R.y),y++}for(let X=0;X<r;X++){const V=C+X,Y=G+X;w===!0?h.push(Y,Y+1,V):h.push(Y+1,Y,V),L+=3}u.addGroup(g,L,w===!0?1:2),g+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wl(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class dd extends wl{constructor(e=1,n=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new dd(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class lo extends ht{constructor(e=[],n=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:r};const s=[],o=[];a(r),u(i),h(),this.setAttribute("position",new Ge(s,3)),this.setAttribute("normal",new Ge(s.slice(),3)),this.setAttribute("uv",new Ge(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(x){const _=new F,w=new F,C=new F;for(let R=0;R<n.length;R+=3)m(n[R+0],_),m(n[R+1],w),m(n[R+2],C),l(_,w,C,x)}function l(x,_,w,C){const R=C+1,P=[];for(let L=0;L<=R;L++){P[L]=[];const b=x.clone().lerp(w,L/R),B=_.clone().lerp(w,L/R),G=R-L;for(let X=0;X<=G;X++)X===0&&L===R?P[L][X]=b:P[L][X]=b.clone().lerp(B,X/G)}for(let L=0;L<R;L++)for(let b=0;b<2*(R-L)-1;b++){const B=Math.floor(b/2);b%2===0?(p(P[L][B+1]),p(P[L+1][B]),p(P[L][B])):(p(P[L][B+1]),p(P[L+1][B+1]),p(P[L+1][B]))}}function u(x){const _=new F;for(let w=0;w<s.length;w+=3)_.x=s[w+0],_.y=s[w+1],_.z=s[w+2],_.normalize().multiplyScalar(x),s[w+0]=_.x,s[w+1]=_.y,s[w+2]=_.z}function h(){const x=new F;for(let _=0;_<s.length;_+=3){x.x=s[_+0],x.y=s[_+1],x.z=s[_+2];const w=M(x)/2/Math.PI+.5,C=g(x)/Math.PI+.5;o.push(w,1-C)}y(),d()}function d(){for(let x=0;x<o.length;x+=6){const _=o[x+0],w=o[x+2],C=o[x+4],R=Math.max(_,w,C),P=Math.min(_,w,C);R>.9&&P<.1&&(_<.2&&(o[x+0]+=1),w<.2&&(o[x+2]+=1),C<.2&&(o[x+4]+=1))}}function p(x){s.push(x.x,x.y,x.z)}function m(x,_){const w=x*3;_.x=e[w+0],_.y=e[w+1],_.z=e[w+2]}function y(){const x=new F,_=new F,w=new F,C=new F,R=new ye,P=new ye,L=new ye;for(let b=0,B=0;b<s.length;b+=9,B+=6){x.set(s[b+0],s[b+1],s[b+2]),_.set(s[b+3],s[b+4],s[b+5]),w.set(s[b+6],s[b+7],s[b+8]),R.set(o[B+0],o[B+1]),P.set(o[B+2],o[B+3]),L.set(o[B+4],o[B+5]),C.copy(x).add(_).add(w).divideScalar(3);const G=M(C);S(R,B+0,x,G),S(P,B+2,_,G),S(L,B+4,w,G)}}function S(x,_,w,C){C<0&&x.x===1&&(o[_]=x.x-1),w.x===0&&w.z===0&&(o[_]=C/2/Math.PI+.5)}function M(x){return Math.atan2(x.z,-x.x)}function g(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lo(e.vertices,e.indices,e.radius,e.details)}}class pd extends lo{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new pd(e.radius,e.detail)}}const Mm=new F,wm=new F,hx=new F,Em=new Ci;class vI extends ht{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const r=Math.pow(10,4),s=Math.cos(al*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],h=["a","b","c"],d=new Array(3),p={},m=[];for(let y=0;y<l;y+=3){o?(u[0]=o.getX(y),u[1]=o.getX(y+1),u[2]=o.getX(y+2)):(u[0]=y,u[1]=y+1,u[2]=y+2);const{a:S,b:M,c:g}=Em;if(S.fromBufferAttribute(a,u[0]),M.fromBufferAttribute(a,u[1]),g.fromBufferAttribute(a,u[2]),Em.getNormal(hx),d[0]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,d[1]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,d[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let x=0;x<3;x++){const _=(x+1)%3,w=d[x],C=d[_],R=Em[h[x]],P=Em[h[_]],L=`${w}_${C}`,b=`${C}_${w}`;b in p&&p[b]?(hx.dot(p[b].normal)<=s&&(m.push(R.x,R.y,R.z),m.push(P.x,P.y,P.z)),p[b]=null):L in p||(p[L]={index0:u[x],index1:u[_],normal:hx.clone()})}}for(const y in p)if(p[y]){const{index0:S,index1:M}=p[y];Mm.fromBufferAttribute(a,S),wm.fromBufferAttribute(a,M),m.push(Mm.x,Mm.y,Mm.z),m.push(wm.x,wm.y,wm.z)}this.setAttribute("position",new Ge(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class ul extends Bh{constructor(e){super(e),this.uuid=Ki(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let i=0,r=this.holes.length;i<r;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){const r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(new Bh().fromJSON(r))}return this}}const I5={triangulate:function(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let s=yI(t,0,r,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,h,d,p,m;if(i&&(s=O5(t,e,s,n)),t.length>80*n){a=u=t[0],l=h=t[1];for(let y=n;y<r;y+=n)d=t[y],p=t[y+1],d<a&&(a=d),p<l&&(l=p),d>u&&(u=d),p>h&&(h=p);m=Math.max(u-a,h-l),m=m!==0?32767/m:0}return Lh(s,o,n,a,l,m,0),o}};function yI(t,e,n,i,r){let s,o;if(r===Y5(t,e,n,i)>0)for(s=e;s<n;s+=i)o=zC(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=zC(s,t[s],t[s+1],o);return o&&H0(o,o.next)&&(Dh(o),o=o.next),o}function yl(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(H0(n,n.next)||sn(n.prev,n,n.next)===0)){if(Dh(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function Lh(t,e,n,i,r,s,o){if(!t)return;!o&&s&&V5(t,i,r,s);let a=t,l,u;for(;t.prev!==t.next;){if(l=t.prev,u=t.next,s?F5(t,i,r,s):D5(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(u.i/n|0),Dh(t),t=u.next,a=u.next;continue}if(t=u,t===a){o?o===1?(t=N5(yl(t),e,n),Lh(t,e,n,i,r,s,2)):o===2&&U5(t,e,n,i,r,s):Lh(yl(t),e,n,i,r,s,1);break}}}function D5(t){const e=t.prev,n=t,i=t.next;if(sn(e,n,i)>=0)return!1;const r=e.x,s=n.x,o=i.x,a=e.y,l=n.y,u=i.y,h=r<s?r<o?r:o:s<o?s:o,d=a<l?a<u?a:u:l<u?l:u,p=r>s?r>o?r:o:s>o?s:o,m=a>l?a>u?a:u:l>u?l:u;let y=i.next;for(;y!==e;){if(y.x>=h&&y.x<=p&&y.y>=d&&y.y<=m&&Lu(r,a,s,l,o,u,y.x,y.y)&&sn(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function F5(t,e,n,i){const r=t.prev,s=t,o=t.next;if(sn(r,s,o)>=0)return!1;const a=r.x,l=s.x,u=o.x,h=r.y,d=s.y,p=o.y,m=a<l?a<u?a:u:l<u?l:u,y=h<d?h<p?h:p:d<p?d:p,S=a>l?a>u?a:u:l>u?l:u,M=h>d?h>p?h:p:d>p?d:p,g=R1(m,y,e,n,i),x=R1(S,M,e,n,i);let _=t.prevZ,w=t.nextZ;for(;_&&_.z>=g&&w&&w.z<=x;){if(_.x>=m&&_.x<=S&&_.y>=y&&_.y<=M&&_!==r&&_!==o&&Lu(a,h,l,d,u,p,_.x,_.y)&&sn(_.prev,_,_.next)>=0||(_=_.prevZ,w.x>=m&&w.x<=S&&w.y>=y&&w.y<=M&&w!==r&&w!==o&&Lu(a,h,l,d,u,p,w.x,w.y)&&sn(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;_&&_.z>=g;){if(_.x>=m&&_.x<=S&&_.y>=y&&_.y<=M&&_!==r&&_!==o&&Lu(a,h,l,d,u,p,_.x,_.y)&&sn(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;w&&w.z<=x;){if(w.x>=m&&w.x<=S&&w.y>=y&&w.y<=M&&w!==r&&w!==o&&Lu(a,h,l,d,u,p,w.x,w.y)&&sn(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function N5(t,e,n){let i=t;do{const r=i.prev,s=i.next.next;!H0(r,s)&&xI(r,i,i.next,s)&&Ih(r,s)&&Ih(s,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),Dh(i),Dh(i.next),i=t=s),i=i.next}while(i!==t);return yl(i)}function U5(t,e,n,i,r,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&X5(o,a)){let l=_I(o,a);o=yl(o,o.next),l=yl(l,l.next),Lh(o,e,n,i,r,s,0),Lh(l,e,n,i,r,s,0);return}a=a.next}o=o.next}while(o!==t)}function O5(t,e,n,i){const r=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:t.length,u=yI(t,a,l,i,!1),u===u.next&&(u.steiner=!0),r.push(j5(u));for(r.sort(k5),s=0;s<r.length;s++)n=G5(r[s],n);return n}function k5(t,e){return t.x-e.x}function G5(t,e){const n=z5(t,e);if(!n)return e;const i=_I(n,t);return yl(i,i.next),yl(n,n.next)}function z5(t,e){let n=e,i=-1/0,r;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const p=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(p<=s&&p>i&&(i=p,r=n.x<n.next.x?n:n.next,p===s))return r}n=n.next}while(n!==e);if(!r)return null;const a=r,l=r.x,u=r.y;let h=1/0,d;n=r;do s>=n.x&&n.x>=l&&s!==n.x&&Lu(o<u?s:i,o,l,u,o<u?i:s,o,n.x,n.y)&&(d=Math.abs(o-n.y)/(s-n.x),Ih(n,t)&&(d<h||d===h&&(n.x>r.x||n.x===r.x&&H5(r,n)))&&(r=n,h=d)),n=n.next;while(n!==a);return r}function H5(t,e){return sn(t.prev,t,e.prev)<0&&sn(e.next,t,t.next)<0}function V5(t,e,n,i){let r=t;do r.z===0&&(r.z=R1(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,W5(r)}function W5(t){let e,n,i,r,s,o,a,l,u=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<u&&(a++,i=i.nextZ,!!i);e++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,u*=2}while(o>1);return t}function R1(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function j5(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Lu(t,e,n,i,r,s,o,a){return(r-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(i-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(r-o)*(i-a)}function X5(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!J5(t,e)&&(Ih(t,e)&&Ih(e,t)&&K5(t,e)&&(sn(t.prev,t,e.prev)||sn(t,e.prev,e))||H0(t,e)&&sn(t.prev,t,t.next)>0&&sn(e.prev,e,e.next)>0)}function sn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function H0(t,e){return t.x===e.x&&t.y===e.y}function xI(t,e,n,i){const r=Cm(sn(t,e,n)),s=Cm(sn(t,e,i)),o=Cm(sn(n,i,t)),a=Cm(sn(n,i,e));return!!(r!==s&&o!==a||r===0&&Tm(t,n,e)||s===0&&Tm(t,i,e)||o===0&&Tm(n,t,i)||a===0&&Tm(n,e,i))}function Tm(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Cm(t){return t>0?1:t<0?-1:0}function J5(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&xI(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Ih(t,e){return sn(t.prev,t,t.next)<0?sn(t,e,t.next)>=0&&sn(t,t.prev,e)>=0:sn(t,e,t.prev)<0||sn(t,t.next,e)<0}function K5(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function _I(t,e){const n=new P1(t.i,t.x,t.y),i=new P1(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function zC(t,e,n,i){const r=new P1(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Dh(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P1(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Y5(t,e,n,i){let r=0;for(let s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}class vs{static area(e){const n=e.length;let i=0;for(let r=n-1,s=0;s<n;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return vs.area(e)<0}static triangulateShape(e,n){const i=[],r=[],s=[];HC(e),VC(i,e);let o=e.length;n.forEach(HC);for(let l=0;l<n.length;l++)r.push(o),o+=n[l].length,VC(i,n[l]);const a=I5.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function HC(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function VC(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class md extends ht{constructor(e=new ul([new ye(.5,.5),new ye(-.5,.5),new ye(-.5,-.5),new ye(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new Ge(r,3)),this.setAttribute("uv",new Ge(s,2)),this.computeVertexNormals();function o(a){const l=[],u=n.curveSegments!==void 0?n.curveSegments:12,h=n.steps!==void 0?n.steps:1,d=n.depth!==void 0?n.depth:1;let p=n.bevelEnabled!==void 0?n.bevelEnabled:!0,m=n.bevelThickness!==void 0?n.bevelThickness:.2,y=n.bevelSize!==void 0?n.bevelSize:m-.1,S=n.bevelOffset!==void 0?n.bevelOffset:0,M=n.bevelSegments!==void 0?n.bevelSegments:3;const g=n.extrudePath,x=n.UVGenerator!==void 0?n.UVGenerator:Q5;let _,w=!1,C,R,P,L;g&&(_=g.getSpacedPoints(h),w=!0,p=!1,C=g.computeFrenetFrames(h,!1),R=new F,P=new F,L=new F),p||(M=0,m=0,y=0,S=0);const b=a.extractPoints(u);let B=b.shape;const G=b.holes;if(!vs.isClockWise(B)){B=B.reverse();for(let me=0,oe=G.length;me<oe;me++){const xe=G[me];vs.isClockWise(xe)&&(G[me]=xe.reverse())}}const V=vs.triangulateShape(B,G),Y=B;for(let me=0,oe=G.length;me<oe;me++){const xe=G[me];B=B.concat(xe)}function J(me,oe,xe){return oe||console.error("THREE.ExtrudeGeometry: vec does not exist"),me.clone().addScaledVector(oe,xe)}const ae=B.length,ne=V.length;function I(me,oe,xe){let De,Re,He;const Qe=me.x-oe.x,We=me.y-oe.y,rt=xe.x-me.x,Mt=xe.y-me.y,k=Qe*Qe+We*We,D=Qe*Mt-We*rt;if(Math.abs(D)>Number.EPSILON){const le=Math.sqrt(k),Se=Math.sqrt(rt*rt+Mt*Mt),we=oe.x-We/le,be=oe.y+Qe/le,nt=xe.x-Mt/Se,Ne=xe.y+rt/Se,de=((nt-we)*Mt-(Ne-be)*rt)/(Qe*Mt-We*rt);De=we+Qe*de-me.x,Re=be+We*de-me.y;const ze=De*De+Re*Re;if(ze<=2)return new ye(De,Re);He=Math.sqrt(ze/2)}else{let le=!1;Qe>Number.EPSILON?rt>Number.EPSILON&&(le=!0):Qe<-Number.EPSILON?rt<-Number.EPSILON&&(le=!0):Math.sign(We)===Math.sign(Mt)&&(le=!0),le?(De=-We,Re=Qe,He=Math.sqrt(k)):(De=Qe,Re=We,He=Math.sqrt(k/2))}return new ye(De/He,Re/He)}const H=[];for(let me=0,oe=Y.length,xe=oe-1,De=me+1;me<oe;me++,xe++,De++)xe===oe&&(xe=0),De===oe&&(De=0),H[me]=I(Y[me],Y[xe],Y[De]);const z=[];let $,Z=H.concat();for(let me=0,oe=G.length;me<oe;me++){const xe=G[me];$=[];for(let De=0,Re=xe.length,He=Re-1,Qe=De+1;De<Re;De++,He++,Qe++)He===Re&&(He=0),Qe===Re&&(Qe=0),$[De]=I(xe[De],xe[He],xe[Qe]);z.push($),Z=Z.concat($)}for(let me=0;me<M;me++){const oe=me/M,xe=m*Math.cos(oe*Math.PI/2),De=y*Math.sin(oe*Math.PI/2)+S;for(let Re=0,He=Y.length;Re<He;Re++){const Qe=J(Y[Re],H[Re],De);W(Qe.x,Qe.y,-xe)}for(let Re=0,He=G.length;Re<He;Re++){const Qe=G[Re];$=z[Re];for(let We=0,rt=Qe.length;We<rt;We++){const Mt=J(Qe[We],$[We],De);W(Mt.x,Mt.y,-xe)}}}const ee=y+S;for(let me=0;me<ae;me++){const oe=p?J(B[me],Z[me],ee):B[me];w?(P.copy(C.normals[0]).multiplyScalar(oe.x),R.copy(C.binormals[0]).multiplyScalar(oe.y),L.copy(_[0]).add(P).add(R),W(L.x,L.y,L.z)):W(oe.x,oe.y,0)}for(let me=1;me<=h;me++)for(let oe=0;oe<ae;oe++){const xe=p?J(B[oe],Z[oe],ee):B[oe];w?(P.copy(C.normals[me]).multiplyScalar(xe.x),R.copy(C.binormals[me]).multiplyScalar(xe.y),L.copy(_[me]).add(P).add(R),W(L.x,L.y,L.z)):W(xe.x,xe.y,d/h*me)}for(let me=M-1;me>=0;me--){const oe=me/M,xe=m*Math.cos(oe*Math.PI/2),De=y*Math.sin(oe*Math.PI/2)+S;for(let Re=0,He=Y.length;Re<He;Re++){const Qe=J(Y[Re],H[Re],De);W(Qe.x,Qe.y,d+xe)}for(let Re=0,He=G.length;Re<He;Re++){const Qe=G[Re];$=z[Re];for(let We=0,rt=Qe.length;We<rt;We++){const Mt=J(Qe[We],$[We],De);w?W(Mt.x,Mt.y+_[h-1].y,_[h-1].x+xe):W(Mt.x,Mt.y,d+xe)}}}ie(),Ae();function ie(){const me=r.length/3;if(p){let oe=0,xe=ae*oe;for(let De=0;De<ne;De++){const Re=V[De];Ve(Re[2]+xe,Re[1]+xe,Re[0]+xe)}oe=h+M*2,xe=ae*oe;for(let De=0;De<ne;De++){const Re=V[De];Ve(Re[0]+xe,Re[1]+xe,Re[2]+xe)}}else{for(let oe=0;oe<ne;oe++){const xe=V[oe];Ve(xe[2],xe[1],xe[0])}for(let oe=0;oe<ne;oe++){const xe=V[oe];Ve(xe[0]+ae*h,xe[1]+ae*h,xe[2]+ae*h)}}i.addGroup(me,r.length/3-me,0)}function Ae(){const me=r.length/3;let oe=0;ge(Y,oe),oe+=Y.length;for(let xe=0,De=G.length;xe<De;xe++){const Re=G[xe];ge(Re,oe),oe+=Re.length}i.addGroup(me,r.length/3-me,1)}function ge(me,oe){let xe=me.length;for(;--xe>=0;){const De=xe;let Re=xe-1;Re<0&&(Re=me.length-1);for(let He=0,Qe=h+M*2;He<Qe;He++){const We=ae*He,rt=ae*(He+1),Mt=oe+De+We,k=oe+Re+We,D=oe+Re+rt,le=oe+De+rt;Je(Mt,k,D,le)}}}function W(me,oe,xe){l.push(me),l.push(oe),l.push(xe)}function Ve(me,oe,xe){ve(me),ve(oe),ve(xe);const De=r.length/3,Re=x.generateTopUV(i,r,De-3,De-2,De-1);_e(Re[0]),_e(Re[1]),_e(Re[2])}function Je(me,oe,xe,De){ve(me),ve(oe),ve(De),ve(oe),ve(xe),ve(De);const Re=r.length/3,He=x.generateSideWallUV(i,r,Re-6,Re-3,Re-2,Re-1);_e(He[0]),_e(He[1]),_e(He[3]),_e(He[1]),_e(He[2]),_e(He[3])}function ve(me){r.push(l[me*3+0]),r.push(l[me*3+1]),r.push(l[me*3+2])}function _e(me){s.push(me.x),s.push(me.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return q5(n,i,e)}static fromJSON(e,n){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new GS[r.type]().fromJSON(r)),new md(i,e.options)}}const Q5={generateTopUV:function(t,e,n,i,r){const s=e[n*3],o=e[n*3+1],a=e[i*3],l=e[i*3+1],u=e[r*3],h=e[r*3+1];return[new ye(s,o),new ye(a,l),new ye(u,h)]},generateSideWallUV:function(t,e,n,i,r,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],u=e[i*3],h=e[i*3+1],d=e[i*3+2],p=e[r*3],m=e[r*3+1],y=e[r*3+2],S=e[s*3],M=e[s*3+1],g=e[s*3+2];return Math.abs(a-h)<Math.abs(o-u)?[new ye(o,1-l),new ye(u,1-d),new ye(p,1-y),new ye(S,1-g)]:[new ye(a,1-l),new ye(h,1-d),new ye(m,1-y),new ye(M,1-g)]}};function q5(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const s=t[i];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class gd extends lo{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new gd(e.radius,e.detail)}}class Tc extends lo{constructor(e=1,n=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Tc(e.radius,e.detail)}}class vd extends ht{constructor(e=.5,n=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],u=[],h=[];let d=e;const p=(n-e)/r,m=new F,y=new ye;for(let S=0;S<=r;S++){for(let M=0;M<=i;M++){const g=s+M/i*o;m.x=d*Math.cos(g),m.y=d*Math.sin(g),l.push(m.x,m.y,m.z),u.push(0,0,1),y.x=(m.x/n+1)/2,y.y=(m.y/n+1)/2,h.push(y.x,y.y)}d+=p}for(let S=0;S<r;S++){const M=S*(i+1);for(let g=0;g<i;g++){const x=g+M,_=x,w=x+i+1,C=x+i+2,R=x+1;a.push(_,w,R),a.push(w,C,R)}}this.setIndex(a),this.setAttribute("position",new Ge(l,3)),this.setAttribute("normal",new Ge(u,3)),this.setAttribute("uv",new Ge(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vd(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class yd extends ht{constructor(e=new ul([new ye(0,.5),new ye(-.5,-.5),new ye(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let h=0;h<e.length;h++)u(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Ge(r,3)),this.setAttribute("normal",new Ge(s,3)),this.setAttribute("uv",new Ge(o,2));function u(h){const d=r.length/3,p=h.extractPoints(n);let m=p.shape;const y=p.holes;vs.isClockWise(m)===!1&&(m=m.reverse());for(let M=0,g=y.length;M<g;M++){const x=y[M];vs.isClockWise(x)===!0&&(y[M]=x.reverse())}const S=vs.triangulateShape(m,y);for(let M=0,g=y.length;M<g;M++){const x=y[M];m=m.concat(x)}for(let M=0,g=m.length;M<g;M++){const x=m[M];r.push(x.x,x.y,0),s.push(0,0,1),o.push(x.x,x.y)}for(let M=0,g=S.length;M<g;M++){const x=S[M],_=x[0]+d,w=x[1]+d,C=x[2]+d;i.push(_,w,C),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return Z5(n,e)}static fromJSON(e,n){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=n[e.shapes[r]];i.push(o)}return new yd(i,e.curveSegments)}}function Z5(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}class Cc extends ht{constructor(e=1,n=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let u=0;const h=[],d=new F,p=new F,m=[],y=[],S=[],M=[];for(let g=0;g<=i;g++){const x=[],_=g/i;let w=0;g===0&&o===0?w=.5/n:g===i&&l===Math.PI&&(w=-.5/n);for(let C=0;C<=n;C++){const R=C/n;d.x=-e*Math.cos(r+R*s)*Math.sin(o+_*a),d.y=e*Math.cos(o+_*a),d.z=e*Math.sin(r+R*s)*Math.sin(o+_*a),y.push(d.x,d.y,d.z),p.copy(d).normalize(),S.push(p.x,p.y,p.z),M.push(R+w,1-_),x.push(u++)}h.push(x)}for(let g=0;g<i;g++)for(let x=0;x<n;x++){const _=h[g][x+1],w=h[g][x],C=h[g+1][x],R=h[g+1][x+1];(g!==0||o>0)&&m.push(_,w,R),(g!==i-1||l<Math.PI)&&m.push(w,C,R)}this.setIndex(m),this.setAttribute("position",new Ge(y,3)),this.setAttribute("normal",new Ge(S,3)),this.setAttribute("uv",new Ge(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cc(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class xd extends lo{constructor(e=1,n=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new xd(e.radius,e.detail)}}class _d extends ht{constructor(e=1,n=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],u=[],h=new F,d=new F,p=new F;for(let m=0;m<=i;m++)for(let y=0;y<=r;y++){const S=y/r*s,M=m/i*Math.PI*2;d.x=(e+n*Math.cos(M))*Math.cos(S),d.y=(e+n*Math.cos(M))*Math.sin(S),d.z=n*Math.sin(M),a.push(d.x,d.y,d.z),h.x=e*Math.cos(S),h.y=e*Math.sin(S),p.subVectors(d,h).normalize(),l.push(p.x,p.y,p.z),u.push(y/r),u.push(m/i)}for(let m=1;m<=i;m++)for(let y=1;y<=r;y++){const S=(r+1)*m+y-1,M=(r+1)*(m-1)+y-1,g=(r+1)*(m-1)+y,x=(r+1)*m+y;o.push(S,M,x),o.push(M,g,x)}this.setIndex(o),this.setAttribute("position",new Ge(a,3)),this.setAttribute("normal",new Ge(l,3)),this.setAttribute("uv",new Ge(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _d(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Ad extends ht{constructor(e=1,n=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],u=[],h=[],d=new F,p=new F,m=new F,y=new F,S=new F,M=new F,g=new F;for(let _=0;_<=i;++_){const w=_/i*s*Math.PI*2;x(w,s,o,e,m),x(w+.01,s,o,e,y),M.subVectors(y,m),g.addVectors(y,m),S.crossVectors(M,g),g.crossVectors(S,M),S.normalize(),g.normalize();for(let C=0;C<=r;++C){const R=C/r*Math.PI*2,P=-n*Math.cos(R),L=n*Math.sin(R);d.x=m.x+(P*g.x+L*S.x),d.y=m.y+(P*g.y+L*S.y),d.z=m.z+(P*g.z+L*S.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),u.push(p.x,p.y,p.z),h.push(_/i),h.push(C/r)}}for(let _=1;_<=i;_++)for(let w=1;w<=r;w++){const C=(r+1)*(_-1)+(w-1),R=(r+1)*_+(w-1),P=(r+1)*_+w,L=(r+1)*(_-1)+w;a.push(C,R,L),a.push(R,P,L)}this.setIndex(a),this.setAttribute("position",new Ge(l,3)),this.setAttribute("normal",new Ge(u,3)),this.setAttribute("uv",new Ge(h,2));function x(_,w,C,R,P){const L=Math.cos(_),b=Math.sin(_),B=C/w*_,G=Math.cos(B);P.x=R*(2+G)*.5*L,P.y=R*(2+G)*b*.5,P.z=R*Math.sin(B)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ad(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Sd extends ht{constructor(e=new OS(new F(-1,-1,0),new F(-1,1,0),new F(1,1,0)),n=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new F,l=new F,u=new ye;let h=new F;const d=[],p=[],m=[],y=[];S(),this.setIndex(y),this.setAttribute("position",new Ge(d,3)),this.setAttribute("normal",new Ge(p,3)),this.setAttribute("uv",new Ge(m,2));function S(){for(let _=0;_<n;_++)M(_);M(s===!1?n:0),x(),g()}function M(_){h=e.getPointAt(_/n,h);const w=o.normals[_],C=o.binormals[_];for(let R=0;R<=r;R++){const P=R/r*Math.PI*2,L=Math.sin(P),b=-Math.cos(P);l.x=b*w.x+L*C.x,l.y=b*w.y+L*C.y,l.z=b*w.z+L*C.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=h.x+i*l.x,a.y=h.y+i*l.y,a.z=h.z+i*l.z,d.push(a.x,a.y,a.z)}}function g(){for(let _=1;_<=n;_++)for(let w=1;w<=r;w++){const C=(r+1)*(_-1)+(w-1),R=(r+1)*_+(w-1),P=(r+1)*_+w,L=(r+1)*(_-1)+w;y.push(C,R,L),y.push(R,P,L)}}function x(){for(let _=0;_<=n;_++)for(let w=0;w<=r;w++)u.x=_/n,u.y=w/r,m.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Sd(new GS[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class AI extends ht{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],i=new Set,r=new F,s=new F;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,h=l.length;u<h;++u){const d=l[u],p=d.start,m=d.count;for(let y=p,S=p+m;y<S;y+=3)for(let M=0;M<3;M++){const g=a.getX(y+M),x=a.getX(y+(M+1)%3);r.fromBufferAttribute(o,g),s.fromBufferAttribute(o,x),WC(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const h=3*a+u,d=3*a+(u+1)%3;r.fromBufferAttribute(o,h),s.fromBufferAttribute(o,d),WC(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ge(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function WC(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(i)===!0||n.has(r)===!0?!1:(n.add(i),n.add(r),!0)}var jC=Object.freeze({__proto__:null,BoxGeometry:pa,CapsuleGeometry:fd,CircleGeometry:hd,ConeGeometry:dd,CylinderGeometry:wl,DodecahedronGeometry:pd,EdgesGeometry:vI,ExtrudeGeometry:md,IcosahedronGeometry:gd,LatheGeometry:Ec,OctahedronGeometry:Tc,PlaneGeometry:Mc,PolyhedronGeometry:lo,RingGeometry:vd,ShapeGeometry:yd,SphereGeometry:Cc,TetrahedronGeometry:xd,TorusGeometry:_d,TorusKnotGeometry:Ad,TubeGeometry:Sd,WireframeGeometry:AI});class SI extends Tn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Be(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class MI extends Ss{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Md extends Tn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Be(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=da,this.normalScale=new ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class uo extends Md{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ye(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return pn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Be(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Be(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Be(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class wI extends Tn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Be(16777215),this.specular=new Be(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=da,this.normalScale=new ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=id,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class EI extends Tn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Be(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=da,this.normalScale=new ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class TI extends Tn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=da,this.normalScale=new ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class CI extends Tn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Be(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=da,this.normalScale=new ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=id,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bI extends Tn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Be(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=da,this.normalScale=new ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class RI extends ai{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function pr(t,e,n){return zS(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)}function el(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function zS(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function PI(t){function e(r,s){return t[r]-t[s]}const n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i}function B1(t,e,n){const i=t.length,r=new t.constructor(i);for(let s=0,o=0;o!==i;++s){const a=n[s]*e;for(let l=0;l!==e;++l)r[o++]=t[a+l]}return r}function HS(t,e,n,i){let r=1,s=t[0];for(;s!==void 0&&s[i]===void 0;)s=t[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),n.push(o)),s=t[r++];while(s!==void 0)}function $5(t,e,n,i,r=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],h=u.getValueSize(),d=[],p=[];for(let m=0;m<u.times.length;++m){const y=u.times[m]*r;if(!(y<n||y>=i)){d.push(u.times[m]);for(let S=0;S<h;++S)p.push(u.values[m*h+S])}}d.length!==0&&(u.times=el(d,u.times.constructor),u.values=el(p,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function e9(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=t.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(u===void 0)continue;let h=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);let p=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const y=a.times.length-1;let S;if(s<=a.times[0]){const g=h,x=d-h;S=pr(a.values,g,x)}else if(s>=a.times[y]){const g=y*d+h,x=g+d-h;S=pr(a.values,g,x)}else{const g=a.createInterpolant(),x=h,_=d-h;g.evaluate(s),S=pr(g.resultBuffer,x,_)}l==="quaternion"&&new si().fromArray(S).normalize().conjugate().toArray(S);const M=u.times.length;for(let g=0;g<M;++g){const x=g*m+p;if(l==="quaternion")si.multiplyQuaternionsFlat(u.values,x,S,0,u.values,x);else{const _=m-p*2;for(let w=0;w<_;++w)u.values[x+w]-=S[w]}}}return t.blendMode=pS,t}const t9={arraySlice:pr,convertArray:el,isTypedArray:zS,getKeyframeOrder:PI,sortedArray:B1,flattenJSON:HS,subclip:$5,makeClipAdditive:e9};class bc{constructor(e,n,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,r=n[i],s=n[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=n[++i],e<r)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=n[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<n[a]?o=a:i=a+1}if(r=n[i],s=n[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)n[o]=i[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class BI extends bc{constructor(e,n,i,r){super(e,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:qa,endingEnd:qa}}intervalChanged_(e,n,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Za:s=e,a=2*n-i;break;case bh:s=r.length-2,a=n+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Za:o=e,l=2*i-n;break;case bh:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=n}const u=(i-n)*.5,h=this.valueSize;this._weightPrev=u/(n-a),this._weightNext=u/(l-i),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,y=(i-n)/(r-n),S=y*y,M=S*y,g=-p*M+2*p*S-p*y,x=(1+p)*M+(-1.5-2*p)*S+(-.5+p)*y+1,_=(-1-m)*M+(1.5+m)*S+.5*y,w=m*M-m*S;for(let C=0;C!==a;++C)s[C]=g*o[h+C]+x*o[u+C]+_*o[l+C]+w*o[d+C];return s}}class VS extends bc{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=(i-n)/(r-n),d=1-h;for(let p=0;p!==a;++p)s[p]=o[u+p]*d+o[l+p]*h;return s}}class LI extends bc{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ts{constructor(e,n,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=el(n,this.TimeBufferType),this.values=el(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:el(e.times,Array),values:el(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new LI(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new VS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new BI(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case lc:n=this.InterpolantFactoryMethodDiscrete;break;case vl:n=this.InterpolantFactoryMethodLinear;break;case cg:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return lc;case this.InterpolantFactoryMethodLinear:return vl;case this.InterpolantFactoryMethodSmooth:return cg}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=e}return this}trim(e,n){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>n;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=pr(i,s,o),this.values=pr(this.values,s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&zS(r))for(let a=0,l=r.length;a!==l;++a){const u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=pr(this.times),n=pr(this.values),i=this.getValueSize(),r=this.getInterpolation()===cg,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],h=e[a+1];if(u!==h&&(a!==1||u!==e[0]))if(r)l=!0;else{const d=a*i,p=d-i,m=d+i;for(let y=0;y!==i;++y){const S=n[d+y];if(S!==n[p+y]||S!==n[m+y]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,p=o*i;for(let m=0;m!==i;++m)n[p+m]=n[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,u=0;u!==i;++u)n[l+u]=n[a+u];++o}return o!==e.length?(this.times=pr(e,0,o),this.values=pr(n,0,o*i)):(this.times=e,this.values=n),this}clone(){const e=pr(this.times,0),n=pr(this.values,0),i=this.constructor,r=new i(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}ts.prototype.TimeBufferType=Float32Array;ts.prototype.ValueBufferType=Float32Array;ts.prototype.DefaultInterpolation=vl;class El extends ts{}El.prototype.ValueTypeName="bool";El.prototype.ValueBufferType=Array;El.prototype.DefaultInterpolation=lc;El.prototype.InterpolantFactoryMethodLinear=void 0;El.prototype.InterpolantFactoryMethodSmooth=void 0;class WS extends ts{}WS.prototype.ValueTypeName="color";class hc extends ts{}hc.prototype.ValueTypeName="number";class II extends bc{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-n)/(r-n);let u=e*a;for(let h=u+a;u!==h;u+=4)si.slerpFlat(s,0,o,u-a,o,u,l);return s}}class la extends ts{InterpolantFactoryMethodLinear(e){return new II(this.times,this.values,this.getValueSize(),e)}}la.prototype.ValueTypeName="quaternion";la.prototype.DefaultInterpolation=vl;la.prototype.InterpolantFactoryMethodSmooth=void 0;class Tl extends ts{}Tl.prototype.ValueTypeName="string";Tl.prototype.ValueBufferType=Array;Tl.prototype.DefaultInterpolation=lc;Tl.prototype.InterpolantFactoryMethodLinear=void 0;Tl.prototype.InterpolantFactoryMethodSmooth=void 0;class dc extends ts{}dc.prototype.ValueTypeName="vector";class pc{constructor(e,n=-1,i,r=I0){this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=Ki(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)n.push(i9(i[o]).scale(r));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)n.push(ts.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,n,i,r){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const h=PI(l);l=B1(l,1,h),u=B1(u,1,h),!r&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new hc(".morphTargetInfluences["+n[a].name+"]",l,u).scale(1/i))}return new this(e,-1,o)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===n)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],h=u.name.match(s);if(h&&h.length>1){const d=h[1];let p=r[d];p||(r[d]=p=[]),p.push(u)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],n,i));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,p,m,y,S){if(m.length!==0){const M=[],g=[];HS(m,M,g,y),M.length!==0&&S.push(new d(p,M,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let d=0;d<u.length;d++){const p=u[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let y;for(y=0;y<p.length;y++)if(p[y].morphTargets)for(let S=0;S<p[y].morphTargets.length;S++)m[p[y].morphTargets[S]]=-1;for(const S in m){const M=[],g=[];for(let x=0;x!==p[y].morphTargets.length;++x){const _=p[y];M.push(_.time),g.push(_.morphTarget===S?1:0)}r.push(new hc(".morphTargetInfluence["+S+"]",M,g))}l=m.length*o}else{const m=".bones["+n[d].name+"]";i(dc,m+".position",p,"pos",r),i(la,m+".quaternion",p,"rot",r),i(dc,m+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function n9(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return hc;case"vector":case"vector2":case"vector3":case"vector4":return dc;case"color":return WS;case"quaternion":return la;case"bool":case"boolean":return El;case"string":return Tl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function i9(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=n9(t.type);if(t.times===void 0){const n=[],i=[];HS(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const xl={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class jS{constructor(e,n,i){const r=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(h){a++,s===!1&&r.onStart!==void 0&&r.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,r.onProgress!==void 0&&r.onProgress(h,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,d){return u.push(h,d),this},this.removeHandler=function(h){const d=u.indexOf(h);return d!==-1&&u.splice(d,2),this},this.getHandler=function(h){for(let d=0,p=u.length;d<p;d+=2){const m=u[d],y=u[d+1];if(m.global&&(m.lastIndex=0),m.test(h))return y}return null}}}const Iu=new jS;let xi=class{constructor(e){this.manager=e!==void 0?e:Iu,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(r,s){i.load(e,r,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};const Os={};class r9 extends Error{constructor(e,n){super(e),this.response=n}}class Qi extends xi{constructor(e){super(e)}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=xl.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Os[e]!==void 0){Os[e].push({onLoad:n,onProgress:i,onError:r});return}Os[e]=[],Os[e].push({onLoad:n,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const h=Os[e],d=u.body.getReader(),p=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),m=p?parseInt(p):0,y=m!==0;let S=0;const M=new ReadableStream({start(g){x();function x(){d.read().then(({done:_,value:w})=>{if(_)g.close();else{S+=w.byteLength;const C=new ProgressEvent("progress",{lengthComputable:y,loaded:S,total:m});for(let R=0,P=h.length;R<P;R++){const L=h[R];L.onProgress&&L.onProgress(C)}g.enqueue(w),x()}})}}});return new Response(M)}else throw new r9(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return u.json();default:if(a===void 0)return u.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(p);return u.arrayBuffer().then(y=>m.decode(y))}}}).then(u=>{xl.add(e,u);const h=Os[e];delete Os[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onLoad&&m.onLoad(u)}}).catch(u=>{const h=Os[e];if(h===void 0)throw this.manager.itemError(e),u;delete Os[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class s9 extends xi{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new Qi(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=[];for(let i=0;i<e.length;i++){const r=pc.parse(e[i]);n.push(r)}return n}}class o9 extends xi{constructor(e){super(e)}load(e,n,i,r){const s=this,o=[],a=new DS,l=new Qi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function h(d){l.load(e[d],function(p){const m=s.parse(p,!0);o[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(a.minFilter=rn),a.image=o,a.format=m.format,a.needsUpdate=!0,n&&n(a))},i,r)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)h(d);else l.load(e,function(d){const p=s.parse(d,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let y=0;y<m;y++){o[y]={mipmaps:[]};for(let S=0;S<p.mipmapCount;S++)o[y].mipmaps.push(p.mipmaps[y*p.mipmapCount+S]),o[y].format=p.format,o[y].width=p.width,o[y].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=rn),a.format=p.format,a.needsUpdate=!0,n&&n(a)},i,r);return a}}class Fh extends xi{constructor(e){super(e)}load(e,n,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=xl.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=Ph("img");function l(){h(),xl.add(e,this),n&&n(this),s.manager.itemEnd(e)}function u(d){h(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class a9 extends xi{constructor(e){super(e)}load(e,n,i,r){const s=new ad,o=new Fh(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(h){s.images[u]=h,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class l9 extends xi{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new Ju,a=new Qi(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const u=s.parse(l);u&&(u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:Xn,o.wrapT=u.wrapT!==void 0?u.wrapT:Xn,o.magFilter=u.magFilter!==void 0?u.magFilter:rn,o.minFilter=u.minFilter!==void 0?u.minFilter:rn,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?o.colorSpace=u.colorSpace:u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=As),u.mipmapCount===1&&(o.minFilter=rn),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,n&&n(o,u))},i,r),o}}class DI extends xi{constructor(e){super(e)}load(e,n,i,r){const s=new $t,o=new Fh(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},i,r),s}}class ga extends Ct{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Be(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class FI extends ga{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ct.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Be(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const dx=new st,XC=new F,JC=new F;class XS{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ye(512,512),this.map=null,this.mapPass=null,this.matrix=new st,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new F0,this._frameExtents=new ye(1,1),this._viewportCount=1,this._viewports=[new Gt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;XC.setFromMatrixPosition(e.matrixWorld),n.position.copy(XC),JC.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(JC),n.updateMatrixWorld(),dx.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dx),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(dx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class u9 extends XS{constructor(){super(new yn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,i=uc*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(i!==n.fov||r!==n.aspect||s!==n.far)&&(n.fov=i,n.aspect=r,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class JS extends ga{constructor(e,n,i=0,r=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ct.DEFAULT_UP),this.updateMatrix(),this.target=new Ct,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new u9}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const KC=new st,pf=new F,px=new F;class c9 extends XS{constructor(){super(new yn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ye(4,2),this._viewportCount=6,this._viewports=[new Gt(2,1,1,1),new Gt(0,1,1,1),new Gt(3,1,1,1),new Gt(1,1,1,1),new Gt(3,0,1,1),new Gt(1,0,1,1)],this._cubeDirections=[new F(1,0,0),new F(-1,0,0),new F(0,0,1),new F(0,0,-1),new F(0,1,0),new F(0,-1,0)],this._cubeUps=[new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,0,1),new F(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),pf.setFromMatrixPosition(e.matrixWorld),i.position.copy(pf),px.copy(i.position),px.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(px),i.updateMatrixWorld(),r.makeTranslation(-pf.x,-pf.y,-pf.z),KC.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(KC)}}class KS extends ga{constructor(e,n,i=0,r=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new c9}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class f9 extends XS{constructor(){super(new ma(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class YS extends ga{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ct.DEFAULT_UP),this.updateMatrix(),this.target=new Ct,this.shadow=new f9}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class NI extends ga{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class UI extends ga{constructor(e,n,i=10,r=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class OI{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new F)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*r),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*i),n.addScaledVector(o[4],1.092548*(i*r)),n.addScaledVector(o[5],1.092548*(r*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(i*s)),n.addScaledVector(o[8],.546274*(i*i-r*r)),n}getIrradianceAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*r),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*i),n.addScaledVector(o[4],2*.429043*i*r),n.addScaledVector(o[5],2*.429043*r*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*i*s),n.addScaledVector(o[8],.429043*(i*i-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const i=e.x,r=e.y,s=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*s,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*i*s,n[8]=.546274*(i*i-r*r)}}class V0 extends ga{constructor(e=new OI,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class W0 extends xi{constructor(e){super(e),this.textures={}}load(e,n,i,r){const s=this,o=new Qi(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=this.textures;function i(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const r=W0.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Be().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new Be().setHex(o.value);break;case"v2":r.uniforms[s].value=new ye().fromArray(o.value);break;case"v3":r.uniforms[s].value=new F().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Gt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new St().fromArray(o.value);break;case"m4":r.uniforms[s].value=new st().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new ye().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new ye().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:SI,SpriteMaterial:RS,RawShaderMaterial:MI,ShaderMaterial:Ss,PointsMaterial:cd,MeshPhysicalMaterial:uo,MeshStandardMaterial:Md,MeshPhongMaterial:wI,MeshToonMaterial:EI,MeshNormalMaterial:TI,MeshLambertMaterial:CI,MeshDepthMaterial:TS,MeshDistanceMaterial:CS,MeshBasicMaterial:Wi,MeshMatcapMaterial:bI,LineDashedMaterial:RI,LineBasicMaterial:ai,Material:Tn};return new n[e]}}class ys{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let i=0,r=e.length;i<r;i++)n+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class kI extends ht{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class GI extends xi{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new Qi(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n={},i={};function r(m,y){if(n[y]!==void 0)return n[y];const M=m.interleavedBuffers[y],g=s(m,M.buffer),x=Pu(M.type,g),_=new ld(x,M.stride);return _.uuid=M.uuid,n[y]=_,_}function s(m,y){if(i[y]!==void 0)return i[y];const M=m.arrayBuffers[y],g=new Uint32Array(M).buffer;return i[y]=g,g}const o=e.isInstancedBufferGeometry?new kI:new ht,a=e.data.index;if(a!==void 0){const m=Pu(a.type,a.array);o.setIndex(new Dt(m,1))}const l=e.data.attributes;for(const m in l){const y=l[m];let S;if(y.isInterleavedBufferAttribute){const M=r(e.data,y.data);S=new aa(M,y.itemSize,y.offset,y.normalized)}else{const M=Pu(y.type,y.array),g=y.isInstancedBufferAttribute?fc:Dt;S=new g(M,y.itemSize,y.normalized)}y.name!==void 0&&(S.name=y.name),y.usage!==void 0&&S.setUsage(y.usage),y.updateRange!==void 0&&(S.updateRange.offset=y.updateRange.offset,S.updateRange.count=y.updateRange.count),o.setAttribute(m,S)}const u=e.data.morphAttributes;if(u)for(const m in u){const y=u[m],S=[];for(let M=0,g=y.length;M<g;M++){const x=y[M];let _;if(x.isInterleavedBufferAttribute){const w=r(e.data,x.data);_=new aa(w,x.itemSize,x.offset,x.normalized)}else{const w=Pu(x.type,x.array);_=new Dt(w,x.itemSize,x.normalized)}x.name!==void 0&&(_.name=x.name),S.push(_)}o.morphAttributes[m]=S}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,y=d.length;m!==y;++m){const S=d[m];o.addGroup(S.start,S.count,S.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new F;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new Zr(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class h9 extends xi{constructor(e){super(e)}load(e,n,i,r){const s=this,o=this.path===""?ys.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Qi(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,n)},i,r)}async loadAsync(e,n){const i=this,r=this.path===""?ys.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Qi(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,n){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){n!==void 0&&n(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,i),h=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,h),n!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&n(u)}return u}async parseAsync(e){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,n),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const n={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new ul().fromJSON(e[i]);n[s.uuid]=s}return n}parseSkeletons(e,n){const i={},r={};if(n.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new ud().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,n){const i={};if(e!==void 0){const r=new GI;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in jC?a=jC[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,n){const i={},r={};if(e!==void 0){const s=new W0;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const n={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=pc.parse(r);n[s.uuid]=s}return n}parseImages(e,n){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return o(h)}else return l.data?{data:Pu(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new jS(n);s=new Fh(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,h=e.length;u<h;u++){const d=e[u],p=d.url;if(Array.isArray(p)){const m=[];for(let y=0,S=p.length;y<S;y++){const M=p[y],g=a(M);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new Ju(g.data,g.width,g.height)))}r[d.uuid]=new $a(m)}else{const m=a(d.url);r[d.uuid]=new $a(m)}}}return r}async parseImagesAsync(e){const n=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:Pu(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Fh(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const h=[];for(let d=0,p=u.length;d<p;d++){const m=u[d],y=await s(m);y!==null&&(y instanceof HTMLImageElement?h.push(y):h.push(new Ju(y.data,y.width,y.height)))}i[l.uuid]=new $a(h)}else{const h=await s(l.url);i[l.uuid]=new $a(h)}}}return i}parseTextures(e,n){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],u=l.data;let h;Array.isArray(u)?(h=new ad,u.length===6&&(h.needsUpdate=!0)):(u&&u.data?h=new Ju:h=new $t,u&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=i(a.mapping,d9)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=i(a.wrap[0],YC),h.wrapT=i(a.wrap[1],YC)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.encoding!==void 0&&(h.encoding=a.encoding),a.minFilter!==void 0&&(h.minFilter=i(a.minFilter,QC)),a.magFilter!==void 0&&(h.magFilter=i(a.magFilter,QC)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(h.userData=a.userData),r[a.uuid]=h}return r}parseObject(e,n,i,r,s){let o;function a(p){return n[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),n[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let y=0,S=p.length;y<S;y++){const M=p[y];i[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",M),m.push(i[M])}return m}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function u(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let h,d;switch(e.type){case"Scene":o=new Kg,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Be(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new O0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new U0(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new yn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new ma(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new NI(e.color,e.intensity);break;case"DirectionalLight":o=new YS(e.color,e.intensity);break;case"PointLight":o=new KS(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new UI(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new JS(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new FI(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new V0().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),d=l(e.material),o=new PS(h,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),d=l(e.material),o=new Gn(h,d);break;case"InstancedMesh":h=a(e.geometry),d=l(e.material);const p=e.count,m=e.instanceMatrix,y=e.instanceColor;o=new BS(h,d,p),o.instanceMatrix=new fc(new Float32Array(m.array),16),y!==void 0&&(o.instanceColor=new fc(new Float32Array(y.array),y.itemSize));break;case"LOD":o=new fI;break;case"Line":o=new ro(a(e.geometry),l(e.material));break;case"LineLoop":o=new LS(a(e.geometry),l(e.material));break;case"LineSegments":o=new $r(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new IS(a(e.geometry),l(e.material));break;case"Sprite":o=new cI(l(e.material));break;case"Group":o=new Js;break;case"Bone":o=new k0;break;default:o=new Ct}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],n,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const y=p[m];o.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const y=p[m],S=o.getObjectByProperty("uuid",y.object);S!==void 0&&o.addLevel(S,y.distance,y.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=n[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const d9={UVMapping:B0,CubeReflectionMapping:ra,CubeRefractionMapping:sa,EquirectangularReflectionMapping:Eh,EquirectangularRefractionMapping:Th,CubeUVReflectionMapping:Sc},YC={RepeatWrapping:oa,ClampToEdgeWrapping:Xn,MirroredRepeatWrapping:oc},QC={NearestFilter:dn,NearestMipmapNearestFilter:Ch,NearestMipmapLinearFilter:ju,LinearFilter:rn,LinearMipmapNearestFilter:L0,LinearMipmapLinearFilter:As};class zI extends xi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=xl.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){xl.add(e,l),n&&n(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let bm;class QS{static getContext(){return bm===void 0&&(bm=new(window.AudioContext||window.webkitAudioContext)),bm}static setContext(e){bm=e}}class p9 extends xi{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new Qi(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);QS.getContext().decodeAudioData(u,function(d){n(d)},a)}catch(u){a(u)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}class m9 extends V0{constructor(e,n,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new Be().set(e),s=new Be().set(n),o=new F(r.r,r.g,r.b),a=new F(s.r,s.g,s.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}class g9 extends V0{constructor(e,n=1){super(void 0,n),this.isAmbientLightProbe=!0;const i=new Be().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const qC=new st,ZC=new st,Ba=new st;class v9{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new yn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new yn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Ba.copy(e.projectionMatrix);const r=n.eyeSep/2,s=r*n.near/n.focus,o=n.near*Math.tan(al*n.fov*.5)/n.zoom;let a,l;ZC.elements[12]=-r,qC.elements[12]=r,a=-o*n.aspect+s,l=o*n.aspect+s,Ba.elements[0]=2*n.near/(l-a),Ba.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Ba),a=-o*n.aspect-s,l=o*n.aspect-s,Ba.elements[0]=2*n.near/(l-a),Ba.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Ba)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(ZC),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(qC)}}class qS{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=$C(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=$C();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function $C(){return(typeof performance>"u"?Date:performance).now()}const La=new F,eb=new si,y9=new F,Ia=new F;class x9 extends Ct{constructor(){super(),this.type="AudioListener",this.context=QS.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new qS}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(La,eb,y9),Ia.set(0,0,-1).applyQuaternion(eb),n.positionX){const r=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(La.x,r),n.positionY.linearRampToValueAtTime(La.y,r),n.positionZ.linearRampToValueAtTime(La.z,r),n.forwardX.linearRampToValueAtTime(Ia.x,r),n.forwardY.linearRampToValueAtTime(Ia.y,r),n.forwardZ.linearRampToValueAtTime(Ia.z,r),n.upX.linearRampToValueAtTime(i.x,r),n.upY.linearRampToValueAtTime(i.y,r),n.upZ.linearRampToValueAtTime(i.z,r)}else n.setPosition(La.x,La.y,La.z),n.setOrientation(Ia.x,Ia.y,Ia.z,i.x,i.y,i.z)}}class HI extends Ct{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Da=new F,tb=new si,_9=new F,Fa=new F;class A9 extends HI{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Da,tb,_9),Fa.set(0,0,1).applyQuaternion(tb);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Da.x,i),n.positionY.linearRampToValueAtTime(Da.y,i),n.positionZ.linearRampToValueAtTime(Da.z,i),n.orientationX.linearRampToValueAtTime(Fa.x,i),n.orientationY.linearRampToValueAtTime(Fa.y,i),n.orientationZ.linearRampToValueAtTime(Fa.z,i)}else n.setPosition(Da.x,Da.y,Da.z),n.setOrientation(Fa.x,Fa.y,Fa.z)}}class S9{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}}class VI{constructor(e,n,i){this.binding=e,this.valueSize=i;let r,s,o;switch(n){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,i=this.buffer,r=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(i,r,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*n,1,n);for(let l=n,u=n+n;l!==u;++l)if(i[l]!==i[l+n]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,n=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(n,r);for(let s=i,o=r;s!==o;++s)n[s]=n[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[n+o]=e[i+o]}_slerp(e,n,i,r){si.slerpFlat(e,n,e,n,e,i,r)}_slerpAdditive(e,n,i,r,s){const o=this._workIndex*s;si.multiplyQuaternionsFlat(e,o,e,n,e,i),si.slerpFlat(e,n,e,n,e,o,r)}_lerp(e,n,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,n,i,r,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[i+o]*r}}}const ZS="\\[\\]\\.:\\/",M9=new RegExp("["+ZS+"]","g"),$S="[^"+ZS+"]",w9="[^"+ZS.replace("\\.","")+"]",E9=/((?:WC+[\/:])*)/.source.replace("WC",$S),T9=/(WCOD+)?/.source.replace("WCOD",w9),C9=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",$S),b9=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",$S),R9=new RegExp("^"+E9+T9+C9+b9+"$"),P9=["material","materials","bones","map"];class B9{constructor(e,n,i){const r=i||bt.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class bt{constructor(e,n,i){this.path=n,this.parsedPath=i||bt.parseTrackName(n),this.node=bt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new bt.Composite(e,n,i):new bt(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(M9,"")}static parseTrackName(e){const n=R9.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);P9.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[n++]=i[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,r=n.propertyName;let s=n.propertyIndex;if(e||(e=bt.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let u=n.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[r];if(o===void 0){const u=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}bt.Composite=B9;bt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};bt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};bt.prototype.GetterByBindingType=[bt.prototype._getValue_direct,bt.prototype._getValue_array,bt.prototype._getValue_arrayElement,bt.prototype._getValue_toArray];bt.prototype.SetterByBindingTypeAndVersioning=[[bt.prototype._setValue_direct,bt.prototype._setValue_direct_setNeedsUpdate,bt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[bt.prototype._setValue_array,bt.prototype._setValue_array_setNeedsUpdate,bt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[bt.prototype._setValue_arrayElement,bt.prototype._setValue_arrayElement_setNeedsUpdate,bt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[bt.prototype._setValue_fromArray,bt.prototype._setValue_fromArray_setNeedsUpdate,bt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class L9{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ki(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let h=0,d=arguments.length;h!==d;++h){const p=arguments[h],m=p.uuid;let y=n[m];if(y===void 0){y=l++,n[m]=y,e.push(p);for(let S=0,M=o;S!==M;++S)s[S].push(new bt(p,i[S],r[S]))}else if(y<u){a=e[y];const S=--u,M=e[S];n[M.uuid]=y,e[y]=M,n[m]=S,e[S]=p;for(let g=0,x=o;g!==x;++g){const _=s[g],w=_[S];let C=_[y];_[y]=w,C===void 0&&(C=new bt(p,i[g],r[g])),_[S]=C}}else e[y]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,h=n[u];if(h!==void 0&&h>=s){const d=s++,p=e[d];n[p.uuid]=h,e[h]=p,n[u]=d,e[d]=l;for(let m=0,y=r;m!==y;++m){const S=i[m],M=S[d],g=S[h];S[h]=M,S[d]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],h=u.uuid,d=n[h];if(d!==void 0)if(delete n[h],d<s){const p=--s,m=e[p],y=--o,S=e[y];n[m.uuid]=d,e[d]=m,n[S.uuid]=p,e[p]=S,e.pop();for(let M=0,g=r;M!==g;++M){const x=i[M],_=x[p],w=x[y];x[d]=_,x[p]=w,x.pop()}}else{const p=--o,m=e[p];p>0&&(n[m.uuid]=d),e[d]=m,e.pop();for(let y=0,S=r;y!==S;++y){const M=i[y];M[d]=M[p],M.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,h=this.nCachedObjects_,d=new Array(u);r=s.length,i[e]=r,o.push(e),a.push(n),s.push(d);for(let p=h,m=l.length;p!==m;++p){const y=l[p];d[p]=new bt(y,e,n)}return d}unsubscribe_(e){const n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];n[u]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class WI{constructor(e,n,i=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:qa,endingEnd:qa};for(let u=0;u!==o;++u){const h=s[u].createInterpolant(null);a[u]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=GL,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i){if(e.fadeOut(n),this.fadeIn(n),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,i){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+i,u[0]=e/o,u[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?n=0:(this._startTime=null,n=i*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case pS:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),u[h].accumulateAdditive(a);break;case I0:default:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),u[h].accumulate(r,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===zL;if(e===0)return s===-1?r:o&&(s&1)===1?n-r:r;if(i===kL){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=n||r<0){const a=Math.floor(r/n);r-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return n-r}return r}_setEndings(e,n,i){const r=this._interpolantSettings;i?(r.endingStart=Za,r.endingEnd=Za):(e?r.endingStart=this.zeroSlopeAtStart?Za:qa:r.endingStart=bh,n?r.endingEnd=this.zeroSlopeAtEnd?Za:qa:r.endingEnd=bh)}_scheduleFading(e,n,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=i,this}}const I9=new Float32Array(1);class jI extends ao{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,u=this._bindingsByRootAndName;let h=u[l];h===void 0&&(h={},u[l]=h);for(let d=0;d!==s;++d){const p=r[d],m=p.name;let y=h[m];if(y!==void 0)++y.referenceCount,o[d]=y;else{if(y=o[d],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,m));continue}const S=n&&n._propertyBindings[d].binding.parsedPath;y=new VI(bt.create(i,m,S),p.ValueTypeName,p.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,m),o[d]=y}a[d].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){const r=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const n=this._actions,i=n[n.length-1],r=e._cacheIndex;i._cacheIndex=r,n[r]=i,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],h=e._byClipCacheIndex;u._byClipCacheIndex=h,l[h]=u,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackAction(e){const n=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_addInactiveBinding(e,n,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[n];o===void 0&&(o={},r[n]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=n[n.length-1],u=e._cacheIndex;l._cacheIndex=u,n[u]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const n=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackBinding(e){const n=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let i=e[n];return i===void 0&&(i=new VS(new Float32Array(2),new Float32Array(2),1,I9),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){const n=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=n[r];e.__cacheIndex=r,n[r]=e,s.__cacheIndex=i,n[i]=s}clipAction(e,n,i){const r=n||this._root,s=r.uuid;let o=typeof e=="string"?pc.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(i===void 0&&(o!==null?i=o.blendMode:i=I0),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const h=new WI(this,o,n,i);return this._bindAction(h,u),this._addInactiveAction(h,a,s),h}existingAction(e,n){const i=n||this._root,r=i.uuid,s=typeof e=="string"?pc.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const n=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==i;++u)n[u]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const h=u._cacheIndex,d=n[n.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,d._cacheIndex=h,n[h]=d,n.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const n=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class eM{constructor(e){this.value=e}clone(){return new eM(this.value.clone===void 0?this.value:this.value.clone())}}let D9=0;class F9 extends ao{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:D9++}),this.name="",this.usage=Rh,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let i=0,r=n.length;i<r;i++)this.uniforms.push(n[i].clone());return this}clone(){return new this.constructor().copy(this)}}class N9 extends ld{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class U9{constructor(e,n,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class XI{constructor(e,n,i=0,r=1/0){this.ray=new rd(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new ll,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,i=[]){return L1(e,this,i,n),i.sort(nb),i}intersectObjects(e,n=!0,i=[]){for(let r=0,s=e.length;r<s;r++)L1(e[r],this,i,n);return i.sort(nb),i}}function nb(t,e){return t.distance-e.distance}function L1(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),i===!0){const r=t.children;for(let s=0,o=r.length;s<o;s++)L1(r[s],e,n,!0)}}class O9{constructor(e=1,n=0,i=0){return this.radius=e,this.phi=n,this.theta=i,this}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(pn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class k9{constructor(e=1,n=0,i=0){return this.radius=e,this.theta=n,this.y=i,this}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}}const ib=new ye;class G9{constructor(e=new ye(1/0,1/0),n=new ye(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=ib.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ib).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const rb=new F,Rm=new F;class z9{constructor(e=new F,n=new F){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){rb.subVectors(e,this.start),Rm.subVectors(this.end,this.start);const i=Rm.dot(Rm);let s=Rm.dot(rb)/i;return n&&(s=pn(s,0,1)),s}closestPointToPoint(e,n,i){const r=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const sb=new F;class H9 extends Ct{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const i=new ht,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,h=a/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new Ge(r,3));const s=new ai({fog:!1,toneMapped:!1});this.cone=new $r(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),sb.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(sb),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Eo=new F,Pm=new st,mx=new st;class V9 extends $r{constructor(e){const n=JI(e),i=new ht,r=[],s=[],o=new Be(0,0,1),a=new Be(0,1,0);for(let u=0;u<n.length;u++){const h=n[u];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new Ge(r,3)),i.setAttribute("color",new Ge(s,3));const l=new ai({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,i=this.geometry,r=i.getAttribute("position");mx.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(Pm.multiplyMatrices(mx,a.matrixWorld),Eo.setFromMatrixPosition(Pm),r.setXYZ(o,Eo.x,Eo.y,Eo.z),Pm.multiplyMatrices(mx,a.parent.matrixWorld),Eo.setFromMatrixPosition(Pm),r.setXYZ(o+1,Eo.x,Eo.y,Eo.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function JI(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,JI(t.children[n]));return e}class W9 extends Gn{constructor(e,n,i){const r=new Cc(n,4,2),s=new Wi({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const j9=new F,ob=new Be,ab=new Be;class X9 extends Ct{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Tc(n);r.rotateY(Math.PI*.5),this.material=new Wi({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Dt(o,3)),this.add(new Gn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");ob.copy(this.light.color),ab.copy(this.light.groundColor);for(let i=0,r=n.count;i<r;i++){const s=i<r/2?ob:ab;n.setXYZ(i,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(j9.setFromMatrixPosition(this.light.matrixWorld).negate())}}class J9 extends $r{constructor(e=10,n=10,i=4473924,r=8947848){i=new Be(i),r=new Be(r);const s=n/2,o=e/n,a=e/2,l=[],u=[];for(let p=0,m=0,y=-a;p<=n;p++,y+=o){l.push(-a,0,y,a,0,y),l.push(y,0,-a,y,0,a);const S=p===s?i:r;S.toArray(u,m),m+=3,S.toArray(u,m),m+=3,S.toArray(u,m),m+=3,S.toArray(u,m),m+=3}const h=new ht;h.setAttribute("position",new Ge(l,3)),h.setAttribute("color",new Ge(u,3));const d=new ai({vertexColors:!0,toneMapped:!1});super(h,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class K9 extends $r{constructor(e=10,n=16,i=8,r=64,s=4473924,o=8947848){s=new Be(s),o=new Be(o);const a=[],l=[];if(n>1)for(let d=0;d<n;d++){const p=d/n*(Math.PI*2),m=Math.sin(p)*e,y=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,y);const S=d&1?s:o;l.push(S.r,S.g,S.b),l.push(S.r,S.g,S.b)}for(let d=0;d<i;d++){const p=d&1?s:o,m=e-e/i*d;for(let y=0;y<r;y++){let S=y/r*(Math.PI*2),M=Math.sin(S)*m,g=Math.cos(S)*m;a.push(M,0,g),l.push(p.r,p.g,p.b),S=(y+1)/r*(Math.PI*2),M=Math.sin(S)*m,g=Math.cos(S)*m,a.push(M,0,g),l.push(p.r,p.g,p.b)}}const u=new ht;u.setAttribute("position",new Ge(a,3)),u.setAttribute("color",new Ge(l,3));const h=new ai({vertexColors:!0,toneMapped:!1});super(u,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const lb=new F,Bm=new F,ub=new F;class Y9 extends Ct{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",n===void 0&&(n=1);let r=new ht;r.setAttribute("position",new Ge([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new ai({fog:!1,toneMapped:!1});this.lightPlane=new ro(r,s),this.add(this.lightPlane),r=new ht,r.setAttribute("position",new Ge([0,0,0,0,0,1],3)),this.targetLine=new ro(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),lb.setFromMatrixPosition(this.light.matrixWorld),Bm.setFromMatrixPosition(this.light.target.matrixWorld),ub.subVectors(Bm,lb),this.lightPlane.lookAt(Bm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Bm),this.targetLine.scale.z=ub.length()}}const Lm=new F,fn=new od;class Q9 extends $r{constructor(e){const n=new ht,i=new ai({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(y,S){l(y),l(S)}function l(y){r.push(0,0,0),s.push(0,0,0),o[y]===void 0&&(o[y]=[]),o[y].push(r.length/3-1)}n.setAttribute("position",new Ge(r,3)),n.setAttribute("color",new Ge(s,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new Be(16755200),h=new Be(16711680),d=new Be(43775),p=new Be(16777215),m=new Be(3355443);this.setColors(u,h,d,p,m)}setColors(e,n,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,i=1,r=1;fn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),gn("c",n,e,fn,0,0,-1),gn("t",n,e,fn,0,0,1),gn("n1",n,e,fn,-i,-r,-1),gn("n2",n,e,fn,i,-r,-1),gn("n3",n,e,fn,-i,r,-1),gn("n4",n,e,fn,i,r,-1),gn("f1",n,e,fn,-i,-r,1),gn("f2",n,e,fn,i,-r,1),gn("f3",n,e,fn,-i,r,1),gn("f4",n,e,fn,i,r,1),gn("u1",n,e,fn,i*.7,r*1.1,-1),gn("u2",n,e,fn,-i*.7,r*1.1,-1),gn("u3",n,e,fn,0,r*2,-1),gn("cf1",n,e,fn,-i,0,1),gn("cf2",n,e,fn,i,0,1),gn("cf3",n,e,fn,0,-r,1),gn("cf4",n,e,fn,0,r,1),gn("cn1",n,e,fn,-i,0,-1),gn("cn2",n,e,fn,i,0,-1),gn("cn3",n,e,fn,0,-r,-1),gn("cn4",n,e,fn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function gn(t,e,n,i,r,s,o){Lm.set(r,s,o).unproject(i);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let u=0,h=a.length;u<h;u++)l.setXYZ(a[u],Lm.x,Lm.y,Lm.z)}}const Im=new qr;class q9 extends $r{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new ht;s.setIndex(new Dt(i,1)),s.setAttribute("position",new Dt(r,3)),super(s,new ai({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Im.setFromObject(this.object),Im.isEmpty())return;const n=Im.min,i=Im.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=n.x,s[4]=i.y,s[5]=i.z,s[6]=n.x,s[7]=n.y,s[8]=i.z,s[9]=i.x,s[10]=n.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=n.z,s[15]=n.x,s[16]=i.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=i.x,s[22]=n.y,s[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Z9 extends $r{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new ht;s.setIndex(new Dt(i,1)),s.setAttribute("position",new Ge(r,3)),super(s,new ai({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class $9 extends ro{constructor(e,n=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new ht;o.setAttribute("position",new Ge(s,3)),o.computeBoundingSphere(),super(o,new ai({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new ht;l.setAttribute("position",new Ge(a,3)),l.computeBoundingSphere(),this.add(new Gn(l,new Wi({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const cb=new F;let Dm,gx;class e8 extends Ct{constructor(e=new F(0,0,1),n=new F(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",Dm===void 0&&(Dm=new ht,Dm.setAttribute("position",new Ge([0,0,0,0,1,0],3)),gx=new wl(0,.5,1,5,1),gx.translate(0,-.5,0)),this.position.copy(n),this.line=new ro(Dm,new ai({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Gn(gx,new Wi({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{cb.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(cb,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class t8 extends $r{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new ht;r.setAttribute("position",new Ge(n,3)),r.setAttribute("color",new Ge(i,3));const s=new ai({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,n,i){const r=new Be,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(n),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class n8{constructor(){this.type="ShapePath",this.color=new Be,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new Bh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,r){return this.currentPath.quadraticCurveTo(e,n,i,r),this}bezierCurveTo(e,n,i,r,s,o){return this.currentPath.bezierCurveTo(e,n,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(g){const x=[];for(let _=0,w=g.length;_<w;_++){const C=g[_],R=new ul;R.curves=C.curves,x.push(R)}return x}function i(g,x){const _=x.length;let w=!1;for(let C=_-1,R=0;R<_;C=R++){let P=x[C],L=x[R],b=L.x-P.x,B=L.y-P.y;if(Math.abs(B)>Number.EPSILON){if(B<0&&(P=x[R],b=-b,L=x[C],B=-B),g.y<P.y||g.y>L.y)continue;if(g.y===P.y){if(g.x===P.x)return!0}else{const G=B*(g.x-P.x)-b*(g.y-P.y);if(G===0)return!0;if(G<0)continue;w=!w}}else{if(g.y!==P.y)continue;if(L.x<=g.x&&g.x<=P.x||P.x<=g.x&&g.x<=L.x)return!0}}return w}const r=vs.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new ul,l.curves=a.curves,u.push(l),u;let h=!r(s[0].getPoints());h=e?!h:h;const d=[],p=[];let m=[],y=0,S;p[y]=void 0,m[y]=[];for(let g=0,x=s.length;g<x;g++)a=s[g],S=a.getPoints(),o=r(S),o=e?!o:o,o?(!h&&p[y]&&y++,p[y]={s:new ul,p:S},p[y].s.curves=a.curves,h&&y++,m[y]=[]):m[y].push({h:a,p:S[0]});if(!p[0])return n(s);if(p.length>1){let g=!1,x=0;for(let _=0,w=p.length;_<w;_++)d[_]=[];for(let _=0,w=p.length;_<w;_++){const C=m[_];for(let R=0;R<C.length;R++){const P=C[R];let L=!0;for(let b=0;b<p.length;b++)i(P.p,p[b].p)&&(_!==b&&x++,L?(L=!1,d[b].push(P)):g=!0);L&&d[_].push(P)}}x>0&&g===!1&&(m=d)}let M;for(let g=0,x=p.length;g<x;g++){l=p[g].s,u.push(l),M=m[g];for(let _=0,w=M.length;_<w;_++)l.holes.push(M[_].h)}return u}}class i8 extends pa{constructor(e,n,i,r,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,n,i,r,s,o)}}class r8 extends fd{constructor(e,n,i,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,n,i,r)}}class s8 extends hd{constructor(e,n,i,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,n,i,r)}}class o8 extends dd{constructor(e,n,i,r,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,n,i,r,s,o,a)}}class a8 extends wl{constructor(e,n,i,r,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,n,i,r,s,o,a,l)}}class l8 extends pd{constructor(e,n){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,n)}}class u8 extends md{constructor(e,n){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,n)}}class c8 extends gd{constructor(e,n){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,n)}}class f8 extends Ec{constructor(e,n,i,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,n,i,r)}}class h8 extends Tc{constructor(e,n){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,n)}}class d8 extends Mc{constructor(e,n,i,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,n,i,r)}}class p8 extends lo{constructor(e,n,i,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,n,i,r)}}class m8 extends vd{constructor(e,n,i,r,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,n,i,r,s,o)}}class g8 extends yd{constructor(e,n){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,n)}}class v8 extends Cc{constructor(e,n,i,r,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,n,i,r,s,o,a)}}class y8 extends xd{constructor(e,n){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,n)}}class x8 extends _d{constructor(e,n,i,r,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,n,i,r,s)}}class _8 extends Ad{constructor(e,n,i,r,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,n,i,r,s,o)}}class A8 extends Sd{constructor(e,n,i,r,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,n,i,r,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:nd}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=nd);const KI=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:hS,AddEquation:Wa,AddOperation:xL,AdditiveAnimationBlendMode:pS,AdditiveBlending:Q_,AlphaFormat:RL,AlwaysDepth:hL,AlwaysStencilFunc:XL,AmbientLight:NI,AmbientLightProbe:g9,AnimationAction:WI,AnimationClip:pc,AnimationLoader:s9,AnimationMixer:jI,AnimationObjectGroup:L9,AnimationUtils:t9,ArcCurve:hI,ArrayCamera:oI,ArrowHelper:e8,Audio:HI,AudioAnalyser:S9,AudioContext:QS,AudioListener:x9,AudioLoader:p9,AxesHelper:t8,BackSide:gi,BasicDepthPacking:VL,BasicShadowMap:ZB,Bone:k0,BooleanKeyframeTrack:El,Box2:G9,Box3:qr,Box3Helper:Z9,BoxBufferGeometry:i8,BoxGeometry:pa,BoxHelper:q9,BufferAttribute:Dt,BufferGeometry:ht,BufferGeometryLoader:GI,ByteType:wL,Cache:xl,Camera:od,CameraHelper:Q9,CanvasTexture:E5,CapsuleBufferGeometry:r8,CapsuleGeometry:fd,CatmullRomCurve3:dI,CineonToneMapping:SL,CircleBufferGeometry:s8,CircleGeometry:hd,ClampToEdgeWrapping:Xn,Clock:qS,Color:Be,ColorKeyframeTrack:WS,ColorManagement:hr,CompressedArrayTexture:w5,CompressedTexture:DS,CompressedTextureLoader:o9,ConeBufferGeometry:o8,ConeGeometry:dd,CubeCamera:MS,CubeReflectionMapping:ra,CubeRefractionMapping:sa,CubeTexture:ad,CubeTextureLoader:a9,CubeUVReflectionMapping:Sc,CubicBezierCurve:NS,CubicBezierCurve3:pI,CubicInterpolant:BI,CullFaceBack:Y_,CullFaceFront:qB,CullFaceFrontBack:Ck,CullFaceNone:QB,Curve:es,CurvePath:gI,CustomBlending:$B,CustomToneMapping:ML,CylinderBufferGeometry:a8,CylinderGeometry:wl,Cylindrical:k9,Data3DTexture:_S,DataArrayTexture:D0,DataTexture:Ju,DataTextureLoader:l9,DataUtils:DG,DecrementStencilOp:Nk,DecrementWrapStencilOp:Ok,DefaultLoadingManager:Iu,DepthFormat:qo,DepthStencilFormat:gl,DepthTexture:aI,DirectionalLight:YS,DirectionalLightHelper:Y9,DiscreteInterpolant:LI,DisplayP3ColorSpace:vS,DodecahedronBufferGeometry:l8,DodecahedronGeometry:pd,DoubleSide:yr,DstAlphaFactor:oL,DstColorFactor:lL,DynamicCopyUsage:Zk,DynamicDrawUsage:ol,DynamicReadUsage:Yk,EdgesGeometry:vI,EllipseCurve:G0,EqualDepth:pL,EqualStencilFunc:Hk,EquirectangularReflectionMapping:Eh,EquirectangularRefractionMapping:Th,Euler:sd,EventDispatcher:ao,ExtrudeBufferGeometry:u8,ExtrudeGeometry:md,FileLoader:Qi,Float16BufferAttribute:GG,Float32BufferAttribute:Ge,Float64BufferAttribute:zG,FloatType:Xs,Fog:O0,FogExp2:U0,FramebufferTexture:M5,FrontSide:_s,Frustum:F0,GLBufferAttribute:U9,GLSL1:eG,GLSL3:w1,GreaterDepth:gL,GreaterEqualDepth:mL,GreaterEqualStencilFunc:Xk,GreaterStencilFunc:Wk,GridHelper:J9,Group:Js,HalfFloatType:ac,HemisphereLight:FI,HemisphereLightHelper:X9,HemisphereLightProbe:m9,IcosahedronBufferGeometry:c8,IcosahedronGeometry:gd,ImageBitmapLoader:zI,ImageLoader:Fh,ImageUtils:xS,IncrementStencilOp:Fk,IncrementWrapStencilOp:Uk,InstancedBufferAttribute:fc,InstancedBufferGeometry:kI,InstancedInterleavedBuffer:N9,InstancedMesh:BS,Int16BufferAttribute:OG,Int32BufferAttribute:kG,Int8BufferAttribute:FG,IntType:TL,InterleavedBuffer:ld,InterleavedBufferAttribute:aa,Interpolant:bc,InterpolateDiscrete:lc,InterpolateLinear:vl,InterpolateSmooth:cg,InvertStencilOp:kk,KeepStencilOp:fg,KeyframeTrack:ts,LOD:fI,LatheBufferGeometry:f8,LatheGeometry:Ec,Layers:ll,LessDepth:dL,LessEqualDepth:jg,LessEqualStencilFunc:Vk,LessStencilFunc:zk,Light:ga,LightProbe:V0,Line:ro,Line3:z9,LineBasicMaterial:ai,LineCurve:z0,LineCurve3:mI,LineDashedMaterial:RI,LineLoop:LS,LineSegments:$r,LinearEncoding:gS,LinearFilter:rn,LinearInterpolant:VS,LinearMipMapLinearFilter:Lk,LinearMipMapNearestFilter:Bk,LinearMipmapLinearFilter:As,LinearMipmapNearestFilter:L0,LinearSRGBColorSpace:Yr,LinearToneMapping:_L,Loader:xi,LoaderUtils:ys,LoadingManager:jS,LoopOnce:kL,LoopPingPong:zL,LoopRepeat:GL,LuminanceAlphaFormat:BL,LuminanceFormat:PL,MOUSE:Ek,Material:Tn,MaterialLoader:W0,MathUtils:YL,Matrix3:St,Matrix4:st,MaxEquation:e1,Mesh:Gn,MeshBasicMaterial:Wi,MeshDepthMaterial:TS,MeshDistanceMaterial:CS,MeshLambertMaterial:CI,MeshMatcapMaterial:bI,MeshNormalMaterial:TI,MeshPhongMaterial:wI,MeshPhysicalMaterial:uo,MeshStandardMaterial:Md,MeshToonMaterial:EI,MinEquation:$_,MirroredRepeatWrapping:oc,MixOperation:yL,MultiplyBlending:Z_,MultiplyOperation:id,NearestFilter:dn,NearestMipMapLinearFilter:Pk,NearestMipMapNearestFilter:Rk,NearestMipmapLinearFilter:ju,NearestMipmapNearestFilter:Ch,NeverDepth:fL,NeverStencilFunc:Gk,NoBlending:Qs,NoColorSpace:Zo,NoToneMapping:Xr,NormalAnimationBlendMode:I0,NormalBlending:rl,NotEqualDepth:vL,NotEqualStencilFunc:jk,NumberKeyframeTrack:hc,Object3D:Ct,ObjectLoader:h9,ObjectSpaceNormalMap:jL,OctahedronBufferGeometry:h8,OctahedronGeometry:Tc,OneFactor:iL,OneMinusDstAlphaFactor:aL,OneMinusDstColorFactor:uL,OneMinusSrcAlphaFactor:fS,OneMinusSrcColorFactor:sL,OrthographicCamera:ma,PCFShadowMap:P0,PCFSoftShadowMap:Kf,PMREMGenerator:T1,Path:Bh,PerspectiveCamera:yn,Plane:Io,PlaneBufferGeometry:d8,PlaneGeometry:Mc,PlaneHelper:$9,PointLight:KS,PointLightHelper:W9,Points:IS,PointsMaterial:cd,PolarGridHelper:K9,PolyhedronBufferGeometry:p8,PolyhedronGeometry:lo,PositionalAudio:A9,PropertyBinding:bt,PropertyMixer:VI,QuadraticBezierCurve:US,QuadraticBezierCurve3:OS,Quaternion:si,QuaternionKeyframeTrack:la,QuaternionLinearInterpolant:II,RED_GREEN_RGTC2_Format:S1,RED_RGTC1_Format:OL,REVISION:nd,RGBADepthPacking:WL,RGBAFormat:bi,RGBAIntegerFormat:NL,RGBA_ASTC_10x10_Format:y1,RGBA_ASTC_10x5_Format:m1,RGBA_ASTC_10x6_Format:g1,RGBA_ASTC_10x8_Format:v1,RGBA_ASTC_12x10_Format:x1,RGBA_ASTC_12x12_Format:_1,RGBA_ASTC_4x4_Format:a1,RGBA_ASTC_5x4_Format:l1,RGBA_ASTC_5x5_Format:u1,RGBA_ASTC_6x5_Format:c1,RGBA_ASTC_6x6_Format:f1,RGBA_ASTC_8x5_Format:h1,RGBA_ASTC_8x6_Format:d1,RGBA_ASTC_8x8_Format:p1,RGBA_BPTC_Format:ug,RGBA_ETC2_EAC_Format:o1,RGBA_PVRTC_2BPPV1_Format:r1,RGBA_PVRTC_4BPPV1_Format:i1,RGBA_S3TC_DXT1_Format:og,RGBA_S3TC_DXT3_Format:ag,RGBA_S3TC_DXT5_Format:lg,RGB_ETC1_Format:UL,RGB_ETC2_Format:s1,RGB_PVRTC_2BPPV1_Format:n1,RGB_PVRTC_4BPPV1_Format:t1,RGB_S3TC_DXT1_Format:sg,RGFormat:DL,RGIntegerFormat:FL,RawShaderMaterial:MI,Ray:rd,Raycaster:XI,RectAreaLight:UI,RedFormat:LL,RedIntegerFormat:IL,ReinhardToneMapping:AL,RepeatWrapping:oa,ReplaceStencilOp:Dk,ReverseSubtractEquation:tL,RingBufferGeometry:m8,RingGeometry:vd,SIGNED_RED_GREEN_RGTC2_Format:M1,SIGNED_RED_RGTC1_Format:A1,SRGBColorSpace:dt,Scene:Kg,ShaderChunk:mt,ShaderLib:Gr,ShaderMaterial:Ss,ShadowMaterial:SI,Shape:ul,ShapeBufferGeometry:g8,ShapeGeometry:yd,ShapePath:n8,ShapeUtils:vs,ShortType:EL,Skeleton:ud,SkeletonHelper:V9,SkinnedMesh:PS,Source:$a,Sphere:Zr,SphereBufferGeometry:v8,SphereGeometry:Cc,Spherical:O9,SphericalHarmonics3:OI,SplineCurve:kS,SpotLight:JS,SpotLightHelper:H9,Sprite:cI,SpriteMaterial:RS,SrcAlphaFactor:cS,SrcAlphaSaturateFactor:cL,SrcColorFactor:rL,StaticCopyUsage:qk,StaticDrawUsage:Rh,StaticReadUsage:Kk,StereoCamera:v9,StreamCopyUsage:$k,StreamDrawUsage:Jk,StreamReadUsage:Qk,StringKeyframeTrack:Tl,SubtractEquation:eL,SubtractiveBlending:q_,TOUCH:Tk,TangentSpaceNormalMap:da,TetrahedronBufferGeometry:y8,TetrahedronGeometry:xd,Texture:$t,TextureLoader:DI,TorusBufferGeometry:x8,TorusGeometry:_d,TorusKnotBufferGeometry:_8,TorusKnotGeometry:Ad,Triangle:Ci,TriangleFanDrawMode:Xg,TriangleStripDrawMode:mS,TrianglesDrawMode:HL,TubeBufferGeometry:A8,TubeGeometry:Sd,TwoPassDoubleSide:bk,UVMapping:B0,Uint16BufferAttribute:AS,Uint32BufferAttribute:SS,Uint8BufferAttribute:NG,Uint8ClampedBufferAttribute:UG,Uniform:eM,UniformsGroup:F9,UniformsLib:Pe,UniformsUtils:$L,UnsignedByteType:io,UnsignedInt248Type:sl,UnsignedIntType:Go,UnsignedShort4444Type:CL,UnsignedShort5551Type:bL,UnsignedShortType:dS,VSMShadowMap:Ur,Vector2:ye,Vector3:F,Vector4:Gt,VectorKeyframeTrack:dc,VideoTexture:S5,WebGL1Renderer:lI,WebGL3DRenderTarget:MG,WebGLArrayRenderTarget:SG,WebGLCubeRenderTarget:wS,WebGLMultipleRenderTargets:wG,WebGLRenderTarget:Qr,WebGLRenderer:bS,WebGLUtils:sI,WireframeGeometry:AI,WrapAroundEnding:bh,ZeroCurvatureEnding:qa,ZeroFactor:nL,ZeroSlopeEnding:Za,ZeroStencilOp:Ik,_SRGBAFormat:Jg,sRGBEncoding:Ji},Symbol.toStringTag,{value:"Module"}));var YI={exports:{}},Cl={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Cl.ConcurrentRoot=1;Cl.ContinuousEventPriority=4;Cl.DefaultEventPriority=16;Cl.DiscreteEventPriority=1;Cl.IdleEventPriority=536870912;Cl.LegacyRoot=0;YI.exports=Cl;var Du=YI.exports;function S8(t){let e;const n=new Set,i=(u,h)=>{const d=typeof u=="function"?u(e):u;if(d!==e){const p=e;e=h?d:Object.assign({},e,d),n.forEach(m=>m(e,p))}},r=()=>e,s=(u,h=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=h(e);function m(){const y=h(e);if(!d(p,y)){const S=p;u(p=y,S)}}return n.add(m),()=>n.delete(m)},l={setState:i,getState:r,subscribe:(u,h,d)=>h||d?s(u,h,d):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return e=t(i,r,l),l}const M8=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),fb=M8?O.useEffect:O.useLayoutEffect;function QI(t){const e=typeof t=="function"?S8(t):t,n=(i=e.getState,r=Object.is)=>{const[,s]=O.useReducer(M=>M+1,0),o=e.getState(),a=O.useRef(o),l=O.useRef(i),u=O.useRef(r),h=O.useRef(!1),d=O.useRef();d.current===void 0&&(d.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||u.current!==r||h.current)&&(p=i(o),m=!r(d.current,p)),fb(()=>{m&&(d.current=p),a.current=o,l.current=i,u.current=r,h.current=!1});const y=O.useRef(o);fb(()=>{const M=()=>{try{const x=e.getState(),_=l.current(x);u.current(d.current,_)||(a.current=x,d.current=_,s())}catch{h.current=!0,s()}},g=e.subscribe(M);return e.getState()!==y.current&&M(),g},[]);const S=m?p:d.current;return O.useDebugValue(S),S};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[n,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},n}var qI={exports:{}},vx={exports:{}},yx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hb;function w8(){return hb||(hb=1,function(t){function e(I,H){var z=I.length;I.push(H);e:for(;0<z;){var $=z-1>>>1,Z=I[$];if(0<r(Z,H))I[$]=H,I[z]=Z,z=$;else break e}}function n(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var H=I[0],z=I.pop();if(z!==H){I[0]=z;e:for(var $=0,Z=I.length,ee=Z>>>1;$<ee;){var ie=2*($+1)-1,Ae=I[ie],ge=ie+1,W=I[ge];if(0>r(Ae,z))ge<Z&&0>r(W,Ae)?(I[$]=W,I[ge]=z,$=ge):(I[$]=Ae,I[ie]=z,$=ie);else if(ge<Z&&0>r(W,z))I[$]=W,I[ge]=z,$=ge;else break e}}return H}function r(I,H){var z=I.sortIndex-H.sortIndex;return z!==0?z:I.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,p=3,m=!1,y=!1,S=!1,M=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(I){for(var H=n(u);H!==null;){if(H.callback===null)i(u);else if(H.startTime<=I)i(u),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(u)}}function w(I){if(S=!1,_(I),!y)if(n(l)!==null)y=!0,ae(C);else{var H=n(u);H!==null&&ne(w,H.startTime-I)}}function C(I,H){y=!1,S&&(S=!1,g(L),L=-1),m=!0;var z=p;try{for(_(H),d=n(l);d!==null&&(!(d.expirationTime>H)||I&&!G());){var $=d.callback;if(typeof $=="function"){d.callback=null,p=d.priorityLevel;var Z=$(d.expirationTime<=H);H=t.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(l)&&i(l),_(H)}else i(l);d=n(l)}if(d!==null)var ee=!0;else{var ie=n(u);ie!==null&&ne(w,ie.startTime-H),ee=!1}return ee}finally{d=null,p=z,m=!1}}var R=!1,P=null,L=-1,b=5,B=-1;function G(){return!(t.unstable_now()-B<b)}function X(){if(P!==null){var I=t.unstable_now();B=I;var H=!0;try{H=P(!0,I)}finally{H?V():(R=!1,P=null)}}else R=!1}var V;if(typeof x=="function")V=function(){x(X)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,J=Y.port2;Y.port1.onmessage=X,V=function(){J.postMessage(null)}}else V=function(){M(X,0)};function ae(I){P=I,R||(R=!0,V())}function ne(I,H){L=M(function(){I(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,ae(C))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(I){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var z=p;p=H;try{return I()}finally{p=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,H){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var z=p;p=I;try{return H()}finally{p=z}},t.unstable_scheduleCallback=function(I,H,z){var $=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?$+z:$):z=$,I){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=z+Z,I={id:h++,callback:H,priorityLevel:I,startTime:z,expirationTime:Z,sortIndex:-1},z>$?(I.sortIndex=z,e(u,I),n(l)===null&&I===n(u)&&(S?(g(L),L=-1):S=!0,ne(w,z-$))):(I.sortIndex=Z,e(l,I),y||m||(y=!0,ae(C))),I},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(I){var H=p;return function(){var z=p;p=H;try{return I.apply(this,arguments)}finally{p=z}}}}(yx)),yx}var db;function E8(){return db||(db=1,vx.exports=w8()),vx.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T8=function(e){var n={},i=O,r=E8(),s=Object.assign;function o(c){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+c,v=1;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),y=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),C=Symbol.iterator;function R(c){return c===null||typeof c!="object"?null:(c=C&&c[C]||c["@@iterator"],typeof c=="function"?c:null)}function P(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case h:return"Fragment";case u:return"Portal";case p:return"Profiler";case d:return"StrictMode";case M:return"Suspense";case g:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case y:return(c.displayName||"Context")+".Consumer";case m:return(c._context.displayName||"Context")+".Provider";case S:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case x:return f=c.displayName||null,f!==null?f:P(c.type)||"Memo";case _:f=c._payload,c=c._init;try{return P(c(f))}catch{}}return null}function L(c){var f=c.type;switch(c.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=f.render,c=c.displayName||c.name||"",f.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(f);case 8:return f===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function b(c){var f=c,v=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,f.flags&4098&&(v=f.return),c=f.return;while(c)}return f.tag===3?v:null}function B(c){if(b(c)!==c)throw Error(o(188))}function G(c){var f=c.alternate;if(!f){if(f=b(c),f===null)throw Error(o(188));return f!==c?null:c}for(var v=c,A=f;;){var E=v.return;if(E===null)break;var T=E.alternate;if(T===null){if(A=E.return,A!==null){v=A;continue}break}if(E.child===T.child){for(T=E.child;T;){if(T===v)return B(E),c;if(T===A)return B(E),f;T=T.sibling}throw Error(o(188))}if(v.return!==A.return)v=E,A=T;else{for(var U=!1,Q=E.child;Q;){if(Q===v){U=!0,v=E,A=T;break}if(Q===A){U=!0,A=E,v=T;break}Q=Q.sibling}if(!U){for(Q=T.child;Q;){if(Q===v){U=!0,v=T,A=E;break}if(Q===A){U=!0,A=T,v=E;break}Q=Q.sibling}if(!U)throw Error(o(189))}}if(v.alternate!==A)throw Error(o(190))}if(v.tag!==3)throw Error(o(188));return v.stateNode.current===v?c:f}function X(c){return c=G(c),c!==null?V(c):null}function V(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var f=V(c);if(f!==null)return f;c=c.sibling}return null}function Y(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var f=Y(c);if(f!==null)return f}c=c.sibling}return null}var J=Array.isArray,ae=e.getPublicInstance,ne=e.getRootHostContext,I=e.getChildHostContext,H=e.prepareForCommit,z=e.resetAfterCommit,$=e.createInstance,Z=e.appendInitialChild,ee=e.finalizeInitialChildren,ie=e.prepareUpdate,Ae=e.shouldSetTextContent,ge=e.createTextInstance,W=e.scheduleTimeout,Ve=e.cancelTimeout,Je=e.noTimeout,ve=e.isPrimaryRenderer,_e=e.supportsMutation,me=e.supportsPersistence,oe=e.supportsHydration,xe=e.getInstanceFromNode,De=e.preparePortalMount,Re=e.getCurrentEventPriority,He=e.detachDeletedInstance,Qe=e.supportsMicrotasks,We=e.scheduleMicrotask,rt=e.supportsTestSelectors,Mt=e.findFiberRoot,k=e.getBoundingRect,D=e.getTextContent,le=e.isHiddenSubtree,Se=e.matchAccessibilityRole,we=e.setFocusIfFocusable,be=e.setupIntersectionObserver,nt=e.appendChild,Ne=e.appendChildToContainer,de=e.commitTextUpdate,ze=e.commitMount,qe=e.commitUpdate,et=e.insertBefore,Oe=e.insertInContainerBefore,Ke=e.removeChild,wt=e.removeChildFromContainer,Ft=e.resetTextContent,en=e.hideInstance,K=e.hideTextInstance,fe=e.unhideInstance,Me=e.unhideTextInstance,Fe=e.clearContainer,je=e.cloneInstance,Nt=e.createContainerChildSet,Ut=e.appendChildToContainerChildSet,In=e.finalizeContainerChildren,Er=e.replaceContainerChildren,Yt=e.cloneHiddenInstance,li=e.cloneHiddenTextInstance,er=e.canHydrateInstance,Bl=e.canHydrateTextInstance,Fd=e.canHydrateSuspenseInstance,Nd=e.isSuspenseInstancePending,Pc=e.isSuspenseInstanceFallback,lv=e.registerSuspenseInstanceRetry,N=e.getNextHydratableSibling,se=e.getFirstHydratableChild,he=e.getFirstHydratableChildWithinContainer,te=e.getFirstHydratableChildWithinSuspenseInstance,pe=e.hydrateInstance,Ze=e.hydrateTextInstance,tt=e.hydrateSuspenseInstance,ot=e.getNextHydratableInstanceAfterSuspenseInstance,ct=e.commitHydratedContainer,vt=e.commitHydratedSuspenseInstance,yt=e.clearSuspenseBoundary,_t=e.clearSuspenseBoundaryFromContainer,Ot=e.shouldDeleteUnhydratedTailInstances,Hn=e.didNotMatchHydratedContainerTextInstance,Di=e.didNotMatchHydratedTextInstance,Tr;function Wt(c){if(Tr===void 0)try{throw Error()}catch(v){var f=v.stack.trim().match(/\n( *(at )?)/);Tr=f&&f[1]||""}return`
`+Tr+c}var At=!1;function ya(c,f){if(!c||At)return"";At=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Te){var A=Te}Reflect.construct(c,[],f)}else{try{f.call()}catch(Te){A=Te}c.call(f.prototype)}else{try{throw Error()}catch(Te){A=Te}c()}}catch(Te){if(Te&&A&&typeof Te.stack=="string"){for(var E=Te.stack.split(`
`),T=A.stack.split(`
`),U=E.length-1,Q=T.length-1;1<=U&&0<=Q&&E[U]!==T[Q];)Q--;for(;1<=U&&0<=Q;U--,Q--)if(E[U]!==T[Q]){if(U!==1||Q!==1)do if(U--,Q--,0>Q||E[U]!==T[Q]){var ce=`
`+E[U].replace(" at new "," at ");return c.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",c.displayName)),ce}while(1<=U&&0<=Q);break}}}finally{At=!1,Error.prepareStackTrace=v}return(c=c?c.displayName||c.name:"")?Wt(c):""}var xn=Object.prototype.hasOwnProperty,Cr=[],Es=-1;function _i(c){return{current:c}}function kt(c){0>Es||(c.current=Cr[Es],Cr[Es]=null,Es--)}function ft(c,f){Es++,Cr[Es]=c.current,c.current=f}var Yn={},_n=_i(Yn),Ht=_i(!1),br=Yn;function co(c,f){var v=c.type.contextTypes;if(!v)return Yn;var A=c.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===f)return A.__reactInternalMemoizedMaskedChildContext;var E={},T;for(T in v)E[T]=f[T];return A&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=f,c.__reactInternalMemoizedMaskedChildContext=E),E}function Vn(c){return c=c.childContextTypes,c!=null}function Ud(){kt(Ht),kt(_n)}function jM(c,f,v){if(_n.current!==Yn)throw Error(o(168));ft(_n,f),ft(Ht,v)}function XM(c,f,v){var A=c.stateNode;if(f=f.childContextTypes,typeof A.getChildContext!="function")return v;A=A.getChildContext();for(var E in A)if(!(E in f))throw Error(o(108,L(c)||"Unknown",E));return s({},v,A)}function Od(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Yn,br=_n.current,ft(_n,c),ft(Ht,Ht.current),!0}function JM(c,f,v){var A=c.stateNode;if(!A)throw Error(o(169));v?(c=XM(c,f,br),A.__reactInternalMemoizedMergedChildContext=c,kt(Ht),kt(_n),ft(_n,c)):kt(Ht),ft(Ht,v)}var Rr=Math.clz32?Math.clz32:G3,O3=Math.log,k3=Math.LN2;function G3(c){return c>>>=0,c===0?32:31-(O3(c)/k3|0)|0}var kd=64,Gd=4194304;function Bc(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function zd(c,f){var v=c.pendingLanes;if(v===0)return 0;var A=0,E=c.suspendedLanes,T=c.pingedLanes,U=v&268435455;if(U!==0){var Q=U&~E;Q!==0?A=Bc(Q):(T&=U,T!==0&&(A=Bc(T)))}else U=v&~E,U!==0?A=Bc(U):T!==0&&(A=Bc(T));if(A===0)return 0;if(f!==0&&f!==A&&!(f&E)&&(E=A&-A,T=f&-f,E>=T||E===16&&(T&4194240)!==0))return f;if(A&4&&(A|=v&16),f=c.entangledLanes,f!==0)for(c=c.entanglements,f&=A;0<f;)v=31-Rr(f),E=1<<v,A|=c[v],f&=~E;return A}function z3(c,f){switch(c){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H3(c,f){for(var v=c.suspendedLanes,A=c.pingedLanes,E=c.expirationTimes,T=c.pendingLanes;0<T;){var U=31-Rr(T),Q=1<<U,ce=E[U];ce===-1?(!(Q&v)||Q&A)&&(E[U]=z3(Q,f)):ce<=f&&(c.expiredLanes|=Q),T&=~Q}}function uv(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function cv(c){for(var f=[],v=0;31>v;v++)f.push(c);return f}function Lc(c,f,v){c.pendingLanes|=f,f!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,f=31-Rr(f),c[f]=v}function V3(c,f){var v=c.pendingLanes&~f;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=f,c.mutableReadLanes&=f,c.entangledLanes&=f,f=c.entanglements;var A=c.eventTimes;for(c=c.expirationTimes;0<v;){var E=31-Rr(v),T=1<<E;f[E]=0,A[E]=-1,c[E]=-1,v&=~T}}function fv(c,f){var v=c.entangledLanes|=f;for(c=c.entanglements;v;){var A=31-Rr(v),E=1<<A;E&f|c[A]&f&&(c[A]|=f),v&=~E}}var Bt=0;function KM(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var hv=r.unstable_scheduleCallback,YM=r.unstable_cancelCallback,W3=r.unstable_shouldYield,j3=r.unstable_requestPaint,Dn=r.unstable_now,dv=r.unstable_ImmediatePriority,X3=r.unstable_UserBlockingPriority,pv=r.unstable_NormalPriority,J3=r.unstable_IdlePriority,Hd=null,ns=null;function K3(c){if(ns&&typeof ns.onCommitFiberRoot=="function")try{ns.onCommitFiberRoot(Hd,c,void 0,(c.current.flags&128)===128)}catch{}}function Y3(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var is=typeof Object.is=="function"?Object.is:Y3,Ts=null,Vd=!1,mv=!1;function QM(c){Ts===null?Ts=[c]:Ts.push(c)}function Q3(c){Vd=!0,QM(c)}function rs(){if(!mv&&Ts!==null){mv=!0;var c=0,f=Bt;try{var v=Ts;for(Bt=1;c<v.length;c++){var A=v[c];do A=A(!0);while(A!==null)}Ts=null,Vd=!1}catch(E){throw Ts!==null&&(Ts=Ts.slice(c+1)),hv(dv,rs),E}finally{Bt=f,mv=!1}}return null}var q3=a.ReactCurrentBatchConfig;function Wd(c,f){if(is(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var v=Object.keys(c),A=Object.keys(f);if(v.length!==A.length)return!1;for(A=0;A<v.length;A++){var E=v[A];if(!xn.call(f,E)||!is(c[E],f[E]))return!1}return!0}function Z3(c){switch(c.tag){case 5:return Wt(c.type);case 16:return Wt("Lazy");case 13:return Wt("Suspense");case 19:return Wt("SuspenseList");case 0:case 2:case 15:return c=ya(c.type,!1),c;case 11:return c=ya(c.type.render,!1),c;case 1:return c=ya(c.type,!0),c;default:return""}}function Pr(c,f){if(c&&c.defaultProps){f=s({},f),c=c.defaultProps;for(var v in c)f[v]===void 0&&(f[v]=c[v]);return f}return f}var jd=_i(null),Xd=null,Ll=null,gv=null;function vv(){gv=Ll=Xd=null}function qM(c,f,v){ve?(ft(jd,f._currentValue),f._currentValue=v):(ft(jd,f._currentValue2),f._currentValue2=v)}function yv(c){var f=jd.current;kt(jd),ve?c._currentValue=f:c._currentValue2=f}function xv(c,f,v){for(;c!==null;){var A=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,A!==null&&(A.childLanes|=f)):A!==null&&(A.childLanes&f)!==f&&(A.childLanes|=f),c===v)break;c=c.return}}function Il(c,f){Xd=c,gv=Ll=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&f&&(Ui=!0),c.firstContext=null)}function tr(c){var f=ve?c._currentValue:c._currentValue2;if(gv!==c)if(c={context:c,memoizedValue:f,next:null},Ll===null){if(Xd===null)throw Error(o(308));Ll=c,Xd.dependencies={lanes:0,firstContext:c}}else Ll=Ll.next=c;return f}var ss=null,fo=!1;function _v(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZM(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Cs(c,f){return{eventTime:c,lane:f,tag:0,payload:null,callback:null,next:null}}function ho(c,f){var v=c.updateQueue;v!==null&&(v=v.shared,An!==null&&c.mode&1&&!(xt&2)?(c=v.interleaved,c===null?(f.next=f,ss===null?ss=[v]:ss.push(v)):(f.next=c.next,c.next=f),v.interleaved=f):(c=v.pending,c===null?f.next=f:(f.next=c.next,c.next=f),v.pending=f))}function Jd(c,f,v){if(f=f.updateQueue,f!==null&&(f=f.shared,(v&4194240)!==0)){var A=f.lanes;A&=c.pendingLanes,v|=A,f.lanes=v,fv(c,v)}}function $M(c,f){var v=c.updateQueue,A=c.alternate;if(A!==null&&(A=A.updateQueue,v===A)){var E=null,T=null;if(v=v.firstBaseUpdate,v!==null){do{var U={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};T===null?E=T=U:T=T.next=U,v=v.next}while(v!==null);T===null?E=T=f:T=T.next=f}else E=T=f;v={baseState:A.baseState,firstBaseUpdate:E,lastBaseUpdate:T,shared:A.shared,effects:A.effects},c.updateQueue=v;return}c=v.lastBaseUpdate,c===null?v.firstBaseUpdate=f:c.next=f,v.lastBaseUpdate=f}function Kd(c,f,v,A){var E=c.updateQueue;fo=!1;var T=E.firstBaseUpdate,U=E.lastBaseUpdate,Q=E.shared.pending;if(Q!==null){E.shared.pending=null;var ce=Q,Te=ce.next;ce.next=null,U===null?T=Te:U.next=Te,U=ce;var ke=c.alternate;ke!==null&&(ke=ke.updateQueue,Q=ke.lastBaseUpdate,Q!==U&&(Q===null?ke.firstBaseUpdate=Te:Q.next=Te,ke.lastBaseUpdate=ce))}if(T!==null){var lt=E.baseState;U=0,ke=Te=ce=null,Q=T;do{var $e=Q.lane,Vt=Q.eventTime;if((A&$e)===$e){ke!==null&&(ke=ke.next={eventTime:Vt,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var Ye=c,$n=Q;switch($e=f,Vt=v,$n.tag){case 1:if(Ye=$n.payload,typeof Ye=="function"){lt=Ye.call(Vt,lt,$e);break e}lt=Ye;break e;case 3:Ye.flags=Ye.flags&-65537|128;case 0:if(Ye=$n.payload,$e=typeof Ye=="function"?Ye.call(Vt,lt,$e):Ye,$e==null)break e;lt=s({},lt,$e);break e;case 2:fo=!0}}Q.callback!==null&&Q.lane!==0&&(c.flags|=64,$e=E.effects,$e===null?E.effects=[Q]:$e.push(Q))}else Vt={eventTime:Vt,lane:$e,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},ke===null?(Te=ke=Vt,ce=lt):ke=ke.next=Vt,U|=$e;if(Q=Q.next,Q===null){if(Q=E.shared.pending,Q===null)break;$e=Q,Q=$e.next,$e.next=null,E.lastBaseUpdate=$e,E.shared.pending=null}}while(1);if(ke===null&&(ce=lt),E.baseState=ce,E.firstBaseUpdate=Te,E.lastBaseUpdate=ke,f=E.shared.interleaved,f!==null){E=f;do U|=E.lane,E=E.next;while(E!==f)}else T===null&&(E.shared.lanes=0);Hl|=U,c.lanes=U,c.memoizedState=lt}}function ew(c,f,v){if(c=f.effects,f.effects=null,c!==null)for(f=0;f<c.length;f++){var A=c[f],E=A.callback;if(E!==null){if(A.callback=null,A=v,typeof E!="function")throw Error(o(191,E));E.call(A)}}}var tw=new i.Component().refs;function Av(c,f,v,A){f=c.memoizedState,v=v(A,f),v=v==null?f:s({},f,v),c.memoizedState=v,c.lanes===0&&(c.updateQueue.baseState=v)}var Yd={isMounted:function(c){return(c=c._reactInternals)?b(c)===c:!1},enqueueSetState:function(c,f,v){c=c._reactInternals;var A=ci(),E=go(c),T=Cs(A,E);T.payload=f,v!=null&&(T.callback=v),ho(c,T),f=or(c,E,A),f!==null&&Jd(f,c,E)},enqueueReplaceState:function(c,f,v){c=c._reactInternals;var A=ci(),E=go(c),T=Cs(A,E);T.tag=1,T.payload=f,v!=null&&(T.callback=v),ho(c,T),f=or(c,E,A),f!==null&&Jd(f,c,E)},enqueueForceUpdate:function(c,f){c=c._reactInternals;var v=ci(),A=go(c),E=Cs(v,A);E.tag=2,f!=null&&(E.callback=f),ho(c,E),f=or(c,A,v),f!==null&&Jd(f,c,A)}};function nw(c,f,v,A,E,T,U){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(A,T,U):f.prototype&&f.prototype.isPureReactComponent?!Wd(v,A)||!Wd(E,T):!0}function iw(c,f,v){var A=!1,E=Yn,T=f.contextType;return typeof T=="object"&&T!==null?T=tr(T):(E=Vn(f)?br:_n.current,A=f.contextTypes,T=(A=A!=null)?co(c,E):Yn),f=new f(v,T),c.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Yd,c.stateNode=f,f._reactInternals=c,A&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=E,c.__reactInternalMemoizedMaskedChildContext=T),f}function rw(c,f,v,A){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(v,A),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(v,A),f.state!==c&&Yd.enqueueReplaceState(f,f.state,null)}function Sv(c,f,v,A){var E=c.stateNode;E.props=v,E.state=c.memoizedState,E.refs=tw,_v(c);var T=f.contextType;typeof T=="object"&&T!==null?E.context=tr(T):(T=Vn(f)?br:_n.current,E.context=co(c,T)),E.state=c.memoizedState,T=f.getDerivedStateFromProps,typeof T=="function"&&(Av(c,f,T,v),E.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(f=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),f!==E.state&&Yd.enqueueReplaceState(E,E.state,null),Kd(c,v,E,A),E.state=c.memoizedState),typeof E.componentDidMount=="function"&&(c.flags|=4194308)}var Dl=[],Fl=0,Qd=null,qd=0,nr=[],ir=0,xa=null,bs=1,Rs="";function _a(c,f){Dl[Fl++]=qd,Dl[Fl++]=Qd,Qd=c,qd=f}function sw(c,f,v){nr[ir++]=bs,nr[ir++]=Rs,nr[ir++]=xa,xa=c;var A=bs;c=Rs;var E=32-Rr(A)-1;A&=~(1<<E),v+=1;var T=32-Rr(f)+E;if(30<T){var U=E-E%5;T=(A&(1<<U)-1).toString(32),A>>=U,E-=U,bs=1<<32-Rr(f)+E|v<<E|A,Rs=T+c}else bs=1<<T|v<<E|A,Rs=c}function Mv(c){c.return!==null&&(_a(c,1),sw(c,1,0))}function wv(c){for(;c===Qd;)Qd=Dl[--Fl],Dl[Fl]=null,qd=Dl[--Fl],Dl[Fl]=null;for(;c===xa;)xa=nr[--ir],nr[ir]=null,Rs=nr[--ir],nr[ir]=null,bs=nr[--ir],nr[ir]=null}var Fi=null,Ni=null,Qt=!1,Ic=!1,Br=null;function ow(c,f){var v=ar(5,null,null,0);v.elementType="DELETED",v.stateNode=f,v.return=c,f=c.deletions,f===null?(c.deletions=[v],c.flags|=16):f.push(v)}function aw(c,f){switch(c.tag){case 5:return f=er(f,c.type,c.pendingProps),f!==null?(c.stateNode=f,Fi=c,Ni=se(f),!0):!1;case 6:return f=Bl(f,c.pendingProps),f!==null?(c.stateNode=f,Fi=c,Ni=null,!0):!1;case 13:if(f=Fd(f),f!==null){var v=xa!==null?{id:bs,overflow:Rs}:null;return c.memoizedState={dehydrated:f,treeContext:v,retryLane:1073741824},v=ar(18,null,null,0),v.stateNode=f,v.return=c,c.child=v,Fi=c,Ni=null,!0}return!1;default:return!1}}function Ev(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Tv(c){if(Qt){var f=Ni;if(f){var v=f;if(!aw(c,f)){if(Ev(c))throw Error(o(418));f=N(v);var A=Fi;f&&aw(c,f)?ow(A,v):(c.flags=c.flags&-4097|2,Qt=!1,Fi=c)}}else{if(Ev(c))throw Error(o(418));c.flags=c.flags&-4097|2,Qt=!1,Fi=c}}}function lw(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Fi=c}function Dc(c){if(!oe||c!==Fi)return!1;if(!Qt)return lw(c),Qt=!0,!1;if(c.tag!==3&&(c.tag!==5||Ot(c.type)&&!Ae(c.type,c.memoizedProps))){var f=Ni;if(f){if(Ev(c)){for(c=Ni;c;)c=N(c);throw Error(o(418))}for(;f;)ow(c,f),f=N(f)}}if(lw(c),c.tag===13){if(!oe)throw Error(o(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));Ni=ot(c)}else Ni=Fi?N(c.stateNode):null;return!0}function Nl(){oe&&(Ni=Fi=null,Ic=Qt=!1)}function Cv(c){Br===null?Br=[c]:Br.push(c)}function Fc(c,f,v){if(c=v.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(o(309));var A=v.stateNode}if(!A)throw Error(o(147,c));var E=A,T=""+c;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===T?f.ref:(f=function(U){var Q=E.refs;Q===tw&&(Q=E.refs={}),U===null?delete Q[T]:Q[T]=U},f._stringRef=T,f)}if(typeof c!="string")throw Error(o(284));if(!v._owner)throw Error(o(290,c))}return c}function Zd(c,f){throw c=Object.prototype.toString.call(f),Error(o(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c))}function uw(c){var f=c._init;return f(c._payload)}function cw(c){function f(re,q){if(c){var ue=re.deletions;ue===null?(re.deletions=[q],re.flags|=16):ue.push(q)}}function v(re,q){if(!c)return null;for(;q!==null;)f(re,q),q=q.sibling;return null}function A(re,q){for(re=new Map;q!==null;)q.key!==null?re.set(q.key,q):re.set(q.index,q),q=q.sibling;return re}function E(re,q){return re=yo(re,q),re.index=0,re.sibling=null,re}function T(re,q,ue){return re.index=ue,c?(ue=re.alternate,ue!==null?(ue=ue.index,ue<q?(re.flags|=2,q):ue):(re.flags|=2,q)):(re.flags|=1048576,q)}function U(re){return c&&re.alternate===null&&(re.flags|=2),re}function Q(re,q,ue,Ie){return q===null||q.tag!==6?(q=cy(ue,re.mode,Ie),q.return=re,q):(q=E(q,ue),q.return=re,q)}function ce(re,q,ue,Ie){var Xe=ue.type;return Xe===h?ke(re,q,ue.props.children,Ie,ue.key):q!==null&&(q.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===_&&uw(Xe)===q.type)?(Ie=E(q,ue.props),Ie.ref=Fc(re,q,ue),Ie.return=re,Ie):(Ie=Rp(ue.type,ue.key,ue.props,null,re.mode,Ie),Ie.ref=Fc(re,q,ue),Ie.return=re,Ie)}function Te(re,q,ue,Ie){return q===null||q.tag!==4||q.stateNode.containerInfo!==ue.containerInfo||q.stateNode.implementation!==ue.implementation?(q=fy(ue,re.mode,Ie),q.return=re,q):(q=E(q,ue.children||[]),q.return=re,q)}function ke(re,q,ue,Ie,Xe){return q===null||q.tag!==7?(q=Ca(ue,re.mode,Ie,Xe),q.return=re,q):(q=E(q,ue),q.return=re,q)}function lt(re,q,ue){if(typeof q=="string"&&q!==""||typeof q=="number")return q=cy(""+q,re.mode,ue),q.return=re,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case l:return ue=Rp(q.type,q.key,q.props,null,re.mode,ue),ue.ref=Fc(re,null,q),ue.return=re,ue;case u:return q=fy(q,re.mode,ue),q.return=re,q;case _:var Ie=q._init;return lt(re,Ie(q._payload),ue)}if(J(q)||R(q))return q=Ca(q,re.mode,ue,null),q.return=re,q;Zd(re,q)}return null}function $e(re,q,ue,Ie){var Xe=q!==null?q.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number")return Xe!==null?null:Q(re,q,""+ue,Ie);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case l:return ue.key===Xe?ce(re,q,ue,Ie):null;case u:return ue.key===Xe?Te(re,q,ue,Ie):null;case _:return Xe=ue._init,$e(re,q,Xe(ue._payload),Ie)}if(J(ue)||R(ue))return Xe!==null?null:ke(re,q,ue,Ie,null);Zd(re,ue)}return null}function Vt(re,q,ue,Ie,Xe){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return re=re.get(ue)||null,Q(q,re,""+Ie,Xe);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case l:return re=re.get(Ie.key===null?ue:Ie.key)||null,ce(q,re,Ie,Xe);case u:return re=re.get(Ie.key===null?ue:Ie.key)||null,Te(q,re,Ie,Xe);case _:var pt=Ie._init;return Vt(re,q,ue,pt(Ie._payload),Xe)}if(J(Ie)||R(Ie))return re=re.get(ue)||null,ke(q,re,Ie,Xe,null);Zd(q,Ie)}return null}function Ye(re,q,ue,Ie){for(var Xe=null,pt=null,ut=q,Lt=q=0,Nn=null;ut!==null&&Lt<ue.length;Lt++){ut.index>Lt?(Nn=ut,ut=null):Nn=ut.sibling;var It=$e(re,ut,ue[Lt],Ie);if(It===null){ut===null&&(ut=Nn);break}c&&ut&&It.alternate===null&&f(re,ut),q=T(It,q,Lt),pt===null?Xe=It:pt.sibling=It,pt=It,ut=Nn}if(Lt===ue.length)return v(re,ut),Qt&&_a(re,Lt),Xe;if(ut===null){for(;Lt<ue.length;Lt++)ut=lt(re,ue[Lt],Ie),ut!==null&&(q=T(ut,q,Lt),pt===null?Xe=ut:pt.sibling=ut,pt=ut);return Qt&&_a(re,Lt),Xe}for(ut=A(re,ut);Lt<ue.length;Lt++)Nn=Vt(ut,re,Lt,ue[Lt],Ie),Nn!==null&&(c&&Nn.alternate!==null&&ut.delete(Nn.key===null?Lt:Nn.key),q=T(Nn,q,Lt),pt===null?Xe=Nn:pt.sibling=Nn,pt=Nn);return c&&ut.forEach(function(xo){return f(re,xo)}),Qt&&_a(re,Lt),Xe}function $n(re,q,ue,Ie){var Xe=R(ue);if(typeof Xe!="function")throw Error(o(150));if(ue=Xe.call(ue),ue==null)throw Error(o(151));for(var pt=Xe=null,ut=q,Lt=q=0,Nn=null,It=ue.next();ut!==null&&!It.done;Lt++,It=ue.next()){ut.index>Lt?(Nn=ut,ut=null):Nn=ut.sibling;var xo=$e(re,ut,It.value,Ie);if(xo===null){ut===null&&(ut=Nn);break}c&&ut&&xo.alternate===null&&f(re,ut),q=T(xo,q,Lt),pt===null?Xe=xo:pt.sibling=xo,pt=xo,ut=Nn}if(It.done)return v(re,ut),Qt&&_a(re,Lt),Xe;if(ut===null){for(;!It.done;Lt++,It=ue.next())It=lt(re,It.value,Ie),It!==null&&(q=T(It,q,Lt),pt===null?Xe=It:pt.sibling=It,pt=It);return Qt&&_a(re,Lt),Xe}for(ut=A(re,ut);!It.done;Lt++,It=ue.next())It=Vt(ut,re,Lt,It.value,Ie),It!==null&&(c&&It.alternate!==null&&ut.delete(It.key===null?Lt:It.key),q=T(It,q,Lt),pt===null?Xe=It:pt.sibling=It,pt=It);return c&&ut.forEach(function(bN){return f(re,bN)}),Qt&&_a(re,Lt),Xe}function lr(re,q,ue,Ie){if(typeof ue=="object"&&ue!==null&&ue.type===h&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case l:e:{for(var Xe=ue.key,pt=q;pt!==null;){if(pt.key===Xe){if(Xe=ue.type,Xe===h){if(pt.tag===7){v(re,pt.sibling),q=E(pt,ue.props.children),q.return=re,re=q;break e}}else if(pt.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===_&&uw(Xe)===pt.type){v(re,pt.sibling),q=E(pt,ue.props),q.ref=Fc(re,pt,ue),q.return=re,re=q;break e}v(re,pt);break}else f(re,pt);pt=pt.sibling}ue.type===h?(q=Ca(ue.props.children,re.mode,Ie,ue.key),q.return=re,re=q):(Ie=Rp(ue.type,ue.key,ue.props,null,re.mode,Ie),Ie.ref=Fc(re,q,ue),Ie.return=re,re=Ie)}return U(re);case u:e:{for(pt=ue.key;q!==null;){if(q.key===pt)if(q.tag===4&&q.stateNode.containerInfo===ue.containerInfo&&q.stateNode.implementation===ue.implementation){v(re,q.sibling),q=E(q,ue.children||[]),q.return=re,re=q;break e}else{v(re,q);break}else f(re,q);q=q.sibling}q=fy(ue,re.mode,Ie),q.return=re,re=q}return U(re);case _:return pt=ue._init,lr(re,q,pt(ue._payload),Ie)}if(J(ue))return Ye(re,q,ue,Ie);if(R(ue))return $n(re,q,ue,Ie);Zd(re,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"?(ue=""+ue,q!==null&&q.tag===6?(v(re,q.sibling),q=E(q,ue),q.return=re,re=q):(v(re,q),q=cy(ue,re.mode,Ie),q.return=re,re=q),U(re)):v(re,q)}return lr}var Ul=cw(!0),fw=cw(!1),Nc={},rr=_i(Nc),Uc=_i(Nc),Ol=_i(Nc);function os(c){if(c===Nc)throw Error(o(174));return c}function bv(c,f){ft(Ol,f),ft(Uc,c),ft(rr,Nc),c=ne(f),kt(rr),ft(rr,c)}function kl(){kt(rr),kt(Uc),kt(Ol)}function hw(c){var f=os(Ol.current),v=os(rr.current);f=I(v,c.type,f),v!==f&&(ft(Uc,c),ft(rr,f))}function Rv(c){Uc.current===c&&(kt(rr),kt(Uc))}var tn=_i(0);function $d(c){for(var f=c;f!==null;){if(f.tag===13){var v=f.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||Nd(v)||Pc(v)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var Pv=[];function Bv(){for(var c=0;c<Pv.length;c++){var f=Pv[c];ve?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}Pv.length=0}var ep=a.ReactCurrentDispatcher,sr=a.ReactCurrentBatchConfig,Gl=0,cn=null,Qn=null,Fn=null,tp=!1,Oc=!1,kc=0,$3=0;function qn(){throw Error(o(321))}function Lv(c,f){if(f===null)return!1;for(var v=0;v<f.length&&v<c.length;v++)if(!is(c[v],f[v]))return!1;return!0}function Iv(c,f,v,A,E,T){if(Gl=T,cn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,ep.current=c===null||c.memoizedState===null?iN:rN,c=v(A,E),Oc){T=0;do{if(Oc=!1,kc=0,25<=T)throw Error(o(301));T+=1,Fn=Qn=null,f.updateQueue=null,ep.current=sN,c=v(A,E)}while(Oc)}if(ep.current=op,f=Qn!==null&&Qn.next!==null,Gl=0,Fn=Qn=cn=null,tp=!1,f)throw Error(o(300));return c}function Dv(){var c=kc!==0;return kc=0,c}function Ps(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fn===null?cn.memoizedState=Fn=c:Fn=Fn.next=c,Fn}function as(){if(Qn===null){var c=cn.alternate;c=c!==null?c.memoizedState:null}else c=Qn.next;var f=Fn===null?cn.memoizedState:Fn.next;if(f!==null)Fn=f,Qn=c;else{if(c===null)throw Error(o(310));Qn=c,c={memoizedState:Qn.memoizedState,baseState:Qn.baseState,baseQueue:Qn.baseQueue,queue:Qn.queue,next:null},Fn===null?cn.memoizedState=Fn=c:Fn=Fn.next=c}return Fn}function Aa(c,f){return typeof f=="function"?f(c):f}function np(c){var f=as(),v=f.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=c;var A=Qn,E=A.baseQueue,T=v.pending;if(T!==null){if(E!==null){var U=E.next;E.next=T.next,T.next=U}A.baseQueue=E=T,v.pending=null}if(E!==null){T=E.next,A=A.baseState;var Q=U=null,ce=null,Te=T;do{var ke=Te.lane;if((Gl&ke)===ke)ce!==null&&(ce=ce.next={lane:0,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null}),A=Te.hasEagerState?Te.eagerState:c(A,Te.action);else{var lt={lane:ke,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null};ce===null?(Q=ce=lt,U=A):ce=ce.next=lt,cn.lanes|=ke,Hl|=ke}Te=Te.next}while(Te!==null&&Te!==T);ce===null?U=A:ce.next=Q,is(A,f.memoizedState)||(Ui=!0),f.memoizedState=A,f.baseState=U,f.baseQueue=ce,v.lastRenderedState=A}if(c=v.interleaved,c!==null){E=c;do T=E.lane,cn.lanes|=T,Hl|=T,E=E.next;while(E!==c)}else E===null&&(v.lanes=0);return[f.memoizedState,v.dispatch]}function ip(c){var f=as(),v=f.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=c;var A=v.dispatch,E=v.pending,T=f.memoizedState;if(E!==null){v.pending=null;var U=E=E.next;do T=c(T,U.action),U=U.next;while(U!==E);is(T,f.memoizedState)||(Ui=!0),f.memoizedState=T,f.baseQueue===null&&(f.baseState=T),v.lastRenderedState=T}return[T,A]}function dw(){}function pw(c,f){var v=cn,A=as(),E=f(),T=!is(A.memoizedState,E);if(T&&(A.memoizedState=E,Ui=!0),A=A.queue,zc(vw.bind(null,v,A,c),[c]),A.getSnapshot!==f||T||Fn!==null&&Fn.memoizedState.tag&1){if(v.flags|=2048,Gc(9,gw.bind(null,v,A,E,f),void 0,null),An===null)throw Error(o(349));Gl&30||mw(v,f,E)}return E}function mw(c,f,v){c.flags|=16384,c={getSnapshot:f,value:v},f=cn.updateQueue,f===null?(f={lastEffect:null,stores:null},cn.updateQueue=f,f.stores=[c]):(v=f.stores,v===null?f.stores=[c]:v.push(c))}function gw(c,f,v,A){f.value=v,f.getSnapshot=A,yw(f)&&or(c,1,-1)}function vw(c,f,v){return v(function(){yw(f)&&or(c,1,-1)})}function yw(c){var f=c.getSnapshot;c=c.value;try{var v=f();return!is(c,v)}catch{return!0}}function Fv(c){var f=Ps();return typeof c=="function"&&(c=c()),f.memoizedState=f.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:c},f.queue=c,c=c.dispatch=nN.bind(null,cn,c),[f.memoizedState,c]}function Gc(c,f,v,A){return c={tag:c,create:f,destroy:v,deps:A,next:null},f=cn.updateQueue,f===null?(f={lastEffect:null,stores:null},cn.updateQueue=f,f.lastEffect=c.next=c):(v=f.lastEffect,v===null?f.lastEffect=c.next=c:(A=v.next,v.next=c,c.next=A,f.lastEffect=c)),c}function xw(){return as().memoizedState}function rp(c,f,v,A){var E=Ps();cn.flags|=c,E.memoizedState=Gc(1|f,v,void 0,A===void 0?null:A)}function sp(c,f,v,A){var E=as();A=A===void 0?null:A;var T=void 0;if(Qn!==null){var U=Qn.memoizedState;if(T=U.destroy,A!==null&&Lv(A,U.deps)){E.memoizedState=Gc(f,v,T,A);return}}cn.flags|=c,E.memoizedState=Gc(1|f,v,T,A)}function Nv(c,f){return rp(8390656,8,c,f)}function zc(c,f){return sp(2048,8,c,f)}function _w(c,f){return sp(4,2,c,f)}function Aw(c,f){return sp(4,4,c,f)}function Sw(c,f){if(typeof f=="function")return c=c(),f(c),function(){f(null)};if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function Mw(c,f,v){return v=v!=null?v.concat([c]):null,sp(4,4,Sw.bind(null,f,c),v)}function Uv(){}function ww(c,f){var v=as();f=f===void 0?null:f;var A=v.memoizedState;return A!==null&&f!==null&&Lv(f,A[1])?A[0]:(v.memoizedState=[c,f],c)}function Ew(c,f){var v=as();f=f===void 0?null:f;var A=v.memoizedState;return A!==null&&f!==null&&Lv(f,A[1])?A[0]:(c=c(),v.memoizedState=[c,f],c)}function eN(c,f){var v=Bt;Bt=v!==0&&4>v?v:4,c(!0);var A=sr.transition;sr.transition={};try{c(!1),f()}finally{Bt=v,sr.transition=A}}function Tw(){return as().memoizedState}function tN(c,f,v){var A=go(c);v={lane:A,action:v,hasEagerState:!1,eagerState:null,next:null},Cw(c)?bw(f,v):(Rw(c,f,v),v=ci(),c=or(c,A,v),c!==null&&Pw(c,f,A))}function nN(c,f,v){var A=go(c),E={lane:A,action:v,hasEagerState:!1,eagerState:null,next:null};if(Cw(c))bw(f,E);else{Rw(c,f,E);var T=c.alternate;if(c.lanes===0&&(T===null||T.lanes===0)&&(T=f.lastRenderedReducer,T!==null))try{var U=f.lastRenderedState,Q=T(U,v);if(E.hasEagerState=!0,E.eagerState=Q,is(Q,U))return}catch{}finally{}v=ci(),c=or(c,A,v),c!==null&&Pw(c,f,A)}}function Cw(c){var f=c.alternate;return c===cn||f!==null&&f===cn}function bw(c,f){Oc=tp=!0;var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}function Rw(c,f,v){An!==null&&c.mode&1&&!(xt&2)?(c=f.interleaved,c===null?(v.next=v,ss===null?ss=[f]:ss.push(f)):(v.next=c.next,c.next=v),f.interleaved=v):(c=f.pending,c===null?v.next=v:(v.next=c.next,c.next=v),f.pending=v)}function Pw(c,f,v){if(v&4194240){var A=f.lanes;A&=c.pendingLanes,v|=A,f.lanes=v,fv(c,v)}}var op={readContext:tr,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useInsertionEffect:qn,useLayoutEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useMutableSource:qn,useSyncExternalStore:qn,useId:qn,unstable_isNewReconciler:!1},iN={readContext:tr,useCallback:function(c,f){return Ps().memoizedState=[c,f===void 0?null:f],c},useContext:tr,useEffect:Nv,useImperativeHandle:function(c,f,v){return v=v!=null?v.concat([c]):null,rp(4194308,4,Sw.bind(null,f,c),v)},useLayoutEffect:function(c,f){return rp(4194308,4,c,f)},useInsertionEffect:function(c,f){return rp(4,2,c,f)},useMemo:function(c,f){var v=Ps();return f=f===void 0?null:f,c=c(),v.memoizedState=[c,f],c},useReducer:function(c,f,v){var A=Ps();return f=v!==void 0?v(f):f,A.memoizedState=A.baseState=f,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:f},A.queue=c,c=c.dispatch=tN.bind(null,cn,c),[A.memoizedState,c]},useRef:function(c){var f=Ps();return c={current:c},f.memoizedState=c},useState:Fv,useDebugValue:Uv,useDeferredValue:function(c){var f=Fv(c),v=f[0],A=f[1];return Nv(function(){var E=sr.transition;sr.transition={};try{A(c)}finally{sr.transition=E}},[c]),v},useTransition:function(){var c=Fv(!1),f=c[0];return c=eN.bind(null,c[1]),Ps().memoizedState=c,[f,c]},useMutableSource:function(){},useSyncExternalStore:function(c,f,v){var A=cn,E=Ps();if(Qt){if(v===void 0)throw Error(o(407));v=v()}else{if(v=f(),An===null)throw Error(o(349));Gl&30||mw(A,f,v)}E.memoizedState=v;var T={value:v,getSnapshot:f};return E.queue=T,Nv(vw.bind(null,A,T,c),[c]),A.flags|=2048,Gc(9,gw.bind(null,A,T,v,f),void 0,null),v},useId:function(){var c=Ps(),f=An.identifierPrefix;if(Qt){var v=Rs,A=bs;v=(A&~(1<<32-Rr(A)-1)).toString(32)+v,f=":"+f+"R"+v,v=kc++,0<v&&(f+="H"+v.toString(32)),f+=":"}else v=$3++,f=":"+f+"r"+v.toString(32)+":";return c.memoizedState=f},unstable_isNewReconciler:!1},rN={readContext:tr,useCallback:ww,useContext:tr,useEffect:zc,useImperativeHandle:Mw,useInsertionEffect:_w,useLayoutEffect:Aw,useMemo:Ew,useReducer:np,useRef:xw,useState:function(){return np(Aa)},useDebugValue:Uv,useDeferredValue:function(c){var f=np(Aa),v=f[0],A=f[1];return zc(function(){var E=sr.transition;sr.transition={};try{A(c)}finally{sr.transition=E}},[c]),v},useTransition:function(){var c=np(Aa)[0],f=as().memoizedState;return[c,f]},useMutableSource:dw,useSyncExternalStore:pw,useId:Tw,unstable_isNewReconciler:!1},sN={readContext:tr,useCallback:ww,useContext:tr,useEffect:zc,useImperativeHandle:Mw,useInsertionEffect:_w,useLayoutEffect:Aw,useMemo:Ew,useReducer:ip,useRef:xw,useState:function(){return ip(Aa)},useDebugValue:Uv,useDeferredValue:function(c){var f=ip(Aa),v=f[0],A=f[1];return zc(function(){var E=sr.transition;sr.transition={};try{A(c)}finally{sr.transition=E}},[c]),v},useTransition:function(){var c=ip(Aa)[0],f=as().memoizedState;return[c,f]},useMutableSource:dw,useSyncExternalStore:pw,useId:Tw,unstable_isNewReconciler:!1};function Ov(c,f){try{var v="",A=f;do v+=Z3(A),A=A.return;while(A);var E=v}catch(T){E=`
Error generating stack: `+T.message+`
`+T.stack}return{value:c,source:f,stack:E}}function kv(c,f){try{console.error(f.value)}catch(v){setTimeout(function(){throw v})}}var oN=typeof WeakMap=="function"?WeakMap:Map;function Bw(c,f,v){v=Cs(-1,v),v.tag=3,v.payload={element:null};var A=f.value;return v.callback=function(){Sp||(Sp=!0,iy=A),kv(c,f)},v}function Lw(c,f,v){v=Cs(-1,v),v.tag=3;var A=c.type.getDerivedStateFromError;if(typeof A=="function"){var E=f.value;v.payload=function(){return A(E)},v.callback=function(){kv(c,f)}}var T=c.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(v.callback=function(){kv(c,f),typeof A!="function"&&(po===null?po=new Set([this]):po.add(this));var U=f.stack;this.componentDidCatch(f.value,{componentStack:U!==null?U:""})}),v}function Iw(c,f,v){var A=c.pingCache;if(A===null){A=c.pingCache=new oN;var E=new Set;A.set(f,E)}else E=A.get(f),E===void 0&&(E=new Set,A.set(f,E));E.has(v)||(E.add(v),c=_N.bind(null,c,f,v),f.then(c,c))}function Dw(c){do{var f;if((f=c.tag===13)&&(f=c.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return c;c=c.return}while(c!==null);return null}function Fw(c,f,v,A,E){return c.mode&1?(c.flags|=65536,c.lanes=E,c):(c===f?c.flags|=65536:(c.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(f=Cs(-1,1),f.tag=2,ho(v,f))),v.lanes|=1),c)}function ls(c){c.flags|=4}function Nw(c,f){if(c!==null&&c.child===f.child)return!0;if(f.flags&16)return!1;for(c=f.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var Hc,Vc,ap,lp;if(_e)Hc=function(c,f){for(var v=f.child;v!==null;){if(v.tag===5||v.tag===6)Z(c,v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===f)break;for(;v.sibling===null;){if(v.return===null||v.return===f)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},Vc=function(){},ap=function(c,f,v,A,E){if(c=c.memoizedProps,c!==A){var T=f.stateNode,U=os(rr.current);v=ie(T,v,c,A,E,U),(f.updateQueue=v)&&ls(f)}},lp=function(c,f,v,A){v!==A&&ls(f)};else if(me){Hc=function(c,f,v,A){for(var E=f.child;E!==null;){if(E.tag===5){var T=E.stateNode;v&&A&&(T=Yt(T,E.type,E.memoizedProps,E)),Z(c,T)}else if(E.tag===6)T=E.stateNode,v&&A&&(T=li(T,E.memoizedProps,E)),Z(c,T);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)T=E.child,T!==null&&(T.return=E),Hc(c,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===f)break;for(;E.sibling===null;){if(E.return===null||E.return===f)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var Uw=function(c,f,v,A){for(var E=f.child;E!==null;){if(E.tag===5){var T=E.stateNode;v&&A&&(T=Yt(T,E.type,E.memoizedProps,E)),Ut(c,T)}else if(E.tag===6)T=E.stateNode,v&&A&&(T=li(T,E.memoizedProps,E)),Ut(c,T);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)T=E.child,T!==null&&(T.return=E),Uw(c,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===f)break;for(;E.sibling===null;){if(E.return===null||E.return===f)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};Vc=function(c,f){var v=f.stateNode;if(!Nw(c,f)){c=v.containerInfo;var A=Nt(c);Uw(A,f,!1,!1),v.pendingChildren=A,ls(f),In(c,A)}},ap=function(c,f,v,A,E){var T=c.stateNode,U=c.memoizedProps;if((c=Nw(c,f))&&U===A)f.stateNode=T;else{var Q=f.stateNode,ce=os(rr.current),Te=null;U!==A&&(Te=ie(Q,v,U,A,E,ce)),c&&Te===null?f.stateNode=T:(T=je(T,Te,v,U,A,f,c,Q),ee(T,v,A,E,ce)&&ls(f),f.stateNode=T,c?ls(f):Hc(T,f,!1,!1))}},lp=function(c,f,v,A){v!==A?(c=os(Ol.current),v=os(rr.current),f.stateNode=ge(A,c,v,f),ls(f)):f.stateNode=c.stateNode}}else Vc=function(){},ap=function(){},lp=function(){};function Wc(c,f){if(!Qt)switch(c.tailMode){case"hidden":f=c.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?c.tail=null:v.sibling=null;break;case"collapsed":v=c.tail;for(var A=null;v!==null;)v.alternate!==null&&(A=v),v=v.sibling;A===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:A.sibling=null}}function Zn(c){var f=c.alternate!==null&&c.alternate.child===c.child,v=0,A=0;if(f)for(var E=c.child;E!==null;)v|=E.lanes|E.childLanes,A|=E.subtreeFlags&14680064,A|=E.flags&14680064,E.return=c,E=E.sibling;else for(E=c.child;E!==null;)v|=E.lanes|E.childLanes,A|=E.subtreeFlags,A|=E.flags,E.return=c,E=E.sibling;return c.subtreeFlags|=A,c.childLanes=v,f}function aN(c,f,v){var A=f.pendingProps;switch(wv(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(f),null;case 1:return Vn(f.type)&&Ud(),Zn(f),null;case 3:return A=f.stateNode,kl(),kt(Ht),kt(_n),Bv(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(c===null||c.child===null)&&(Dc(f)?ls(f):c===null||c.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,Br!==null&&(oy(Br),Br=null))),Vc(c,f),Zn(f),null;case 5:Rv(f),v=os(Ol.current);var E=f.type;if(c!==null&&f.stateNode!=null)ap(c,f,E,A,v),c.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!A){if(f.stateNode===null)throw Error(o(166));return Zn(f),null}if(c=os(rr.current),Dc(f)){if(!oe)throw Error(o(175));c=pe(f.stateNode,f.type,f.memoizedProps,v,c,f,!Ic),f.updateQueue=c,c!==null&&ls(f)}else{var T=$(E,A,v,c,f);Hc(T,f,!1,!1),f.stateNode=T,ee(T,E,A,v,c)&&ls(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return Zn(f),null;case 6:if(c&&f.stateNode!=null)lp(c,f,c.memoizedProps,A);else{if(typeof A!="string"&&f.stateNode===null)throw Error(o(166));if(c=os(Ol.current),v=os(rr.current),Dc(f)){if(!oe)throw Error(o(176));if(c=f.stateNode,A=f.memoizedProps,(v=Ze(c,A,f,!Ic))&&(E=Fi,E!==null))switch(T=(E.mode&1)!==0,E.tag){case 3:Hn(E.stateNode.containerInfo,c,A,T);break;case 5:Di(E.type,E.memoizedProps,E.stateNode,c,A,T)}v&&ls(f)}else f.stateNode=ge(A,c,v,f)}return Zn(f),null;case 13:if(kt(tn),A=f.memoizedState,Qt&&Ni!==null&&f.mode&1&&!(f.flags&128)){for(c=Ni;c;)c=N(c);return Nl(),f.flags|=98560,f}if(A!==null&&A.dehydrated!==null){if(A=Dc(f),c===null){if(!A)throw Error(o(318));if(!oe)throw Error(o(344));if(c=f.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));tt(c,f)}else Nl(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;return Zn(f),null}return Br!==null&&(oy(Br),Br=null),f.flags&128?(f.lanes=v,f):(A=A!==null,v=!1,c===null?Dc(f):v=c.memoizedState!==null,A&&!v&&(f.child.flags|=8192,f.mode&1&&(c===null||tn.current&1?Cn===0&&(Cn=3):ly())),f.updateQueue!==null&&(f.flags|=4),Zn(f),null);case 4:return kl(),Vc(c,f),c===null&&De(f.stateNode.containerInfo),Zn(f),null;case 10:return yv(f.type._context),Zn(f),null;case 17:return Vn(f.type)&&Ud(),Zn(f),null;case 19:if(kt(tn),E=f.memoizedState,E===null)return Zn(f),null;if(A=(f.flags&128)!==0,T=E.rendering,T===null)if(A)Wc(E,!1);else{if(Cn!==0||c!==null&&c.flags&128)for(c=f.child;c!==null;){if(T=$d(c),T!==null){for(f.flags|=128,Wc(E,!1),c=T.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),f.subtreeFlags=0,c=v,A=f.child;A!==null;)v=A,E=c,v.flags&=14680066,T=v.alternate,T===null?(v.childLanes=0,v.lanes=E,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=T.childLanes,v.lanes=T.lanes,v.child=T.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=T.memoizedProps,v.memoizedState=T.memoizedState,v.updateQueue=T.updateQueue,v.type=T.type,E=T.dependencies,v.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),A=A.sibling;return ft(tn,tn.current&1|2),f.child}c=c.sibling}E.tail!==null&&Dn()>ny&&(f.flags|=128,A=!0,Wc(E,!1),f.lanes=4194304)}else{if(!A)if(c=$d(T),c!==null){if(f.flags|=128,A=!0,c=c.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),Wc(E,!0),E.tail===null&&E.tailMode==="hidden"&&!T.alternate&&!Qt)return Zn(f),null}else 2*Dn()-E.renderingStartTime>ny&&v!==1073741824&&(f.flags|=128,A=!0,Wc(E,!1),f.lanes=4194304);E.isBackwards?(T.sibling=f.child,f.child=T):(c=E.last,c!==null?c.sibling=T:f.child=T,E.last=T)}return E.tail!==null?(f=E.tail,E.rendering=f,E.tail=f.sibling,E.renderingStartTime=Dn(),f.sibling=null,c=tn.current,ft(tn,A?c&1|2:c&1),f):(Zn(f),null);case 22:case 23:return ay(),A=f.memoizedState!==null,c!==null&&c.memoizedState!==null!==A&&(f.flags|=8192),A&&f.mode&1?Oi&1073741824&&(Zn(f),_e&&f.subtreeFlags&6&&(f.flags|=8192)):Zn(f),null;case 24:return null;case 25:return null}throw Error(o(156,f.tag))}var lN=a.ReactCurrentOwner,Ui=!1;function ui(c,f,v,A){f.child=c===null?fw(f,null,v,A):Ul(f,c.child,v,A)}function Ow(c,f,v,A,E){v=v.render;var T=f.ref;return Il(f,E),A=Iv(c,f,v,A,T,E),v=Dv(),c!==null&&!Ui?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~E,Bs(c,f,E)):(Qt&&v&&Mv(f),f.flags|=1,ui(c,f,A,E),f.child)}function kw(c,f,v,A,E){if(c===null){var T=v.type;return typeof T=="function"&&!uy(T)&&T.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(f.tag=15,f.type=T,Gw(c,f,T,A,E)):(c=Rp(v.type,null,A,f,f.mode,E),c.ref=f.ref,c.return=f,f.child=c)}if(T=c.child,!(c.lanes&E)){var U=T.memoizedProps;if(v=v.compare,v=v!==null?v:Wd,v(U,A)&&c.ref===f.ref)return Bs(c,f,E)}return f.flags|=1,c=yo(T,A),c.ref=f.ref,c.return=f,f.child=c}function Gw(c,f,v,A,E){if(c!==null&&Wd(c.memoizedProps,A)&&c.ref===f.ref)if(Ui=!1,(c.lanes&E)!==0)c.flags&131072&&(Ui=!0);else return f.lanes=c.lanes,Bs(c,f,E);return Gv(c,f,v,A,E)}function zw(c,f,v){var A=f.pendingProps,E=A.children,T=c!==null?c.memoizedState:null;if(A.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null},ft(zl,Oi),Oi|=v;else if(v&1073741824)f.memoizedState={baseLanes:0,cachePool:null},A=T!==null?T.baseLanes:v,ft(zl,Oi),Oi|=A;else return c=T!==null?T.baseLanes|v:v,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:c,cachePool:null},f.updateQueue=null,ft(zl,Oi),Oi|=c,null;else T!==null?(A=T.baseLanes|v,f.memoizedState=null):A=v,ft(zl,Oi),Oi|=A;return ui(c,f,E,v),f.child}function Hw(c,f){var v=f.ref;(c===null&&v!==null||c!==null&&c.ref!==v)&&(f.flags|=512,f.flags|=2097152)}function Gv(c,f,v,A,E){var T=Vn(v)?br:_n.current;return T=co(f,T),Il(f,E),v=Iv(c,f,v,A,T,E),A=Dv(),c!==null&&!Ui?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~E,Bs(c,f,E)):(Qt&&A&&Mv(f),f.flags|=1,ui(c,f,v,E),f.child)}function Vw(c,f,v,A,E){if(Vn(v)){var T=!0;Od(f)}else T=!1;if(Il(f,E),f.stateNode===null)c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),iw(f,v,A),Sv(f,v,A,E),A=!0;else if(c===null){var U=f.stateNode,Q=f.memoizedProps;U.props=Q;var ce=U.context,Te=v.contextType;typeof Te=="object"&&Te!==null?Te=tr(Te):(Te=Vn(v)?br:_n.current,Te=co(f,Te));var ke=v.getDerivedStateFromProps,lt=typeof ke=="function"||typeof U.getSnapshotBeforeUpdate=="function";lt||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(Q!==A||ce!==Te)&&rw(f,U,A,Te),fo=!1;var $e=f.memoizedState;U.state=$e,Kd(f,A,U,E),ce=f.memoizedState,Q!==A||$e!==ce||Ht.current||fo?(typeof ke=="function"&&(Av(f,v,ke,A),ce=f.memoizedState),(Q=fo||nw(f,v,Q,A,$e,ce,Te))?(lt||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(f.flags|=4194308)):(typeof U.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=A,f.memoizedState=ce),U.props=A,U.state=ce,U.context=Te,A=Q):(typeof U.componentDidMount=="function"&&(f.flags|=4194308),A=!1)}else{U=f.stateNode,ZM(c,f),Q=f.memoizedProps,Te=f.type===f.elementType?Q:Pr(f.type,Q),U.props=Te,lt=f.pendingProps,$e=U.context,ce=v.contextType,typeof ce=="object"&&ce!==null?ce=tr(ce):(ce=Vn(v)?br:_n.current,ce=co(f,ce));var Vt=v.getDerivedStateFromProps;(ke=typeof Vt=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(Q!==lt||$e!==ce)&&rw(f,U,A,ce),fo=!1,$e=f.memoizedState,U.state=$e,Kd(f,A,U,E);var Ye=f.memoizedState;Q!==lt||$e!==Ye||Ht.current||fo?(typeof Vt=="function"&&(Av(f,v,Vt,A),Ye=f.memoizedState),(Te=fo||nw(f,v,Te,A,$e,Ye,ce)||!1)?(ke||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(A,Ye,ce),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(A,Ye,ce)),typeof U.componentDidUpdate=="function"&&(f.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof U.componentDidUpdate!="function"||Q===c.memoizedProps&&$e===c.memoizedState||(f.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||Q===c.memoizedProps&&$e===c.memoizedState||(f.flags|=1024),f.memoizedProps=A,f.memoizedState=Ye),U.props=A,U.state=Ye,U.context=ce,A=Te):(typeof U.componentDidUpdate!="function"||Q===c.memoizedProps&&$e===c.memoizedState||(f.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||Q===c.memoizedProps&&$e===c.memoizedState||(f.flags|=1024),A=!1)}return zv(c,f,v,A,T,E)}function zv(c,f,v,A,E,T){Hw(c,f);var U=(f.flags&128)!==0;if(!A&&!U)return E&&JM(f,v,!1),Bs(c,f,T);A=f.stateNode,lN.current=f;var Q=U&&typeof v.getDerivedStateFromError!="function"?null:A.render();return f.flags|=1,c!==null&&U?(f.child=Ul(f,c.child,null,T),f.child=Ul(f,null,Q,T)):ui(c,f,Q,T),f.memoizedState=A.state,E&&JM(f,v,!0),f.child}function Ww(c){var f=c.stateNode;f.pendingContext?jM(c,f.pendingContext,f.pendingContext!==f.context):f.context&&jM(c,f.context,!1),bv(c,f.containerInfo)}function jw(c,f,v,A,E){return Nl(),Cv(E),f.flags|=256,ui(c,f,v,A),f.child}var up={dehydrated:null,treeContext:null,retryLane:0};function cp(c){return{baseLanes:c,cachePool:null}}function Xw(c,f,v){var A=f.pendingProps,E=tn.current,T=!1,U=(f.flags&128)!==0,Q;if((Q=U)||(Q=c!==null&&c.memoizedState===null?!1:(E&2)!==0),Q?(T=!0,f.flags&=-129):(c===null||c.memoizedState!==null)&&(E|=1),ft(tn,E&1),c===null)return Tv(f),c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(f.mode&1?Pc(c)?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(E=A.children,c=A.fallback,T?(A=f.mode,T=f.child,E={mode:"hidden",children:E},!(A&1)&&T!==null?(T.childLanes=0,T.pendingProps=E):T=Pp(E,A,0,null),c=Ca(c,A,v,null),T.return=f,c.return=f,T.sibling=c,f.child=T,f.child.memoizedState=cp(v),f.memoizedState=up,c):Hv(f,E));if(E=c.memoizedState,E!==null){if(Q=E.dehydrated,Q!==null){if(U)return f.flags&256?(f.flags&=-257,fp(c,f,v,Error(o(422)))):f.memoizedState!==null?(f.child=c.child,f.flags|=128,null):(T=A.fallback,E=f.mode,A=Pp({mode:"visible",children:A.children},E,0,null),T=Ca(T,E,v,null),T.flags|=2,A.return=f,T.return=f,A.sibling=T,f.child=A,f.mode&1&&Ul(f,c.child,null,v),f.child.memoizedState=cp(v),f.memoizedState=up,T);if(!(f.mode&1))f=fp(c,f,v,null);else if(Pc(Q))f=fp(c,f,v,Error(o(419)));else if(A=(v&c.childLanes)!==0,Ui||A){if(A=An,A!==null){switch(v&-v){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}A=T&(A.suspendedLanes|v)?0:T,A!==0&&A!==E.retryLane&&(E.retryLane=A,or(c,A,-1))}ly(),f=fp(c,f,v,Error(o(421)))}else Nd(Q)?(f.flags|=128,f.child=c.child,f=AN.bind(null,c),lv(Q,f),f=null):(v=E.treeContext,oe&&(Ni=te(Q),Fi=f,Qt=!0,Br=null,Ic=!1,v!==null&&(nr[ir++]=bs,nr[ir++]=Rs,nr[ir++]=xa,bs=v.id,Rs=v.overflow,xa=f)),f=Hv(f,f.pendingProps.children),f.flags|=4096);return f}return T?(A=Kw(c,f,A.children,A.fallback,v),T=f.child,E=c.child.memoizedState,T.memoizedState=E===null?cp(v):{baseLanes:E.baseLanes|v,cachePool:null},T.childLanes=c.childLanes&~v,f.memoizedState=up,A):(v=Jw(c,f,A.children,v),f.memoizedState=null,v)}return T?(A=Kw(c,f,A.children,A.fallback,v),T=f.child,E=c.child.memoizedState,T.memoizedState=E===null?cp(v):{baseLanes:E.baseLanes|v,cachePool:null},T.childLanes=c.childLanes&~v,f.memoizedState=up,A):(v=Jw(c,f,A.children,v),f.memoizedState=null,v)}function Hv(c,f){return f=Pp({mode:"visible",children:f},c.mode,0,null),f.return=c,c.child=f}function Jw(c,f,v,A){var E=c.child;return c=E.sibling,v=yo(E,{mode:"visible",children:v}),!(f.mode&1)&&(v.lanes=A),v.return=f,v.sibling=null,c!==null&&(A=f.deletions,A===null?(f.deletions=[c],f.flags|=16):A.push(c)),f.child=v}function Kw(c,f,v,A,E){var T=f.mode;c=c.child;var U=c.sibling,Q={mode:"hidden",children:v};return!(T&1)&&f.child!==c?(v=f.child,v.childLanes=0,v.pendingProps=Q,f.deletions=null):(v=yo(c,Q),v.subtreeFlags=c.subtreeFlags&14680064),U!==null?A=yo(U,A):(A=Ca(A,T,E,null),A.flags|=2),A.return=f,v.return=f,v.sibling=A,f.child=v,A}function fp(c,f,v,A){return A!==null&&Cv(A),Ul(f,c.child,null,v),c=Hv(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function Yw(c,f,v){c.lanes|=f;var A=c.alternate;A!==null&&(A.lanes|=f),xv(c.return,f,v)}function Vv(c,f,v,A,E){var T=c.memoizedState;T===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:A,tail:v,tailMode:E}:(T.isBackwards=f,T.rendering=null,T.renderingStartTime=0,T.last=A,T.tail=v,T.tailMode=E)}function Qw(c,f,v){var A=f.pendingProps,E=A.revealOrder,T=A.tail;if(ui(c,f,A.children,v),A=tn.current,A&2)A=A&1|2,f.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Yw(c,v,f);else if(c.tag===19)Yw(c,v,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}A&=1}if(ft(tn,A),!(f.mode&1))f.memoizedState=null;else switch(E){case"forwards":for(v=f.child,E=null;v!==null;)c=v.alternate,c!==null&&$d(c)===null&&(E=v),v=v.sibling;v=E,v===null?(E=f.child,f.child=null):(E=v.sibling,v.sibling=null),Vv(f,!1,E,v,T);break;case"backwards":for(v=null,E=f.child,f.child=null;E!==null;){if(c=E.alternate,c!==null&&$d(c)===null){f.child=E;break}c=E.sibling,E.sibling=v,v=E,E=c}Vv(f,!0,v,null,T);break;case"together":Vv(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Bs(c,f,v){if(c!==null&&(f.dependencies=c.dependencies),Hl|=f.lanes,!(v&f.childLanes))return null;if(c!==null&&f.child!==c.child)throw Error(o(153));if(f.child!==null){for(c=f.child,v=yo(c,c.pendingProps),f.child=v,v.return=f;c.sibling!==null;)c=c.sibling,v=v.sibling=yo(c,c.pendingProps),v.return=f;v.sibling=null}return f.child}function uN(c,f,v){switch(f.tag){case 3:Ww(f),Nl();break;case 5:hw(f);break;case 1:Vn(f.type)&&Od(f);break;case 4:bv(f,f.stateNode.containerInfo);break;case 10:qM(f,f.type._context,f.memoizedProps.value);break;case 13:var A=f.memoizedState;if(A!==null)return A.dehydrated!==null?(ft(tn,tn.current&1),f.flags|=128,null):v&f.child.childLanes?Xw(c,f,v):(ft(tn,tn.current&1),c=Bs(c,f,v),c!==null?c.sibling:null);ft(tn,tn.current&1);break;case 19:if(A=(v&f.childLanes)!==0,c.flags&128){if(A)return Qw(c,f,v);f.flags|=128}var E=f.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),ft(tn,tn.current),A)break;return null;case 22:case 23:return f.lanes=0,zw(c,f,v)}return Bs(c,f,v)}function cN(c,f){switch(wv(f),f.tag){case 1:return Vn(f.type)&&Ud(),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return kl(),kt(Ht),kt(_n),Bv(),c=f.flags,c&65536&&!(c&128)?(f.flags=c&-65537|128,f):null;case 5:return Rv(f),null;case 13:if(kt(tn),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(o(340));Nl()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return kt(tn),null;case 4:return kl(),null;case 10:return yv(f.type._context),null;case 22:case 23:return ay(),null;case 24:return null;default:return null}}var hp=!1,Sa=!1,fN=typeof WeakSet=="function"?WeakSet:Set,Le=null;function dp(c,f){var v=c.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(A){Mi(c,f,A)}else v.current=null}function Wv(c,f,v){try{v()}catch(A){Mi(c,f,A)}}var qw=!1;function hN(c,f){for(H(c.containerInfo),Le=f;Le!==null;)if(c=Le,f=c.child,(c.subtreeFlags&1028)!==0&&f!==null)f.return=c,Le=f;else for(;Le!==null;){c=Le;try{var v=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var A=v.memoizedProps,E=v.memoizedState,T=c.stateNode,U=T.getSnapshotBeforeUpdate(c.elementType===c.type?A:Pr(c.type,A),E);T.__reactInternalSnapshotBeforeUpdate=U}break;case 3:_e&&Fe(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Q){Mi(c,c.return,Q)}if(f=c.sibling,f!==null){f.return=c.return,Le=f;break}Le=c.return}return v=qw,qw=!1,v}function Ma(c,f,v){var A=f.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var E=A=A.next;do{if((E.tag&c)===c){var T=E.destroy;E.destroy=void 0,T!==void 0&&Wv(f,v,T)}E=E.next}while(E!==A)}}function jc(c,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var v=f=f.next;do{if((v.tag&c)===c){var A=v.create;v.destroy=A()}v=v.next}while(v!==f)}}function jv(c){var f=c.ref;if(f!==null){var v=c.stateNode;switch(c.tag){case 5:c=ae(v);break;default:c=v}typeof f=="function"?f(c):f.current=c}}function Zw(c,f,v){if(ns&&typeof ns.onCommitFiberUnmount=="function")try{ns.onCommitFiberUnmount(Hd,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(c=f.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var A=c=c.next;do{var E=A,T=E.destroy;E=E.tag,T!==void 0&&(E&2||E&4)&&Wv(f,v,T),A=A.next}while(A!==c)}break;case 1:if(dp(f,v),c=f.stateNode,typeof c.componentWillUnmount=="function")try{c.props=f.memoizedProps,c.state=f.memoizedState,c.componentWillUnmount()}catch(U){Mi(f,v,U)}break;case 5:dp(f,v);break;case 4:_e?rE(c,f,v):me&&me&&(f=f.stateNode.containerInfo,v=Nt(f),Er(f,v))}}function $w(c,f,v){for(var A=f;;)if(Zw(c,A,v),A.child===null||_e&&A.tag===4){if(A===f)break;for(;A.sibling===null;){if(A.return===null||A.return===f)return;A=A.return}A.sibling.return=A.return,A=A.sibling}else A.child.return=A,A=A.child}function eE(c){var f=c.alternate;f!==null&&(c.alternate=null,eE(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&He(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function tE(c){return c.tag===5||c.tag===3||c.tag===4}function nE(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||tE(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function iE(c){if(_e){e:{for(var f=c.return;f!==null;){if(tE(f))break e;f=f.return}throw Error(o(160))}var v=f;switch(v.tag){case 5:f=v.stateNode,v.flags&32&&(Ft(f),v.flags&=-33),v=nE(c),Jv(c,v,f);break;case 3:case 4:f=v.stateNode.containerInfo,v=nE(c),Xv(c,v,f);break;default:throw Error(o(161))}}}function Xv(c,f,v){var A=c.tag;if(A===5||A===6)c=c.stateNode,f?Oe(v,c,f):Ne(v,c);else if(A!==4&&(c=c.child,c!==null))for(Xv(c,f,v),c=c.sibling;c!==null;)Xv(c,f,v),c=c.sibling}function Jv(c,f,v){var A=c.tag;if(A===5||A===6)c=c.stateNode,f?et(v,c,f):nt(v,c);else if(A!==4&&(c=c.child,c!==null))for(Jv(c,f,v),c=c.sibling;c!==null;)Jv(c,f,v),c=c.sibling}function rE(c,f,v){for(var A=f,E=!1,T,U;;){if(!E){E=A.return;e:for(;;){if(E===null)throw Error(o(160));switch(T=E.stateNode,E.tag){case 5:U=!1;break e;case 3:T=T.containerInfo,U=!0;break e;case 4:T=T.containerInfo,U=!0;break e}E=E.return}E=!0}if(A.tag===5||A.tag===6)$w(c,A,v),U?wt(T,A.stateNode):Ke(T,A.stateNode);else if(A.tag===18)U?_t(T,A.stateNode):yt(T,A.stateNode);else if(A.tag===4){if(A.child!==null){T=A.stateNode.containerInfo,U=!0,A.child.return=A,A=A.child;continue}}else if(Zw(c,A,v),A.child!==null){A.child.return=A,A=A.child;continue}if(A===f)break;for(;A.sibling===null;){if(A.return===null||A.return===f)return;A=A.return,A.tag===4&&(E=!1)}A.sibling.return=A.return,A=A.sibling}}function Kv(c,f){if(_e){switch(f.tag){case 0:case 11:case 14:case 15:Ma(3,f,f.return),jc(3,f),Ma(5,f,f.return);return;case 1:return;case 5:var v=f.stateNode;if(v!=null){var A=f.memoizedProps;c=c!==null?c.memoizedProps:A;var E=f.type,T=f.updateQueue;f.updateQueue=null,T!==null&&qe(v,T,E,c,A,f)}return;case 6:if(f.stateNode===null)throw Error(o(162));v=f.memoizedProps,de(f.stateNode,c!==null?c.memoizedProps:v,v);return;case 3:oe&&c!==null&&c.memoizedState.isDehydrated&&ct(f.stateNode.containerInfo);return;case 12:return;case 13:pp(f);return;case 19:pp(f);return;case 17:return}throw Error(o(163))}switch(f.tag){case 0:case 11:case 14:case 15:Ma(3,f,f.return),jc(3,f),Ma(5,f,f.return);return;case 12:return;case 13:pp(f);return;case 19:pp(f);return;case 3:oe&&c!==null&&c.memoizedState.isDehydrated&&ct(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(me){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,Er(f.containerInfo,f.pendingChildren);break e}throw Error(o(163))}}function pp(c){var f=c.updateQueue;if(f!==null){c.updateQueue=null;var v=c.stateNode;v===null&&(v=c.stateNode=new fN),f.forEach(function(A){var E=SN.bind(null,c,A);v.has(A)||(v.add(A),A.then(E,E))})}}function dN(c,f){for(Le=f;Le!==null;){f=Le;var v=f.deletions;if(v!==null)for(var A=0;A<v.length;A++){var E=v[A];try{var T=c;_e?rE(T,E,f):$w(T,E,f);var U=E.alternate;U!==null&&(U.return=null),E.return=null}catch(Xe){Mi(E,f,Xe)}}if(v=f.child,f.subtreeFlags&12854&&v!==null)v.return=f,Le=v;else for(;Le!==null;){f=Le;try{var Q=f.flags;if(Q&32&&_e&&Ft(f.stateNode),Q&512){var ce=f.alternate;if(ce!==null){var Te=ce.ref;Te!==null&&(typeof Te=="function"?Te(null):Te.current=null)}}if(Q&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var ke=f.alternate;(ke===null||ke.memoizedState===null)&&(ty=Dn())}break;case 22:var lt=f.memoizedState!==null,$e=f.alternate,Vt=$e!==null&&$e.memoizedState!==null;if(v=f,_e){e:if(A=v,E=lt,T=null,_e)for(var Ye=A;;){if(Ye.tag===5){if(T===null){T=Ye;var $n=Ye.stateNode;E?en($n):fe(Ye.stateNode,Ye.memoizedProps)}}else if(Ye.tag===6){if(T===null){var lr=Ye.stateNode;E?K(lr):Me(lr,Ye.memoizedProps)}}else if((Ye.tag!==22&&Ye.tag!==23||Ye.memoizedState===null||Ye===A)&&Ye.child!==null){Ye.child.return=Ye,Ye=Ye.child;continue}if(Ye===A)break;for(;Ye.sibling===null;){if(Ye.return===null||Ye.return===A)break e;T===Ye&&(T=null),Ye=Ye.return}T===Ye&&(T=null),Ye.sibling.return=Ye.return,Ye=Ye.sibling}}if(lt&&!Vt&&v.mode&1){Le=v;for(var re=v.child;re!==null;){for(v=Le=re;Le!==null;){A=Le;var q=A.child;switch(A.tag){case 0:case 11:case 14:case 15:Ma(4,A,A.return);break;case 1:dp(A,A.return);var ue=A.stateNode;if(typeof ue.componentWillUnmount=="function"){var Ie=A.return;try{ue.props=A.memoizedProps,ue.state=A.memoizedState,ue.componentWillUnmount()}catch(Xe){Mi(A,Ie,Xe)}}break;case 5:dp(A,A.return);break;case 22:if(A.memoizedState!==null){aE(v);continue}}q!==null?(q.return=A,Le=q):aE(v)}re=re.sibling}}}switch(Q&4102){case 2:iE(f),f.flags&=-3;break;case 6:iE(f),f.flags&=-3,Kv(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,Kv(f.alternate,f);break;case 4:Kv(f.alternate,f)}}catch(Xe){Mi(f,f.return,Xe)}if(v=f.sibling,v!==null){v.return=f.return,Le=v;break}Le=f.return}}}function pN(c,f,v){Le=c,sE(c)}function sE(c,f,v){for(var A=(c.mode&1)!==0;Le!==null;){var E=Le,T=E.child;if(E.tag===22&&A){var U=E.memoizedState!==null||hp;if(!U){var Q=E.alternate,ce=Q!==null&&Q.memoizedState!==null||Sa;Q=hp;var Te=Sa;if(hp=U,(Sa=ce)&&!Te)for(Le=E;Le!==null;)U=Le,ce=U.child,U.tag===22&&U.memoizedState!==null?lE(E):ce!==null?(ce.return=U,Le=ce):lE(E);for(;T!==null;)Le=T,sE(T),T=T.sibling;Le=E,hp=Q,Sa=Te}oE(c)}else E.subtreeFlags&8772&&T!==null?(T.return=E,Le=T):oE(c)}}function oE(c){for(;Le!==null;){var f=Le;if(f.flags&8772){var v=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:Sa||jc(5,f);break;case 1:var A=f.stateNode;if(f.flags&4&&!Sa)if(v===null)A.componentDidMount();else{var E=f.elementType===f.type?v.memoizedProps:Pr(f.type,v.memoizedProps);A.componentDidUpdate(E,v.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var T=f.updateQueue;T!==null&&ew(f,T,A);break;case 3:var U=f.updateQueue;if(U!==null){if(v=null,f.child!==null)switch(f.child.tag){case 5:v=ae(f.child.stateNode);break;case 1:v=f.child.stateNode}ew(f,U,v)}break;case 5:var Q=f.stateNode;v===null&&f.flags&4&&ze(Q,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(oe&&f.memoizedState===null){var ce=f.alternate;if(ce!==null){var Te=ce.memoizedState;if(Te!==null){var ke=Te.dehydrated;ke!==null&&vt(ke)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Sa||f.flags&512&&jv(f)}catch(lt){Mi(f,f.return,lt)}}if(f===c){Le=null;break}if(v=f.sibling,v!==null){v.return=f.return,Le=v;break}Le=f.return}}function aE(c){for(;Le!==null;){var f=Le;if(f===c){Le=null;break}var v=f.sibling;if(v!==null){v.return=f.return,Le=v;break}Le=f.return}}function lE(c){for(;Le!==null;){var f=Le;try{switch(f.tag){case 0:case 11:case 15:var v=f.return;try{jc(4,f)}catch(ce){Mi(f,v,ce)}break;case 1:var A=f.stateNode;if(typeof A.componentDidMount=="function"){var E=f.return;try{A.componentDidMount()}catch(ce){Mi(f,E,ce)}}var T=f.return;try{jv(f)}catch(ce){Mi(f,T,ce)}break;case 5:var U=f.return;try{jv(f)}catch(ce){Mi(f,U,ce)}}}catch(ce){Mi(f,f.return,ce)}if(f===c){Le=null;break}var Q=f.sibling;if(Q!==null){Q.return=f.return,Le=Q;break}Le=f.return}}var mp=0,gp=1,vp=2,yp=3,xp=4;if(typeof Symbol=="function"&&Symbol.for){var Xc=Symbol.for;mp=Xc("selector.component"),gp=Xc("selector.has_pseudo_class"),vp=Xc("selector.role"),yp=Xc("selector.test_id"),xp=Xc("selector.text")}function Yv(c){var f=xe(c);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(o(364));return f}if(c=Mt(c),c===null)throw Error(o(362));return c.stateNode.current}function Qv(c,f){switch(f.$$typeof){case mp:if(c.type===f.value)return!0;break;case gp:e:{f=f.value,c=[c,0];for(var v=0;v<c.length;){var A=c[v++],E=c[v++],T=f[E];if(A.tag!==5||!le(A)){for(;T!=null&&Qv(A,T);)E++,T=f[E];if(E===f.length){f=!0;break e}else for(A=A.child;A!==null;)c.push(A,E),A=A.sibling}}f=!1}return f;case vp:if(c.tag===5&&Se(c.stateNode,f.value))return!0;break;case xp:if((c.tag===5||c.tag===6)&&(c=D(c),c!==null&&0<=c.indexOf(f.value)))return!0;break;case yp:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function qv(c){switch(c.$$typeof){case mp:return"<"+(P(c.value)||"Unknown")+">";case gp:return":has("+(qv(c)||"")+")";case vp:return'[role="'+c.value+'"]';case xp:return'"'+c.value+'"';case yp:return'[data-testname="'+c.value+'"]';default:throw Error(o(365))}}function uE(c,f){var v=[];c=[c,0];for(var A=0;A<c.length;){var E=c[A++],T=c[A++],U=f[T];if(E.tag!==5||!le(E)){for(;U!=null&&Qv(E,U);)T++,U=f[T];if(T===f.length)v.push(E);else for(E=E.child;E!==null;)c.push(E,T),E=E.sibling}}return v}function Zv(c,f){if(!rt)throw Error(o(363));c=Yv(c),c=uE(c,f),f=[],c=Array.from(c);for(var v=0;v<c.length;){var A=c[v++];if(A.tag===5)le(A)||f.push(A.stateNode);else for(A=A.child;A!==null;)c.push(A),A=A.sibling}return f}var mN=Math.ceil,_p=a.ReactCurrentDispatcher,$v=a.ReactCurrentOwner,mn=a.ReactCurrentBatchConfig,xt=0,An=null,Sn=null,Wn=0,Oi=0,zl=_i(0),Cn=0,Jc=null,Hl=0,Ap=0,ey=0,Kc=null,Ai=null,ty=0,ny=1/0;function Vl(){ny=Dn()+500}var Sp=!1,iy=null,po=null,Mp=!1,mo=null,wp=0,Yc=0,ry=null,Ep=-1,Tp=0;function ci(){return xt&6?Dn():Ep!==-1?Ep:Ep=Dn()}function go(c){return c.mode&1?xt&2&&Wn!==0?Wn&-Wn:q3.transition!==null?(Tp===0&&(c=kd,kd<<=1,!(kd&4194240)&&(kd=64),Tp=c),Tp):(c=Bt,c!==0?c:Re()):1}function or(c,f,v){if(50<Yc)throw Yc=0,ry=null,Error(o(185));var A=Cp(c,f);return A===null?null:(Lc(A,f,v),(!(xt&2)||A!==An)&&(A===An&&(!(xt&2)&&(Ap|=f),Cn===4&&vo(A,Wn)),Si(A,v),f===1&&xt===0&&!(c.mode&1)&&(Vl(),Vd&&rs())),A)}function Cp(c,f){c.lanes|=f;var v=c.alternate;for(v!==null&&(v.lanes|=f),v=c,c=c.return;c!==null;)c.childLanes|=f,v=c.alternate,v!==null&&(v.childLanes|=f),v=c,c=c.return;return v.tag===3?v.stateNode:null}function Si(c,f){var v=c.callbackNode;H3(c,f);var A=zd(c,c===An?Wn:0);if(A===0)v!==null&&YM(v),c.callbackNode=null,c.callbackPriority=0;else if(f=A&-A,c.callbackPriority!==f){if(v!=null&&YM(v),f===1)c.tag===0?Q3(fE.bind(null,c)):QM(fE.bind(null,c)),Qe?We(function(){xt===0&&rs()}):hv(dv,rs),v=null;else{switch(KM(A)){case 1:v=dv;break;case 4:v=X3;break;case 16:v=pv;break;case 536870912:v=J3;break;default:v=pv}v=_E(v,cE.bind(null,c))}c.callbackPriority=f,c.callbackNode=v}}function cE(c,f){if(Ep=-1,Tp=0,xt&6)throw Error(o(327));var v=c.callbackNode;if(Ta()&&c.callbackNode!==v)return null;var A=zd(c,c===An?Wn:0);if(A===0)return null;if(A&30||A&c.expiredLanes||f)f=bp(c,A);else{f=A;var E=xt;xt|=2;var T=pE();(An!==c||Wn!==f)&&(Vl(),wa(c,f));do try{yN();break}catch(Q){dE(c,Q)}while(1);vv(),_p.current=T,xt=E,Sn!==null?f=0:(An=null,Wn=0,f=Cn)}if(f!==0){if(f===2&&(E=uv(c),E!==0&&(A=E,f=sy(c,E))),f===1)throw v=Jc,wa(c,0),vo(c,A),Si(c,Dn()),v;if(f===6)vo(c,A);else{if(E=c.current.alternate,!(A&30)&&!gN(E)&&(f=bp(c,A),f===2&&(T=uv(c),T!==0&&(A=T,f=sy(c,T))),f===1))throw v=Jc,wa(c,0),vo(c,A),Si(c,Dn()),v;switch(c.finishedWork=E,c.finishedLanes=A,f){case 0:case 1:throw Error(o(345));case 2:Ea(c,Ai);break;case 3:if(vo(c,A),(A&130023424)===A&&(f=ty+500-Dn(),10<f)){if(zd(c,0)!==0)break;if(E=c.suspendedLanes,(E&A)!==A){ci(),c.pingedLanes|=c.suspendedLanes&E;break}c.timeoutHandle=W(Ea.bind(null,c,Ai),f);break}Ea(c,Ai);break;case 4:if(vo(c,A),(A&4194240)===A)break;for(f=c.eventTimes,E=-1;0<A;){var U=31-Rr(A);T=1<<U,U=f[U],U>E&&(E=U),A&=~T}if(A=E,A=Dn()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*mN(A/1960))-A,10<A){c.timeoutHandle=W(Ea.bind(null,c,Ai),A);break}Ea(c,Ai);break;case 5:Ea(c,Ai);break;default:throw Error(o(329))}}}return Si(c,Dn()),c.callbackNode===v?cE.bind(null,c):null}function sy(c,f){var v=Kc;return c.current.memoizedState.isDehydrated&&(wa(c,f).flags|=256),c=bp(c,f),c!==2&&(f=Ai,Ai=v,f!==null&&oy(f)),c}function oy(c){Ai===null?Ai=c:Ai.push.apply(Ai,c)}function gN(c){for(var f=c;;){if(f.flags&16384){var v=f.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var A=0;A<v.length;A++){var E=v[A],T=E.getSnapshot;E=E.value;try{if(!is(T(),E))return!1}catch{return!1}}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function vo(c,f){for(f&=~ey,f&=~Ap,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var v=31-Rr(f),A=1<<v;c[v]=-1,f&=~A}}function fE(c){if(xt&6)throw Error(o(327));Ta();var f=zd(c,0);if(!(f&1))return Si(c,Dn()),null;var v=bp(c,f);if(c.tag!==0&&v===2){var A=uv(c);A!==0&&(f=A,v=sy(c,A))}if(v===1)throw v=Jc,wa(c,0),vo(c,f),Si(c,Dn()),v;if(v===6)throw Error(o(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,Ea(c,Ai),Si(c,Dn()),null}function hE(c){mo!==null&&mo.tag===0&&!(xt&6)&&Ta();var f=xt;xt|=1;var v=mn.transition,A=Bt;try{if(mn.transition=null,Bt=1,c)return c()}finally{Bt=A,mn.transition=v,xt=f,!(xt&6)&&rs()}}function ay(){Oi=zl.current,kt(zl)}function wa(c,f){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;if(v!==Je&&(c.timeoutHandle=Je,Ve(v)),Sn!==null)for(v=Sn.return;v!==null;){var A=v;switch(wv(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&Ud();break;case 3:kl(),kt(Ht),kt(_n),Bv();break;case 5:Rv(A);break;case 4:kl();break;case 13:kt(tn);break;case 19:kt(tn);break;case 10:yv(A.type._context);break;case 22:case 23:ay()}v=v.return}if(An=c,Sn=c=yo(c.current,null),Wn=Oi=f,Cn=0,Jc=null,ey=Ap=Hl=0,Ai=Kc=null,ss!==null){for(f=0;f<ss.length;f++)if(v=ss[f],A=v.interleaved,A!==null){v.interleaved=null;var E=A.next,T=v.pending;if(T!==null){var U=T.next;T.next=E,A.next=U}v.pending=A}ss=null}return c}function dE(c,f){do{var v=Sn;try{if(vv(),ep.current=op,tp){for(var A=cn.memoizedState;A!==null;){var E=A.queue;E!==null&&(E.pending=null),A=A.next}tp=!1}if(Gl=0,Fn=Qn=cn=null,Oc=!1,kc=0,$v.current=null,v===null||v.return===null){Cn=1,Jc=f,Sn=null;break}e:{var T=c,U=v.return,Q=v,ce=f;if(f=Wn,Q.flags|=32768,ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var Te=ce,ke=Q,lt=ke.tag;if(!(ke.mode&1)&&(lt===0||lt===11||lt===15)){var $e=ke.alternate;$e?(ke.updateQueue=$e.updateQueue,ke.memoizedState=$e.memoizedState,ke.lanes=$e.lanes):(ke.updateQueue=null,ke.memoizedState=null)}var Vt=Dw(U);if(Vt!==null){Vt.flags&=-257,Fw(Vt,U,Q,T,f),Vt.mode&1&&Iw(T,Te,f),f=Vt,ce=Te;var Ye=f.updateQueue;if(Ye===null){var $n=new Set;$n.add(ce),f.updateQueue=$n}else Ye.add(ce);break e}else{if(!(f&1)){Iw(T,Te,f),ly();break e}ce=Error(o(426))}}else if(Qt&&Q.mode&1){var lr=Dw(U);if(lr!==null){!(lr.flags&65536)&&(lr.flags|=256),Fw(lr,U,Q,T,f),Cv(ce);break e}}T=ce,Cn!==4&&(Cn=2),Kc===null?Kc=[T]:Kc.push(T),ce=Ov(ce,Q),Q=U;do{switch(Q.tag){case 3:Q.flags|=65536,f&=-f,Q.lanes|=f;var re=Bw(Q,ce,f);$M(Q,re);break e;case 1:T=ce;var q=Q.type,ue=Q.stateNode;if(!(Q.flags&128)&&(typeof q.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(po===null||!po.has(ue)))){Q.flags|=65536,f&=-f,Q.lanes|=f;var Ie=Lw(Q,T,f);$M(Q,Ie);break e}}Q=Q.return}while(Q!==null)}gE(v)}catch(Xe){f=Xe,Sn===v&&v!==null&&(Sn=v=v.return);continue}break}while(1)}function pE(){var c=_p.current;return _p.current=op,c===null?op:c}function ly(){(Cn===0||Cn===3||Cn===2)&&(Cn=4),An===null||!(Hl&268435455)&&!(Ap&268435455)||vo(An,Wn)}function bp(c,f){var v=xt;xt|=2;var A=pE();An===c&&Wn===f||wa(c,f);do try{vN();break}catch(E){dE(c,E)}while(1);if(vv(),xt=v,_p.current=A,Sn!==null)throw Error(o(261));return An=null,Wn=0,Cn}function vN(){for(;Sn!==null;)mE(Sn)}function yN(){for(;Sn!==null&&!W3();)mE(Sn)}function mE(c){var f=xE(c.alternate,c,Oi);c.memoizedProps=c.pendingProps,f===null?gE(c):Sn=f,$v.current=null}function gE(c){var f=c;do{var v=f.alternate;if(c=f.return,f.flags&32768){if(v=cN(v,f),v!==null){v.flags&=32767,Sn=v;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Cn=6,Sn=null;return}}else if(v=aN(v,f,Oi),v!==null){Sn=v;return}if(f=f.sibling,f!==null){Sn=f;return}Sn=f=c}while(f!==null);Cn===0&&(Cn=5)}function Ea(c,f){var v=Bt,A=mn.transition;try{mn.transition=null,Bt=1,xN(c,f,v)}finally{mn.transition=A,Bt=v}return null}function xN(c,f,v){do Ta();while(mo!==null);if(xt&6)throw Error(o(327));var A=c.finishedWork,E=c.finishedLanes;if(A===null)return null;if(c.finishedWork=null,c.finishedLanes=0,A===c.current)throw Error(o(177));c.callbackNode=null,c.callbackPriority=0;var T=A.lanes|A.childLanes;if(V3(c,T),c===An&&(Sn=An=null,Wn=0),!(A.subtreeFlags&2064)&&!(A.flags&2064)||Mp||(Mp=!0,_E(pv,function(){return Ta(),null})),T=(A.flags&15990)!==0,A.subtreeFlags&15990||T){T=mn.transition,mn.transition=null;var U=Bt;Bt=1;var Q=xt;xt|=4,$v.current=null,hN(c,A),dN(c,A),z(c.containerInfo),c.current=A,pN(A),j3(),xt=Q,Bt=U,mn.transition=T}else c.current=A;if(Mp&&(Mp=!1,mo=c,wp=E),T=c.pendingLanes,T===0&&(po=null),K3(A.stateNode),Si(c,Dn()),f!==null)for(v=c.onRecoverableError,A=0;A<f.length;A++)v(f[A]);if(Sp)throw Sp=!1,c=iy,iy=null,c;return wp&1&&c.tag!==0&&Ta(),T=c.pendingLanes,T&1?c===ry?Yc++:(Yc=0,ry=c):Yc=0,rs(),null}function Ta(){if(mo!==null){var c=KM(wp),f=mn.transition,v=Bt;try{if(mn.transition=null,Bt=16>c?16:c,mo===null)var A=!1;else{if(c=mo,mo=null,wp=0,xt&6)throw Error(o(331));var E=xt;for(xt|=4,Le=c.current;Le!==null;){var T=Le,U=T.child;if(Le.flags&16){var Q=T.deletions;if(Q!==null){for(var ce=0;ce<Q.length;ce++){var Te=Q[ce];for(Le=Te;Le!==null;){var ke=Le;switch(ke.tag){case 0:case 11:case 15:Ma(8,ke,T)}var lt=ke.child;if(lt!==null)lt.return=ke,Le=lt;else for(;Le!==null;){ke=Le;var $e=ke.sibling,Vt=ke.return;if(eE(ke),ke===Te){Le=null;break}if($e!==null){$e.return=Vt,Le=$e;break}Le=Vt}}}var Ye=T.alternate;if(Ye!==null){var $n=Ye.child;if($n!==null){Ye.child=null;do{var lr=$n.sibling;$n.sibling=null,$n=lr}while($n!==null)}}Le=T}}if(T.subtreeFlags&2064&&U!==null)U.return=T,Le=U;else e:for(;Le!==null;){if(T=Le,T.flags&2048)switch(T.tag){case 0:case 11:case 15:Ma(9,T,T.return)}var re=T.sibling;if(re!==null){re.return=T.return,Le=re;break e}Le=T.return}}var q=c.current;for(Le=q;Le!==null;){U=Le;var ue=U.child;if(U.subtreeFlags&2064&&ue!==null)ue.return=U,Le=ue;else e:for(U=q;Le!==null;){if(Q=Le,Q.flags&2048)try{switch(Q.tag){case 0:case 11:case 15:jc(9,Q)}}catch(Xe){Mi(Q,Q.return,Xe)}if(Q===U){Le=null;break e}var Ie=Q.sibling;if(Ie!==null){Ie.return=Q.return,Le=Ie;break e}Le=Q.return}}if(xt=E,rs(),ns&&typeof ns.onPostCommitFiberRoot=="function")try{ns.onPostCommitFiberRoot(Hd,c)}catch{}A=!0}return A}finally{Bt=v,mn.transition=f}}return!1}function vE(c,f,v){f=Ov(v,f),f=Bw(c,f,1),ho(c,f),f=ci(),c=Cp(c,1),c!==null&&(Lc(c,1,f),Si(c,f))}function Mi(c,f,v){if(c.tag===3)vE(c,c,v);else for(;f!==null;){if(f.tag===3){vE(f,c,v);break}else if(f.tag===1){var A=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(po===null||!po.has(A))){c=Ov(v,c),c=Lw(f,c,1),ho(f,c),c=ci(),f=Cp(f,1),f!==null&&(Lc(f,1,c),Si(f,c));break}}f=f.return}}function _N(c,f,v){var A=c.pingCache;A!==null&&A.delete(f),f=ci(),c.pingedLanes|=c.suspendedLanes&v,An===c&&(Wn&v)===v&&(Cn===4||Cn===3&&(Wn&130023424)===Wn&&500>Dn()-ty?wa(c,0):ey|=v),Si(c,f)}function yE(c,f){f===0&&(c.mode&1?(f=Gd,Gd<<=1,!(Gd&130023424)&&(Gd=4194304)):f=1);var v=ci();c=Cp(c,f),c!==null&&(Lc(c,f,v),Si(c,v))}function AN(c){var f=c.memoizedState,v=0;f!==null&&(v=f.retryLane),yE(c,v)}function SN(c,f){var v=0;switch(c.tag){case 13:var A=c.stateNode,E=c.memoizedState;E!==null&&(v=E.retryLane);break;case 19:A=c.stateNode;break;default:throw Error(o(314))}A!==null&&A.delete(f),yE(c,v)}var xE;xE=function(c,f,v){if(c!==null)if(c.memoizedProps!==f.pendingProps||Ht.current)Ui=!0;else{if(!(c.lanes&v)&&!(f.flags&128))return Ui=!1,uN(c,f,v);Ui=!!(c.flags&131072)}else Ui=!1,Qt&&f.flags&1048576&&sw(f,qd,f.index);switch(f.lanes=0,f.tag){case 2:var A=f.type;c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps;var E=co(f,_n.current);Il(f,v),E=Iv(null,f,A,c,E,v);var T=Dv();return f.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,Vn(A)?(T=!0,Od(f)):T=!1,f.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,_v(f),E.updater=Yd,f.stateNode=E,E._reactInternals=f,Sv(f,A,c,v),f=zv(null,f,A,!0,T,v)):(f.tag=0,Qt&&T&&Mv(f),ui(null,f,E,v),f=f.child),f;case 16:A=f.elementType;e:{switch(c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps,E=A._init,A=E(A._payload),f.type=A,E=f.tag=wN(A),c=Pr(A,c),E){case 0:f=Gv(null,f,A,c,v);break e;case 1:f=Vw(null,f,A,c,v);break e;case 11:f=Ow(null,f,A,c,v);break e;case 14:f=kw(null,f,A,Pr(A.type,c),v);break e}throw Error(o(306,A,""))}return f;case 0:return A=f.type,E=f.pendingProps,E=f.elementType===A?E:Pr(A,E),Gv(c,f,A,E,v);case 1:return A=f.type,E=f.pendingProps,E=f.elementType===A?E:Pr(A,E),Vw(c,f,A,E,v);case 3:e:{if(Ww(f),c===null)throw Error(o(387));A=f.pendingProps,T=f.memoizedState,E=T.element,ZM(c,f),Kd(f,A,null,v);var U=f.memoizedState;if(A=U.element,oe&&T.isDehydrated)if(T={element:A,isDehydrated:!1,cache:U.cache,transitions:U.transitions},f.updateQueue.baseState=T,f.memoizedState=T,f.flags&256){E=Error(o(423)),f=jw(c,f,A,v,E);break e}else if(A!==E){E=Error(o(424)),f=jw(c,f,A,v,E);break e}else for(oe&&(Ni=he(f.stateNode.containerInfo),Fi=f,Qt=!0,Br=null,Ic=!1),v=fw(f,null,A,v),f.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Nl(),A===E){f=Bs(c,f,v);break e}ui(c,f,A,v)}f=f.child}return f;case 5:return hw(f),c===null&&Tv(f),A=f.type,E=f.pendingProps,T=c!==null?c.memoizedProps:null,U=E.children,Ae(A,E)?U=null:T!==null&&Ae(A,T)&&(f.flags|=32),Hw(c,f),ui(c,f,U,v),f.child;case 6:return c===null&&Tv(f),null;case 13:return Xw(c,f,v);case 4:return bv(f,f.stateNode.containerInfo),A=f.pendingProps,c===null?f.child=Ul(f,null,A,v):ui(c,f,A,v),f.child;case 11:return A=f.type,E=f.pendingProps,E=f.elementType===A?E:Pr(A,E),Ow(c,f,A,E,v);case 7:return ui(c,f,f.pendingProps,v),f.child;case 8:return ui(c,f,f.pendingProps.children,v),f.child;case 12:return ui(c,f,f.pendingProps.children,v),f.child;case 10:e:{if(A=f.type._context,E=f.pendingProps,T=f.memoizedProps,U=E.value,qM(f,A,U),T!==null)if(is(T.value,U)){if(T.children===E.children&&!Ht.current){f=Bs(c,f,v);break e}}else for(T=f.child,T!==null&&(T.return=f);T!==null;){var Q=T.dependencies;if(Q!==null){U=T.child;for(var ce=Q.firstContext;ce!==null;){if(ce.context===A){if(T.tag===1){ce=Cs(-1,v&-v),ce.tag=2;var Te=T.updateQueue;if(Te!==null){Te=Te.shared;var ke=Te.pending;ke===null?ce.next=ce:(ce.next=ke.next,ke.next=ce),Te.pending=ce}}T.lanes|=v,ce=T.alternate,ce!==null&&(ce.lanes|=v),xv(T.return,v,f),Q.lanes|=v;break}ce=ce.next}}else if(T.tag===10)U=T.type===f.type?null:T.child;else if(T.tag===18){if(U=T.return,U===null)throw Error(o(341));U.lanes|=v,Q=U.alternate,Q!==null&&(Q.lanes|=v),xv(U,v,f),U=T.sibling}else U=T.child;if(U!==null)U.return=T;else for(U=T;U!==null;){if(U===f){U=null;break}if(T=U.sibling,T!==null){T.return=U.return,U=T;break}U=U.return}T=U}ui(c,f,E.children,v),f=f.child}return f;case 9:return E=f.type,A=f.pendingProps.children,Il(f,v),E=tr(E),A=A(E),f.flags|=1,ui(c,f,A,v),f.child;case 14:return A=f.type,E=Pr(A,f.pendingProps),E=Pr(A.type,E),kw(c,f,A,E,v);case 15:return Gw(c,f,f.type,f.pendingProps,v);case 17:return A=f.type,E=f.pendingProps,E=f.elementType===A?E:Pr(A,E),c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,Vn(A)?(c=!0,Od(f)):c=!1,Il(f,v),iw(f,A,E),Sv(f,A,E,v),zv(null,f,A,!0,c,v);case 19:return Qw(c,f,v);case 22:return zw(c,f,v)}throw Error(o(156,f.tag))};function _E(c,f){return hv(c,f)}function MN(c,f,v,A){this.tag=c,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(c,f,v,A){return new MN(c,f,v,A)}function uy(c){return c=c.prototype,!(!c||!c.isReactComponent)}function wN(c){if(typeof c=="function")return uy(c)?1:0;if(c!=null){if(c=c.$$typeof,c===S)return 11;if(c===x)return 14}return 2}function yo(c,f){var v=c.alternate;return v===null?(v=ar(c.tag,f,c.key,c.mode),v.elementType=c.elementType,v.type=c.type,v.stateNode=c.stateNode,v.alternate=c,c.alternate=v):(v.pendingProps=f,v.type=c.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=c.flags&14680064,v.childLanes=c.childLanes,v.lanes=c.lanes,v.child=c.child,v.memoizedProps=c.memoizedProps,v.memoizedState=c.memoizedState,v.updateQueue=c.updateQueue,f=c.dependencies,v.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},v.sibling=c.sibling,v.index=c.index,v.ref=c.ref,v}function Rp(c,f,v,A,E,T){var U=2;if(A=c,typeof c=="function")uy(c)&&(U=1);else if(typeof c=="string")U=5;else e:switch(c){case h:return Ca(v.children,E,T,f);case d:U=8,E|=8;break;case p:return c=ar(12,v,f,E|2),c.elementType=p,c.lanes=T,c;case M:return c=ar(13,v,f,E),c.elementType=M,c.lanes=T,c;case g:return c=ar(19,v,f,E),c.elementType=g,c.lanes=T,c;case w:return Pp(v,E,T,f);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case m:U=10;break e;case y:U=9;break e;case S:U=11;break e;case x:U=14;break e;case _:U=16,A=null;break e}throw Error(o(130,c==null?c:typeof c,""))}return f=ar(U,v,f,E),f.elementType=c,f.type=A,f.lanes=T,f}function Ca(c,f,v,A){return c=ar(7,c,A,f),c.lanes=v,c}function Pp(c,f,v,A){return c=ar(22,c,A,f),c.elementType=w,c.lanes=v,c.stateNode={},c}function cy(c,f,v){return c=ar(6,c,null,f),c.lanes=v,c}function fy(c,f,v){return f=ar(4,c.children!==null?c.children:[],c.key,f),f.lanes=v,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function EN(c,f,v,A,E){this.tag=f,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Je,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cv(0),this.expirationTimes=cv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cv(0),this.identifierPrefix=A,this.onRecoverableError=E,oe&&(this.mutableSourceEagerHydrationData=null)}function AE(c,f,v,A,E,T,U,Q,ce){return c=new EN(c,f,v,Q,ce),f===1?(f=1,T===!0&&(f|=8)):f=0,T=ar(3,null,null,f),c.current=T,T.stateNode=c,T.memoizedState={element:A,isDehydrated:v,cache:null,transitions:null},_v(T),c}function SE(c){if(!c)return Yn;c=c._reactInternals;e:{if(b(c)!==c||c.tag!==1)throw Error(o(170));var f=c;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(Vn(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(o(171))}if(c.tag===1){var v=c.type;if(Vn(v))return XM(c,v,f)}return f}function ME(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(o(188)):(c=Object.keys(c).join(","),Error(o(268,c)));return c=X(f),c===null?null:c.stateNode}function wE(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var v=c.retryLane;c.retryLane=v!==0&&v<f?v:f}}function hy(c,f){wE(c,f),(c=c.alternate)&&wE(c,f)}function TN(c){return c=X(c),c===null?null:c.stateNode}function CN(){return null}return n.attemptContinuousHydration=function(c){if(c.tag===13){var f=ci();or(c,134217728,f),hy(c,134217728)}},n.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var f=ci(),v=go(c);or(c,v,f),hy(c,v)}},n.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var f=c.stateNode;if(f.current.memoizedState.isDehydrated){var v=Bc(f.pendingLanes);v!==0&&(fv(f,v|1),Si(f,Dn()),!(xt&6)&&(Vl(),rs()))}break;case 13:var A=ci();hE(function(){return or(c,1,A)}),hy(c,1)}},n.batchedUpdates=function(c,f){var v=xt;xt|=1;try{return c(f)}finally{xt=v,xt===0&&(Vl(),Vd&&rs())}},n.createComponentSelector=function(c){return{$$typeof:mp,value:c}},n.createContainer=function(c,f,v,A,E,T,U){return AE(c,f,!1,null,v,A,E,T,U)},n.createHasPseudoClassSelector=function(c){return{$$typeof:gp,value:c}},n.createHydrationContainer=function(c,f,v,A,E,T,U,Q,ce){return c=AE(v,A,!0,c,E,T,U,Q,ce),c.context=SE(null),v=c.current,A=ci(),E=go(v),T=Cs(A,E),T.callback=f??null,ho(v,T),c.current.lanes=E,Lc(c,E,A),Si(c,A),c},n.createPortal=function(c,f,v){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:A==null?null:""+A,children:c,containerInfo:f,implementation:v}},n.createRoleSelector=function(c){return{$$typeof:vp,value:c}},n.createTestNameSelector=function(c){return{$$typeof:yp,value:c}},n.createTextSelector=function(c){return{$$typeof:xp,value:c}},n.deferredUpdates=function(c){var f=Bt,v=mn.transition;try{return mn.transition=null,Bt=16,c()}finally{Bt=f,mn.transition=v}},n.discreteUpdates=function(c,f,v,A,E){var T=Bt,U=mn.transition;try{return mn.transition=null,Bt=1,c(f,v,A,E)}finally{Bt=T,mn.transition=U,xt===0&&Vl()}},n.findAllNodes=Zv,n.findBoundingRects=function(c,f){if(!rt)throw Error(o(363));f=Zv(c,f),c=[];for(var v=0;v<f.length;v++)c.push(k(f[v]));for(f=c.length-1;0<f;f--){v=c[f];for(var A=v.x,E=A+v.width,T=v.y,U=T+v.height,Q=f-1;0<=Q;Q--)if(f!==Q){var ce=c[Q],Te=ce.x,ke=Te+ce.width,lt=ce.y,$e=lt+ce.height;if(A>=Te&&T>=lt&&E<=ke&&U<=$e){c.splice(f,1);break}else if(A!==Te||v.width!==ce.width||$e<T||lt>U){if(!(T!==lt||v.height!==ce.height||ke<A||Te>E)){Te>A&&(ce.width+=Te-A,ce.x=A),ke<E&&(ce.width=E-Te),c.splice(f,1);break}}else{lt>T&&(ce.height+=lt-T,ce.y=T),$e<U&&(ce.height=U-lt),c.splice(f,1);break}}}return c},n.findHostInstance=ME,n.findHostInstanceWithNoPortals=function(c){return c=G(c),c=c!==null?Y(c):null,c===null?null:c.stateNode},n.findHostInstanceWithWarning=function(c){return ME(c)},n.flushControlled=function(c){var f=xt;xt|=1;var v=mn.transition,A=Bt;try{mn.transition=null,Bt=1,c()}finally{Bt=A,mn.transition=v,xt=f,xt===0&&(Vl(),rs())}},n.flushPassiveEffects=Ta,n.flushSync=hE,n.focusWithin=function(c,f){if(!rt)throw Error(o(363));for(c=Yv(c),f=uE(c,f),f=Array.from(f),c=0;c<f.length;){var v=f[c++];if(!le(v)){if(v.tag===5&&we(v.stateNode))return!0;for(v=v.child;v!==null;)f.push(v),v=v.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Bt},n.getFindAllNodesFailureDescription=function(c,f){if(!rt)throw Error(o(363));var v=0,A=[];c=[Yv(c),0];for(var E=0;E<c.length;){var T=c[E++],U=c[E++],Q=f[U];if((T.tag!==5||!le(T))&&(Qv(T,Q)&&(A.push(qv(Q)),U++,U>v&&(v=U)),U<f.length))for(T=T.child;T!==null;)c.push(T,U),T=T.sibling}if(v<f.length){for(c=[];v<f.length;v++)c.push(qv(f[v]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},n.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return ae(c.child.stateNode);default:return c.child.stateNode}},n.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:TN,findFiberByHostInstance:c.findFiberByHostInstance||CN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)c=!0;else{try{Hd=f.inject(c),ns=f}catch{}c=!!f.checkDCE}}return c},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(c,f,v,A){if(!rt)throw Error(o(363));c=Zv(c,f);var E=be(c,v,A).disconnect;return{disconnect:function(){E()}}},n.registerMutableSourceForHydration=function(c,f){var v=f._getVersion;v=v(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,v]:c.mutableSourceEagerHydrationData.push(f,v)},n.runWithPriority=function(c,f){var v=Bt;try{return Bt=c,f()}finally{Bt=v}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(c,f,v,A){var E=f.current,T=ci(),U=go(E);return v=SE(v),f.context===null?f.context=v:f.pendingContext=v,f=Cs(T,U),f.payload={element:c},A=A===void 0?null:A,A!==null&&(f.callback=A),ho(E,f),c=or(E,U,T),c!==null&&Jd(c,E,U),U},n};qI.exports=T8;var C8=qI.exports;const b8=dA(C8);var ZI={exports:{}},$I={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,H){var z=I.length;I.push(H);e:for(;0<z;){var $=z-1>>>1,Z=I[$];if(0<r(Z,H))I[$]=H,I[z]=Z,z=$;else break e}}function n(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var H=I[0],z=I.pop();if(z!==H){I[0]=z;e:for(var $=0,Z=I.length,ee=Z>>>1;$<ee;){var ie=2*($+1)-1,Ae=I[ie],ge=ie+1,W=I[ge];if(0>r(Ae,z))ge<Z&&0>r(W,Ae)?(I[$]=W,I[ge]=z,$=ge):(I[$]=Ae,I[ie]=z,$=ie);else if(ge<Z&&0>r(W,z))I[$]=W,I[ge]=z,$=ge;else break e}}return H}function r(I,H){var z=I.sortIndex-H.sortIndex;return z!==0?z:I.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,p=3,m=!1,y=!1,S=!1,M=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(I){for(var H=n(u);H!==null;){if(H.callback===null)i(u);else if(H.startTime<=I)i(u),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(u)}}function w(I){if(S=!1,_(I),!y)if(n(l)!==null)y=!0,ae(C);else{var H=n(u);H!==null&&ne(w,H.startTime-I)}}function C(I,H){y=!1,S&&(S=!1,g(L),L=-1),m=!0;var z=p;try{for(_(H),d=n(l);d!==null&&(!(d.expirationTime>H)||I&&!G());){var $=d.callback;if(typeof $=="function"){d.callback=null,p=d.priorityLevel;var Z=$(d.expirationTime<=H);H=t.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(l)&&i(l),_(H)}else i(l);d=n(l)}if(d!==null)var ee=!0;else{var ie=n(u);ie!==null&&ne(w,ie.startTime-H),ee=!1}return ee}finally{d=null,p=z,m=!1}}var R=!1,P=null,L=-1,b=5,B=-1;function G(){return!(t.unstable_now()-B<b)}function X(){if(P!==null){var I=t.unstable_now();B=I;var H=!0;try{H=P(!0,I)}finally{H?V():(R=!1,P=null)}}else R=!1}var V;if(typeof x=="function")V=function(){x(X)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,J=Y.port2;Y.port1.onmessage=X,V=function(){J.postMessage(null)}}else V=function(){M(X,0)};function ae(I){P=I,R||(R=!0,V())}function ne(I,H){L=M(function(){I(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,ae(C))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(I){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var z=p;p=H;try{return I()}finally{p=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,H){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var z=p;p=I;try{return H()}finally{p=z}},t.unstable_scheduleCallback=function(I,H,z){var $=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?$+z:$):z=$,I){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=z+Z,I={id:h++,callback:H,priorityLevel:I,startTime:z,expirationTime:Z,sortIndex:-1},z>$?(I.sortIndex=z,e(u,I),n(l)===null&&I===n(u)&&(S?(g(L),L=-1):S=!0,ne(w,z-$))):(I.sortIndex=Z,e(l,I),y||m||(y=!0,ae(C))),I},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(I){var H=p;return function(){var z=p;p=H;try{return I.apply(this,arguments)}finally{p=z}}}})($I);ZI.exports=$I;var pb=ZI.exports;function eD(t,e,n=(i,r)=>i===r){if(t===e)return!0;if(!t||!e)return!1;const i=t.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}const Vs=[];function tD(t,e,n=!1,i={}){for(const s of Vs)if(eD(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!n)throw s.promise}const r={keys:e,equal:i.equal,promise:t(...e).then(s=>r.response=s).then(()=>{i.lifespan&&i.lifespan>0&&setTimeout(()=>{const s=Vs.indexOf(r);s!==-1&&Vs.splice(s,1)},i.lifespan)}).catch(s=>r.error=s)};if(Vs.push(r),!n)throw r.promise}const R8=(t,e,n)=>tD(t,e,!1,n),P8=(t,e,n)=>void tD(t,e,!0,n),B8=t=>{if(t===void 0||t.length===0)Vs.splice(0,Vs.length);else{const e=Vs.find(n=>eD(t,n.keys,n.equal));if(e){const n=Vs.indexOf(e);n!==-1&&Vs.splice(n,1)}}},tM={},L8=t=>void Object.assign(tM,t);function I8(t,e){function n(h,{args:d=[],attach:p,...m},y){let S=`${h[0].toUpperCase()}${h.slice(1)}`,M;if(h==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;M=gu(g,{type:h,root:y,attach:p,primitive:!0})}else{const g=tM[S];if(!g)throw new Error(`R3F: ${S} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");M=gu(new g(...d),{type:h,root:y,attach:p,memoizedProps:{args:d}})}return M.__r3f.attach===void 0&&(M instanceof ht?M.__r3f.attach="geometry":M instanceof Tn&&(M.__r3f.attach="material")),S!=="inject"&&Ax(M,m),M}function i(h,d){let p=!1;if(d){var m,y;(m=d.__r3f)!=null&&m.attach?_x(h,d,d.__r3f.attach):d.isObject3D&&h.isObject3D&&(h.add(d),p=!0),p||(y=h.__r3f)==null||y.objects.push(d),d.__r3f||gu(d,{}),d.__r3f.parent=h,D1(d),vu(d)}}function r(h,d,p){let m=!1;if(d){var y,S;if((y=d.__r3f)!=null&&y.attach)_x(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){d.parent=h,d.dispatchEvent({type:"added"});const M=h.children.filter(x=>x!==d),g=M.indexOf(p);h.children=[...M.slice(0,g),d,...M.slice(g)],m=!0}m||(S=h.__r3f)==null||S.objects.push(d),d.__r3f||gu(d,{}),d.__r3f.parent=h,D1(d),vu(d)}}function s(h,d,p=!1){h&&[...h].forEach(m=>o(d,m,p))}function o(h,d,p){if(d){var m,y,S;if(d.__r3f&&(d.__r3f.parent=null),(m=h.__r3f)!=null&&m.objects&&(h.__r3f.objects=h.__r3f.objects.filter(w=>w!==d)),(y=d.__r3f)!=null&&y.attach)xb(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){var M;h.remove(d),(M=d.__r3f)!=null&&M.root&&z8(d.__r3f.root,d)}const x=(S=d.__r3f)==null?void 0:S.primitive,_=p===void 0?d.dispose!==null&&!x:p;if(!x){var g;s((g=d.__r3f)==null?void 0:g.objects,d,_),s(d.children,d,_)}d.__r3f&&(delete d.__r3f.root,delete d.__r3f.objects,delete d.__r3f.handlers,delete d.__r3f.memoizedProps,x||delete d.__r3f),_&&d.dispose&&d.type!=="Scene"&&pb.unstable_scheduleCallback(pb.unstable_IdlePriority,()=>{try{d.dispose()}catch{}}),vu(h)}}function a(h,d,p,m){var y;const S=(y=h.__r3f)==null?void 0:y.parent;if(!S)return;const M=n(d,p,h.__r3f.root);if(h.children){for(const g of h.children)g.__r3f&&i(M,g);h.children=h.children.filter(g=>!g.__r3f)}h.__r3f.objects.forEach(g=>i(M,g)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(S,h),M.parent&&(M.__r3f.autoRemovedBeforeAppend=!0),i(S,M),M.raycast&&M.__r3f.eventCount&&M.__r3f.root.getState().internal.interaction.push(M),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=M,g.ref&&(typeof g.ref=="function"?g.ref(M):g.ref.current=M))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:b8({createInstance:n,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,d)=>{if(!d)return;const p=h.getState().scene;p.__r3f&&(p.__r3f.root=h,i(p,d))},removeChildFromContainer:(h,d)=>{d&&o(h.getState().scene,d)},insertInContainerBefore:(h,d,p)=>{if(!d||!p)return;const m=h.getState().scene;m.__r3f&&r(m,d,p)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var d;return!!((d=h==null?void 0:h.__r3f)!=null?d:{}).handlers},prepareUpdate(h,d,p,m){if(h.__r3f.primitive&&m.object&&m.object!==h)return[!0];{const{args:y=[],children:S,...M}=m,{args:g=[],children:x,..._}=p;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((C,R)=>C!==g[R]))return[!0];const w=lD(h,M,_,!0);return w.changes.length?[!1,w]:null}},commitUpdate(h,[d,p],m,y,S,M){d?a(h,m,S,M):Ax(h,p)},commitMount(h,d,p,m){var y;const S=(y=h.__r3f)!=null?y:{};h.raycast&&S.handlers&&S.eventCount&&h.__r3f.root.getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>gu(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var d;const{attach:p,parent:m}=(d=h.__r3f)!=null?d:{};p&&m&&xb(m,h,p),h.isObject3D&&(h.visible=!1),vu(h)},unhideInstance(h,d){var p;const{attach:m,parent:y}=(p=h.__r3f)!=null?p:{};m&&y&&_x(y,h,m),(h.isObject3D&&d.visible==null||d.visible)&&(h.visible=!0),vu(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Du.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Jt.fun(performance.now)?performance.now:Jt.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Jt.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Jt.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Ax}}var mb,gb;const xx=t=>"colorSpace"in t||"outputColorSpace"in t,nD=()=>{var t;return(t=tM.ColorManagement)!=null?t:null},iD=t=>t&&t.isOrthographicCamera,D8=t=>t&&t.hasOwnProperty("current"),wd=typeof window<"u"&&((mb=window.document)!=null&&mb.createElement||((gb=window.navigator)==null?void 0:gb.product)==="ReactNative")?O.useLayoutEffect:O.useEffect;function rD(t){const e=O.useRef(t);return wd(()=>void(e.current=t),[t]),e}function F8({set:t}){return wd(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class sD extends O.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}sD.getDerivedStateFromError=()=>({error:!0});const oD="__default",vb=new Map,N8=t=>t&&!!t.memoized&&!!t.changes;function aD(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const mf=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()},Jt={obj:t=>t===Object(t)&&!Jt.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:i="reference",strict:r=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(Jt.str(t)||Jt.num(t))return t===e;const s=Jt.obj(t);if(s&&i==="reference")return t===e;const o=Jt.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&i==="shallow"){for(a in r?e:t)if(!Jt.equ(t[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:t)if(t[a]!==e[a])return!1;if(Jt.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function U8(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function O8(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function gu(t,e){const n=t;return(e!=null&&e.primitive||!n.__r3f)&&(n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),t}function I1(t,e){let n=t;if(e.includes("-")){const i=e.split("-"),r=i.pop();return n=i.reduce((s,o)=>s[o],t),{target:n,key:r}}else return{target:n,key:e}}const yb=/-\d+$/;function _x(t,e,n){if(Jt.str(n)){if(yb.test(n)){const s=n.replace(yb,""),{target:o,key:a}=I1(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=I1(t,n);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=n(t,e)}function xb(t,e,n){var i,r;if(Jt.str(n)){const{target:s,key:o}=I1(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(t,e);(r=e.__r3f)==null||delete r.previousAttach}function lD(t,{children:e,key:n,ref:i,...r},{children:s,key:o,ref:a,...l}={},u=!1){var h;const d=(h=t==null?void 0:t.__r3f)!=null?h:{},p=Object.entries(r),m=[];if(u){const S=Object.keys(l);for(let M=0;M<S.length;M++)r.hasOwnProperty(S[M])||p.unshift([S[M],oD+"remove"])}p.forEach(([S,M])=>{var g;if((g=t.__r3f)!=null&&g.primitive&&S==="object"||Jt.equ(M,l[S]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(S))return m.push([S,M,!0,[]]);let x=[];S.includes("-")&&(x=S.split("-")),m.push([S,M,!1,x]);for(const _ in r){const w=r[_];_.startsWith(`${S}-`)&&m.push([_,w,!1,_.split("-")])}});const y={...r};return d.memoizedProps&&d.memoizedProps.args&&(y.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(y.attach=d.memoizedProps.attach),{memoized:y,changes:m}}function Ax(t,e){var n,i,r;const s=(n=t.__r3f)!=null?n:{},o=s.root,a=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:l,changes:u}=N8(e)?e:lD(t,e),h=s.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let p=0;p<u.length;p++){let[m,y,S,M]=u[p];if(xx(t)){const w="srgb",C="srgb-linear";m==="encoding"?(m="colorSpace",y=y===3001?w:C):m==="outputEncoding"&&(m="outputColorSpace",y=y===3001?w:C)}let g=t,x=g[m];if(M.length&&(x=M.reduce((_,w)=>_[w],t),!(x&&x.set))){const[_,...w]=M.reverse();g=w.reverse().reduce((C,R)=>C[R],t),m=_}if(y===oD+"remove")if(g.constructor){let _=vb.get(g.constructor);_||(_=new g.constructor,vb.set(g.constructor,_)),y=_[m]}else y=0;if(S)y?s.handlers[m]=y:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(x&&x.set&&(x.copy||x instanceof ll)){if(Array.isArray(y))x.fromArray?x.fromArray(y):x.set(...y);else if(x.copy&&y&&y.constructor&&x.constructor===y.constructor)x.copy(y);else if(y!==void 0){const _=x instanceof Be;!_&&x.setScalar?x.setScalar(y):x instanceof ll&&y instanceof ll?x.mask=y.mask:x.set(y),!nD()&&!a.linear&&_&&x.convertSRGBToLinear()}}else if(g[m]=y,g[m]instanceof $t&&g[m].format===bi&&g[m].type===io){const _=g[m];xx(_)&&xx(a.gl)?_.colorSpace=a.gl.outputColorSpace:_.encoding=a.gl.outputEncoding}vu(t)}if(s.parent&&a.internal&&t.raycast&&h!==s.eventCount){const p=a.internal.interaction.indexOf(t);p>-1&&a.internal.interaction.splice(p,1),s.eventCount&&a.internal.interaction.push(t)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(r=t.__r3f)!=null&&r.parent&&D1(t),t}function vu(t){var e,n;const i=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();i&&i.internal.frames===0&&i.invalidate()}function D1(t){t.onUpdate==null||t.onUpdate(t)}function k8(t,e){t.manual||(iD(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function Fm(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function G8(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Du.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Du.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Du.ContinuousEventPriority;default:return Du.DefaultEventPriority}}function uD(t,e,n,i){const r=n.get(e);r&&(n.delete(e),n.size===0&&(t.delete(i),r.target.releasePointerCapture(i)))}function z8(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(i=>i!==e),n.initialHits=n.initialHits.filter(i=>i!==e),n.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&n.hovered.delete(r)}),n.capturedMap.forEach((i,r)=>{uD(n.capturedMap,e,i,r)})}function H8(t){function e(l){const{internal:u}=t.getState(),h=l.offsetX-u.initialClick[0],d=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(h*h+d*d))}function n(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(h=>{var d;return(d=u.__r3f)==null?void 0:d.handlers["onPointer"+h]}))}function i(l,u){const h=t.getState(),d=new Set,p=[],m=u?u(h.internal.interaction):h.internal.interaction;for(let g=0;g<m.length;g++){const x=mf(m[g]);x&&(x.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function y(g){const x=mf(g);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var _;x.events.compute==null||x.events.compute(l,x,(_=x.previousRoot)==null?void 0:_.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(g,!0):[]}let S=m.flatMap(y).sort((g,x)=>{const _=mf(g.object),w=mf(x.object);return!_||!w?g.distance-x.distance:w.events.priority-_.events.priority||g.distance-x.distance}).filter(g=>{const x=Fm(g);return d.has(x)?!1:(d.add(x),!0)});h.events.filter&&(S=h.events.filter(S,h));for(const g of S){let x=g.object;for(;x;){var M;(M=x.__r3f)!=null&&M.eventCount&&p.push({...g,eventObject:x}),x=x.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let g of h.internal.capturedMap.get(l.pointerId).values())d.has(Fm(g.intersection))||p.push(g.intersection);return p}function r(l,u,h,d){const p=t.getState();if(l.length){const m={stopped:!1};for(const y of l){const S=mf(y.object)||p,{raycaster:M,pointer:g,camera:x,internal:_}=S,w=new F(g.x,g.y,0).unproject(x),C=B=>{var G,X;return(G=(X=_.capturedMap.get(B))==null?void 0:X.has(y.eventObject))!=null?G:!1},R=B=>{const G={intersection:y,target:u.target};_.capturedMap.has(B)?_.capturedMap.get(B).set(y.eventObject,G):_.capturedMap.set(B,new Map([[y.eventObject,G]])),u.target.setPointerCapture(B)},P=B=>{const G=_.capturedMap.get(B);G&&uD(_.capturedMap,y.eventObject,G,B)};let L={};for(let B in u){let G=u[B];typeof G!="function"&&(L[B]=G)}let b={...y,...L,pointer:g,intersections:l,stopped:m.stopped,delta:h,unprojectedPoint:w,ray:M.ray,camera:x,stopPropagation(){const B="pointerId"in u&&_.capturedMap.get(u.pointerId);if((!B||B.has(y.eventObject))&&(b.stopped=m.stopped=!0,_.hovered.size&&Array.from(_.hovered.values()).find(G=>G.eventObject===y.eventObject))){const G=l.slice(0,l.indexOf(y));s([...G,y])}},target:{hasPointerCapture:C,setPointerCapture:R,releasePointerCapture:P},currentTarget:{hasPointerCapture:C,setPointerCapture:R,releasePointerCapture:P},nativeEvent:u};if(d(b),m.stopped===!0)break}}return l}function s(l){const{internal:u}=t.getState();for(const h of u.hovered.values())if(!l.length||!l.find(d=>d.object===h.object&&d.index===h.index&&d.instanceId===h.instanceId)){const p=h.eventObject.__r3f,m=p==null?void 0:p.handlers;if(u.hovered.delete(Fm(h)),p!=null&&p.eventCount){const y={...h,intersections:l};m.onPointerOut==null||m.onPointerOut(y),m.onPointerLeave==null||m.onPointerLeave(y)}}}function o(l,u){for(let h=0;h<u.length;h++){const d=u[h].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:h}=t.getState();"pointerId"in u&&h.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(u.pointerId)&&(h.capturedMap.delete(u.pointerId),s([]))})}}return function(h){const{onPointerMissed:d,internal:p}=t.getState();p.lastEvent.current=h;const m=l==="onPointerMove",y=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",M=i(h,m?n:void 0),g=y?e(h):0;l==="onPointerDown"&&(p.initialClick=[h.offsetX,h.offsetY],p.initialHits=M.map(_=>_.eventObject)),y&&!M.length&&g<=2&&(o(h,p.interaction),d&&d(h)),m&&s(M);function x(_){const w=_.eventObject,C=w.__r3f,R=C==null?void 0:C.handlers;if(C!=null&&C.eventCount)if(m){if(R.onPointerOver||R.onPointerEnter||R.onPointerOut||R.onPointerLeave){const P=Fm(_),L=p.hovered.get(P);L?L.stopped&&_.stopPropagation():(p.hovered.set(P,_),R.onPointerOver==null||R.onPointerOver(_),R.onPointerEnter==null||R.onPointerEnter(_))}R.onPointerMove==null||R.onPointerMove(_)}else{const P=R[l];P?(!y||p.initialHits.includes(w))&&(o(h,p.interaction.filter(L=>!p.initialHits.includes(L))),P(_)):y&&p.initialHits.includes(w)&&o(h,p.interaction.filter(L=>!p.initialHits.includes(L)))}}r(M,h,g,x)}}return{handlePointer:a}}const cD=t=>!!(t!=null&&t.render),fD=O.createContext(null),V8=(t,e)=>{const n=QI((a,l)=>{const u=new F,h=new F,d=new F;function p(g=l().camera,x=h,_=l().size){const{width:w,height:C,top:R,left:P}=_,L=w/C;x instanceof F?d.copy(x):d.set(...x);const b=g.getWorldPosition(u).distanceTo(d);if(iD(g))return{width:w/g.zoom,height:C/g.zoom,top:R,left:P,factor:1,distance:b,aspect:L};{const B=g.fov*Math.PI/180,G=2*Math.tan(B/2)*b,X=G*(w/C);return{width:X,height:G,top:R,left:P,factor:w/X,distance:b,aspect:L}}}let m;const y=g=>a(x=>({performance:{...x.performance,current:g}})),S=new ye;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>t(l(),g),advance:(g,x)=>e(g,x,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new qS,pointer:S,mouse:S,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&y(g.performance.min),m=setTimeout(()=>y(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(x=>({...x,events:{...x.events,...g}})),setSize:(g,x,_,w,C)=>{const R=l().camera,P={width:g,height:x,top:w||0,left:C||0,updateStyle:_};a(L=>({size:P,viewport:{...L.viewport,...p(R,h,P)}}))},setDpr:g=>a(x=>{const _=aD(g);return{viewport:{...x.viewport,dpr:_,initialDpr:x.viewport.initialDpr||_}}}),setFrameloop:(g="always")=>{const x=l().clock;x.stop(),x.elapsedTime=0,g!=="never"&&(x.start(),x.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:O.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,x,_)=>{const w=l().internal;return w.priority=w.priority+(x>0?1:0),w.subscribers.push({ref:g,priority:x,store:_}),w.subscribers=w.subscribers.sort((C,R)=>C.priority-R.priority),()=>{const C=l().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(x>0?1:0),C.subscribers=C.subscribers.filter(R=>R.ref!==g))}}}}}),i=n.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:h,set:d}=n.getState();if(l!==r||u.dpr!==s){var p;r=l,s=u.dpr,k8(a,l),h.setPixelRatio(u.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,m)}a!==o&&(o=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};function W8(t,e){const n={callback:t};return e.add(n),()=>void e.delete(n)}let Nm,hD=new Set,j8=new Set,X8=new Set;const J8=t=>W8(t,hD);function Sx(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function gf(t,e){switch(t){case"before":return Sx(hD,e);case"after":return Sx(j8,e);case"tail":return Sx(X8,e)}}let Mx,wx;function Ex(t,e,n){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(i=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),Mx=e.internal.subscribers,Nm=0;Nm<Mx.length;Nm++)wx=Mx[Nm],wx.ref.current(wx.store.getState(),i,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function K8(t){let e=!1,n,i,r;function s(l){i=requestAnimationFrame(s),e=!0,n=0,gf("before",l);for(const h of t.values()){var u;r=h.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((u=r.gl.xr)!=null&&u.isPresenting)&&(n+=Ex(l,r))}if(gf("after",l),n===0)return gf("tail",l),e=!1,cancelAnimationFrame(i)}function o(l,u=1){var h;if(!l)return t.forEach(d=>o(d.store.getState()),u);(h=l.gl.xr)!=null&&h.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(s)))}function a(l,u=!0,h,d){if(u&&gf("before",l),h)Ex(l,h,d);else for(const p of t.values())Ex(l,p.store.getState());u&&gf("after",l)}return{loop:s,invalidate:o,advance:a}}function dD(){const t=O.useContext(fD);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function dg(t=n=>n,e){return dD()(t,e)}function bl(t,e=0){const n=dD(),i=n.getState().internal.subscribe,r=rD(t);return wd(()=>i(r,e,n),[e,i,n]),null}function pD(t,e){return function(n,...i){const r=new n;return t&&t(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,U8(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message})`))))))}}function Ed(t,e,n,i){const r=Array.isArray(e)?e:[e],s=R8(pD(n,i),[t,...r],{equal:Jt.equ});return Array.isArray(e)?s:s[0]}Ed.preload=function(t,e,n){const i=Array.isArray(e)?e:[e];return P8(pD(n),[t,...i])};Ed.clear=function(t,e){const n=Array.isArray(e)?e:[e];return B8([t,...n])};const mc=new Map,{invalidate:_b,advance:Ab}=K8(mc),{reconciler:Yg,applyProps:za}=I8(mc,G8),du={objects:"shallow",strict:!1},Y8=(t,e)=>{const n=typeof t=="function"?t(e):t;return cD(n)?n:new bS({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function Q8(t,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:n,height:i,top:r,left:s}=t.parentElement.getBoundingClientRect();return{width:n,height:i,top:r,left:s}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function q8(t){const e=mc.get(t),n=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||V8(_b,Ab),o=n||Yg.createContainer(s,Du.ConcurrentRoot,null,!1,null,"",r,null);e||mc.set(t,{fiber:o,store:s});let a,l=!1,u;return{configure(h={}){let{gl:d,size:p,scene:m,events:y,onCreated:S,shadows:M=!1,linear:g=!1,flat:x=!1,legacy:_=!1,orthographic:w=!1,frameloop:C="always",dpr:R=[1,2],performance:P,raycaster:L,camera:b,onPointerMissed:B}=h,G=s.getState(),X=G.gl;G.gl||G.set({gl:X=Y8(d,t)});let V=G.raycaster;V||G.set({raycaster:V=new XI});const{params:Y,...J}=L||{};if(Jt.equ(J,V,du)||za(V,{...J}),Jt.equ(Y,V.params,du)||za(V,{params:{...V.params,...Y}}),!G.camera||G.camera===u&&!Jt.equ(u,b,du)){u=b;const $=b instanceof od,Z=$?b:w?new ma(0,0,0,0,.1,1e3):new yn(75,0,.1,1e3);$||(Z.position.z=5,b&&za(Z,b),!G.camera&&!(b!=null&&b.rotation)&&Z.lookAt(0,0,0)),G.set({camera:Z})}if(!G.scene){let $;m instanceof Kg?$=m:($=new Kg,m&&za($,m)),G.set({scene:gu($)})}if(!G.xr){const $=(ie,Ae)=>{const ge=s.getState();ge.frameloop!=="never"&&Ab(ie,!0,ge,Ae)},Z=()=>{const ie=s.getState();ie.gl.xr.enabled=ie.gl.xr.isPresenting,ie.gl.xr.setAnimationLoop(ie.gl.xr.isPresenting?$:null),ie.gl.xr.isPresenting||_b(ie)},ee={connect(){const ie=s.getState().gl;ie.xr.addEventListener("sessionstart",Z),ie.xr.addEventListener("sessionend",Z)},disconnect(){const ie=s.getState().gl;ie.xr.removeEventListener("sessionstart",Z),ie.xr.removeEventListener("sessionend",Z)}};X.xr&&ee.connect(),G.set({xr:ee})}if(X.shadowMap){const $=X.shadowMap.enabled,Z=X.shadowMap.type;if(X.shadowMap.enabled=!!M,Jt.boo(M))X.shadowMap.type=Kf;else if(Jt.str(M)){var ae;const ee={basic:ZB,percentage:P0,soft:Kf,variance:Ur};X.shadowMap.type=(ae=ee[M])!=null?ae:Kf}else Jt.obj(M)&&Object.assign(X.shadowMap,M);($!==X.shadowMap.enabled||Z!==X.shadowMap.type)&&(X.shadowMap.needsUpdate=!0)}const ne=nD();ne&&("enabled"in ne?ne.enabled=!_:"legacyMode"in ne&&(ne.legacyMode=_)),za(X,{outputEncoding:g?3e3:3001,toneMapping:x?Xr:hS}),G.legacy!==_&&G.set(()=>({legacy:_})),G.linear!==g&&G.set(()=>({linear:g})),G.flat!==x&&G.set(()=>({flat:x})),d&&!Jt.fun(d)&&!cD(d)&&!Jt.equ(d,X,du)&&za(X,d),y&&!G.events.handlers&&G.set({events:y(s)});const z=Q8(t,p);return Jt.equ(z,G.size,du)||G.setSize(z.width,z.height,z.updateStyle,z.top,z.left),R&&G.viewport.dpr!==aD(R)&&G.setDpr(R),G.frameloop!==C&&G.setFrameloop(C),G.onPointerMissed||G.set({onPointerMissed:B}),P&&!Jt.equ(P,G.performance,du)&&G.set($=>({performance:{...$.performance,...P}})),a=S,l=!0,this},render(h){return l||this.configure(),Yg.updateContainer(O.createElement(Z8,{store:s,children:h,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){mD(t)}}}function Z8({store:t,children:e,onCreated:n,rootElement:i}){return wd(()=>{const r=t.getState();r.set(s=>({internal:{...s.internal,active:!0}})),n&&n(r),t.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),O.createElement(fD.Provider,{value:t},e)}function mD(t,e){const n=mc.get(t),i=n==null?void 0:n.fiber;if(i){const r=n==null?void 0:n.store.getState();r&&(r.internal.active=!1),Yg.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),O8(r),mc.delete(t),e&&e(t)}catch{}},500)})}}Yg.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:O.version});function Ms(){return Ms=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ms.apply(this,arguments)}function F1(t,e,n){var i,r,s,o,a;e==null&&(e=100);function l(){var h=Date.now()-o;h<e&&h>=0?i=setTimeout(l,e-h):(i=null,n||(a=t.apply(s,r),s=r=null))}var u=function(){s=this,r=arguments,o=Date.now();var h=n&&!i;return i||(i=setTimeout(l,e)),h&&(a=t.apply(s,r),s=r=null),a};return u.clear=function(){i&&(clearTimeout(i),i=null)},u.flush=function(){i&&(a=t.apply(s,r),s=r=null,clearTimeout(i),i=null)},u}F1.debounce=F1;var $8=F1;const Sb=dA($8);function eW(t){let{debounce:e,scroll:n,polyfill:i,offsetSize:r}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=O.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=O.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?typeof e=="number"?e:e.scroll:null,h=e?typeof e=="number"?e:e.resize:null,d=O.useRef(!1);O.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[p,m,y]=O.useMemo(()=>{const x=()=>{if(!l.current.element)return;const{left:_,top:w,width:C,height:R,bottom:P,right:L,x:b,y:B}=l.current.element.getBoundingClientRect(),G={left:_,top:w,width:C,height:R,bottom:P,right:L,x:b,y:B};l.current.element instanceof HTMLElement&&r&&(G.height=l.current.element.offsetHeight,G.width=l.current.element.offsetWidth),Object.freeze(G),d.current&&!rW(l.current.lastBounds,G)&&a(l.current.lastBounds=G)};return[x,h?Sb(x,h):x,u?Sb(x,u):x]},[a,r,u,h]);function S(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",y,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function M(){l.current.element&&(l.current.resizeObserver=new s(y),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(x=>x.addEventListener("scroll",y,{capture:!0,passive:!0})))}const g=x=>{!x||x===l.current.element||(S(),l.current.element=x,l.current.scrollContainers=gD(x),M())};return nW(y,!!n),tW(m),O.useEffect(()=>{S(),M()},[n,y,m]),O.useEffect(()=>S,[]),[g,o,p]}function tW(t){O.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function nW(t,e){O.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function gD(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(t);return[n,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...gD(t.parentElement)]}const iW=["x","y","top","bottom","left","right","width","height"],rW=(t,e)=>iW.every(n=>t[n]===e[n]);var sW=Object.defineProperty,oW=Object.defineProperties,aW=Object.getOwnPropertyDescriptors,Mb=Object.getOwnPropertySymbols,lW=Object.prototype.hasOwnProperty,uW=Object.prototype.propertyIsEnumerable,wb=(t,e,n)=>e in t?sW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Eb=(t,e)=>{for(var n in e||(e={}))lW.call(e,n)&&wb(t,n,e[n]);if(Mb)for(var n of Mb(e))uW.call(e,n)&&wb(t,n,e[n]);return t},cW=(t,e)=>oW(t,aW(e));function vD(t,e,n){if(!t)return;if(n(t)===!0)return t;let i=e?t.return:t.child;for(;i;){const r=vD(i,e,n);if(r)return r;i=e?null:i.sibling}}function yD(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const nM=yD(O.createContext(null));class xD extends O.Component{render(){return O.createElement(nM.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:Tb,ReactCurrentDispatcher:Cb}=O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function fW(){const t=O.useContext(nM);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=O.useId();return O.useMemo(()=>{for(const i of[Tb==null?void 0:Tb.current,t,t==null?void 0:t.alternate]){if(!i)continue;const r=vD(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[t,e])}function hW(){var t,e;const n=fW(),[i]=O.useState(()=>new Map);i.clear();let r=n;for(;r;){const s=(t=r.type)==null?void 0:t._context;s&&s!==nM&&!i.has(s)&&i.set(s,(e=Cb==null?void 0:Cb.current)==null?void 0:e.readContext(yD(s))),r=r.return}return i}function dW(){const t=hW();return O.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>i=>O.createElement(e,null,O.createElement(n.Provider,cW(Eb({},i),{value:t.get(n)}))),e=>O.createElement(xD,Eb({},e))),[t])}const Tx={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function pW(t){const{handlePointer:e}=H8(t);return{priority:1,enabled:!0,compute(n,i,r){i.pointer.set(n.offsetX/i.size.width*2-1,-(n.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(Tx).reduce((n,i)=>({...n,[i]:e(i)}),{}),update:()=>{var n;const{events:i,internal:r}=t.getState();(n=r.lastEvent)!=null&&n.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:n=>{var i;const{set:r,events:s}=t.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:n}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,u]=Tx[o];n.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:n,events:i}=t.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=Tx[s];i.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const mW=O.forwardRef(function({children:e,fallback:n,resize:i,style:r,gl:s,events:o=pW,eventSource:a,eventPrefix:l,shadows:u,linear:h,flat:d,legacy:p,orthographic:m,frameloop:y,dpr:S,performance:M,raycaster:g,camera:x,onPointerMissed:_,onCreated:w,...C},R){O.useMemo(()=>L8(KI),[]);const P=dW(),[L,b]=eW({scroll:!0,debounce:{scroll:50,resize:0},...i}),B=O.useRef(null),G=O.useRef(null);O.useImperativeHandle(R,()=>B.current);const X=rD(_),[V,Y]=O.useState(!1),[J,ae]=O.useState(!1);if(V)throw V;if(J)throw J;const ne=O.useRef(null);wd(()=>{const H=B.current;b.width>0&&b.height>0&&H&&(ne.current||(ne.current=q8(H)),ne.current.configure({gl:s,events:o,shadows:u,linear:h,flat:d,legacy:p,orthographic:m,frameloop:y,dpr:S,performance:M,raycaster:g,camera:x,size:b,onPointerMissed:(...z)=>X.current==null?void 0:X.current(...z),onCreated:z=>{z.events.connect==null||z.events.connect(a?D8(a)?a.current:a:G.current),l&&z.setEvents({compute:($,Z)=>{const ee=$[l+"X"],ie=$[l+"Y"];Z.pointer.set(ee/Z.size.width*2-1,-(ie/Z.size.height)*2+1),Z.raycaster.setFromCamera(Z.pointer,Z.camera)}}),w==null||w(z)}}),ne.current.render(O.createElement(P,null,O.createElement(sD,{set:ae},O.createElement(O.Suspense,{fallback:O.createElement(F8,{set:Y})},e)))))}),O.useEffect(()=>{const H=B.current;if(H)return()=>mD(H)},[]);const I=a?"none":"auto";return O.createElement("div",Ms({ref:G,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:I,...r}},C),O.createElement("div",{ref:L,style:{width:"100%",height:"100%"}},O.createElement("canvas",{ref:B,style:{display:"block"}},n)))}),iM=O.forwardRef(function(e,n){return O.createElement(xD,null,O.createElement(mW,Ms({},e,{ref:n})))}),Td=new F,rM=new F,gW=new F;function vW(t,e,n){const i=Td.setFromMatrixPosition(t.matrixWorld);i.project(e);const r=n.width/2,s=n.height/2;return[i.x*r+r,-(i.y*s)+s]}function yW(t,e){const n=Td.setFromMatrixPosition(t.matrixWorld),i=rM.setFromMatrixPosition(e.matrixWorld),r=n.sub(i),s=e.getWorldDirection(gW);return r.angleTo(s)>Math.PI/2}function xW(t,e,n,i){const r=Td.setFromMatrixPosition(t.matrixWorld),s=r.clone();s.project(e),n.setFromCamera(s,e);const o=n.intersectObjects(i,!0);if(o.length){const a=o[0].distance;return r.distanceTo(n.ray.origin)<a}return!0}function _W(t,e){if(e instanceof ma)return e.zoom;if(e instanceof yn){const n=Td.setFromMatrixPosition(t.matrixWorld),i=rM.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=n.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function AW(t,e,n){if(e instanceof yn||e instanceof ma){const i=Td.setFromMatrixPosition(t.matrixWorld),r=rM.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),o=(n[1]-n[0])/(e.far-e.near),a=n[1]-o*e.far;return Math.round(o*s+a)}}const N1=t=>Math.abs(t)<1e-10?0:t;function _D(t,e,n=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=N1(e[r]*t.elements[r])+(r!==15?",":")");return n+i}const SW=(t=>e=>_D(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),MW=(t=>(e,n)=>_D(e,t(n),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]);function wW(t){return t&&typeof t=="object"&&"current"in t}const EW=O.forwardRef(({children:t,eps:e=.001,style:n,className:i,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:u=!1,transform:h=!1,occlude:d,onOcclude:p,castShadow:m,receiveShadow:y,material:S,geometry:M,zIndexRange:g=[16777271,0],calculatePosition:x=vW,as:_="div",wrapperClass:w,pointerEvents:C="auto",...R},P)=>{const{gl:L,camera:b,scene:B,size:G,raycaster:X,events:V,viewport:Y}=dg(),[J]=O.useState(()=>document.createElement(_)),ae=O.useRef(),ne=O.useRef(null),I=O.useRef(0),H=O.useRef([0,0]),z=O.useRef(null),$=O.useRef(null),Z=(a==null?void 0:a.current)||V.connected||L.domElement.parentNode,ee=O.useRef(null),ie=O.useRef(!1),Ae=O.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&wW(d[0]),[d]);O.useLayoutEffect(()=>{const ve=L.domElement;d&&d==="blending"?(ve.style.zIndex=`${Math.floor(g[0]/2)}`,ve.style.position="absolute",ve.style.pointerEvents="none"):(ve.style.zIndex=null,ve.style.position=null,ve.style.pointerEvents=null)},[d]),O.useLayoutEffect(()=>{if(ne.current){const ve=ae.current=zB(J);if(B.updateMatrixWorld(),h)J.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const _e=x(ne.current,b,G);J.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${_e[0]}px,${_e[1]}px,0);transform-origin:0 0;`}return Z&&(r?Z.prepend(J):Z.appendChild(J)),()=>{Z&&Z.removeChild(J),ve.unmount()}}},[Z,h]),O.useLayoutEffect(()=>{w&&(J.className=w)},[w]);const ge=O.useMemo(()=>h?{position:"absolute",top:0,left:0,width:G.width,height:G.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-G.height/2,left:-G.width/2,width:G.width,height:G.height},...n},[n,s,o,G,h]),W=O.useMemo(()=>({position:"absolute",pointerEvents:C}),[C]);O.useLayoutEffect(()=>{if(ie.current=!1,h){var ve;(ve=ae.current)==null||ve.render(O.createElement("div",{ref:z,style:ge},O.createElement("div",{ref:$,style:W},O.createElement("div",{ref:P,className:i,style:n,children:t}))))}else{var _e;(_e=ae.current)==null||_e.render(O.createElement("div",{ref:P,style:ge,className:i,children:t}))}});const Ve=O.useRef(!0);bl(ve=>{if(ne.current){b.updateMatrixWorld(),ne.current.updateWorldMatrix(!0,!1);const _e=h?H.current:x(ne.current,b,G);if(h||Math.abs(I.current-b.zoom)>e||Math.abs(H.current[0]-_e[0])>e||Math.abs(H.current[1]-_e[1])>e){const me=yW(ne.current,b);let oe=!1;Ae&&(d!=="blending"?oe=[B]:Array.isArray(d)&&(oe=d.map(He=>He.current)));const xe=Ve.current;if(oe){const He=xW(ne.current,b,X,oe);Ve.current=He&&!me}else Ve.current=!me;xe!==Ve.current&&(p?p(!Ve.current):J.style.display=Ve.current?"block":"none");const De=Math.floor(g[0]/2),Re=d?Ae?[g[0],De]:[De-1,0]:g;if(J.style.zIndex=`${AW(ne.current,b,Re)}`,h){const[He,Qe]=[G.width/2,G.height/2],We=b.projectionMatrix.elements[5]*Qe,{isOrthographicCamera:rt,top:Mt,left:k,bottom:D,right:le}=b,Se=SW(b.matrixWorldInverse),we=rt?`scale(${We})translate(${N1(-(le+k)/2)}px,${N1((Mt+D)/2)}px)`:`translateZ(${We}px)`;let be=ne.current.matrixWorld;u&&(be=b.matrixWorldInverse.clone().transpose().copyPosition(be).scale(ne.current.scale),be.elements[3]=be.elements[7]=be.elements[11]=0,be.elements[15]=1),J.style.width=G.width+"px",J.style.height=G.height+"px",J.style.perspective=rt?"":`${We}px`,z.current&&$.current&&(z.current.style.transform=`${we}${Se}translate(${He}px,${Qe}px)`,$.current.style.transform=MW(be,1/((l||10)/400)))}else{const He=l===void 0?1:_W(ne.current,b)*l;J.style.transform=`translate3d(${_e[0]}px,${_e[1]}px,0) scale(${He})`}H.current=_e,I.current=b.zoom}}if(!Ae&&ee.current&&!ie.current)if(h){if(z.current){const _e=z.current.children[0];if(_e!=null&&_e.clientWidth&&_e!=null&&_e.clientHeight){const{isOrthographicCamera:me}=b;if(me||M)R.scale&&(Array.isArray(R.scale)?R.scale instanceof F?ee.current.scale.copy(R.scale.clone().divideScalar(1)):ee.current.scale.set(1/R.scale[0],1/R.scale[1],1/R.scale[2]):ee.current.scale.setScalar(1/R.scale));else{const oe=(l||10)/400,xe=_e.clientWidth*oe,De=_e.clientHeight*oe;ee.current.scale.set(xe,De,1)}ie.current=!0}}}else{const _e=J.children[0];if(_e!=null&&_e.clientWidth&&_e!=null&&_e.clientHeight){const me=1/Y.factor,oe=_e.clientWidth*me,xe=_e.clientHeight*me;ee.current.scale.set(oe,xe,1),ie.current=!0}ee.current.lookAt(ve.camera.position)}});const Je=O.useMemo(()=>({vertexShader:h?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[h]);return O.createElement("group",Ms({},R,{ref:ne}),d&&!Ae&&O.createElement("mesh",{castShadow:m,receiveShadow:y,ref:ee},M||O.createElement("planeGeometry",null),S||O.createElement("shaderMaterial",{side:yr,vertexShader:Je.vertexShader,fragmentShader:Je.fragmentShader})))});let vf=0;const TW=QI(t=>(Iu.onStart=(e,n,i)=>{t({active:!0,item:e,loaded:n,total:i,progress:(n-vf)/(i-vf)*100})},Iu.onLoad=()=>{t({active:!1})},Iu.onError=e=>t(n=>({errors:[...n.errors,e]})),Iu.onProgress=(e,n,i)=>{n===i&&(vf=i),t({active:!0,item:e,loaded:n,total:i,progress:(n-vf)/(i-vf)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function AD(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function Ku(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Rb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bb(Object(n),!0).forEach(function(i){Ku(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bb(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}new ye;new ye;function SD(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var cr=function t(e,n,i){var r=this;SD(this,t),Ku(this,"dot2",function(s,o){return r.x*s+r.y*o}),Ku(this,"dot3",function(s,o,a){return r.x*s+r.y*o+r.z*a}),this.x=e,this.y=n,this.z=i},CW=[new cr(1,1,0),new cr(-1,1,0),new cr(1,-1,0),new cr(-1,-1,0),new cr(1,0,1),new cr(-1,0,1),new cr(1,0,-1),new cr(-1,0,-1),new cr(0,1,1),new cr(0,-1,1),new cr(0,1,-1),new cr(0,-1,-1)],Pb=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Bb=new Array(512),Lb=new Array(512),bW=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var n=0;n<256;n++){var i;n&1?i=Pb[n]^e&255:i=Pb[n]^e>>8&255,Bb[n]=Bb[n+256]=i,Lb[n]=Lb[n+256]=CW[i%12]}};bW(0);function RW(t){if(typeof t=="number")t=Math.abs(t);else if(typeof t=="string"){var e=t;t=0;for(var n=0;n<e.length;n++)t=(t+(n+1)*(e.charCodeAt(n)%96))%2147483647}return t===0&&(t=311),t}function Ib(t){var e=RW(t);return function(){var n=e*48271%2147483647;return e=n,n/2147483647}}var PW=function t(e){var n=this;SD(this,t),Ku(this,"seed",0),Ku(this,"init",function(i){n.seed=i,n.value=Ib(i)}),Ku(this,"value",Ib(this.seed)),this.init(e)},BW=new PW(Math.random()),LW={radius:1,center:[0,0,0]};function IW(t,e){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:BW,i=Rb(Rb({},LW),e),r=i.radius,s=i.center,o=0;o<t.length;o+=3){var a=Math.pow(n.value(),.3333333333333333),l=n.value()*2-1,u=n.value()*2-1,h=n.value()*2-1,d=Math.sqrt(l*l+u*u+h*h);l=a*l/d,u=a*u/d,h=a*h/d,t[o]=l*r+s[0],t[o+1]=u*r+s[1],t[o+2]=h*r+s[2]}return t}function Db(t,e){if(e===HL)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===Xg||e===mS){let n=t.getIndex();if(n===null){const o=[],a=t.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);t.setIndex(o),n=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const i=n.count-2,r=[];if(n)if(e===Xg)for(let o=1;o<=i;o++)r.push(n.getX(0)),r.push(n.getX(o)),r.push(n.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(n.getX(o)),r.push(n.getX(o+1)),r.push(n.getX(o+2))):(r.push(n.getX(o+2)),r.push(n.getX(o+1)),r.push(n.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}class sM extends xi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new OW(n)}),this.register(function(n){return new jW(n)}),this.register(function(n){return new XW(n)}),this.register(function(n){return new JW(n)}),this.register(function(n){return new GW(n)}),this.register(function(n){return new zW(n)}),this.register(function(n){return new HW(n)}),this.register(function(n){return new VW(n)}),this.register(function(n){return new UW(n)}),this.register(function(n){return new WW(n)}),this.register(function(n){return new kW(n)}),this.register(function(n){return new FW(n)}),this.register(function(n){return new KW(n)}),this.register(function(n){return new YW(n)})}load(e,n,i,r){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=ys.extractUrlBase(e),this.manager.itemStart(e);const a=function(u){r?r(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Qi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,o,function(h){n(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,i,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(ys.decodeText(new Uint8Array(e.slice(0,4)))===MD){try{o[Rt.KHR_BINARY_GLTF]=new QW(e)}catch(h){r&&r(h);return}s=JSON.parse(o[Rt.KHR_BINARY_GLTF].content)}else s=JSON.parse(ys.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new u6(s,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](l);a[h.name]=h,o[h.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const h=s.extensionsUsed[u],d=s.extensionsRequired||[];switch(h){case Rt.KHR_MATERIALS_UNLIT:o[h]=new NW;break;case Rt.KHR_DRACO_MESH_COMPRESSION:o[h]=new qW(s,this.dracoLoader);break;case Rt.KHR_TEXTURE_TRANSFORM:o[h]=new ZW;break;case Rt.KHR_MESH_QUANTIZATION:o[h]=new $W;break;default:d.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,n){const i=this;return new Promise(function(r,s){i.parse(e,n,r,s)})}}function DW(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const Rt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class FW{constructor(e){this.parser=e,this.name=Rt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let i=0,r=n.length;i<r;i++){const s=n[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const n=this.parser,i="light:"+e;let r=n.cache.get(i);if(r)return r;const s=n.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const h=new Be(16777215);l.color!==void 0&&h.fromArray(l.color);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new YS(h),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new KS(h),u.distance=d;break;case"spot":u=new JS(h),u.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,Do(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=n.createUniqueName(l.name||"light_"+e),r=Promise.resolve(u),n.cache.add(i,r),r}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(n.cache,a,l)})}}class NW{constructor(){this.name=Rt.KHR_MATERIALS_UNLIT}getMaterialType(){return Wi}extendParams(e,n,i){const r=[];e.color=new Be(1,1,1),e.opacity=1;const s=n.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Ji))}return Promise.all(r)}}class UW{constructor(e){this.parser=e,this.name=Rt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(n.emissiveIntensity=s),Promise.resolve()}}class OW{constructor(e){this.parser=e,this.name=Rt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:uo}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(n.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new ye(a,a)}return Promise.all(s)}}class kW{constructor(e){this.parser=e,this.name=Rt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:uo}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(n.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(n,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(n.iridescenceIOR=o.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(n,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class GW{constructor(e){this.parser=e,this.name=Rt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:uo}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];n.sheenColor=new Be(0,0,0),n.sheenRoughness=0,n.sheen=1;const o=r.extensions[this.name];return o.sheenColorFactor!==void 0&&n.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(n,"sheenColorMap",o.sheenColorTexture,Ji)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(n,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class zW{constructor(e){this.parser=e,this.name=Rt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:uo}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(n.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(n,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class HW{constructor(e){this.parser=e,this.name=Rt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:uo}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];n.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(n,"thicknessMap",o.thicknessTexture)),n.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return n.attenuationColor=new Be(a[0],a[1],a[2]),Promise.all(s)}}class VW{constructor(e){this.parser=e,this.name=Rt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:uo}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return n.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class WW{constructor(e){this.parser=e,this.name=Rt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:uo}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];n.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(n,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return n.specularColor=new Be(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(i.assignTexture(n,"specularColorMap",o.specularColorTexture,Ji)),Promise.all(s)}}class jW{constructor(e){this.parser=e,this.name=Rt.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=n.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,s.source,o)}}class XW{constructor(e){this.parser=e,this.name=Rt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class JW{constructor(e){this.parser=e,this.name=Rt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class KW{constructor(e){this.name=Rt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,i=n.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,u=r.byteLength||0,h=r.count,d=r.byteStride,p=new Uint8Array(a,l,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,d,p,r.mode,r.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(h*d);return o.decodeGltfBuffer(new Uint8Array(m),h,d,p,r.mode,r.filter),m})})}else return null}}class YW{constructor(e){this.name=Rt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,i=n.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=n.meshes[i.mesh];for(const u of r.primitives)if(u.mode!==dr.TRIANGLES&&u.mode!==dr.TRIANGLE_STRIP&&u.mode!==dr.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const u in o)a.push(this.parser.getDependency("accessor",o[u]).then(h=>(l[u]=h,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{const h=u.pop(),d=h.isGroup?h.children:[h],p=u[0].count,m=[];for(const y of d){const S=new st,M=new F,g=new si,x=new F(1,1,1),_=new BS(y.geometry,y.material,p);for(let w=0;w<p;w++)l.TRANSLATION&&M.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,w),l.SCALE&&x.fromBufferAttribute(l.SCALE,w),_.setMatrixAt(w,S.compose(M,g,x));for(const w in l)w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&y.geometry.setAttribute(w,l[w]);Ct.prototype.copy.call(_,y),this.parser.assignFinalMaterial(_),m.push(_)}return h.isGroup?(h.clear(),h.add(...m),h):m[0]}))}}const MD="glTF",yf=12,Fb={JSON:1313821514,BIN:5130562};class QW{constructor(e){this.name=Rt.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,yf);if(this.header={magic:ys.decodeText(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==MD)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-yf,r=new DataView(e,yf);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===Fb.JSON){const l=new Uint8Array(e,yf+s,o);this.content=ys.decodeText(l)}else if(a===Fb.BIN){const l=yf+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class qW{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Rt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},u={};for(const h in o){const d=U1[h]||h.toLowerCase();a[d]=o[h]}for(const h in e.attributes){const d=U1[h]||h.toLowerCase();if(o[h]!==void 0){const p=i.accessors[e.attributes[h]],m=Yu[p.componentType];u[d]=m.name,l[d]=p.normalized===!0}}return n.getDependency("bufferView",s).then(function(h){return new Promise(function(d){r.decodeDracoFile(h,function(p){for(const m in p.attributes){const y=p.attributes[m],S=l[m];S!==void 0&&(y.normalized=S)}d(p)},a,u)})})}}class ZW{constructor(){this.name=Rt.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class $W{constructor(){this.name=Rt.KHR_MESH_QUANTIZATION}}class wD extends bc{constructor(e,n,i,r){super(e,n,i,r)}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)n[o]=i[s+o];return n}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,h=r-n,d=(i-n)/h,p=d*d,m=p*d,y=e*u,S=y-u,M=-2*m+3*p,g=m-p,x=1-M,_=g-p+d;for(let w=0;w!==a;w++){const C=o[S+w+a],R=o[S+w+l]*h,P=o[y+w+a],L=o[y+w]*h;s[w]=x*C+_*R+M*P+g*L}return s}}const e6=new si;class t6 extends wD{interpolate_(e,n,i,r){const s=super.interpolate_(e,n,i,r);return e6.fromArray(s).normalize().toArray(s),s}}const dr={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Yu={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Nb={9728:dn,9729:rn,9984:Ch,9985:L0,9986:ju,9987:As},Ub={33071:Xn,33648:oc,10497:oa},Cx={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},U1={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...nd.replace(/\D+/g,"")>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},To={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},n6={CUBICSPLINE:void 0,LINEAR:vl,STEP:lc},bx={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function i6(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new Md({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:_s})),t.DefaultMaterial}function xf(t,e,n){for(const i in n.extensions)t[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function Do(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function r6(t,e,n){let i=!1,r=!1,s=!1;for(let u=0,h=e.length;u<h;u++){const d=e[u];if(d.POSITION!==void 0&&(i=!0),d.NORMAL!==void 0&&(r=!0),d.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(t);const o=[],a=[],l=[];for(let u=0,h=e.length;u<h;u++){const d=e[u];if(i){const p=d.POSITION!==void 0?n.getDependency("accessor",d.POSITION):t.attributes.position;o.push(p)}if(r){const p=d.NORMAL!==void 0?n.getDependency("accessor",d.NORMAL):t.attributes.normal;a.push(p)}if(s){const p=d.COLOR_0!==void 0?n.getDependency("accessor",d.COLOR_0):t.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const h=u[0],d=u[1],p=u[2];return i&&(t.morphAttributes.position=h),r&&(t.morphAttributes.normal=d),s&&(t.morphAttributes.color=p),t.morphTargetsRelative=!0,t})}function s6(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,i=e.weights.length;n<i;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++)t.morphTargetDictionary[n[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function o6(t){const e=t.extensions&&t.extensions[Rt.KHR_DRACO_MESH_COMPRESSION];let n;return e?n="draco:"+e.bufferView+":"+e.indices+":"+Ob(e.attributes):n=t.indices+":"+Ob(t.attributes)+":"+t.mode,n}function Ob(t){let e="";const n=Object.keys(t).sort();for(let i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function O1(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function a6(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const l6=new st;class u6{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new DW,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new DI(this.options.manager):this.textureLoader=new zI(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Qi(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};xf(s,a,r),Do(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=n.length;r<s;r++){const o=n[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,i){if(e.refs[n]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[u,h]of o.children.entries())s(h,a.children[u])};return s(i,r),r.name+="_instance_"+e.uses[n]++,r}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let i=0;i<n.length;i++){const r=e(n[i]);if(r)return r}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const i=[];for(let r=0;r<n.length;r++){const s=e(n[r]);s&&i.push(s)}return i}getDependency(e,n){const i=e+":"+n;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(n);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(n)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(n)});break;case"accessor":r=this.loadAccessor(n);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(n)});break;case"buffer":r=this.loadBuffer(n);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(n)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(n)});break;case"skin":r=this.loadSkin(n);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(n)});break;case"camera":r=this.loadCamera(n);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,n)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let n=this.cache.get(e);if(!n){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],i=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[Rt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(ys.resolveURL(n.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(i){const r=n.byteLength||0,s=n.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const n=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=Cx[r.type],a=Yu[r.componentType],l=r.normalized===!0,u=new a(r.count*o);return Promise.resolve(new Dt(u,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=Cx[r.type],u=Yu[r.componentType],h=u.BYTES_PER_ELEMENT,d=h*l,p=r.byteOffset||0,m=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,y=r.normalized===!0;let S,M;if(m&&m!==d){const g=Math.floor(p/m),x="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let _=n.cache.get(x);_||(S=new u(a,g*m,r.count*m/h),_=new ld(S,m/h),n.cache.add(x,_)),M=new aa(_,l,p%m/h,y)}else a===null?S=new u(r.count*l):S=new u(a,p,r.count*l),M=new Dt(S,l,y);if(r.sparse!==void 0){const g=Cx.SCALAR,x=Yu[r.sparse.indices.componentType],_=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,C=new x(o[1],_,r.sparse.count*g),R=new u(o[2],w,r.sparse.count*l);a!==null&&(M=new Dt(M.array.slice(),M.itemSize,M.normalized));for(let P=0,L=C.length;P<L;P++){const b=C[P];if(M.setX(b,R[P*l]),l>=2&&M.setY(b,R[P*l+1]),l>=3&&M.setZ(b,R[P*l+2]),l>=4&&M.setW(b,R[P*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return M})}loadTexture(e){const n=this.json,i=this.options,s=n.textures[e].source,o=n.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,n,i){const r=this,s=this.json,o=s.textures[e],a=s.images[n],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(n,i).then(function(h){h.flipY=!1,h.name=o.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return h.magFilter=Nb[p.magFilter]||rn,h.minFilter=Nb[p.minFilter]||As,h.wrapS=Ub[p.wrapS]||oa,h.wrapT=Ub[p.wrapT]||oa,r.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,n){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(d){u=!0;const p=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(d){return new Promise(function(p,m){let y=p;n.isImageBitmapLoader===!0&&(y=function(S){const M=new $t(S);M.needsUpdate=!0,p(M)}),n.load(ys.resolveURL(d,s.path),y,void 0,m)})}).then(function(d){return u===!0&&a.revokeObjectURL(l),d.userData.mimeType=o.mimeType||a6(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=h,h}assignTexture(e,n,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Rt.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Rt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Rt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(o.encoding=r),e[n]=o,o})}assignFinalMaterial(e){const n=e.geometry;let i=e.material;const r=n.attributes.tangent===void 0,s=n.attributes.color!==void 0,o=n.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new cd,Tn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new ai,Tn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Md}loadMaterial(e){const n=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},u=[];if(l[Rt.KHR_MATERIALS_UNLIT]){const d=r[Rt.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),u.push(d.extendParams(a,s,n))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new Be(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const p=d.baseColorFactor;a.color.fromArray(p),a.opacity=p[3]}d.baseColorTexture!==void 0&&u.push(n.assignTexture(a,"map",d.baseColorTexture,Ji)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(u.push(n.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),u.push(n.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=yr);const h=s.alphaMode||bx.OPAQUE;if(h===bx.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===bx.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Wi&&(u.push(n.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new ye(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}return s.occlusionTexture!==void 0&&o!==Wi&&(u.push(n.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Wi&&(a.emissive=new Be().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==Wi&&u.push(n.assignTexture(a,"emissiveMap",s.emissiveTexture,Ji)),Promise.all(u).then(function(){const d=new o(a);return s.name&&(d.name=s.name),Do(d,s),n.associations.set(d,{materials:e}),s.extensions&&xf(r,d,s),d})}createUniqueName(e){const n=bt.sanitizeNodeName(e||"");let i=n;for(let r=1;this.nodeNamesUsed[i];++r)i=n+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const n=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Rt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(l){return kb(l,a,n)})}const o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],h=o6(u),d=r[h];if(d)o.push(d.promise);else{let p;u.extensions&&u.extensions[Rt.KHR_DRACO_MESH_COMPRESSION]?p=s(u):p=kb(new ht,u,n),r[h]={primitive:u,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const n=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,u=o.length;l<u;l++){const h=o[l].material===void 0?i6(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(n.loadGeometries(o)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),h=l[l.length-1],d=[];for(let m=0,y=h.length;m<y;m++){const S=h[m],M=o[m];let g;const x=u[m];if(M.mode===dr.TRIANGLES||M.mode===dr.TRIANGLE_STRIP||M.mode===dr.TRIANGLE_FAN||M.mode===void 0)g=s.isSkinnedMesh===!0?new PS(S,x):new Gn(S,x),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),M.mode===dr.TRIANGLE_STRIP?g.geometry=Db(g.geometry,mS):M.mode===dr.TRIANGLE_FAN&&(g.geometry=Db(g.geometry,Xg));else if(M.mode===dr.LINES)g=new $r(S,x);else if(M.mode===dr.LINE_STRIP)g=new ro(S,x);else if(M.mode===dr.LINE_LOOP)g=new LS(S,x);else if(M.mode===dr.POINTS)g=new IS(S,x);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+M.mode);Object.keys(g.geometry.morphAttributes).length>0&&s6(g,s),g.name=n.createUniqueName(s.name||"mesh_"+e),Do(g,s),M.extensions&&xf(r,g,M),n.assignFinalMaterial(g),d.push(g)}for(let m=0,y=d.length;m<y;m++)n.associations.set(d[m],{meshes:e,primitives:m});if(d.length===1)return d[0];const p=new Js;n.associations.set(p,{meshes:e});for(let m=0,y=d.length;m<y;m++)p.add(d[m]);return p})}loadCamera(e){let n;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?n=new yn(YL.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(n=new ma(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(n.name=this.createUniqueName(i.name)),Do(n,i),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],i=[];for(let r=0,s=n.joints.length;r<s;r++)i.push(this._loadNodeShallow(n.joints[r]));return n.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",n.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let u=0,h=o.length;u<h;u++){const d=o[u];if(d){a.push(d);const p=new st;s!==null&&p.fromArray(s.array,u*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[u])}return new ud(a,l)})}loadAnimation(e){const i=this.json.animations[e],r=i.name?i.name:"animation_"+e,s=[],o=[],a=[],l=[],u=[];for(let h=0,d=i.channels.length;h<d;h++){const p=i.channels[h],m=i.samplers[p.sampler],y=p.target,S=y.node,M=i.parameters!==void 0?i.parameters[m.input]:m.input,g=i.parameters!==void 0?i.parameters[m.output]:m.output;y.node!==void 0&&(s.push(this.getDependency("node",S)),o.push(this.getDependency("accessor",M)),a.push(this.getDependency("accessor",g)),l.push(m),u.push(y))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(u)]).then(function(h){const d=h[0],p=h[1],m=h[2],y=h[3],S=h[4],M=[];for(let g=0,x=d.length;g<x;g++){const _=d[g],w=p[g],C=m[g],R=y[g],P=S[g];if(_===void 0)continue;_.updateMatrix();let L;switch(To[P.path]){case To.weights:L=hc;break;case To.rotation:L=la;break;case To.position:case To.scale:default:L=dc;break}const b=_.name?_.name:_.uuid,B=R.interpolation!==void 0?n6[R.interpolation]:vl,G=[];To[P.path]===To.weights?_.traverse(function(V){V.morphTargetInfluences&&G.push(V.name?V.name:V.uuid)}):G.push(b);let X=C.array;if(C.normalized){const V=O1(X.constructor),Y=new Float32Array(X.length);for(let J=0,ae=X.length;J<ae;J++)Y[J]=X[J]*V;X=Y}for(let V=0,Y=G.length;V<Y;V++){const J=new L(G[V]+"."+To[P.path],w.array,X,B);R.interpolation==="CUBICSPLINE"&&(J.createInterpolant=function(ne){const I=this instanceof la?t6:wD;return new I(this.times,this.values,this.getValueSize()/3,ne)},J.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),M.push(J)}}return new pc(r,void 0,M)})}createNodeMesh(e){const n=this.json,i=this,r=n.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,u=r.weights.length;l<u;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const n=this.json,i=this,r=n.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let u=0,h=a.length;u<h;u++)o.push(i.getDependency("node",a[u]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(u){const h=u[0],d=u[1],p=u[2];p!==null&&h.traverse(function(m){m.isSkinnedMesh&&m.bind(p,l6)});for(let m=0,y=d.length;m<y;m++)h.add(d[m]);return h})}_loadNodeShallow(e){const n=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=n.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(u){return r._getNodeRef(r.cameraCache,s.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let h;if(s.isBone===!0?h=new k0:u.length>1?h=new Js:u.length===1?h=u[0]:h=new Ct,h!==u[0])for(let d=0,p=u.length;d<p;d++)h.add(u[d]);if(s.name&&(h.userData.name=s.name,h.name=o),Do(h,s),s.extensions&&xf(i,h,s),s.matrix!==void 0){const d=new st;d.fromArray(s.matrix),h.applyMatrix4(d)}else s.translation!==void 0&&h.position.fromArray(s.translation),s.rotation!==void 0&&h.quaternion.fromArray(s.rotation),s.scale!==void 0&&h.scale.fromArray(s.scale);return r.associations.has(h)||r.associations.set(h,{}),r.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const n=this.extensions,i=this.json.scenes[e],r=this,s=new Js;i.name&&(s.name=r.createUniqueName(i.name)),Do(s,i),i.extensions&&xf(n,s,i);const o=i.nodes||[],a=[];for(let l=0,u=o.length;l<u;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let h=0,d=l.length;h<d;h++)s.add(l[h]);const u=h=>{const d=new Map;for(const[p,m]of r.associations)(p instanceof Tn||p instanceof $t)&&d.set(p,m);return h.traverse(p=>{const m=r.associations.get(p);m!=null&&d.set(p,m)}),d};return r.associations=u(s),s})}}function c6(t,e,n){const i=e.attributes,r=new qr;if(i.POSITION!==void 0){const a=n.json.accessors[i.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(r.set(new F(l[0],l[1],l[2]),new F(u[0],u[1],u[2])),a.normalized){const h=O1(Yu[a.componentType]);r.min.multiplyScalar(h),r.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new F,l=new F;for(let u=0,h=s.length;u<h;u++){const d=s[u];if(d.POSITION!==void 0){const p=n.json.accessors[d.POSITION],m=p.min,y=p.max;if(m!==void 0&&y!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(y[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(y[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(y[2]))),p.normalized){const S=O1(Yu[p.componentType]);l.multiplyScalar(S)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}t.boundingBox=r;const o=new Zr;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=o}function kb(t,e,n){const i=e.attributes,r=[];function s(o,a){return n.getDependency("accessor",o).then(function(l){t.setAttribute(a,l)})}for(const o in i){const a=U1[o]||o.toLowerCase();a in t.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!t.index){const o=n.getDependency("accessor",e.indices).then(function(a){t.setIndex(a)});r.push(o)}return Do(t,e),c6(t,e,n),Promise.all(r).then(function(){return e.targets!==void 0?r6(t,e.targets,n):t})}const Rx=new WeakMap;class f6 extends xi{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,i,r){const s=new Qi(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(n).catch(r)},i,r)}decodeDracoFile(e,n,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(n)}decodeGeometry(e,n){for(const l in n.attributeTypes){const u=n.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[l]=u.name)}const i=JSON.stringify(n);if(Rx.has(e)){const l=Rx.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((u,h)=>{r._callbacks[s]={resolve:u,reject:h},r.postMessage({type:"decode",id:s,taskConfig:n,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),Rx.set(e,{key:i,promise:a}),a}_createGeometry(e){const n=new ht;e.index&&n.setIndex(new Dt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;n.setAttribute(s,new Dt(o,a))}return n}_loadLibrary(e,n){const i=new Qi(this.manager);return i.setPath(this.decoderPath),i.setResponseType(n),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=h6.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=n,i._taskLoad+=n,i})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function h6(){let t,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":t=a.decoderConfig,e=new Promise(function(h){t.onModuleLoaded=function(d){h({draco:d})},DracoDecoderModule(t)});break;case"decode":const l=a.buffer,u=a.taskConfig;e.then(h=>{const d=h.draco,p=new d.Decoder,m=new d.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const y=n(d,p,m,u),S=y.attributes.map(M=>M.array.buffer);y.index&&S.push(y.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:y},S)}catch(y){console.error(y),self.postMessage({type:"error",id:a.id,error:y.message})}finally{d.destroy(m),d.destroy(p)}});break}};function n(o,a,l,u){const h=u.attributeIDs,d=u.attributeTypes;let p,m;const y=a.GetEncodedGeometryType(l);if(y===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(y===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const S={index:null,attributes:[]};for(const M in h){const g=self[d[M]];let x,_;if(u.useUniqueIDs)_=h[M],x=a.GetAttributeByUniqueId(p,_);else{if(_=a.GetAttributeId(p,o[h[M]]),_===-1)continue;x=a.GetAttribute(p,_)}S.attributes.push(r(o,a,p,M,g,x))}return y===o.TRIANGULAR_MESH&&(S.index=i(o,a,p)),o.destroy(p),S}function i(o,a,l){const h=l.num_faces()*3,d=h*4,p=o._malloc(d);a.GetTrianglesUInt32Array(l,d,p);const m=new Uint32Array(o.HEAPF32.buffer,p,h).slice();return o._free(p),{array:m,itemSize:1}}function r(o,a,l,u,h,d){const p=d.num_components(),y=l.num_points()*p,S=y*h.BYTES_PER_ELEMENT,M=s(o,h),g=o._malloc(S);a.GetAttributeDataArrayForAllPoints(l,d,M,S,g);const x=new h(o.HEAPF32.buffer,g,y).slice();return o._free(g),{name:u,array:x,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let Um;const Px=()=>{if(Um)return Um;const t="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=t;WebAssembly.validate(n)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(d=>{s=d.instance,s.exports.__wasm_call_ctors()});function a(d){const p=new Uint8Array(d.length);for(let y=0;y<d.length;++y){const S=d.charCodeAt(y);p[y]=S>96?S-71:S>64?S-65:S>47?S+4:S>46?63:62}let m=0;for(let y=0;y<d.length;++y)p[m++]=p[y]<60?i[p[y]]:(p[y]-60)*64+p[++y];return p.buffer.slice(0,m)}function l(d,p,m,y,S,M){const g=s.exports.sbrk,x=m+3&-4,_=g(x*y),w=g(S.length),C=new Uint8Array(s.exports.memory.buffer);C.set(S,w);const R=d(_,m,y,w,S.length);if(R===0&&M&&M(_,x,y),p.set(C.subarray(_,_+m*y)),g(_-g(0)),R!==0)throw new Error(`Malformed buffer data: ${R}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Um={ready:o,supported:!0,decodeVertexBuffer(d,p,m,y,S){l(s.exports.meshopt_decodeVertexBuffer,d,p,m,y,s.exports[u[S]])},decodeIndexBuffer(d,p,m,y){l(s.exports.meshopt_decodeIndexBuffer,d,p,m,y)},decodeIndexSequence(d,p,m,y){l(s.exports.meshopt_decodeIndexSequence,d,p,m,y)},decodeGltfBuffer(d,p,m,y,S,M){l(s.exports[h[S]],d,p,m,y,s.exports[u[M]])}},Um};let Om=null;function ED(t,e,n){return i=>{n&&n(i),t&&(Om||(Om=new f6),Om.setDecoderPath(typeof t=="string"?t:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),i.setDRACOLoader(Om)),e&&i.setMeshoptDecoder(typeof Px=="function"?Px():Px)}}function Cd(t,e=!0,n=!0,i){return Ed(sM,t,ED(e,n,i))}Cd.preload=(t,e=!0,n=!0,i)=>Ed.preload(sM,t,ED(e,n,i));Cd.clear=t=>Ed.clear(sM,t);function d6(t,e){const n=O.useRef(),[i]=O.useState(()=>e?e instanceof Ct?{current:e}:e:n),[r]=O.useState(()=>new jI(void 0));O.useLayoutEffect(()=>void(r._root=i.current),[r,e]);const s=O.useRef({}),[o]=O.useState(()=>{const a={};return t.forEach(l=>Object.defineProperty(a,l.name,{enumerable:!0,get(){if(i.current)return s.current[l.name]||(s.current[l.name]=r.clipAction(l,i.current))},configurable:!0})),{ref:i,clips:t,actions:a,names:t.map(l=>l.name),mixer:r}});return bl((a,l)=>r.update(l)),O.useEffect(()=>{const a=i.current;return()=>{s.current={},Object.values(o.actions).forEach(l=>{a&&r.uncacheAction(l,a)})}},[t]),O.useEffect(()=>()=>{r.stopAllAction()},[r]),o}class p6 extends cd{constructor(e){super(e),this.onBeforeCompile=(n,i)=>{const{isWebGL2:r}=i.capabilities;n.fragmentShader=n.fragmentShader.replace("#include <output_fragment>",`
        ${r?"#include <output_fragment>":`#extension GL_OES_standard_derivatives : enable
#include <output_fragment>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <encodings_fragment>
      `)}}}const m6=O.forwardRef((t,e)=>{const[n]=O.useState(()=>new p6(null));return O.createElement("primitive",Ms({},t,{object:n,ref:e,attach:"material"}))});let Na,_f;const g6=O.createContext(null),Gb=new st,zb=new F,v6=O.forwardRef(({children:t,range:e,limit:n=1e3,...i},r)=>{const s=O.useRef(null),[o,a]=O.useState([]),[[l,u,h]]=O.useState(()=>[new Float32Array(n*3),Float32Array.from({length:n*3},()=>1),Float32Array.from({length:n},()=>1)]);O.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),bl(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),Gb.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(n,e!==void 0?e:n,o.length),Na=0;Na<o.length;Na++)_f=o[Na].current,_f.getWorldPosition(zb).applyMatrix4(Gb),zb.toArray(l,Na*3),s.current.geometry.attributes.position.needsUpdate=!0,_f.matrixWorldNeedsUpdate=!0,_f.color.toArray(u,Na*3),s.current.geometry.attributes.color.needsUpdate=!0,h.set([_f.size],Na),s.current.geometry.attributes.size.needsUpdate=!0});const d=O.useMemo(()=>({getParent:()=>s,subscribe:p=>(a(m=>[...m,p]),()=>a(m=>m.filter(y=>y.current!==p.current)))}),[]);return O.createElement("points",Ms({userData:{instances:o},matrixAutoUpdate:!1,ref:AD([r,s]),raycast:()=>null},i),O.createElement("bufferGeometry",null,O.createElement("bufferAttribute",{attach:"attributes-position",count:l.length/3,array:l,itemSize:3,usage:ol}),O.createElement("bufferAttribute",{attach:"attributes-color",count:u.length/3,array:u,itemSize:3,usage:ol}),O.createElement("bufferAttribute",{attach:"attributes-size",count:h.length,array:h,itemSize:1,usage:ol})),O.createElement(g6.Provider,{value:d},t))}),y6=O.forwardRef(({children:t,positions:e,colors:n,sizes:i,stride:r=3,...s},o)=>{const a=O.useRef(null);return bl(()=>{const l=a.current.geometry.attributes;l.position.needsUpdate=!0,n&&(l.color.needsUpdate=!0),i&&(l.size.needsUpdate=!0)}),O.createElement("points",Ms({ref:AD([o,a])},s),O.createElement("bufferGeometry",null,O.createElement("bufferAttribute",{attach:"attributes-position",count:e.length/r,array:e,itemSize:r,usage:ol}),n&&O.createElement("bufferAttribute",{attach:"attributes-color",count:n.length/r,array:n,itemSize:3,usage:ol}),i&&O.createElement("bufferAttribute",{attach:"attributes-size",count:i.length/r,array:i,itemSize:1,usage:ol})),t)}),x6=O.forwardRef((t,e)=>t.positions instanceof Float32Array?O.createElement(y6,Ms({},t,{ref:e})):O.createElement(v6,Ms({},t,{ref:e})));var TD={exports:{}},_6="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",A6=_6,S6=A6;function CD(){}function bD(){}bD.resetWarningCache=CD;var M6=function(){function t(i,r,s,o,a,l){if(l!==S6){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:bD,resetWarningCache:CD};return n.PropTypes=n,n};TD.exports=M6();var RD=TD.exports;function w6({all:t,scene:e,camera:n}){const i=dg(({gl:o})=>o),r=dg(({camera:o})=>o),s=dg(({scene:o})=>o);return O.useLayoutEffect(()=>{const o=[];t&&(e||s).traverse(u=>{u.visible===!1&&(o.push(u),u.visible=!0)}),i.compile(e||s,n||r);const a=new wS(128);new MS(.01,1e5,a).update(i,e||s),a.dispose(),o.forEach(u=>u.visible=!1)},[]),null}const PD=()=>{const{progress:t}=TW();return j.jsxs(EW,{children:[j.jsx("span",{className:"canvas-load"}),j.jsxs("p",{style:{fontSize:14,color:"#f1f1f1",fontWeight:800,marginTop:40},children:[t.toFixed(2),"%"]})]})},E6=()=>{const t=Cd("./moon/satellite.glb"),e=O.useRef();return bl((n,i)=>{e.current.rotation.x+=i/30,e.current.rotation.z+=i/10,e.current.rotation.y+=i/80}),j.jsx(j.Fragment,{children:j.jsx("primitive",{object:t.scene.children[0],scale:.35,"position-y":0,"rotation-y":0,"rotation-z":.3,"rotation-x":.1,ref:e,castShadow:!0,receiveShadow:!0})})},T6=()=>j.jsxs(iM,{shadows:!0,gl:{preserveDrawingBuffer:!0},camera:{fov:45,near:.1,far:200,position:[-4,3,6]},children:[j.jsx("ambientLight",{intensity:.6,color:8280040}),j.jsx("hemisphereLight",{intensity:.2,skyColor:6422762}),j.jsx("directionalLight",{position:[0,-.5,20],color:16777215,intensity:1,castShadow:!0,"shadow-mapSize":[1024,1024]}),j.jsx(O.Suspense,{fallback:j.jsx(PD,{}),children:j.jsx(E6,{})})]}),C6=t=>{const e=O.useRef(),[n]=O.useState(()=>IW(new Float32Array(5e3),{radius:1.2}));return bl((i,r)=>{e.current.rotation.x-=r/70,e.current.rotation.y-=r/75}),j.jsx("group",{rotation:[0,Math.PI/4,0],children:j.jsx(x6,{ref:e,positions:n,stride:3,frustumCulled:!0,...t,children:j.jsx(m6,{transparent:!0,color:"#f272c8",size:.002,sizeAttenuation:!0,depthWrite:!1})})})},b6=()=>j.jsx("div",{className:"w-full h-auto absolute inset-0 z-[-1]",children:j.jsxs(iM,{camera:{position:[0,0,1]},children:[j.jsx(O.Suspense,{fallback:null,children:j.jsx(C6,{})}),j.jsx(w6,{all:!0})]})});var R6=Object.defineProperty,P6=(t,e)=>{for(var n in e)R6(t,n,{get:e[n],enumerable:!0})},wr={};P6(wr,{assign:()=>I6,colors:()=>$o,createStringInterpolator:()=>hM,skipAnimation:()=>UD,to:()=>ND,willAdvance:()=>dM});var oM=Rd(),at=t=>bd(t,oM),aM=Rd();at.write=t=>bd(t,aM);var j0=Rd();at.onStart=t=>bd(t,j0);var lM=Rd();at.onFrame=t=>bd(t,lM);var uM=Rd();at.onFinish=t=>bd(t,uM);var Qu=[];at.setTimeout=(t,e)=>{const n=at.now()+e,i=()=>{const s=Qu.findIndex(o=>o.cancel==i);~s&&Qu.splice(s,1),Ho-=~s?1:0},r={time:n,handler:t,cancel:i};return Qu.splice(BD(n),0,r),Ho+=1,LD(),r};var BD=t=>~(~Qu.findIndex(e=>e.time>t)||~Qu.length);at.cancel=t=>{j0.delete(t),lM.delete(t),uM.delete(t),oM.delete(t),aM.delete(t)};at.sync=t=>{k1=!0,at.batchedUpdates(t),k1=!1};at.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,at.onStart(n)}return i.handler=t,i.cancel=()=>{j0.delete(n),e=null},i};var cM=typeof window<"u"?window.requestAnimationFrame:()=>{};at.use=t=>cM=t;at.now=typeof performance<"u"?()=>performance.now():Date.now;at.batchedUpdates=t=>t();at.catch=console.error;at.frameLoop="always";at.advance=()=>{at.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):DD()};var zo=-1,Ho=0,k1=!1;function bd(t,e){k1?(e.delete(t),t(0)):(e.add(t),LD())}function LD(){zo<0&&(zo=0,at.frameLoop!=="demand"&&cM(ID))}function B6(){zo=-1}function ID(){~zo&&(cM(ID),at.batchedUpdates(DD))}function DD(){const t=zo;zo=at.now();const e=BD(zo);if(e&&(FD(Qu.splice(0,e),n=>n.handler()),Ho-=e),!Ho){B6();return}j0.flush(),oM.flush(t?Math.min(64,zo-t):16.667),lM.flush(),aM.flush(),uM.flush()}function Rd(){let t=new Set,e=t;return{add(n){Ho+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Ho-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Ho-=e.size,FD(e,i=>i(n)&&t.add(i)),Ho+=t.size,e=t)}}}function FD(t,e){t.forEach(n=>{try{e(n)}catch(i){at.catch(i)}})}function G1(){}var L6=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Ce={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Gs(t,e){if(Ce.arr(t)){if(!Ce.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var Et=(t,e)=>t.forEach(e);function ws(t,e,n){if(Ce.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var ji=t=>Ce.und(t)?[]:Ce.arr(t)?t:[t];function $f(t,e){if(t.size){const n=Array.from(t);t.clear(),Et(n,e)}}var Nf=(t,...e)=>$f(t,n=>n(...e)),fM=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),hM,ND,$o=null,UD=!1,dM=G1,I6=t=>{t.to&&(ND=t.to),t.now&&(at.now=t.now),t.colors!==void 0&&($o=t.colors),t.skipAnimation!=null&&(UD=t.skipAnimation),t.createStringInterpolator&&(hM=t.createStringInterpolator),t.requestAnimationFrame&&at.use(t.requestAnimationFrame),t.batchedUpdates&&(at.batchedUpdates=t.batchedUpdates),t.willAdvance&&(dM=t.willAdvance),t.frameLoop&&(at.frameLoop=t.frameLoop)},eh=new Set,xr=[],Bx=[],Qg=0,X0={get idle(){return!eh.size&&!xr.length},start(t){Qg>t.priority?(eh.add(t),at.onStart(D6)):(OD(t),at(z1))},advance:z1,sort(t){if(Qg)at.onFrame(()=>X0.sort(t));else{const e=xr.indexOf(t);~e&&(xr.splice(e,1),kD(t))}},clear(){xr=[],eh.clear()}};function D6(){eh.forEach(OD),eh.clear(),at(z1)}function OD(t){xr.includes(t)||kD(t)}function kD(t){xr.splice(F6(xr,e=>e.priority>t.priority),0,t)}function z1(t){const e=Bx;for(let n=0;n<xr.length;n++){const i=xr[n];Qg=i.priority,i.idle||(dM(i),i.advance(t),i.idle||e.push(i))}return Qg=0,Bx=xr,Bx.length=0,xr=e,xr.length>0}function F6(t,e){const n=t.findIndex(e);return n<0?t.length:n}var N6=(t,e,n)=>Math.min(Math.max(n,t),e),GD={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Hr="[-+]?\\d*\\.?\\d+",qg=Hr+"%";function J0(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var U6=new RegExp("rgb"+J0(Hr,Hr,Hr)),O6=new RegExp("rgba"+J0(Hr,Hr,Hr,Hr)),k6=new RegExp("hsl"+J0(Hr,qg,qg)),G6=new RegExp("hsla"+J0(Hr,qg,qg,Hr)),z6=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,H6=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,V6=/^#([0-9a-fA-F]{6})$/,W6=/^#([0-9a-fA-F]{8})$/;function j6(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=V6.exec(t))?parseInt(e[1]+"ff",16)>>>0:$o&&$o[t]!==void 0?$o[t]:(e=U6.exec(t))?(pu(e[1])<<24|pu(e[2])<<16|pu(e[3])<<8|255)>>>0:(e=O6.exec(t))?(pu(e[1])<<24|pu(e[2])<<16|pu(e[3])<<8|Wb(e[4]))>>>0:(e=z6.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=W6.exec(t))?parseInt(e[1],16)>>>0:(e=H6.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=k6.exec(t))?(Hb(Vb(e[1]),km(e[2]),km(e[3]))|255)>>>0:(e=G6.exec(t))?(Hb(Vb(e[1]),km(e[2]),km(e[3]))|Wb(e[4]))>>>0:null}function Lx(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Hb(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=Lx(r,i,t+1/3),o=Lx(r,i,t),a=Lx(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function pu(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function Vb(t){return(parseFloat(t)%360+360)%360/360}function Wb(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function km(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function jb(t){let e=j6(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var Nh=(t,e,n)=>{if(Ce.fun(t))return t;if(Ce.arr(t))return Nh({range:t,output:e,extrapolate:n});if(Ce.str(t.output[0]))return hM(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(u=>u);return u=>{const h=J6(u,s);return X6(u,s[h],s[h+1],r[h],r[h+1],l,o,a,i.map)}};function X6(t,e,n,i,r,s,o,a,l){let u=l?l(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(a==="identity")return u;a==="clamp"&&(u=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=s(u),i===-1/0?u=-u:r===1/0?u=u+i:u=u*(r-i)+i,u)}function J6(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var K6=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return N6(0,1,r/t)},Zg=1.70158,Gm=Zg*1.525,Xb=Zg+1,Jb=2*Math.PI/3,Kb=2*Math.PI/4.5,zm=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,Y6={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>Xb*t*t*t-Zg*t*t,easeOutBack:t=>1+Xb*Math.pow(t-1,3)+Zg*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Gm+1)*2*t-Gm)/2:(Math.pow(2*t-2,2)*((Gm+1)*(t*2-2)+Gm)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*Jb),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*Jb)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*Kb))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*Kb)/2+1,easeInBounce:t=>1-zm(1-t),easeOutBounce:zm,easeInOutBounce:t=>t<.5?(1-zm(1-2*t))/2:(1+zm(2*t-1))/2,steps:K6},Uh=Symbol.for("FluidValue.get"),gc=Symbol.for("FluidValue.observers"),vr=t=>!!(t&&t[Uh]),Ei=t=>t&&t[Uh]?t[Uh]():t,Yb=t=>t[gc]||null;function Q6(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Oh(t,e){const n=t[gc];n&&n.forEach(i=>{Q6(i,e)})}var zD=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");q6(this,t)}},q6=(t,e)=>HD(t,Uh,e);function Rc(t,e){if(t[Uh]){let n=t[gc];n||HD(t,gc,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function kh(t,e){const n=t[gc];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[gc]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var HD=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),pg=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Z6=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Qb=new RegExp(`(${pg.source})(%|[a-z]+)`,"i"),$6=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,K0=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,VD=t=>{const[e,n]=ej(t);if(!e||fM())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&K0.test(n))return VD(n);if(n)return n}return t},ej=t=>{const e=K0.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},Ix,tj=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,pM=t=>{Ix||(Ix=$o?new RegExp(`(${Object.keys($o).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>Ei(s).replace(K0,VD).replace(Z6,jb).replace(Ix,jb)),n=e.map(s=>s.match(pg).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Nh({...t,output:s}));return s=>{var l;const o=!Qb.test(e[0])&&((l=e.find(u=>Qb.test(u)))==null?void 0:l.replace(pg,""));let a=0;return e[0].replace(pg,()=>`${r[a++](s)}${o||""}`).replace($6,tj)}},mM="react-spring: ",WD=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${mM}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},nj=WD(console.warn);function ij(){nj(`${mM}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var rj=WD(console.warn);function sj(){rj(`${mM}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Y0(t){return Ce.str(t)&&(t[0]=="#"||/\d/.test(t)||!fM()&&K0.test(t)||t in($o||{}))}var mu,mg=new WeakMap,oj=t=>t.forEach(({target:e,contentRect:n})=>{var i;return(i=mg.get(e))==null?void 0:i.forEach(r=>r(n))});function aj(t,e){mu||typeof ResizeObserver<"u"&&(mu=new ResizeObserver(oj));let n=mg.get(e);return n||(n=new Set,mg.set(e,n)),n.add(t),mu&&mu.observe(e),()=>{const i=mg.get(e);i&&(i.delete(t),!i.size&&mu&&mu.unobserve(e))}}var gg=new Set,Af,lj=()=>{const t=()=>{gg.forEach(e=>e({width:window.innerWidth,height:window.innerHeight}))};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},uj=t=>(gg.add(t),Af||(Af=lj()),()=>{gg.delete(t),!gg.size&&Af&&(Af(),Af=void 0)}),cj=(t,{container:e=document.documentElement}={})=>e===document.documentElement?uj(t):aj(t,e),fj=(t,e,n)=>e-t===0?1:(n-t)/(e-t),hj={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}},dj=class{constructor(t,e){this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=n=>{const i=this.info[n],{length:r,position:s}=hj[n];i.current=this.container[`scroll${s}`],i.scrollLength=this.container["scroll"+r]-this.container["client"+r],i.progress=fj(0,i.scrollLength,i.current)},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=t,this.container=e,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}},Sf=new WeakMap,qb=new WeakMap,Dx=new WeakMap,Zb=t=>t===document.documentElement?window:t,pj=(t,{container:e=document.documentElement}={})=>{let n=Dx.get(e);n||(n=new Set,Dx.set(e,n));const i=new dj(t,e);if(n.add(i),!Sf.has(e)){const s=()=>(n==null||n.forEach(a=>a.advance()),!0);Sf.set(e,s);const o=Zb(e);window.addEventListener("resize",s,{passive:!0}),e!==document.documentElement&&qb.set(e,cj(s,{container:e})),o.addEventListener("scroll",s,{passive:!0})}const r=Sf.get(e);return at(r),()=>{var a;at.cancel(r);const s=Dx.get(e);if(!s||(s.delete(i),s.size))return;const o=Sf.get(e);Sf.delete(e),o&&(Zb(e).removeEventListener("scroll",o),window.removeEventListener("resize",o),(a=qb.get(e))==null||a())}},Q0=fM()?O.useEffect:O.useLayoutEffect,mj=()=>{const t=O.useRef(!1);return Q0(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function jD(){const t=O.useState()[1],e=mj();return()=>{e.current&&t(Math.random())}}function gj(t,e){const[n]=O.useState(()=>({inputs:e,result:t()})),i=O.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&vj(e,s.inputs)||(s={inputs:e,result:t()}):s=n,O.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function vj(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var XD=t=>O.useEffect(t,yj),yj=[];function $b(t){const e=O.useRef();return O.useEffect(()=>{e.current=t}),e.current}var Gh=Symbol.for("Animated:node"),xj=t=>!!t&&t[Gh]===t,ds=t=>t&&t[Gh],gM=(t,e)=>L6(t,Gh,e),q0=t=>t&&t[Gh]&&t[Gh].getPayload(),JD=class{constructor(){gM(this,this)}getPayload(){return this.payload||[]}},Pd=class extends JD{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,Ce.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new Pd(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return Ce.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,Ce.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},zh=class extends Pd{constructor(t){super(0),this._string=null,this._toString=Nh({output:[t,t]})}static create(t){return new zh(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(Ce.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Nh({output:[this.getValue(),t]})),this._value=0,super.reset()}},$g={dependencies:null},Z0=class extends JD{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return ws(this.source,(n,i)=>{xj(n)?e[i]=n.getValue(t):vr(n)?e[i]=Ei(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&Et(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return ws(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){$g.dependencies&&vr(t)&&$g.dependencies.add(t);const e=q0(t);e&&Et(e,n=>this.add(n))}},KD=class extends Z0{constructor(t){super(t)}static create(t){return new KD(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(_j)),!0)}};function _j(t){return(Y0(t)?zh:Pd).create(t)}function H1(t){const e=ds(t);return e?e.constructor:Ce.arr(t)?KD:Y0(t)?zh:Pd}var eR=(t,e)=>{const n=!Ce.fun(t)||t.prototype&&t.prototype.isReactComponent;return O.forwardRef((i,r)=>{const s=O.useRef(null),o=n&&O.useCallback(y=>{s.current=Mj(r,y)},[r]),[a,l]=Sj(i,e),u=jD(),h=()=>{const y=s.current;if(n&&!y)return;(y?e.applyAnimatedValues(y,a.getValue(!0)):!1)===!1&&u()},d=new Aj(h,l),p=O.useRef();Q0(()=>(p.current=d,Et(l,y=>Rc(y,d)),()=>{p.current&&(Et(p.current.deps,y=>kh(y,p.current)),at.cancel(p.current.update))})),O.useEffect(h,[]),XD(()=>()=>{const y=p.current;Et(y.deps,S=>kh(S,y))});const m=e.getComponentProps(a.getValue());return O.createElement(t,{...m,ref:o})})},Aj=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&at.write(this.update)}};function Sj(t,e){const n=new Set;return $g.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new Z0(t),$g.dependencies=null,[t,n]}function Mj(t,e){return t&&(Ce.fun(t)?t(e):t.current=e),e}var tR=Symbol.for("AnimatedComponent"),YD=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new Z0(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=nR(o)||"Anonymous";return Ce.str(o)?o=s[o]||(s[o]=eR(o,r)):o=o[tR]||(o[tR]=eR(o,r)),o.displayName=`Animated(${a})`,o};return ws(t,(o,a)=>{Ce.arr(t)&&(a=nR(o)),s[a]=s(o)}),{animated:s}},nR=t=>Ce.str(t)?t:t&&Ce.str(t.displayName)?t.displayName:Ce.fun(t)&&t.name||null;function Xa(t,...e){return Ce.fun(t)?t(...e):t}var th=(t,e)=>t===!0||!!(e&&t&&(Ce.fun(t)?t(e):ji(t).includes(e))),QD=(t,e)=>Ce.obj(t)?e&&t[e]:t,qD=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,wj=t=>t,vM=(t,e=wj)=>{let n=Ej;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);Ce.und(s)||(i[r]=s)}return i},Ej=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Tj={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Cj(t){const e={};let n=0;if(ws(t,(i,r)=>{Tj[r]||(e[r]=i,n++)}),n)return e}function ZD(t){const e=Cj(t);if(e){const n={to:e};return ws(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function Hh(t){return t=Ei(t),Ce.arr(t)?t.map(Hh):Y0(t)?wr.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function bj(t){for(const e in t)return!0;return!1}function V1(t){return Ce.fun(t)||Ce.arr(t)&&Ce.obj(t[0])}function Rj(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function Pj(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var Bj={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},W1={...Bj.default,mass:1,damping:1,easing:Y6.linear,clamp:!1},Lj=class{constructor(){this.velocity=0,Object.assign(this,W1)}};function Ij(t,e,n){n&&(n={...n},iR(n,e),e={...n,...e}),iR(t,e),Object.assign(t,e);for(const o in W1)t[o]==null&&(t[o]=W1[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return Ce.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function iR(t,e){if(!Ce.und(e.decay))t.duration=void 0;else{const n=!Ce.und(e.tension)||!Ce.und(e.friction);(n||!Ce.und(e.frequency)||!Ce.und(e.damping)||!Ce.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var rR=[],Dj=class{constructor(){this.changed=!1,this.values=rR,this.toValues=null,this.fromValues=rR,this.config=new Lj,this.immediate=!1}};function $D(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,u,h=th(n.cancel??(i==null?void 0:i.cancel),e);if(h)m();else{Ce.und(n.pause)||(r.paused=th(n.pause,e));let y=i==null?void 0:i.pause;y!==!0&&(y=r.paused||th(y,e)),l=Xa(n.delay||0,e),y?(r.resumeQueue.add(p),s.pause()):(s.resume(),p())}function d(){r.resumeQueue.add(p),r.timeouts.delete(u),u.cancel(),l=u.time-at.now()}function p(){l>0&&!wr.skipAnimation?(r.delayed=!0,u=at.setTimeout(m,l),r.pauseQueue.add(d),r.timeouts.add(u)):m()}function m(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(u),t<=(r.cancelId||0)&&(h=!0);try{s.start({...n,callId:t,cancel:h},o)}catch(y){a(y)}}})}var yM=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?qu(t.get()):e.every(n=>n.noop)?eF(t.get()):zr(t.get(),e.every(n=>n.finished)),eF=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),zr=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),qu=t=>({value:t,cancelled:!0,finished:!1});function tF(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const u=vM(e,(M,g)=>g==="onRest"?void 0:M);let h,d;const p=new Promise((M,g)=>(h=M,d=g)),m=M=>{const g=r<=(n.cancelId||0)&&qu(i)||r!==n.asyncId&&zr(i,!1);if(g)throw M.result=g,d(M),M},y=(M,g)=>{const x=new sR,_=new oR;return(async()=>{if(wr.skipAnimation)throw Vh(n),_.result=zr(i,!1),d(_),_;m(x);const w=Ce.obj(M)?{...M}:{...g,to:M};w.parentId=r,ws(u,(R,P)=>{Ce.und(w[P])&&(w[P]=R)});const C=await i.start(w);return m(x),n.paused&&await new Promise(R=>{n.resumeQueue.add(R)}),C})()};let S;if(wr.skipAnimation)return Vh(n),zr(i,!1);try{let M;Ce.arr(t)?M=(async g=>{for(const x of g)await y(x)})(t):M=Promise.resolve(t(y,i.stop.bind(i))),await Promise.all([M.then(h),p]),S=zr(i.get(),!0,!1)}catch(M){if(M instanceof sR)S=M.result;else if(M instanceof oR)S=M.result;else throw M}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return Ce.fun(o)&&at.batchedUpdates(()=>{o(S,i,i.item)}),S})()}function Vh(t,e){$f(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var sR=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},oR=class extends Error{constructor(){super("SkipAnimationSignal")}},j1=t=>t instanceof xM,Fj=1,xM=class extends zD{constructor(){super(...arguments),this.id=Fj++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=ds(this);return t&&t.getValue()}to(...t){return wr.to(this,t)}interpolate(...t){return ij(),wr.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Oh(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||X0.sort(this),Oh(this,{type:"priority",parent:this,priority:t})}},_l=Symbol.for("SpringPhase"),nF=1,X1=2,J1=4,Fx=t=>(t[_l]&nF)>0,Co=t=>(t[_l]&X1)>0,Mf=t=>(t[_l]&J1)>0,aR=(t,e)=>e?t[_l]|=X1|nF:t[_l]&=~X1,lR=(t,e)=>e?t[_l]|=J1:t[_l]&=~J1,Nj=class extends xM{constructor(t,e){if(super(),this.animation=new Dj,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Ce.und(t)||!Ce.und(e)){const n=Ce.obj(t)?{...t}:{...e,from:t};Ce.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Co(this)||this._state.asyncTo)||Mf(this)}get goal(){return Ei(this.animation.to)}get velocity(){const t=ds(this);return t instanceof Pd?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return Fx(this)}get isAnimating(){return Co(this)}get isPaused(){return Mf(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=q0(i.to);!o&&vr(i.to)&&(r=ji(Ei(i.to))),i.values.forEach((u,h)=>{if(u.done)return;const d=u.constructor==zh?1:o?o[h].lastPosition:r[h];let p=i.immediate,m=d;if(!p){if(m=u.lastPosition,s.tension<=0){u.done=!0;return}let y=u.elapsedTime+=t;const S=i.fromValues[h],M=u.v0!=null?u.v0:u.v0=Ce.arr(s.velocity)?s.velocity[h]:s.velocity;let g;const x=s.precision||(S==d?.005:Math.min(1,Math.abs(d-S)*.001));if(Ce.und(s.duration))if(s.decay){const _=s.decay===!0?.998:s.decay,w=Math.exp(-(1-_)*y);m=S+M/(1-_)*(1-w),p=Math.abs(u.lastPosition-m)<=x,g=M*w}else{g=u.lastVelocity==null?M:u.lastVelocity;const _=s.restVelocity||x/10,w=s.clamp?0:s.bounce,C=!Ce.und(w),R=S==d?u.v0>0:S<d;let P,L=!1;const b=1,B=Math.ceil(t/b);for(let G=0;G<B&&(P=Math.abs(g)>_,!(!P&&(p=Math.abs(d-m)<=x,p)));++G){C&&(L=m==d||m>d==R,L&&(g=-g*w,m=d));const X=-s.tension*1e-6*(m-d),V=-s.friction*.001*g,Y=(X+V)/s.mass;g=g+Y*b,m=m+g*b}}else{let _=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,y=u.elapsedTime+=t)),_=(s.progress||0)+y/this._memoizedDuration,_=_>1?1:_<0?0:_,u.durationProgress=_),m=S+s.easing(_)*(d-S),g=(m-u.lastPosition)/t,p=_==1}u.lastVelocity=g,Number.isNaN(m)&&(console.warn("Got NaN while animating:",this),p=!0)}o&&!o[h].done&&(p=!1),p?u.done=!0:e=!1,u.setValue(m,s.round)&&(n=!0)});const a=ds(this),l=a.getValue();if(e){const u=Ei(i.to);(l!==u||n)&&!s.decay?(a.setValue(u),this._onChange(u)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return at.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Co(this)){const{to:t,config:e}=this.animation;at.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return Ce.und(t)?(n=this.queue||[],this.queue=[]):n=[Ce.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>yM(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Vh(this._state,t&&this._lastCallId),at.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=Ce.obj(n)?n[e]:n,(n==null||V1(n))&&(n=void 0),i=Ce.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return Fx(this)||(t.reverse&&([n,i]=[i,n]),i=Ei(i),Ce.und(i)?ds(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,vM(t,(o,a)=>/^on/.test(a)?QD(o,n):o)),cR(this,t,"onProps"),Ef(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return $D(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{Mf(this)||(lR(this,!0),Nf(s.pauseQueue),Ef(this,"onPause",zr(this,wf(this,this.animation.to)),this))},resume:()=>{Mf(this)&&(lR(this,!1),Co(this)&&this._resume(),Nf(s.resumeQueue),Ef(this,"onResume",zr(this,wf(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=iF(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(qu(this));const i=!Ce.und(t.to),r=!Ce.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(qu(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:u}=a;let{to:h=l,from:d=u}=t;r&&!i&&(!e.default||Ce.und(h))&&(h=d),e.reverse&&([h,d]=[d,h]);const p=!Gs(d,u);p&&(a.from=d),d=Ei(d);const m=!Gs(h,l);m&&this._focus(h);const y=V1(e.to),{config:S}=a,{decay:M,velocity:g}=S;(i||r)&&(S.velocity=0),e.config&&!y&&Ij(S,Xa(e.config,s),e.config!==o.config?Xa(o.config,s):void 0);let x=ds(this);if(!x||Ce.und(h))return n(zr(this,!0));const _=Ce.und(e.reset)?r&&!e.default:!Ce.und(d)&&th(e.reset,s),w=_?d:this.get(),C=Hh(h),R=Ce.num(C)||Ce.arr(C)||Y0(C),P=!y&&(!R||th(o.immediate||e.immediate,s));if(m){const G=H1(h);if(G!==x.constructor)if(P)x=this._set(C);else throw Error(`Cannot animate between ${x.constructor.name} and ${G.name}, as the "to" prop suggests`)}const L=x.constructor;let b=vr(h),B=!1;if(!b){const G=_||!Fx(this)&&p;(m||G)&&(B=Gs(Hh(w),C),b=!B),(!Gs(a.immediate,P)&&!P||!Gs(S.decay,M)||!Gs(S.velocity,g))&&(b=!0)}if(B&&Co(this)&&(a.changed&&!_?b=!0:b||this._stop(l)),!y&&((b||vr(l))&&(a.values=x.getPayload(),a.toValues=vr(h)?null:L==zh?[1]:ji(C)),a.immediate!=P&&(a.immediate=P,!P&&!_&&this._set(l)),b)){const{onRest:G}=a;Et(Oj,V=>cR(this,e,V));const X=zr(this,wf(this,l));Nf(this._pendingCalls,X),this._pendingCalls.add(n),a.changed&&at.batchedUpdates(()=>{var V;a.changed=!_,G==null||G(X,this),_?Xa(o.onRest,X):(V=a.onStart)==null||V.call(a,X,this)})}_&&this._set(w),y?n(tF(e.to,e,this._state,this)):b?this._start():Co(this)&&!m?this._pendingCalls.add(n):n(eF(w))}_focus(t){const e=this.animation;t!==e.to&&(Yb(this)&&this._detach(),e.to=t,Yb(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;vr(e)&&(Rc(e,this),j1(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;vr(t)&&kh(t,this)}_set(t,e=!0){const n=Ei(t);if(!Ce.und(n)){const i=ds(this);if(!i||!Gs(n,i.getValue())){const r=H1(n);!i||i.constructor!=r?gM(this,r.create(n)):i.setValue(n),i&&at.batchedUpdates(()=>{this._onChange(n,e)})}}return ds(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Ef(this,"onStart",zr(this,wf(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),Xa(this.animation.onChange,t,this)),Xa(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;ds(this).reset(Ei(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Co(this)||(aR(this,!0),Mf(this)||this._resume())}_resume(){wr.skipAnimation?this.finish():X0.start(this)}_stop(t,e){if(Co(this)){aR(this,!1);const n=this.animation;Et(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Oh(this,{type:"idle",parent:this});const i=e?qu(this.get()):zr(this.get(),wf(this,t??n.to));Nf(this._pendingCalls,i),n.changed&&(n.changed=!1,Ef(this,"onRest",i,this))}}};function wf(t,e){const n=Hh(e),i=Hh(t.get());return Gs(i,n)}function iF(t,e=t.loop,n=t.to){const i=Xa(e);if(i){const r=i!==!0&&ZD(i),s=(r||t).reverse,o=!r||r.reset;return Wh({...t,loop:e,default:!1,pause:void 0,to:!s||V1(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function Wh(t){const{to:e,from:n}=t=ZD(t),i=new Set;return Ce.obj(e)&&uR(e,i),Ce.obj(n)&&uR(n,i),t.keys=i.size?Array.from(i):null,t}function Uj(t){const e=Wh(t);return Ce.und(e.default)&&(e.default=vM(e)),e}function uR(t,e){ws(t,(n,i)=>n!=null&&e.add(i))}var Oj=["onStart","onRest","onChange","onPause","onResume"];function cR(t,e,n){t.animation[n]=e[n]!==qD(e,n)?QD(e[n],t.key):void 0}function Ef(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var kj=["onStart","onChange","onRest"],Gj=1,zj=class{constructor(t,e){this.id=Gj++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];Ce.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(Wh(t)),this}start(t){let{queue:e}=this;return t?e=ji(t).map(Wh):this.queue=[],this._flush?this._flush(this,e):(lF(this,e),K1(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;Et(ji(e),i=>n[i].stop(!!t))}else Vh(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(Ce.und(t))this.start({pause:!0});else{const e=this.springs;Et(ji(t),n=>e[n].pause())}return this}resume(t){if(Ce.und(t))this.start({pause:!1});else{const e=this.springs;Et(ji(t),n=>e[n].resume())}return this}each(t){ws(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,$f(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!i&&this._started,o=r||s&&n.size?this.get():null;r&&e.size&&$f(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,$f(n,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;at.onFrame(this._onFrame)}};function K1(t,e){return Promise.all(e.map(n=>rF(t,n))).then(n=>yM(t,n))}async function rF(t,e,n){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,u=Ce.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const h=Ce.arr(r)||Ce.fun(r)?r:void 0;h?(e.to=void 0,e.onRest=void 0,u&&(u.onRest=void 0)):Et(kj,S=>{const M=e[S];if(Ce.fun(M)){const g=t._events[S];e[S]=({finished:x,cancelled:_})=>{const w=g.get(M);w?(x||(w.finished=!1),_&&(w.cancelled=!0)):g.set(M,{value:null,finished:x||!1,cancelled:_||!1})},u&&(u[S]=e[S])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,Nf(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const p=(i||Object.keys(t.springs)).map(S=>t.springs[S].start(e)),m=e.cancel===!0||qD(e,"cancel")===!0;(h||m&&d.asyncId)&&p.push($D(++t._lastAsyncId,{props:e,state:d,actions:{pause:G1,resume:G1,start(S,M){m?(Vh(d,t._lastAsyncId),M(qu(t))):(S.onRest=a,M(tF(h,S,d,t)))}}})),d.paused&&await new Promise(S=>{d.resumeQueue.add(S)});const y=yM(t,await Promise.all(p));if(o&&y.finished&&!(n&&y.noop)){const S=iF(e,o,r);if(S)return lF(t,[S]),rF(t,S,!0)}return l&&at.batchedUpdates(()=>l(y,t,t.item)),y}function fR(t,e){const n={...t.springs};return e&&Et(ji(e),i=>{Ce.und(i.keys)&&(i=Wh(i)),Ce.obj(i.to)||(i={...i,to:void 0}),aF(n,i,r=>oF(r))}),sF(t,n),n}function sF(t,e){ws(e,(n,i)=>{t.springs[i]||(t.springs[i]=n,Rc(n,t))})}function oF(t,e){const n=new Nj;return n.key=t,e&&Rc(n,e),n}function aF(t,e,n){e.keys&&Et(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function lF(t,e){Et(e,n=>{aF(t.springs,n,i=>oF(i,t))})}var $0=({children:t,...e})=>{const n=O.useContext(e0),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=gj(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=e0;return O.createElement(s,{value:e},t)},e0=Hj($0,{});$0.Provider=e0.Provider;$0.Consumer=e0.Consumer;function Hj(t,e){return Object.assign(t,O.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var Vj=()=>{const t=[],e=function(i){sj();const r=[];return Et(t,(s,o)=>{if(Ce.und(i))r.push(s.start());else{const a=n(i,s,o);a&&r.push(s.start(a))}}),r};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const r=t.indexOf(i);~r&&t.splice(r,1)},e.pause=function(){return Et(t,i=>i.pause(...arguments)),this},e.resume=function(){return Et(t,i=>i.resume(...arguments)),this},e.set=function(i){Et(t,(r,s)=>{const o=Ce.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return Et(t,(s,o)=>{if(Ce.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return Et(t,i=>i.stop(...arguments)),this},e.update=function(i){return Et(t,(r,s)=>r.update(this._getProps(i,r,s))),this};const n=function(i,r,s){return Ce.fun(i)?i(s,r):i};return e._getProps=n,e};function Wj(t,e,n){const i=Ce.fun(e)&&e;i&&!n&&(n=[]);const r=O.useMemo(()=>i||arguments.length==3?Vj():void 0,[]),s=O.useRef(0),o=jD(),a=O.useMemo(()=>({ctrls:[],queue:[],flush(g,x){const _=fR(g,x);return s.current>0&&!a.queue.length&&!Object.keys(_).some(C=>!g.springs[C])?K1(g,x):new Promise(C=>{sF(g,_),a.queue.push(()=>{C(K1(g,x))}),o()})}}),[]),l=O.useRef([...a.ctrls]),u=[],h=$b(t)||0;O.useMemo(()=>{Et(l.current.slice(t,h),g=>{Rj(g,r),g.stop(!0)}),l.current.length=t,d(h,t)},[t]),O.useMemo(()=>{d(0,Math.min(h,t))},n);function d(g,x){for(let _=g;_<x;_++){const w=l.current[_]||(l.current[_]=new zj(null,a.flush)),C=i?i(_,w):e[_];C&&(u[_]=Uj(C))}}const p=l.current.map((g,x)=>fR(g,u[x])),m=O.useContext($0),y=$b(m),S=m!==y&&bj(m);Q0(()=>{s.current++,a.ctrls=l.current;const{queue:g}=a;g.length&&(a.queue=[],Et(g,x=>x())),Et(l.current,(x,_)=>{r==null||r.add(x),S&&x.start({default:m});const w=u[_];w&&(Pj(x,w.ref),x.ref?x.queue.push(w):x.start(w))})}),XD(()=>()=>{Et(a.ctrls,g=>g.stop(!0))});const M=p.map(g=>({...g}));return r?[M,r]:M}function uF(t,e){const n=Ce.fun(t),[[i],r]=Wj(1,n?t:[t],n?e||[]:e);return n||arguments.length==2?[i,r]:i}var jj=({container:t,...e}={})=>{const[n,i]=uF(()=>({scrollX:0,scrollY:0,scrollXProgress:0,scrollYProgress:0,...e}),[]);return Q0(()=>{const r=pj(({x:s,y:o})=>{i.start({scrollX:s.current,scrollXProgress:s.progress,scrollY:o.current,scrollYProgress:o.progress})},{container:(t==null?void 0:t.current)||void 0});return()=>{Et(Object.values(n),s=>s.stop()),r()}},[]),n},Xj=class extends xM{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Nh(...e);const n=this._get(),i=H1(n);gM(this,i.create(n))}advance(t){const e=this._get(),n=this.get();Gs(e,n)||(ds(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&hR(this._active)&&Nx(this)}_get(){const t=Ce.arr(this.source)?this.source.map(Ei):ji(Ei(this.source));return this.calc(...t)}_start(){this.idle&&!hR(this._active)&&(this.idle=!1,Et(q0(this),t=>{t.done=!1}),wr.skipAnimation?(at.batchedUpdates(()=>this.advance()),Nx(this)):X0.start(this))}_attach(){let t=1;Et(ji(this.source),e=>{vr(e)&&Rc(e,this),j1(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){Et(ji(this.source),t=>{vr(t)&&kh(t,this)}),this._active.clear(),Nx(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=ji(this.source).reduce((e,n)=>Math.max(e,(j1(n)?n.priority:0)+1),0))}};function Jj(t){return t.idle!==!1}function hR(t){return!t.size||Array.from(t).every(Jj)}function Nx(t){t.idle||(t.idle=!0,Et(q0(t),e=>{e.done=!0}),Oh(t,{type:"idle",parent:t}))}wr.assign({createStringInterpolator:pM,to:(t,e)=>new Xj(t,e)});var Kj=["primitive"].concat(Object.keys(KI).filter(t=>/^[A-Z]/.test(t)).map(t=>t[0].toLowerCase()+t.slice(1)));wr.assign({createStringInterpolator:pM,colors:GD,frameLoop:"demand"});J8(()=>{at.advance()});var Yj=YD(Kj,{applyAnimatedValues:za}),Qj=Yj.animated;const qj=({isMobile:t})=>{const e=O.useRef(),n=O.useRef(),i=O.useRef(),r=O.useRef(),[s,o]=O.useState(1),[a,l]=O.useState(0),[u,h]=O.useState(0);O.useState(!1);const{nodes:d,materials:p,animations:m}=Cd("/moon/space_assets.glb"),{mixer:y,actions:S,names:M}=d6(m,e),[g,x]=O.useState(!1),[_,w]=O.useState("Walking"),C=()=>{console.log("is looping"),w("Walking")};return O.useEffect(()=>void(document.body.style.cursor=g?"pointer":"auto"),[g]),O.useEffect(()=>(S[_].reset().fadeIn(.5).play(),_==="Waving"&&y.addEventListener("loop",C),()=>{S[_].fadeOut(.5),y.removeEventListener("loop",C)}),[_,S]),bl((R,P)=>{_==="Walking"?i.current.rotation.x-=P/20:_==="MoonWalk"&&(i.current.rotation.x+=P/20),r.current.rotation.x+=P/2}),j.jsx(Qj.group,{ref:e,dispose:null,rotation:[0,u,0],scale:s,position:[1,a,0],children:j.jsxs("group",{name:"Scene",scale:t?.27:.3,position:t?[-1,-.7,0]:[-.5,-.7,0],children:[j.jsxs("group",{name:"Armature",position:[0,.249,0],scale:.959,ref:n,children:[j.jsx("primitive",{object:d.mixamorigHips}),j.jsxs("group",{name:"Astronaut003",children:[j.jsx("skinnedMesh",{name:"Astronautmesh007",geometry:d.Astronautmesh007.geometry,material:p.Suit,skeleton:d.Astronautmesh007.skeleton,onPointerOver:()=>x(!0),onPointerOut:()=>x(!1),onClick:()=>w("Waving"),receiveShadow:!0}),j.jsx("skinnedMesh",{name:"Astronautmesh007_1",geometry:d.Astronautmesh007_1.geometry,material:p.Visor,skeleton:d.Astronautmesh007_1.skeleton,receiveShadow:!0})]}),j.jsx("skinnedMesh",{name:"Backpack004",geometry:d.Backpack004.geometry,material:p.Suit,skeleton:d.Backpack004.skeleton,receiveShadow:!0})]}),j.jsx("mesh",{name:"Moon",geometry:d.Moon.geometry,material:p.Moon,rotation:[0,-.471,0],scale:6.161,ref:i,receiveShadow:!0}),j.jsxs("group",{name:"Rocket",scale:.65,ref:r,children:[j.jsx("mesh",{name:"Cube",geometry:d.Cube.geometry,material:p.RocketBase,castShadow:!0}),j.jsx("mesh",{name:"Cube_1",geometry:d.Cube_1.geometry,material:p.RocketColor,castShadow:!0}),j.jsx("mesh",{name:"Cube_2",geometry:d.Cube_2.geometry,material:p.RocketGlass,castShadow:!0}),j.jsx("mesh",{name:"RocketDoor",geometry:d.RocketDoor.geometry,material:p.RocketBase,position:[1.619,15.04,.577],rotation:[1.586,.724,1.563],castShadow:!0})]})]})})};Cd.preload("/moon/space_assets.glb");const Zj=()=>{const[t,e]=O.useState(!1);return O.useEffect(()=>{const n=window.matchMedia("(max-width: 500px)");e(n.matches);const i=r=>{console.log("isMobile: "+t),console.log(r),e(r.matches)};return n.addEventListener("change",i),()=>{n.removeEventListener("change",i)}},[]),j.jsxs(iM,{shadows:!0,gl:{preserveDrawingBuffer:!0},camera:{fov:45,near:.1,far:200,position:[-4,3,6]},children:[j.jsx("ambientLight",{intensity:.6,color:8280040}),j.jsx("hemisphereLight",{intensity:.2,skyColor:6422762}),j.jsx("directionalLight",{position:[0,-.5,20],color:16777215,intensity:1,castShadow:!0,"shadow-mapSize":[1024,1024]}),j.jsx(O.Suspense,{fallback:j.jsx(PD,{}),children:j.jsx(qj,{isMobile:t})})]})},cF=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),ev=O.createContext({}),_M=O.createContext(null),tv=typeof document<"u",dR=tv?O.useLayoutEffect:O.useEffect,fF=O.createContext({strict:!1});function $j(t,e,n,i){const{visualElement:r}=O.useContext(ev),s=O.useContext(fF),o=O.useContext(_M),a=O.useContext(cF).reducedMotion,l=O.useRef();i=i||s.renderer,!l.current&&i&&(l.current=i(t,{visualState:e,parent:r,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;return O.useInsertionEffect(()=>{u&&u.update(n,o)}),dR(()=>{u&&u.render()}),O.useEffect(()=>{u&&u.updateFeatures()}),(window.HandoffAppearAnimations?dR:O.useEffect)(()=>{u&&u.animationState&&u.animationState.animateChanges()}),u}function Fu(t){return typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function e7(t,e,n){return O.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Fu(n)&&(n.current=i))},[e])}function jh(t){return typeof t=="string"||Array.isArray(t)}function nv(t){return typeof t=="object"&&typeof t.start=="function"}const AM=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],SM=["initial",...AM];function iv(t){return nv(t.animate)||SM.some(e=>jh(t[e]))}function hF(t){return!!(iv(t)||t.variants)}function t7(t,e){if(iv(t)){const{initial:n,animate:i}=t;return{initial:n===!1||jh(n)?n:void 0,animate:jh(i)?i:void 0}}return t.inherit!==!1?e:{}}function n7(t){const{initial:e,animate:n}=t7(t,O.useContext(ev));return O.useMemo(()=>({initial:e,animate:n}),[pR(e),pR(n)])}function pR(t){return Array.isArray(t)?t.join(" "):t}const mR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Xh={};for(const t in mR)Xh[t]={isEnabled:e=>mR[t].some(n=>!!e[n])};function i7(t){for(const e in t)Xh[e]={...Xh[e],...t[e]}}const dF=O.createContext({}),pF=O.createContext({}),r7=Symbol.for("motionComponentSymbol");function s7({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&i7(t);function s(a,l){let u;const h={...O.useContext(cF),...a,layoutId:o7(a)},{isStatic:d}=h,p=n7(a),m=i(a,d);if(!d&&tv){p.visualElement=$j(r,m,h,e);const y=O.useContext(pF),S=O.useContext(fF).strict;p.visualElement&&(u=p.visualElement.loadFeatures(h,S,t,y))}return O.createElement(ev.Provider,{value:p},u&&p.visualElement?O.createElement(u,{visualElement:p.visualElement,...h}):null,n(r,a,e7(m,p.visualElement,l),m,d,p.visualElement))}const o=O.forwardRef(s);return o[r7]=r,o}function o7({layoutId:t}){const e=O.useContext(dF).id;return e&&t!==void 0?e+"-"+t:t}function a7(t){function e(i,r={}){return s7(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const l7=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function MM(t){return typeof t!="string"||t.includes("-")?!1:!!(l7.indexOf(t)>-1||/[A-Z]/.test(t))}const t0={};function u7(t){Object.assign(t0,t)}const Bd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Rl=new Set(Bd);function mF(t,{layout:e,layoutId:n}){return Rl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!t0[t]||t==="opacity")}const Ii=t=>!!(t&&t.getVelocity),c7={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},f7=Bd.length;function h7(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let s="";for(let o=0;o<f7;o++){const a=Bd[o];if(t[a]!==void 0){const l=c7[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(t,i?"":s):n&&i&&(s="none"),s}const gF=t=>e=>typeof e=="string"&&e.startsWith(t),vF=gF("--"),Y1=gF("var(--"),d7=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,p7=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Al=(t,e,n)=>Math.min(Math.max(n,t),e),Pl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},nh={...Pl,transform:t=>Al(0,1,t)},Hm={...Pl,default:1},ih=t=>Math.round(t*1e5)/1e5,rv=/(-)?([\d]*\.?[\d])+/g,yF=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,m7=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Ld(t){return typeof t=="string"}const Id=t=>({test:e=>Ld(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Po=Id("deg"),xs=Id("%"),it=Id("px"),g7=Id("vh"),v7=Id("vw"),gR={...xs,parse:t=>xs.parse(t)/100,transform:t=>xs.transform(t*100)},vR={...Pl,transform:Math.round},xF={borderWidth:it,borderTopWidth:it,borderRightWidth:it,borderBottomWidth:it,borderLeftWidth:it,borderRadius:it,radius:it,borderTopLeftRadius:it,borderTopRightRadius:it,borderBottomRightRadius:it,borderBottomLeftRadius:it,width:it,maxWidth:it,height:it,maxHeight:it,size:it,top:it,right:it,bottom:it,left:it,padding:it,paddingTop:it,paddingRight:it,paddingBottom:it,paddingLeft:it,margin:it,marginTop:it,marginRight:it,marginBottom:it,marginLeft:it,rotate:Po,rotateX:Po,rotateY:Po,rotateZ:Po,scale:Hm,scaleX:Hm,scaleY:Hm,scaleZ:Hm,skew:Po,skewX:Po,skewY:Po,distance:it,translateX:it,translateY:it,translateZ:it,x:it,y:it,z:it,perspective:it,transformPerspective:it,opacity:nh,originX:gR,originY:gR,originZ:it,zIndex:vR,fillOpacity:nh,strokeOpacity:nh,numOctaves:vR};function wM(t,e,n,i){const{style:r,vars:s,transform:o,transformOrigin:a}=t;let l=!1,u=!1,h=!0;for(const d in e){const p=e[d];if(vF(d)){s[d]=p;continue}const m=xF[d],y=p7(p,m);if(Rl.has(d)){if(l=!0,o[d]=y,!h)continue;p!==(m.default||0)&&(h=!1)}else d.startsWith("origin")?(u=!0,a[d]=y):r[d]=y}if(e.transform||(l||i?r.transform=h7(t.transform,n,h,i):r.transform&&(r.transform="none")),u){const{originX:d="50%",originY:p="50%",originZ:m=0}=a;r.transformOrigin=`${d} ${p} ${m}`}}const EM=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _F(t,e,n){for(const i in e)!Ii(e[i])&&!mF(i,n)&&(t[i]=e[i])}function y7({transformTemplate:t},e,n){return O.useMemo(()=>{const i=EM();return wM(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function x7(t,e,n){const i=t.style||{},r={};return _F(r,i,t),Object.assign(r,y7(t,e,n)),t.transformValues?t.transformValues(r):r}function _7(t,e,n){const i={},r=x7(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const A7=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function n0(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||A7.has(t)}let AF=t=>!n0(t);function S7(t){t&&(AF=e=>e.startsWith("on")?!n0(e):t(e))}try{S7(require("@emotion/is-prop-valid").default)}catch{}function M7(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(AF(r)||n===!0&&n0(r)||!e&&!n0(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function yR(t,e,n){return typeof t=="string"?t:it.transform(e+n*t)}function w7(t,e,n){const i=yR(e,t.x,t.width),r=yR(n,t.y,t.height);return`${i} ${r}`}const E7={offset:"stroke-dashoffset",array:"stroke-dasharray"},T7={offset:"strokeDashoffset",array:"strokeDasharray"};function C7(t,e,n=1,i=0,r=!0){t.pathLength=1;const s=r?E7:T7;t[s.offset]=it.transform(-i);const o=it.transform(e),a=it.transform(n);t[s.array]=`${o} ${a}`}function TM(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},h,d,p){if(wM(t,u,h,p),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:y,dimensions:S}=t;m.transform&&(S&&(y.transform=m.transform),delete m.transform),S&&(r!==void 0||s!==void 0||y.transform)&&(y.transformOrigin=w7(S,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),i!==void 0&&(m.scale=i),o!==void 0&&C7(m,o,a,l,!1)}const SF=()=>({...EM(),attrs:{}}),CM=t=>typeof t=="string"&&t.toLowerCase()==="svg";function b7(t,e,n,i){const r=O.useMemo(()=>{const s=SF();return TM(s,e,{enableHardwareAcceleration:!1},CM(i),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};_F(s,t.style,t),r.style={...s,...r.style}}return r}function R7(t=!1){return(n,i,r,{latestValues:s},o)=>{const l=(MM(n)?b7:_7)(i,s,o,n),h={...M7(i,typeof n=="string",t),...l,ref:r},{children:d}=i,p=O.useMemo(()=>Ii(d)?d.get():d,[d]);return O.createElement(n,{...h,children:p})}}const bM=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function MF(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const s in n)t.style.setProperty(s,n[s])}const wF=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function EF(t,e,n,i){MF(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(wF.has(r)?r:bM(r),e.attrs[r])}function RM(t,e){const{style:n}=t,i={};for(const r in n)(Ii(n[r])||e.style&&Ii(e.style[r])||mF(r,t))&&(i[r]=n[r]);return i}function TF(t,e){const n=RM(t,e);for(const i in t)if(Ii(t[i])||Ii(e[i])){const r=Bd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function PM(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function P7(t){const e=O.useRef(null);return e.current===null&&(e.current=t()),e.current}const i0=t=>Array.isArray(t),B7=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),L7=t=>i0(t)?t[t.length-1]||0:t;function vg(t){const e=Ii(t)?t.get():t;return B7(e)?e.toValue():e}function I7({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,s){const o={latestValues:D7(i,r,s,t),renderState:e()};return n&&(o.mount=a=>n(i,a,o)),o}const CF=t=>(e,n)=>{const i=O.useContext(ev),r=O.useContext(_M),s=()=>I7(t,e,i,r);return n?s():P7(s)};function D7(t,e,n,i){const r={},s=i(t,{});for(const p in s)r[p]=vg(s[p]);let{initial:o,animate:a}=t;const l=iv(t),u=hF(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;return d&&typeof d!="boolean"&&!nv(d)&&(Array.isArray(d)?d:[d]).forEach(m=>{const y=PM(t,m);if(!y)return;const{transitionEnd:S,transition:M,...g}=y;for(const x in g){let _=g[x];if(Array.isArray(_)){const w=h?_.length-1:0;_=_[w]}_!==null&&(r[x]=_)}for(const x in S)r[x]=S[x]}),r}const F7={useVisualState:CF({scrapeMotionValuesFromProps:TF,createRenderState:SF,onMount:(t,e,{renderState:n,latestValues:i})=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}TM(n,i,{enableHardwareAcceleration:!1},CM(e.tagName),t.transformTemplate),EF(e,n)}})},N7={useVisualState:CF({scrapeMotionValuesFromProps:RM,createRenderState:EM})};function U7(t,{forwardMotionProps:e=!1},n,i){return{...MM(t)?F7:N7,preloadedFeatures:n,useRender:R7(e),createVisualElement:i,Component:t}}function Ks(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const bF=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function sv(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const O7=t=>e=>bF(e)&&t(e,sv(e));function qs(t,e,n,i){return Ks(t,e,O7(n),i)}const k7=(t,e)=>n=>e(t(n)),ea=(...t)=>t.reduce(k7);function RF(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const xR=RF("dragHorizontal"),_R=RF("dragVertical");function PF(t){let e=!1;if(t==="y")e=_R();else if(t==="x")e=xR();else{const n=xR(),i=_R();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function BF(){const t=PF(!0);return t?(t(),!1):!0}class va{constructor(e){this.isMounted=!1,this.node=e}update(){}}function G7(t){let e=[],n=[],i=0,r=!1,s=!1;const o=new WeakSet,a={schedule:(l,u=!1,h=!1)=>{const d=h&&r,p=d?e:n;return u&&o.add(l),p.indexOf(l)===-1&&(p.push(l),d&&r&&(i=e.length)),l},cancel:l=>{const u=n.indexOf(l);u!==-1&&n.splice(u,1),o.delete(l)},process:l=>{if(r){s=!0;return}if(r=!0,[e,n]=[n,e],n.length=0,i=e.length,i)for(let u=0;u<i;u++){const h=e[u];h(l),o.has(h)&&(a.schedule(h),t())}r=!1,s&&(s=!1,a.process(l))}};return a}const kn={delta:0,timestamp:0,isProcessing:!1},z7=40;let Q1=!0,Jh=!1;const ov=["read","update","preRender","render","postRender"],Zu=ov.reduce((t,e)=>(t[e]=G7(()=>Jh=!0),t),{}),H7=t=>Zu[t].process(kn),LF=t=>{Jh=!1,kn.delta=Q1?1e3/60:Math.max(Math.min(t-kn.timestamp,z7),1),kn.timestamp=t,kn.isProcessing=!0,ov.forEach(H7),kn.isProcessing=!1,Jh&&(Q1=!1,requestAnimationFrame(LF))},V7=()=>{Jh=!0,Q1=!0,kn.isProcessing||requestAnimationFrame(LF)},an=ov.reduce((t,e)=>{const n=Zu[e];return t[e]=(i,r=!1,s=!1)=>(Jh||V7(),n.schedule(i,r,s)),t},{});function so(t){ov.forEach(e=>Zu[e].cancel(t))}function AR(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(s,o)=>{if(s.type==="touch"||BF())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[i]&&an.update(()=>a[i](s,o))};return qs(t.current,n,r,{passive:!t.getProps()[i]})}class W7 extends va{mount(){this.unmount=ea(AR(this.node,!0),AR(this.node,!1))}unmount(){}}class j7 extends va{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ea(Ks(this.node.current,"focus",()=>this.onFocus()),Ks(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const IF=(t,e)=>e?t===e?!0:IF(t,e.parentElement):!1,Rn=t=>t;function Ux(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,sv(n))}class X7 extends va{constructor(){super(...arguments),this.removeStartListeners=Rn,this.removeEndListeners=Rn,this.removeAccessibleListeners=Rn,this.startPointerPress=(e,n)=>{if(this.removeEndListeners(),this.isPressing)return;const i=this.node.getProps(),s=qs(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h}=this.node.getProps();an.update(()=>{IF(this.node.current,a.target)?u&&u(a,l):h&&h(a,l)})},{passive:!(i.onTap||i.onPointerUp)}),o=qs(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=ea(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Ux("up",(l,u)=>{const{onTap:h}=this.node.getProps();h&&an.update(()=>h(l,u))})};this.removeEndListeners(),this.removeEndListeners=Ks(this.node.current,"keyup",o),Ux("down",(a,l)=>{this.startPress(a,l)})},n=Ks(this.node.current,"keydown",e),i=()=>{this.isPressing&&Ux("cancel",(s,o)=>this.cancelPress(s,o))},r=Ks(this.node.current,"blur",i);this.removeAccessibleListeners=ea(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&an.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!BF()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&an.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=qs(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=Ks(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ea(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const q1=new WeakMap,Ox=new WeakMap,J7=t=>{const e=q1.get(t.target);e&&e(t)},K7=t=>{t.forEach(J7)};function Y7({root:t,...e}){const n=t||document;Ox.has(n)||Ox.set(n,{});const i=Ox.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(K7,{root:t,...e})),i[r]}function Q7(t,e,n){const i=Y7(e);return q1.set(t,n),i.observe(t),()=>{q1.delete(t),i.unobserve(t)}}const q7={some:0,all:1};class Z7 extends va{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:q7[r]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),p=u?h:d;p&&p(l)};return Q7(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some($7(e,n))&&this.startObserver()}unmount(){}}function $7({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const eX={inView:{Feature:Z7},tap:{Feature:X7},focus:{Feature:j7},hover:{Feature:W7}};function DF(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function tX(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function nX(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function av(t,e,n){const i=t.getProps();return PM(i,e,n!==void 0?n:i.custom,tX(t),nX(t))}const iX="framerAppearId",rX="data-"+bM(iX);let sX=Rn,BM=Rn;const ta=t=>t*1e3,Zs=t=>t/1e3,oX={current:!1},FF=t=>Array.isArray(t)&&typeof t[0]=="number";function NF(t){return!!(!t||typeof t=="string"&&UF[t]||FF(t)||Array.isArray(t)&&t.every(NF))}const Uf=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,UF={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Uf([0,.65,.55,1]),circOut:Uf([.55,0,1,.45]),backIn:Uf([.31,.01,.66,-.59]),backOut:Uf([.33,1.53,.69,.99])};function OF(t){if(t)return FF(t)?Uf(t):Array.isArray(t)?t.map(OF):UF[t]}function aX(t,e,n,{delay:i=0,duration:r,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:n};l&&(u.offset=l);const h=OF(a);return Array.isArray(h)&&(u.easing=h),t.animate(u,{delay:i,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const SR={waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate")},kx={},kF={};for(const t in SR)kF[t]=()=>(kx[t]===void 0&&(kx[t]=SR[t]()),kx[t]);function lX(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const GF=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,uX=1e-7,cX=12;function fX(t,e,n,i,r){let s,o,a=0;do o=e+(n-e)/2,s=GF(o,i,r)-t,s>0?n=o:e=o;while(Math.abs(s)>uX&&++a<cX);return o}function Dd(t,e,n,i){if(t===e&&n===i)return Rn;const r=s=>fX(s,0,1,t,n);return s=>s===0||s===1?s:GF(r(s),e,i)}const hX=Dd(.42,0,1,1),dX=Dd(0,0,.58,1),zF=Dd(.42,0,.58,1),pX=t=>Array.isArray(t)&&typeof t[0]!="number",HF=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,VF=t=>e=>1-t(1-e),WF=t=>1-Math.sin(Math.acos(t)),LM=VF(WF),mX=HF(LM),jF=Dd(.33,1.53,.69,.99),IM=VF(jF),gX=HF(IM),vX=t=>(t*=2)<1?.5*IM(t):.5*(2-Math.pow(2,-10*(t-1))),yX={linear:Rn,easeIn:hX,easeInOut:zF,easeOut:dX,circIn:WF,circInOut:mX,circOut:LM,backIn:IM,backInOut:gX,backOut:jF,anticipate:vX},MR=t=>{if(Array.isArray(t)){BM(t.length===4);const[e,n,i,r]=t;return Dd(e,n,i,r)}else if(typeof t=="string")return yX[t];return t},DM=(t,e)=>n=>!!(Ld(n)&&m7.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),XF=(t,e,n)=>i=>{if(!Ld(i))return i;const[r,s,o,a]=i.match(rv);return{[t]:parseFloat(r),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},xX=t=>Al(0,255,t),Gx={...Pl,transform:t=>Math.round(xX(t))},tl={test:DM("rgb","red"),parse:XF("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Gx.transform(t)+", "+Gx.transform(e)+", "+Gx.transform(n)+", "+ih(nh.transform(i))+")"};function _X(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Z1={test:DM("#"),parse:_X,transform:tl.transform},Nu={test:DM("hsl","hue"),parse:XF("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+xs.transform(ih(e))+", "+xs.transform(ih(n))+", "+ih(nh.transform(i))+")"},di={test:t=>tl.test(t)||Z1.test(t)||Nu.test(t),parse:t=>tl.test(t)?tl.parse(t):Nu.test(t)?Nu.parse(t):Z1.parse(t),transform:t=>Ld(t)?t:t.hasOwnProperty("red")?tl.transform(t):Nu.transform(t)},on=(t,e,n)=>-n*t+n*e+t;function zx(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function AX({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,s=0,o=0;if(!e)r=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;r=zx(l,a,t+1/3),s=zx(l,a,t),o=zx(l,a,t-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}const Hx=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},SX=[Z1,tl,Nu],MX=t=>SX.find(e=>e.test(t));function wR(t){const e=MX(t);let n=e.parse(t);return e===Nu&&(n=AX(n)),n}const JF=(t,e)=>{const n=wR(t),i=wR(e),r={...n};return s=>(r.red=Hx(n.red,i.red,s),r.green=Hx(n.green,i.green,s),r.blue=Hx(n.blue,i.blue,s),r.alpha=on(n.alpha,i.alpha,s),tl.transform(r))};function wX(t){var e,n;return isNaN(t)&&Ld(t)&&(((e=t.match(rv))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(yF))===null||n===void 0?void 0:n.length)||0)>0}const KF={regex:d7,countKey:"Vars",token:"${v}",parse:Rn},YF={regex:yF,countKey:"Colors",token:"${c}",parse:di.parse},QF={regex:rv,countKey:"Numbers",token:"${n}",parse:Pl.parse};function Vx(t,{regex:e,countKey:n,token:i,parse:r}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...s.map(r)))}function r0(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Vx(n,KF),Vx(n,YF),Vx(n,QF),n}function qF(t){return r0(t).values}function ZF(t){const{values:e,numColors:n,numVars:i,tokenised:r}=r0(t),s=e.length;return o=>{let a=r;for(let l=0;l<s;l++)l<i?a=a.replace(KF.token,o[l]):l<i+n?a=a.replace(YF.token,di.transform(o[l])):a=a.replace(QF.token,ih(o[l]));return a}}const EX=t=>typeof t=="number"?0:t;function TX(t){const e=qF(t);return ZF(t)(e.map(EX))}const ua={test:wX,parse:qF,createTransformer:ZF,getAnimatableNone:TX},$F=(t,e)=>n=>`${n>0?e:t}`;function e3(t,e){return typeof t=="number"?n=>on(t,e,n):di.test(t)?JF(t,e):t.startsWith("var(")?$F(t,e):n3(t,e)}const t3=(t,e)=>{const n=[...t],i=n.length,r=t.map((s,o)=>e3(s,e[o]));return s=>{for(let o=0;o<i;o++)n[o]=r[o](s);return n}},CX=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=e3(t[r],e[r]));return r=>{for(const s in i)n[s]=i[s](r);return n}},n3=(t,e)=>{const n=ua.createTransformer(e),i=r0(t),r=r0(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?ea(t3(i.values,r.values),n):$F(t,e)},Kh=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},ER=(t,e)=>n=>on(t,e,n);function bX(t){return typeof t=="number"?ER:typeof t=="string"?di.test(t)?JF:n3:Array.isArray(t)?t3:typeof t=="object"?CX:ER}function RX(t,e,n){const i=[],r=n||bX(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=r(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Rn:e;a=ea(l,a)}i.push(a)}return i}function i3(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const s=t.length;if(BM(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=RX(e,i,r),a=o.length,l=u=>{let h=0;if(a>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const d=Kh(t[h],t[h+1],u);return o[h](d)};return n?u=>l(Al(t[0],t[s-1],u)):l}function PX(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Kh(0,e,i);t.push(on(n,1,r))}}function BX(t){const e=[0];return PX(e,t.length-1),e}function LX(t,e){return t.map(n=>n*e)}function IX(t,e){return t.map(()=>e||zF).splice(0,t.length-1)}function s0({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=pX(i)?i.map(MR):MR(i),s={done:!1,value:e[0]},o=LX(n&&n.length===e.length?n:BX(e),t),a=i3(o,e,{ease:Array.isArray(r)?r:IX(e,r)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}function r3(t,e){return e?t*(1e3/e):0}const DX=5;function s3(t,e,n){const i=Math.max(e-DX,0);return r3(n-t(i),e-i)}const Wx=.001,FX=.01,TR=10,NX=.05,UX=1;function OX({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,s;sX(t<=ta(TR));let o=1-e;o=Al(NX,UX,o),t=Al(FX,TR,Zs(t)),o<1?(r=u=>{const h=u*o,d=h*t,p=h-n,m=$1(u,o),y=Math.exp(-d);return Wx-p/m*y},s=u=>{const d=u*o*t,p=d*n+n,m=Math.pow(o,2)*Math.pow(u,2)*t,y=Math.exp(-d),S=$1(Math.pow(u,2),o);return(-r(u)+Wx>0?-1:1)*((p-m)*y)/S}):(r=u=>{const h=Math.exp(-u*t),d=(u-n)*t+1;return-Wx+h*d},s=u=>{const h=Math.exp(-u*t),d=(n-u)*(t*t);return h*d});const a=5/t,l=GX(r,s,a);if(t=ta(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:o*2*Math.sqrt(i*u),duration:t}}}const kX=12;function GX(t,e,n){let i=n;for(let r=1;r<kX;r++)i=i-t(i)/e(i);return i}function $1(t,e){return t*Math.sqrt(1-e*e)}const zX=["duration","bounce"],HX=["stiffness","damping","mass"];function CR(t,e){return e.some(n=>t[n]!==void 0)}function VX(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!CR(t,HX)&&CR(t,zX)){const n=OX(t);e={...e,...n,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function o3({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],s=t[t.length-1],o={done:!1,value:r},{stiffness:a,damping:l,mass:u,velocity:h,duration:d,isResolvedFromDuration:p}=VX(i),m=h?-Zs(h):0,y=l/(2*Math.sqrt(a*u)),S=s-r,M=Zs(Math.sqrt(a/u)),g=Math.abs(S)<5;n||(n=g?.01:2),e||(e=g?.005:.5);let x;if(y<1){const _=$1(M,y);x=w=>{const C=Math.exp(-y*M*w);return s-C*((m+y*M*S)/_*Math.sin(_*w)+S*Math.cos(_*w))}}else if(y===1)x=_=>s-Math.exp(-M*_)*(S+(m+M*S)*_);else{const _=M*Math.sqrt(y*y-1);x=w=>{const C=Math.exp(-y*M*w),R=Math.min(_*w,300);return s-C*((m+y*M*S)*Math.sinh(R)+_*S*Math.cosh(R))/_}}return{calculatedDuration:p&&d||null,next:_=>{const w=x(_);if(p)o.done=_>=d;else{let C=m;_!==0&&(y<1?C=s3(x,_,w):C=0);const R=Math.abs(C)<=n,P=Math.abs(s-w)<=e;o.done=R&&P}return o.value=o.done?s:w,o}}}function bR({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:h}){const d=t[0],p={done:!1,value:d},m=L=>a!==void 0&&L<a||l!==void 0&&L>l,y=L=>a===void 0?l:l===void 0||Math.abs(a-L)<Math.abs(l-L)?a:l;let S=n*e;const M=d+S,g=o===void 0?M:o(M);g!==M&&(S=g-d);const x=L=>-S*Math.exp(-L/i),_=L=>g+x(L),w=L=>{const b=x(L),B=_(L);p.done=Math.abs(b)<=u,p.value=p.done?g:B};let C,R;const P=L=>{m(p.value)&&(C=L,R=o3({keyframes:[p.value,y(p.value)],velocity:s3(_,L,p.value),damping:r,stiffness:s,restDelta:u,restSpeed:h}))};return P(0),{calculatedDuration:null,next:L=>{let b=!1;return!R&&C===void 0&&(b=!0,w(L),P(L)),C!==void 0&&L>C?R.next(L-C):(!b&&w(L),p)}}}const WX=t=>{const e=({timestamp:n})=>t(n);return{start:()=>an.update(e,!0),stop:()=>so(e),now:()=>kn.isProcessing?kn.timestamp:performance.now()}},RR=2e4;function PR(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<RR;)e+=n,i=t.next(e);return e>=RR?1/0:e}const jX={decay:bR,inertia:bR,tween:s0,keyframes:s0,spring:o3};function o0({autoplay:t=!0,delay:e=0,driver:n=WX,keyframes:i,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:h,onUpdate:d,...p}){let m=1,y=!1,S,M;const g=()=>{S&&S(),M=new Promise($=>{S=$})};g();let x;const _=jX[r]||s0;let w;_!==s0&&typeof i[0]!="number"&&(w=i3([0,100],i,{clamp:!1}),i=[0,100]);const C=_({...p,keyframes:i});let R;a==="mirror"&&(R=_({...p,keyframes:[...i].reverse(),velocity:-(p.velocity||0)}));let P="idle",L=null,b=null,B=null;C.calculatedDuration===null&&s&&(C.calculatedDuration=PR(C));const{calculatedDuration:G}=C;let X=1/0,V=1/0;G!==null&&(X=G+o,V=X*(s+1)-o);let Y=0;const J=$=>{if(b===null)return;m>0&&(b=Math.min(b,$)),L!==null?Y=L:Y=($-b)*m;const Z=Y-e,ee=Z<0;Y=Math.max(Z,0),P==="finished"&&L===null&&(Y=V);let ie=Y,Ae=C;if(s){const Je=Y/X;let ve=Math.floor(Je),_e=Je%1;!_e&&Je>=1&&(_e=1),_e===1&&ve--,ve=Math.min(ve,s+1);const me=!!(ve%2);me&&(a==="reverse"?(_e=1-_e,o&&(_e-=o/X)):a==="mirror"&&(Ae=R));let oe=Al(0,1,_e);Y>V&&(oe=a==="reverse"&&me?1:0),ie=oe*X}const ge=ee?{done:!1,value:i[0]}:Ae.next(ie);w&&(ge.value=w(ge.value));let{done:W}=ge;!ee&&G!==null&&(W=Y>=V);const Ve=L===null&&(P==="finished"||P==="running"&&W||m<0&&Y<=0);return d&&d(ge.value),Ve&&I(),ge},ae=()=>{x&&x.stop(),x=void 0},ne=()=>{P="idle",ae(),g(),b=B=null},I=()=>{P="finished",h&&h(),ae(),g()},H=()=>{if(y)return;x||(x=n(J));const $=x.now();l&&l(),L!==null?b=$-L:(!b||P==="finished")&&(b=$),B=b,L=null,P="running",x.start()};t&&H();const z={then($,Z){return M.then($,Z)},get time(){return Zs(Y)},set time($){$=ta($),Y=$,L!==null||!x||m===0?L=$:b=x.now()-$/m},get duration(){const $=C.calculatedDuration===null?PR(C):C.calculatedDuration;return Zs($)},get speed(){return m},set speed($){$===m||!x||(m=$,z.time=Zs(Y))},get state(){return P},play:H,pause:()=>{P="paused",L=Y},stop:()=>{y=!0,P!=="idle"&&(P="idle",u&&u(),ne())},cancel:()=>{B!==null&&J(B),ne()},complete:()=>{P="finished"},sample:$=>(b=0,J($))};return z}const XX=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Vm=10,JX=2e4,KX=(t,e)=>e.type==="spring"||t==="backgroundColor"||!NF(e.ease);function YX(t,e,{onUpdate:n,onComplete:i,...r}){if(!(kF.waapi()&&XX.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let o=!1,a,l;const u=()=>{l=new Promise(g=>{a=g})};u();let{keyframes:h,duration:d=300,ease:p,times:m}=r;if(KX(e,r)){const g=o0({...r,repeat:0,delay:0});let x={done:!1,value:h[0]};const _=[];let w=0;for(;!x.done&&w<JX;)x=g.sample(w),_.push(x.value),w+=Vm;m=void 0,h=_,d=w-Vm,p="linear"}const y=aX(t.owner.current,e,h,{...r,duration:d,ease:p,times:m}),S=()=>y.cancel(),M=()=>{an.update(S),a(),u()};return y.onfinish=()=>{t.set(lX(h,r)),i&&i(),M()},{then(g,x){return l.then(g,x)},get time(){return Zs(y.currentTime||0)},set time(g){y.currentTime=ta(g)},get speed(){return y.playbackRate},set speed(g){y.playbackRate=g},get duration(){return Zs(d)},play:()=>{o||(y.play(),so(S))},pause:()=>y.pause(),stop:()=>{if(o=!0,y.playState==="idle")return;const{currentTime:g}=y;if(g){const x=o0({...r,autoplay:!1});t.setWithVelocity(x.sample(g-Vm).value,x.sample(g).value,Vm)}M()},complete:()=>y.finish(),cancel:M}}function QX({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Rn,pause:Rn,stop:Rn,then:s=>(s(),Promise.resolve()),cancel:Rn,complete:Rn});return e?o0({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const qX={type:"spring",stiffness:500,damping:25,restSpeed:10},ZX=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),$X={type:"keyframes",duration:.8},eJ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},tJ=(t,{keyframes:e})=>e.length>2?$X:Rl.has(t)?t.startsWith("scale")?ZX(e[1]):qX:eJ,eA=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ua.test(e)||e==="0")&&!e.startsWith("url(")),nJ=new Set(["brightness","contrast","saturate","opacity"]);function iJ(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(rv)||[];if(!i)return t;const r=n.replace(i,"");let s=nJ.has(e)?1:0;return i!==n&&(s*=100),e+"("+s+r+")"}const rJ=/([a-z-]*)\(.*?\)/g,tA={...ua,getAnimatableNone:t=>{const e=t.match(rJ);return e?e.map(iJ).join(" "):t}},sJ={...xF,color:di,backgroundColor:di,outlineColor:di,fill:di,stroke:di,borderColor:di,borderTopColor:di,borderRightColor:di,borderBottomColor:di,borderLeftColor:di,filter:tA,WebkitFilter:tA},FM=t=>sJ[t];function a3(t,e){let n=FM(t);return n!==tA&&(n=ua),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const l3=t=>/^0[^.\s]+$/.test(t);function oJ(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||l3(t)}function aJ(t,e,n,i){const r=eA(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=i.from!==void 0?i.from:t.get();let a;const l=[];for(let u=0;u<s.length;u++)s[u]===null&&(s[u]=u===0?o:s[u-1]),oJ(s[u])&&l.push(u),typeof s[u]=="string"&&s[u]!=="none"&&s[u]!=="0"&&(a=s[u]);if(r&&l.length&&a)for(let u=0;u<l.length;u++){const h=l[u];s[h]=a3(e,a)}return s}function lJ({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...h}){return!!Object.keys(h).length}function u3(t,e){return t[e]||t.default||t}const NM=(t,e,n,i={})=>r=>{const s=u3(i,t)||{},o=s.delay||i.delay||0;let{elapsed:a=0}=i;a=a-ta(o);const l=aJ(e,t,n,s),u=l[0],h=l[l.length-1],d=eA(t,u),p=eA(t,h);let m={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:y=>{e.set(y),s.onUpdate&&s.onUpdate(y)},onComplete:()=>{r(),s.onComplete&&s.onComplete()}};if(lJ(s)||(m={...m,...tJ(t,m)}),m.duration&&(m.duration=ta(m.duration)),m.repeatDelay&&(m.repeatDelay=ta(m.repeatDelay)),!d||!p||oX.current||s.type===!1)return QX(m);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const y=YX(e,t,m);if(y)return y}return o0(m)};function a0(t){return!!(Ii(t)&&t.add)}const uJ=t=>/^\-?\d*\.?\d+$/.test(t);function UM(t,e){t.indexOf(e)===-1&&t.push(e)}function OM(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class kM{constructor(){this.subscriptions=[]}add(e){return UM(this.subscriptions,e),()=>OM(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const cJ=t=>!isNaN(parseFloat(t));class fJ{constructor(e,n={}){this.version="10.12.14",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:s,timestamp:o}=kn;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,an.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>an.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=cJ(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new kM);const i=this.events[e].add(n);return e==="change"?()=>{i(),an.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?r3(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vc(t,e){return new fJ(t,e)}const c3=t=>e=>e.test(t),hJ={test:t=>t==="auto",parse:t=>t},f3=[Pl,it,xs,Po,v7,g7,hJ],Tf=t=>f3.find(c3(t)),dJ=[...f3,di,ua],pJ=t=>dJ.find(c3(t));function mJ(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,vc(n))}function gJ(t,e){const n=av(t,e);let{transitionEnd:i={},transition:r={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...i};for(const o in s){const a=L7(s[o]);mJ(t,o,a)}}function vJ(t,e,n){var i,r;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],u=e[l];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(r=(i=n[l])!==null&&i!==void 0?i:t.readValue(l))!==null&&r!==void 0?r:e[l]),h!=null&&(typeof h=="string"&&(uJ(h)||l3(h))?h=parseFloat(h):!pJ(h)&&ua.test(u)&&(h=a3(l,u)),t.addValue(l,vc(h,{owner:t})),n[l]===void 0&&(n[l]=h),h!==null&&t.setBaseTarget(l,h))}}function yJ(t,e){return e?(e[t]||e.default||e).from:void 0}function xJ(t,e,n){const i={};for(const r in t){const s=yJ(r,e);if(s!==void 0)i[r]=s;else{const o=n.getValue(r);o&&(i[r]=o.get())}}return i}function _J({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function h3(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");i&&(s=i);const u=[],h=r&&t.animationState&&t.animationState.getState()[r];for(const d in a){const p=t.getValue(d),m=a[d];if(!p||m===void 0||h&&_J(h,d))continue;const y={delay:n,elapsed:0,...s};if(window.HandoffAppearAnimations&&!p.hasAnimated){const M=t.getProps()[rX];M&&(y.elapsed=window.HandoffAppearAnimations(M,d,p,an))}p.start(NM(d,p,m,t.shouldReduceMotion&&Rl.has(d)?{type:!1}:y));const S=p.animation;a0(l)&&(l.add(d),S.then(()=>l.remove(d))),u.push(S)}return o&&Promise.all(u).then(()=>{o&&gJ(t,o)}),u}function nA(t,e,n={}){const i=av(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const s=i?()=>Promise.all(h3(t,i,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=r;return AJ(t,e,u+l,h,d,n)}:()=>Promise.resolve(),{when:a}=r;if(a){const[l,u]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>u())}else return Promise.all([s(),o(n.delay)])}function AJ(t,e,n=0,i=0,r=1,s){const o=[],a=(t.variantChildren.size-1)*i,l=r===1?(u=0)=>u*i:(u=0)=>a-u*i;return Array.from(t.variantChildren).sort(SJ).forEach((u,h)=>{u.notify("AnimationStart",e),o.push(nA(u,e,{...s,delay:n+l(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function SJ(t,e){return t.sortNodePosition(e)}function MJ(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>nA(t,s,n));i=Promise.all(r)}else if(typeof e=="string")i=nA(t,e,n);else{const r=typeof e=="function"?av(t,e,n.custom):e;i=Promise.all(h3(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const wJ=[...AM].reverse(),EJ=AM.length;function TJ(t){return e=>Promise.all(e.map(({animation:n,options:i})=>MJ(t,n,i)))}function CJ(t){let e=TJ(t);const n=RJ();let i=!0;const r=(l,u)=>{const h=av(t,u);if(h){const{transition:d,transitionEnd:p,...m}=h;l={...l,...m,...p}}return l};function s(l){e=l(t)}function o(l,u){const h=t.getProps(),d=t.getVariantContext(!0)||{},p=[],m=new Set;let y={},S=1/0;for(let g=0;g<EJ;g++){const x=wJ[g],_=n[x],w=h[x]!==void 0?h[x]:d[x],C=jh(w),R=x===u?_.isActive:null;R===!1&&(S=g);let P=w===d[x]&&w!==h[x]&&C;if(P&&i&&t.manuallyAnimateOnMount&&(P=!1),_.protectedKeys={...y},!_.isActive&&R===null||!w&&!_.prevProp||nv(w)||typeof w=="boolean")continue;const L=bJ(_.prevProp,w);let b=L||x===u&&_.isActive&&!P&&C||g>S&&C;const B=Array.isArray(w)?w:[w];let G=B.reduce(r,{});R===!1&&(G={});const{prevResolvedValues:X={}}=_,V={...X,...G},Y=J=>{b=!0,m.delete(J),_.needsAnimating[J]=!0};for(const J in V){const ae=G[J],ne=X[J];y.hasOwnProperty(J)||(ae!==ne?i0(ae)&&i0(ne)?!DF(ae,ne)||L?Y(J):_.protectedKeys[J]=!0:ae!==void 0?Y(J):m.add(J):ae!==void 0&&m.has(J)?Y(J):_.protectedKeys[J]=!0)}_.prevProp=w,_.prevResolvedValues=G,_.isActive&&(y={...y,...G}),i&&t.blockInitialAnimation&&(b=!1),b&&!P&&p.push(...B.map(J=>({animation:J,options:{type:x,...l}})))}if(m.size){const g={};m.forEach(x=>{const _=t.getBaseTarget(x);_!==void 0&&(g[x]=_)}),p.push({animation:g})}let M=!!p.length;return i&&h.initial===!1&&!t.manuallyAnimateOnMount&&(M=!1),i=!1,M?e(p):Promise.resolve()}function a(l,u,h){var d;if(n[l].isActive===u)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(m=>{var y;return(y=m.animationState)===null||y===void 0?void 0:y.setActive(l,u)}),n[l].isActive=u;const p=o(h,l);for(const m in n)n[m].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function bJ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!DF(e,t):!1}function Ua(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function RJ(){return{animate:Ua(!0),whileInView:Ua(),whileHover:Ua(),whileTap:Ua(),whileDrag:Ua(),whileFocus:Ua(),exit:Ua()}}class PJ extends va{constructor(e){super(e),e.animationState||(e.animationState=CJ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),nv(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let BJ=0;class LJ extends va{constructor(){super(...arguments),this.id=BJ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const IJ={animation:{Feature:PJ},exit:{Feature:LJ}},BR=(t,e)=>Math.abs(t-e);function DJ(t,e){const n=BR(t.x,e.x),i=BR(t.y,e.y);return Math.sqrt(n**2+i**2)}class d3{constructor(e,n,{transformPagePoint:i}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=Xx(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,d=DJ(u.offset,{x:0,y:0})>=3;if(!h&&!d)return;const{point:p}=u,{timestamp:m}=kn;this.history.push({...p,timestamp:m});const{onStart:y,onMove:S}=this.handlers;h||(y&&y(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,u)},this.handlePointerMove=(u,h)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=jx(h,this.transformPagePoint),an.update(this.updatePoint,!0)},this.handlePointerUp=(u,h)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:d,onSessionEnd:p}=this.handlers,m=Xx(u.type==="pointercancel"?this.lastMoveEventInfo:jx(h,this.transformPagePoint),this.history);this.startEvent&&d&&d(u,m),p&&p(u,m)},!bF(e))return;this.handlers=n,this.transformPagePoint=i;const r=sv(e),s=jx(r,this.transformPagePoint),{point:o}=s,{timestamp:a}=kn;this.history=[{...o,timestamp:a}];const{onSessionStart:l}=n;l&&l(e,Xx(s,this.history)),this.removeListeners=ea(qs(window,"pointermove",this.handlePointerMove),qs(window,"pointerup",this.handlePointerUp),qs(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),so(this.updatePoint)}}function jx(t,e){return e?{point:e(t.point)}:t}function LR(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Xx({point:t},e){return{point:t,delta:LR(t,p3(e)),offset:LR(t,FJ(e)),velocity:NJ(e,.1)}}function FJ(t){return t[0]}function p3(t){return t[t.length-1]}function NJ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=p3(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>ta(e)));)n--;if(!i)return{x:0,y:0};const s=Zs(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function qi(t){return t.max-t.min}function iA(t,e=0,n=.01){return Math.abs(t-e)<=n}function IR(t,e,n,i=.5){t.origin=i,t.originPoint=on(e.min,e.max,t.origin),t.scale=qi(n)/qi(e),(iA(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=on(n.min,n.max,t.origin)-t.originPoint,(iA(t.translate)||isNaN(t.translate))&&(t.translate=0)}function rh(t,e,n,i){IR(t.x,e.x,n.x,i?i.originX:void 0),IR(t.y,e.y,n.y,i?i.originY:void 0)}function DR(t,e,n){t.min=n.min+e.min,t.max=t.min+qi(e)}function UJ(t,e,n){DR(t.x,e.x,n.x),DR(t.y,e.y,n.y)}function FR(t,e,n){t.min=e.min-n.min,t.max=t.min+qi(e)}function sh(t,e,n){FR(t.x,e.x,n.x),FR(t.y,e.y,n.y)}function OJ(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?on(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?on(n,t,i.max):Math.min(t,n)),t}function NR(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function kJ(t,{top:e,left:n,bottom:i,right:r}){return{x:NR(t.x,n,r),y:NR(t.y,e,i)}}function UR(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function GJ(t,e){return{x:UR(t.x,e.x),y:UR(t.y,e.y)}}function zJ(t,e){let n=.5;const i=qi(t),r=qi(e);return r>i?n=Kh(e.min,e.max-i,t.min):i>r&&(n=Kh(t.min,t.max-r,e.min)),Al(0,1,n)}function HJ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const rA=.35;function VJ(t=rA){return t===!1?t=0:t===!0&&(t=rA),{x:OR(t,"left","right"),y:OR(t,"top","bottom")}}function OR(t,e,n){return{min:kR(t,e),max:kR(t,n)}}function kR(t,e){return typeof t=="number"?t:t[e]||0}const GR=()=>({translate:0,scale:1,origin:0,originPoint:0}),Uu=()=>({x:GR(),y:GR()}),zR=()=>({min:0,max:0}),wn=()=>({x:zR(),y:zR()});function hs(t){return[t("x"),t("y")]}function m3({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function WJ({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function jJ(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Jx(t){return t===void 0||t===1}function sA({scale:t,scaleX:e,scaleY:n}){return!Jx(t)||!Jx(e)||!Jx(n)}function Ha(t){return sA(t)||g3(t)||t.z||t.rotate||t.rotateX||t.rotateY}function g3(t){return HR(t.x)||HR(t.y)}function HR(t){return t&&t!=="0%"}function l0(t,e,n){const i=t-n,r=e*i;return n+r}function VR(t,e,n,i,r){return r!==void 0&&(t=l0(t,r,i)),l0(t,n,i)+e}function oA(t,e=0,n=1,i,r){t.min=VR(t.min,e,n,i,r),t.max=VR(t.max,e,n,i,r)}function v3(t,{x:e,y:n}){oA(t.x,e.translate,e.scale,e.originPoint),oA(t.y,n.translate,n.scale,n.originPoint)}function XJ(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Ou(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,v3(t,o)),i&&Ha(s.latestValues)&&Ou(t,s.latestValues))}e.x=WR(e.x),e.y=WR(e.y)}function WR(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Fo(t,e){t.min=t.min+e,t.max=t.max+e}function jR(t,e,[n,i,r]){const s=e[r]!==void 0?e[r]:.5,o=on(t.min,t.max,s);oA(t,e[n],e[i],o,e.scale)}const JJ=["x","scaleX","originX"],KJ=["y","scaleY","originY"];function Ou(t,e){jR(t.x,e,JJ),jR(t.y,e,KJ)}function y3(t,e){return m3(jJ(t.getBoundingClientRect(),e))}function YJ(t,e,n){const i=y3(t,n),{scroll:r}=e;return r&&(Fo(i.x,r.offset.x),Fo(i.y,r.offset.y)),i}const QJ=new WeakMap;class qJ{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=l=>{this.stopAnimation(),n&&this.snapToCursor(sv(l,"page").point)},s=(l,u)=>{const{drag:h,dragPropagation:d,onDragStart:p}=this.getProps();if(h&&!d&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=PF(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),hs(y=>{let S=this.getAxisMotionValue(y).get()||0;if(xs.test(S)){const{projection:M}=this.visualElement;if(M&&M.layout){const g=M.layout.layoutBox[y];g&&(S=qi(g)*(parseFloat(S)/100))}}this.originPoint[y]=S}),p&&an.update(()=>p(l,u),!1,!0);const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(l,u)=>{const{dragPropagation:h,dragDirectionLock:d,onDirectionLock:p,onDrag:m}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:y}=u;if(d&&this.currentDirection===null){this.currentDirection=ZJ(y),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",u.point,y),this.updateAxis("y",u.point,y),this.visualElement.render(),m&&m(l,u)},a=(l,u)=>this.stop(l,u);this.panSession=new d3(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&an.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Wm(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=OJ(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),{layout:i}=this.visualElement.projection||{},r=this.constraints;e&&Fu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):(console.log(i),e&&i?this.constraints=kJ(i.layoutBox,e):this.constraints=!1),this.elastic=VJ(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&hs(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=HJ(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Fu(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=YJ(i,r.root,this.visualElement.getTransformPagePoint());let o=GJ(r.layout.layoutBox,s);if(n){const a=n(WJ(o));this.hasMutatedConstraints=!!a,a&&(o=m3(a))}return o}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=hs(h=>{if(!Wm(h,n,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const p=r?200:1e6,m=r?40:1e7,y={type:"inertia",velocity:i?e[h]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,y)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(NM(e,i,0,n))}stopAnimation(){hs(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){hs(n=>{const{drag:i}=this.getProps();if(!Wm(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(n);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[n];s.set(e[n]-on(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Fu(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};hs(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();r[o]=zJ({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),hs(o=>{if(!Wm(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(on(l,u,r[o]))})}addListeners(){if(!this.visualElement.current)return;QJ.set(this.visualElement,this);const e=this.visualElement.current,n=qs(e,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Fu(l)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const o=Ks(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(hs(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=rA,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Wm(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function ZJ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class $J extends va{constructor(e){super(e),this.removeGroupControls=Rn,this.removeListeners=Rn,this.controls=new qJ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Rn}unmount(){this.removeGroupControls(),this.removeListeners()}}const XR=t=>(e,n)=>{t&&an.update(()=>t(e,n))};class eK extends va{constructor(){super(...arguments),this.removePointerDownListener=Rn}onPointerDown(e){this.session=new d3(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:XR(e),onStart:XR(n),onMove:i,onEnd:(s,o)=>{delete this.session,r&&an.update(()=>r(s,o))}}}mount(){this.removePointerDownListener=qs(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function tK(){const t=O.useContext(_M);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=O.useId();return O.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const yg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function JR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Cf={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(it.test(t))t=parseFloat(t);else return t;const n=JR(t,e.target.x),i=JR(t,e.target.y);return`${n}% ${i}%`}},nK={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=ua.parse(t);if(r.length>5)return i;const s=ua.createTransformer(t),o=typeof r[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const u=on(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=u),typeof r[3+o]=="number"&&(r[3+o]/=u),s(r)}};class iK extends f0.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;u7(rK),s&&(n.group&&n.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),yg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||an.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function x3(t){const[e,n]=tK(),i=O.useContext(dF);return f0.createElement(iK,{...t,layoutGroup:i,switchLayoutGroup:O.useContext(pF),isPresent:e,safeToRemove:n})}const rK={borderRadius:{...Cf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Cf,borderTopRightRadius:Cf,borderBottomLeftRadius:Cf,borderBottomRightRadius:Cf,boxShadow:nK},_3=["TopLeft","TopRight","BottomLeft","BottomRight"],sK=_3.length,KR=t=>typeof t=="string"?parseFloat(t):t,YR=t=>typeof t=="number"||it.test(t);function oK(t,e,n,i,r,s){r?(t.opacity=on(0,n.opacity!==void 0?n.opacity:1,aK(i)),t.opacityExit=on(e.opacity!==void 0?e.opacity:1,0,lK(i))):s&&(t.opacity=on(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let o=0;o<sK;o++){const a=`border${_3[o]}Radius`;let l=QR(e,a),u=QR(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||YR(l)===YR(u)?(t[a]=Math.max(on(KR(l),KR(u),i),0),(xs.test(u)||xs.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=on(e.rotate||0,n.rotate||0,i))}function QR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const aK=A3(0,.5,LM),lK=A3(.5,.95,Rn);function A3(t,e,n){return i=>i<t?0:i>e?1:n(Kh(t,e,i))}function qR(t,e){t.min=e.min,t.max=e.max}function fr(t,e){qR(t.x,e.x),qR(t.y,e.y)}function ZR(t,e,n,i,r){return t-=e,t=l0(t,1/n,i),r!==void 0&&(t=l0(t,1/r,i)),t}function uK(t,e=0,n=1,i=.5,r,s=t,o=t){if(xs.test(e)&&(e=parseFloat(e),e=on(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=on(s.min,s.max,i);t===s&&(a-=e),t.min=ZR(t.min,e,n,a,r),t.max=ZR(t.max,e,n,a,r)}function $R(t,e,[n,i,r],s,o){uK(t,e[n],e[i],e[r],e.scale,s,o)}const cK=["x","scaleX","originX"],fK=["y","scaleY","originY"];function eP(t,e,n,i){$R(t.x,e,cK,n?n.x:void 0,i?i.x:void 0),$R(t.y,e,fK,n?n.y:void 0,i?i.y:void 0)}function tP(t){return t.translate===0&&t.scale===1}function S3(t){return tP(t.x)&&tP(t.y)}function aA(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function nP(t){return qi(t.x)/qi(t.y)}class hK{constructor(){this.members=[]}add(e){UM(this.members,e),e.scheduleRender()}remove(e){if(OM(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function iP(t,e,n){let i="";const r=t.x.translate/e.x,s=t.y.translate/e.y;if((r||s)&&(i=`translate3d(${r}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:u,rotateY:h}=n;l&&(i+=`rotate(${l}deg) `),u&&(i+=`rotateX(${u}deg) `),h&&(i+=`rotateY(${h}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(i+=`scale(${o}, ${a})`),i||"none"}const dK=(t,e)=>t.depth-e.depth;class pK{constructor(){this.children=[],this.isDirty=!1}add(e){UM(this.children,e),this.isDirty=!0}remove(e){OM(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(dK),this.isDirty=!1,this.children.forEach(e)}}function mK(t,e){const n=performance.now(),i=({timestamp:r})=>{const s=r-n;s>=e&&(so(i),t(s-e))};return an.read(i,!0),()=>so(i)}function gK(t){window.MotionDebug&&window.MotionDebug.record(t)}function vK(t){return t instanceof SVGElement&&t.tagName!=="svg"}function yK(t,e,n){const i=Ii(t)?t:vc(t);return i.start(NM("",i,e,n)),i.animation}const rP=["","X","Y","Z"],sP=1e3;let xK=0;const Va={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function M3({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=xK++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{Va.totalNodes=Va.resolvedTargetDeltas=Va.recalculatedProjection=0,this.nodes.forEach(SK),this.nodes.forEach(CK),this.nodes.forEach(bK),this.nodes.forEach(MK),gK(Va)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new pK)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new kM),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=vK(o),this.instance=o;const{layoutId:l,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let d;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=mK(p,250),yg.hasAnimatedSinceResize&&(yg.hasAnimatedSinceResize=!1,this.nodes.forEach(aP))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||h.getDefaultTransition()||IK,{onLayoutAnimationStart:M,onLayoutAnimationComplete:g}=h.getProps(),x=!this.targetLayout||!aA(this.targetLayout,y)||m,_=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||p&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,_);const w={...u3(S,"layout"),onPlay:M,onComplete:g};(h.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else p||aP(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,so(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(RK),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(oP);return}this.isUpdating||this.nodes.forEach(EK),this.isUpdating=!1,this.nodes.forEach(TK),this.nodes.forEach(_K),this.nodes.forEach(AK),this.clearAllSnapshots(),Zu.update.process(kn),Zu.preRender.process(kn),Zu.render.process(kn)}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(wK),this.sharedNodes.forEach(PK)}scheduleUpdateProjection(){an.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){an.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!S3(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||Ha(this.latestValues)||h)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),DK(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return wn();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Fo(a.x,l.offset.x),Fo(a.y,l.offset.y)),a}removeElementScroll(o){const a=wn();fr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:h,options:d}=u;if(u!==this.root&&h&&d.layoutScroll){if(h.isRoot){fr(a,o);const{scroll:p}=this.root;p&&(Fo(a.x,-p.offset.x),Fo(a.y,-p.offset.y))}Fo(a.x,h.offset.x),Fo(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const l=wn();fr(l,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Ou(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Ha(h.latestValues)&&Ou(l,h.latestValues)}return Ha(this.latestValues)&&Ou(l,this.latestValues),l}removeTransform(o){const a=wn();fr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Ha(u.latestValues))continue;sA(u.latestValues)&&u.updateSnapshot();const h=wn(),d=u.measurePageBox();fr(h,d),eP(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Ha(this.latestValues)&&eP(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==kn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:p}=this.options;if(!(!this.layout||!(d||p))){if(this.resolvedRelativeTargetAt=kn.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wn(),this.relativeTargetOrigin=wn(),sh(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),fr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=wn(),this.targetWithTransforms=wn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),UJ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):fr(this.target,this.layout.layoutBox),v3(this.target,this.targetDelta)):fr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wn(),this.relativeTargetOrigin=wn(),sh(this.relativeTargetOrigin,this.target,m.target),fr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Va.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||sA(this.parent.latestValues)||g3(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===kn.timestamp&&(u=!1),u)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;fr(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;XJ(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:y}=a;if(!y){this.projectionTransform&&(this.projectionDelta=Uu(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Uu(),this.projectionDeltaWithTransform=Uu());const S=this.projectionTransform;rh(this.projectionDelta,this.layoutCorrected,y,this.latestValues),this.projectionTransform=iP(this.projectionDelta,this.treeScale),(this.projectionTransform!==S||this.treeScale.x!==p||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),Va.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},d=Uu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=wn(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,S=m!==y,M=this.getStack(),g=!M||M.members.length<=1,x=!!(S&&!g&&this.options.crossfade===!0&&!this.path.some(LK));this.animationProgress=0;let _;this.mixTargetDelta=w=>{const C=w/1e3;lP(d.x,o.x,C),lP(d.y,o.y,C),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(sh(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),BK(this.relativeTarget,this.relativeTargetOrigin,p,C),_&&aA(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=wn()),fr(_,this.relativeTarget)),S&&(this.animationValues=h,oK(h,u,this.latestValues,C,x,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(so(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=an.update(()=>{yg.hasAnimatedSinceResize=!0,this.currentAnimation=yK(0,sP,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(sP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:h}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&w3(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||wn();const d=qi(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const p=qi(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}fr(a,l),Ou(a,h),rh(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new hK),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let h=0;h<rP.length;h++){const d="rotate"+rP[h];l[d]&&(u[d]=l[d],o.setStaticValue(d,0))}o.render();for(const h in u)o.setStaticValue(h,u[h]);o.scheduleRender()}getProjectionStyles(o={}){var a,l;const u={};if(!this.instance||this.isSVG)return u;if(this.isVisible)u.visibility="";else return{visibility:"hidden"};const h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=vg(o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const S={};return this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=vg(o.pointerEvents)||""),this.hasProjected&&!Ha(this.latestValues)&&(S.transform=h?h({},""):"none",this.hasProjected=!1),S}const p=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=iP(this.projectionDeltaWithTransform,this.treeScale,p),h&&(u.transform=h(p,u.transform));const{x:m,y}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const S in t0){if(p[S]===void 0)continue;const{correct:M,applyTo:g}=t0[S],x=u.transform==="none"?p[S]:M(p[S],d);if(g){const _=g.length;for(let w=0;w<_;w++)u[g[w]]=x}else u[S]=x}return this.options.layoutId&&(u.pointerEvents=d===this?vg(o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(oP),this.root.sharedNodes.clear()}}}function _K(t){t.updateLayout()}function AK(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?hs(d=>{const p=o?n.measuredBox[d]:n.layoutBox[d],m=qi(p);p.min=i[d].min,p.max=p.min+m}):w3(s,n.layoutBox,i)&&hs(d=>{const p=o?n.measuredBox[d]:n.layoutBox[d],m=qi(i[d]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+m)});const a=Uu();rh(a,i,n.layoutBox);const l=Uu();o?rh(l,t.applyTransform(r,!0),n.measuredBox):rh(l,i,n.layoutBox);const u=!S3(a);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:m}=d;if(p&&m){const y=wn();sh(y,n.layoutBox,p.layoutBox);const S=wn();sh(S,i,m.layoutBox),aA(y,S)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=y,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function SK(t){Va.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function MK(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function wK(t){t.clearSnapshot()}function oP(t){t.clearMeasurements()}function EK(t){t.isLayoutDirty=!1}function TK(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function aP(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function CK(t){t.resolveTargetDelta()}function bK(t){t.calcProjection()}function RK(t){t.resetRotation()}function PK(t){t.removeLeadSnapshot()}function lP(t,e,n){t.translate=on(e.translate,0,n),t.scale=on(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function uP(t,e,n,i){t.min=on(e.min,n.min,i),t.max=on(e.max,n.max,i)}function BK(t,e,n,i){uP(t.x,e.x,n.x,i),uP(t.y,e.y,n.y,i)}function LK(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const IK={duration:.45,ease:[.4,0,.1,1]};function cP(t){t.min=Math.round(t.min),t.max=Math.round(t.max)}function DK(t){cP(t.x),cP(t.y)}function w3(t,e,n){return t==="position"||t==="preserve-aspect"&&!iA(nP(e),nP(n),.2)}const FK=M3({attachResizeListener:(t,e)=>Ks(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Kx={current:void 0},E3=M3({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Kx.current){const t=new FK({});t.mount(window),t.setOptions({layoutScroll:!0}),Kx.current=t}return Kx.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),NK={pan:{Feature:eK},drag:{Feature:$J,ProjectionNode:E3,MeasureLayout:x3}},UK=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function OK(t){const e=UK.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function lA(t,e,n=1){const[i,r]=OK(t);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);return s?s.trim():Y1(r)?lA(r,e,n+1):r}function kK(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const s=r.get();if(!Y1(s))return;const o=lA(s,i);o&&r.set(o)});for(const r in e){const s=e[r];if(!Y1(s))continue;const o=lA(s,i);o&&(e[r]=o,n||(n={}),n[r]===void 0&&(n[r]=s))}return{target:e,transitionEnd:n}}const GK=new Set(["width","height","top","left","right","bottom","x","y"]),T3=t=>GK.has(t),zK=t=>Object.keys(t).some(T3),fP=t=>t===Pl||t===it,hP=(t,e)=>parseFloat(t.split(", ")[e]),dP=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return hP(r[1],e);{const s=i.match(/^matrix\((.+)\)$/);return s?hP(s[1],t):0}},HK=new Set(["x","y","z"]),VK=Bd.filter(t=>!HK.has(t));function WK(t){const e=[];return VK.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const pP={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:dP(4,13),y:dP(5,14)},jK=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,s=getComputedStyle(r),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(u=>{a[u]=pP[u](i,s)}),e.render();const l=e.measureViewportBox();return n.forEach(u=>{const h=e.getValue(u);h&&h.jump(a[u]),t[u]=pP[u](l,s)}),t},XK=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(T3);let s=[],o=!1;const a=[];if(r.forEach(l=>{const u=t.getValue(l);if(!t.hasValue(l))return;let h=n[l],d=Tf(h);const p=e[l];let m;if(i0(p)){const y=p.length,S=p[0]===null?1:0;h=p[S],d=Tf(h);for(let M=S;M<y&&p[M]!==null;M++)m?BM(Tf(p[M])===m):m=Tf(p[M])}else m=Tf(p);if(d!==m)if(fP(d)&&fP(m)){const y=u.get();typeof y=="string"&&u.set(parseFloat(y)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&m===it&&(e[l]=p.map(parseFloat))}else d!=null&&d.transform&&(m!=null&&m.transform)&&(h===0||p===0)?h===0?u.set(m.transform(h)):e[l]=d.transform(p):(o||(s=WK(t),o=!0),a.push(l),i[l]=i[l]!==void 0?i[l]:e[l],u.jump(p))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=jK(e,t,a);return s.length&&s.forEach(([h,d])=>{t.getValue(h).set(d)}),t.render(),tv&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:i}}else return{target:e,transitionEnd:i}};function JK(t,e,n,i){return zK(e)?XK(t,e,n,i):{target:e,transitionEnd:i}}const KK=(t,e,n,i)=>{const r=kK(t,e,i);return e=r.target,i=r.transitionEnd,JK(t,e,n,i)},uA={current:null},C3={current:!1};function YK(){if(C3.current=!0,!!tv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>uA.current=t.matches;t.addListener(e),e()}else uA.current=!1}function QK(t,e,n){const{willChange:i}=e;for(const r in e){const s=e[r],o=n[r];if(Ii(s))t.addValue(r,s),a0(i)&&i.add(r);else if(Ii(o))t.addValue(r,vc(s,{owner:t})),a0(i)&&i.remove(r);else if(o!==s)if(t.hasValue(r)){const a=t.getValue(r);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(r);t.addValue(r,vc(a!==void 0?a:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const mP=new WeakMap,b3=Object.keys(Xh),qK=b3.length,gP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],ZK=SM.length;class $K{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>an.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=iv(n),this.isVariantNode=hF(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{});for(const d in h){const p=h[d];a[d]!==void 0&&Ii(p)&&(p.set(a[d],!1),a0(u)&&u.add(d))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,mP.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),C3.current||YK(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:uA.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){mP.delete(this.current),this.projection&&this.projection.unmount(),so(this.notifyUpdate),so(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=Rl.has(e),r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&an.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,s){let o,a;for(let l=0;l<qK;l++){const u=b3[l],{isEnabled:h,Feature:d,ProjectionNode:p,MeasureLayout:m}=Xh[u];p&&(o=p),h(n)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),m&&(a=m))}if(!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:h,dragConstraints:d,layoutScroll:p,layoutRoot:m}=n;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!h||d&&Fu(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<gP.length;i++){const r=gP[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s=e["on"+r];s&&(this.propEventSubscriptions[r]=this.on(r,s))}this.prevMotionValues=QK(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<ZK;i++){const r=SM[i],s=this.props[r];(jh(s)||s===!1)&&(n[r]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=vc(n,{owner:this}),this.addValue(e,i)),i}readValue(e){return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=PM(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ii(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new kM),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class R3 extends $K{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},s){let o=xJ(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),o&&(o=r(o))),s){vJ(this,i,o);const a=KK(this,i,o,n);n=a.transitionEnd,i=a.target}return{transition:e,transitionEnd:n,...i}}}function eY(t){return window.getComputedStyle(t)}class tY extends R3{readValueFromInstance(e,n){if(Rl.has(n)){const i=FM(n);return i&&i.default||0}else{const i=eY(e),r=(vF(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return y3(e,n)}build(e,n,i,r){wM(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return RM(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ii(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){MF(e,n,i,r)}}class nY extends R3{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Rl.has(n)){const i=FM(n);return i&&i.default||0}return n=wF.has(n)?n:bM(n),e.getAttribute(n)}measureInstanceViewportBox(){return wn()}scrapeMotionValuesFromProps(e,n){return TF(e,n)}build(e,n,i,r){TM(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){EF(e,n,i,r)}mount(e){this.isSVGTag=CM(e.tagName),super.mount(e)}}const iY=(t,e)=>MM(t)?new nY(e,{enableHardwareAcceleration:!1}):new tY(e,{enableHardwareAcceleration:!0}),rY={layout:{ProjectionNode:E3,MeasureLayout:x3}},sY={...IJ,...eX,...NK,...rY},yc=a7((t,e)=>U7(t,e,sY,iY)),GM=t=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:t}}}),oY=(t,e,n,i)=>({hidden:{x:t==="left"?"-100%":t==="right"?"100%":0,y:t==="up"||t==="down"?"100%":0},show:{x:0,y:0,transition:{type:e,delay:n,duration:i,ease:"easeOut"}}}),aY=(t,e)=>({hidden:{},show:{transition:{staggerChildren:t,delayChildren:e||0}}}),Jr={paddingX:"sm:px-16 px-6",paddingY:"sm:py-16 py-6",padding:"sm:px-16 px-6 sm:py-16 py-10",heroHeadText:"font-black text-secondary xl:text-[80px] lg:text-[70px] sm:text-[60px] xs:text-[50px] text-[40px] lg:leading-[98px] mt-2",heroSubText:"text-secondary font-medium xl:text-[24px] lg:text-[22px] sm:text-[20px] xs:text-[16px] text-[14px] lg:leading-[36px]",sectionHeadText:"text-primary font-black md:text-[60px] sm:text-[50px] xs:text-[40px] text-[30px]",sectionSubText:"sm:text-[18px] text-[14px] text-tertiary uppercase tracking-wider -mb-2"};var P3=/^--/;function lY(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!P3.test(t)&&!(oh.hasOwnProperty(t)&&oh[t])?e+"px":(""+e).trim()}var vP={};function uY(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:i,children:r,scrollTop:s,scrollLeft:o,viewBox:a,...l}=e,u=Object.values(l),h=Object.keys(l).map(d=>n||t.hasAttribute(d)?d:vP[d]||(vP[d]=d.replace(/([A-Z])/g,p=>"-"+p.toLowerCase())));r!==void 0&&(t.textContent=r);for(const d in i)if(i.hasOwnProperty(d)){const p=lY(d,i[d]);P3.test(d)?t.style.setProperty(d,p):t.style[d]=p}h.forEach((d,p)=>{t.setAttribute(d,u[p])}),s!==void 0&&(t.scrollTop=s),o!==void 0&&(t.scrollLeft=o),a!==void 0&&t.setAttribute("viewBox",a)}var oh={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cY=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),fY=["Webkit","Ms","Moz","O"];oh=Object.keys(oh).reduce((t,e)=>(fY.forEach(n=>t[cY(n,e)]=t[e]),t),oh);var hY=/^(matrix|translate|scale|rotate|skew)/,dY=/^(translate)/,pY=/^(rotate|skew)/,Yx=(t,e)=>Ce.num(t)&&t!==0?t+e:t,xg=(t,e)=>Ce.arr(t)?t.every(n=>xg(n,e)):Ce.num(t)?t===e:parseFloat(t)===e,mY=class extends Z0{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>Yx(a,"px")).join(",")})`,xg(o,0)])),ws(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(hY.test(a)){if(delete i[a],Ce.und(o))return;const l=dY.test(a)?"px":pY.test(a)?"deg":"";r.push(ji(o)),s.push(a==="rotate3d"?([u,h,d,p])=>[`rotate3d(${u},${h},${d},${Yx(p,l)})`,xg(p,0)]:u=>[`${a}(${u.map(h=>Yx(h,l)).join(",")})`,xg(u,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new gY(r,s)),super(i)}},gY=class extends zD{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return Et(this.inputs,(n,i)=>{const r=Ei(n[0]),[s,o]=this.transforms[i](Ce.arr(r)?r:n.map(Ei));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&Et(this.inputs,e=>Et(e,n=>vr(n)&&Rc(n,this)))}observerRemoved(t){t==0&&Et(this.inputs,e=>Et(e,n=>vr(n)&&kh(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Oh(this,t)}},vY=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];wr.assign({batchedUpdates:GB.unstable_batchedUpdates,createStringInterpolator:pM,colors:GD});var yY=YD(vY,{applyAnimatedValues:uY,createAnimatedStyle:t=>new mY(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),xY=yY.animated;const _Y=()=>(jj(),j.jsx(j.Fragment,{children:j.jsxs("section",{className:"relative lg:h-screen mx-auto flex lg:flex-row flex-col-reverse justify-center items-center overflow-hidden",children:[j.jsxs("div",{className:"flex-initial lg:max-w-[50vw] min-w-[50wh] flex flex-row flex-nowrap items-center justify-start",children:[j.jsxs("div",{className:`flex flex-col justify-center items-center mt-5 ${Jr.paddingX}`,children:[j.jsx("div",{className:"w-5 h-5 rounded-full bg-primary z-10"}),j.jsx("div",{className:"w-1 sm:h-80 h-40 violet-gradient z-10"})]}),j.jsxs("div",{className:"flex flex-col gap-3 items-start z-10",children:[j.jsxs("h1",{className:`${Jr.heroHeadText} text-white-100`,children:["Hi, I'm"," ",j.jsx("span",{className:"text-primary font-['Lobster']  drop-shadow-lg",children:"Eva"})]}),j.jsx("p",{className:"font-light text-[18px] text-tertiary -mt-4",children:"MSc Interactive Media | MSc Clinical Psychology"}),j.jsxs("p",{className:`${Jr.heroSubText} text-white-100 max-w-sm`,children:["I love creating interactive digital tools"," ","that are beautiful, accessible and"," ","improve our daily life."]}),j.jsx("a",{href:"#contact",className:"p-4 rounded-full bg-black-200/50 font-bold mt-3",children:"GET IN TOUCH"})]})]}),j.jsx("div",{className:"flex-1 lg:max-w-[50vw] min-w-[50wh] 2xl:h-min-[820px] xl:h-[820px] md:h-[550px] h-[350px]",children:j.jsx(Zj,{})}),j.jsx("div",{className:"invisible lg:visible absolute xs:bottom-10 bottom-32 w-full flex justify-center items-center drop-shadow-md z-20",children:j.jsx("a",{href:"#about",children:j.jsx("div",{className:"w-[34px] h-[58px] rounded-3xl border-4 border-secondary flex justify-center items-start p-2",children:j.jsx(yc.div,{animate:{y:[0,10,0]},transition:{duration:1.5,repeat:1/0,repeatType:"loop"},className:"w-1.5 h-2.5 rounded-full bg-secondary mb-1"})})})})]})})),AY="/assets/my_logo-2f5bf2f8.svg",SY="/assets/menu-242d80a8.svg",MY="/assets/close-ad0e0ca6.svg",wY="/assets/filtersymbol-16dbd828.svg",yP="/assets/head-w-heart-3ee16687.svg",xP="/assets/hand-w-heart-4ca27025.svg",EY="/assets/linkedin-white-aa0be26a.svg",TY="/assets/github-mark-white-fab00c2d.svg",CY="/assets/InteractiveWebVR-f16fd504.png",bY="/assets/VRautism-7f157226.png",RY="/assets/3Dportfolio-3ac65cca.png",PY="/assets/bearopedia-b6b964e1.png",BY="/assets/turtlefractalgenerator-f97b5f71.png",LY="/assets/portrait-b78a8420.jpg",_P=[{id:"about",title:"About"},{id:"work",title:"Work"},{id:"contact",title:"Contact"}],AP=[{degree:"MSc Interactive Media",university:"University College Cork",country:"Ireland",year:"2023",grade:"First Class Honours"},{degree:"MSc Clinical Psychology",university:"Rijksuniversiteit Leiden",country:"The Netherlands",year:"2023",grade:"8.6"},{degree:"BSc (Hons) Psychology",university:"University of Dundee",country:"United Kingdom",year:"2020",grade:"First Class Honours"}],Of=[{name:"VR as an Autism Awareness Tool",description:"VR application that allows users to experience autistic symptoms from a first-person perspective in a health care setting to improve empathy and care for autistic patients.",tags:[{name:"VR",type:"device"},{name:"C#",type:"language"},{name:"OpenXR",type:"platform"},{name:"Blender",type:"software"},{name:"Unity",type:"software"}],image:bY,source_code_link:"https://github.com/",filtered:!1},{name:"Interactive 3D Portfolio",description:"Web portfolio that enables users to interact with a 3D environment.",tags:[{name:"react",type:"library"},{name:"threejs",type:"library"},{name:"tailwind",type:"library"},{name:"Blender",type:"software"},{name:"git",type:"language"},{name:"JavaScript",type:"language"},{name:"CSS",type:"language"},{name:"HTML5",type:"language"},{name:"Web",type:"platform"},{name:"Mobile",type:"device"},{name:"Desktop",type:"device"}],image:RY,source_code_link:"https://github.com/esgoet/esgoet.github.io",filtered:!1},{name:"Interactive VR Web Application",description:"Web application built with Three.JS with which users can experience a 3D scene in VR given the appropriate hardware.",tags:[{name:"VR",type:"device"},{name:"threejs",type:"library"},{name:"Web",type:"platform"},{name:"Blender",type:"software"},{name:"JavaScript",type:"language"},{name:"CSS",type:"language"},{name:"HTML5",type:"language"}],image:CY,source_code_link:"https://github.com/esgoet/threejs-vr-app",filtered:!1},{name:"Bearopedia",description:"A mobile encyclopedic application that enables the user to explore facts about different bear species and favourite or edit their favourite species",tags:[{name:"iOS",type:"platform"},{name:"XCode",type:"software"},{name:"Swift",type:"language"},{name:"CoreData",type:"library"},{name:"Mobile",type:"device"},{name:"xml",type:"language"}],image:PY,source_code_link:"https://github.com/esgoet/bearopedia",filtered:!1},{name:"Turtle Fractal Generator",description:"A simple desktop python application with which various fractals can be drawn based on user settings",tags:[{name:"Python",type:"language"},{name:"Tkinter",type:"library"},{name:"Desktop",type:"device"}],image:BY,source_code_link:"https://github.com/esgoet/turtle-fractal-generator",filtered:!1}],IY=()=>{const[t,e]=O.useState(""),[n,i]=O.useState(!1),{y:r}=uF({from:{y:60},y:n?75:60,config:{duration:300}});return j.jsx(j.Fragment,{children:j.jsxs("nav",{className:`${Jr.paddingX} w-full flex items-center py-5 fixed top-0 bg-primary drop-shadow-md z-30`,children:[j.jsxs("div",{className:"w-full flex justify-between items-center max-w-7xl mx-auto z-20 ",children:[j.jsxs(Mk,{to:"/",className:"flex items-center gap-2 z-20",onClick:()=>{e(""),window.scrollTo(0,0)},children:[j.jsx("img",{src:AY,alt:"logo",className:"w-9 h-9 object-contain"}),j.jsxs("p",{className:"text-white text-[18px] font-bold cursor-pointer flex z-20",children:["Eva Goetzke "," ",j.jsx("span",{className:"sm:block hidden",children:"| Creative Developer"})]})]}),j.jsx("ul",{className:"list-none hidden sm:flex flex-row gap-10",children:_P.map(s=>j.jsx("li",{className:`${t===s.title?"text-white":"text-secondary"}
              hover:text-white text-[18px] font-medium cursor-pointer`,onClick:()=>e(s.title),children:j.jsx("a",{href:`#${s.id}`,children:s.title})},s.id))}),j.jsx("div",{className:"sm:hidden flex flex-none justify-end items-center",children:j.jsx("img",{src:n?MY:SY,alt:"menu",className:"w-[28px] h-[28px] object-contain cursor-pointer z-20",onClick:()=>i(!n)})})]}),j.jsx(xY.div,{style:{top:r},className:`${n?"flex ":"hidden"} py-3 px-6 bg-black-100 absolute right-0 w-full z-10 border-b-4 border-primary`,children:j.jsx("ul",{className:"list-none flex flex-row items-end justify-end w-full gap-8",children:_P.map(s=>j.jsx("li",{className:`${t===s.title?"text-tertiary":"text-white"} font-roboto font-medium cursor-pointer text-[16px]`,onClick:()=>{e(s.title),i(!n)},children:j.jsx("a",{href:`#${s.id}`,children:s.title})},s.id))})})]})})};var DY=Object.defineProperty,FY=Object.defineProperties,NY=Object.getOwnPropertyDescriptors,SP=Object.getOwnPropertySymbols,UY=Object.prototype.hasOwnProperty,OY=Object.prototype.propertyIsEnumerable,MP=(t,e,n)=>e in t?DY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bf=(t,e)=>{for(var n in e||(e={}))UY.call(e,n)&&MP(t,n,e[n]);if(SP)for(var n of SP(e))OY.call(e,n)&&MP(t,n,e[n]);return t},Rf=(t,e)=>FY(t,NY(e)),B3=class extends O.Component{constructor(t){super(t),this.ref=f0.createRef(),this.state={style:{}};const e={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1.1",speed:"1000",transition:!0,axis:null,reset:!0};this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.element=null,this.settings=Object.assign({},e,this.props.options),this.reverse=this.settings.reverse?-1:1,this.onMouseEnter=this.onMouseEnter.bind(this,this.props.onMouseEnter),this.onMouseMove=this.onMouseMove.bind(this,this.props.onMouseMove),this.onMouseLeave=this.onMouseLeave.bind(this,this.props.onMouseLeave)}componentDidMount(){this.element=this.ref.current,setTimeout(()=>{this.element.parentElement.querySelector(":hover")===this.element&&this.onMouseEnter()},0)}componentWillUnmount(){clearTimeout(this.transitionTimeout),cancelAnimationFrame(this.updateCall)}onMouseEnter(t=()=>{},e){return this.updateElementPosition(),this.setState(Object.assign({},this.state,{style:Rf(bf({},this.state.style),{willChange:"transform"})})),this.setTransition(),t(e)}reset(){window.requestAnimationFrame(()=>{this.setState(Object.assign({},this.state,{style:Rf(bf({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`})}))})}onMouseMove(t=()=>{},e){return e.persist(),this.updateCall!==null&&window.cancelAnimationFrame(this.updateCall),this.event=e,this.updateCall=requestAnimationFrame(this.update.bind(this,e)),t(e)}setTransition(){clearTimeout(this.transitionTimeout),this.setState(Object.assign({},this.state,{style:Rf(bf({},this.state.style),{transition:`${this.settings.speed}ms ${this.settings.easing}`})})),this.transitionTimeout=setTimeout(()=>{this.setState(Object.assign({},this.state,{style:Rf(bf({},this.state.style),{transition:""})}))},this.settings.speed)}onMouseLeave(t=()=>{},e){return this.setTransition(),this.settings.reset&&this.reset(),t(e)}getValues(t){const e=(t.nativeEvent.clientX-this.left)/this.width,n=(t.nativeEvent.clientY-this.top)/this.height,i=Math.min(Math.max(e,0),1),r=Math.min(Math.max(n,0),1),s=(this.reverse*(this.settings.max/2-i*this.settings.max)).toFixed(2),o=(this.reverse*(r*this.settings.max-this.settings.max/2)).toFixed(2),a=i*100,l=r*100;return{tiltX:s,tiltY:o,percentageX:a,percentageY:l}}updateElementPosition(){const t=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=t.left,this.top=t.top}update(t){const e=this.getValues(t);this.setState(Object.assign({},this.state,{style:Rf(bf({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(${this.settings.axis==="x"?0:e.tiltY}deg) rotateY(${this.settings.axis==="y"?0:e.tiltX}deg) scale3d(${this.settings.scale}, ${this.settings.scale}, ${this.settings.scale})`})})),this.updateCall=null}render(){const t=Object.assign({},this.props.style,this.state.style);return j.jsx("div",{style:t,ref:this.ref,className:this.props.className,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,children:this.props.children})}};const zM=(t,e)=>function(){return j.jsxs(yc.section,{variants:aY(),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.25},className:`${Jr.paddingX} max-w-7xl mx-auto relative z-0 lg:min-h-screen 2xl:min-h-0 pb-8`,children:[j.jsx("span",{className:"hash-span",id:e,children:""}),j.jsx(t,{})]})},kY=()=>{const[t,e]=O.useState(!1),n=new Date(1997,6,16),i=Math.abs(new Date(Date.now()-n.getTime()).getUTCFullYear()-1970),r=s=>j.jsxs(j.Fragment,{children:[j.jsx("p",{className:"text-start",children:s.degree}),j.jsx("p",{className:"italic text-[12px] text-end text-secondary",children:s.university})]});return j.jsx(B3,{options:{max:5,scale:1,speed:450},children:j.jsxs("div",{className:`sm:relative -left-32 -top-24  w-[300px] h-[600px] rounded-full bg-primary flex ${t?"flex-col-reverse":"flex-col"} justify-start items-center p-0.5 shadow-[inset_0_0_3px_3px_rgba(70,3,100,0.15)] border-solid border-[10px] border-secondary`,children:[j.jsx("img",{src:LY,alt:"Portrait of Eva Goetzke",className:"w-[280px] h-[280px] rounded-full drop-shadow-md cursor-pointer",onClick:()=>e(!t)}),j.jsxs("div",{className:` ${t?"hidden":"flex"} m-3 flex-col gap-2 justify-start items-center w-full`,children:[j.jsx("div",{className:"flex flex-row gap-3 items-center",children:j.jsxs("p",{className:"pb-1",children:[j.jsx("span",{className:"font-bold",children:"Eva Goetzke"})," (",i,")"]})}),j.jsxs("div",{className:"flex flex-col gap-1 px-2 w-full text-[14px] ",children:[j.jsxs("div",{className:"py-1 flex flex-row gap-2 items-center justify-stretch bg-black-100/50 p-1 rounded-2xl",children:[j.jsx("p",{className:"ml-1 font-bold bg-black-100/50 p-2 rounded-2xl",children:"2023"}),j.jsx("div",{className:"p-1 w-full",children:AP.map(s=>s.year==="2023"?j.jsx(r,{...s}):null)})]}),j.jsxs("div",{className:"py-1 flex flex-row gap-2 items-center bg-black-100/50 p-1 rounded-2xl",children:[j.jsx("p",{className:"ml-1 font-bold bg-black-100/50 p-2 rounded-2xl",children:"2020"}),j.jsx("div",{className:"p-1 pr-2 w-full",children:AP.map(s=>s.year==="2020"?j.jsx(r,{...s}):null)})]})]}),j.jsxs("div",{className:"mt-5 flex flex-col drop-shadow-sm w-[30px] h-[20px] items-stretch justify-center",children:[j.jsx("div",{className:"h-1/3 bg-black m-0"}),j.jsx("div",{className:"h-1/3  bg-red-700 m-0"}),j.jsx("div",{className:"h-1/3 bg-amber-500 m-0"})]})]}),j.jsxs("div",{className:` ${t?"flex":"hidden"} m-3 mt-8 flex-col justify-around items-center h-full`,children:[j.jsx("p",{className:"font-bold",children:"Eva Goetzke"}),j.jsxs("div",{className:"flex flex-col items-center  gap-4 text-[14px]",children:[j.jsxs("div",{className:"flex flex-row gap-1 justify-center items-center bg-black-100/50 p-1 rounded-2xl",children:[j.jsx("img",{src:yP,alt:yP,className:"w-[50px] h-[50px] bg-black-100/50 rounded-full p-1.5 ml-1"}),j.jsxs("ul",{className:"flex flex-wrap gap-1 p-2  rounded-2xl",children:[j.jsx("li",{children:"Accessibility"}),j.jsx("li",{children:"Digital Education"}),j.jsx("li",{children:"Mental Health Awareness"})]})]}),j.jsxs("div",{className:"flex flex-row gap-2 items-center bg-black-100/50 p-1 rounded-2xl",children:[j.jsx("img",{src:xP,alt:xP,className:"w-[50px] h-[50px] bg-black-100/50 rounded-full p-1.5 ml-1"}),j.jsxs("ul",{className:"flex flex-wrap gap-1 justify-between p-2 rounded-2xl",children:[j.jsx("li",{children:"Coding"}),j.jsx("li",{children:"3D Modelling"}),j.jsx("li",{children:"Painting"}),j.jsx("li",{children:"Reading"}),j.jsx("li",{children:"Volleyball"})]})]})]})]})]})})},GY=()=>j.jsxs(j.Fragment,{children:[j.jsxs(yc.div,{variants:GM(),children:[j.jsx("p",{className:Jr.sectionSubText,children:"Who I Am"}),j.jsx("h2",{className:Jr.sectionHeadText,children:"About Me."})]}),j.jsxs("div",{className:"flex flex-col-reverse sm:flex-row items-center sm:items-start",children:[j.jsxs("div",{className:"mt-4 text-white text-[17px] max-w-3xl leading-[30px] bg-black-200/50 p-8 rounded-2xl sm:pr-40",children:[j.jsx("p",{className:"py-2",children:"While I can't (literally) moonwalk in real life, I can certainly pull it off virtually! Enhancing accessibility to otherwise restricted experiences through digital technology is a key passion of mine. With a background in clinical psychology and a love for art and design, I'm driven to create beautiful and user-centric digital solutions that enhance everyday life."}),j.jsxs("p",{className:"py-2",children:["I bring a versatile skill set to the table, ranging from web development to game design and VR applications. Explore my portfolio"," ",j.jsx("a",{href:"#work",children:"below"})," to see my work in action."]})]}),j.jsx(yc.div,{variants:oY("right","tween",.2,1),children:j.jsx(kY,{})})]})]}),zY=zM(GY,"about");var L3={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var i=[],r=0;r<arguments.length;r++){var s=arguments[r];if(s){var o=typeof s;if(o==="string"||o==="number")i.push(s);else if(Array.isArray(s)){if(s.length){var a=n.apply(null,s);a&&i.push(a)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){i.push(s.toString());continue}for(var l in s)e.call(s,l)&&s[l]&&i.push(l)}}}return i.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(L3);var I3=L3.exports,HY=HM(O),bo=HM(RD),VY=HM(I3);function HM(t){return t&&t.__esModule?t:{default:t}}const WY=({animate:t=!0,className:e="",layout:n="2-columns",lineColor:i="#FFF",children:r})=>(typeof window=="object"&&document.documentElement.style.setProperty("--line-color",i),HY.default.createElement("div",{className:(0,VY.default)(e,"vertical-timeline",{"vertical-timeline--animate":t,"vertical-timeline--two-columns":n==="2-columns","vertical-timeline--one-column-left":n==="1-column"||n==="1-column-left","vertical-timeline--one-column-right":n==="1-column-right"})},r));WY.propTypes={children:bo.default.oneOfType([bo.default.arrayOf(bo.default.node),bo.default.node]).isRequired,className:bo.default.string,animate:bo.default.bool,layout:bo.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:bo.default.string};function cA(){return cA=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},cA.apply(this,arguments)}function jY(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,fA(t,e)}function fA(t,e){return fA=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},fA(t,e)}function XY(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var hA=new Map,jm=new WeakMap,wP=0,D3=void 0;function JY(t){D3=t}function KY(t){return t?(jm.has(t)||(wP+=1,jm.set(t,wP.toString())),jm.get(t)):"0"}function YY(t){return Object.keys(t).sort().filter(function(e){return t[e]!==void 0}).map(function(e){return e+"_"+(e==="root"?KY(t.root):t[e])}).toString()}function QY(t){var e=YY(t),n=hA.get(e);if(!n){var i=new Map,r,s=new IntersectionObserver(function(o){o.forEach(function(a){var l,u=a.isIntersecting&&r.some(function(h){return a.intersectionRatio>=h});t.trackVisibility&&typeof a.isVisible>"u"&&(a.isVisible=u),(l=i.get(a.target))==null||l.forEach(function(h){h(u,a)})})},t);r=s.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),n={id:e,observer:s,elements:i},hA.set(e,n)}return n}function VM(t,e,n,i){if(n===void 0&&(n={}),i===void 0&&(i=D3),typeof window.IntersectionObserver>"u"&&i!==void 0){var r=t.getBoundingClientRect();return e(i,{isIntersecting:i,target:t,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),function(){}}var s=QY(n),o=s.id,a=s.observer,l=s.elements,u=l.get(t)||[];return l.has(t)||l.set(t,u),u.push(e),a.observe(t),function(){u.splice(u.indexOf(e),1),u.length===0&&(l.delete(t),a.unobserve(t)),l.size===0&&(a.disconnect(),hA.delete(o))}}var qY=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function EP(t){return typeof t.children!="function"}var u0=function(t){jY(e,t);function e(i){var r;return r=t.call(this,i)||this,r.node=null,r._unobserveCb=null,r.handleNode=function(s){r.node&&(r.unobserve(),!s&&!r.props.triggerOnce&&!r.props.skip&&r.setState({inView:!!r.props.initialInView,entry:void 0})),r.node=s||null,r.observeNode()},r.handleChange=function(s,o){s&&r.props.triggerOnce&&r.unobserve(),EP(r.props)||r.setState({inView:s,entry:o}),r.props.onChange&&r.props.onChange(s,o)},r.state={inView:!!i.initialInView,entry:void 0},r}var n=e.prototype;return n.componentDidUpdate=function(r){(r.rootMargin!==this.props.rootMargin||r.root!==this.props.root||r.threshold!==this.props.threshold||r.skip!==this.props.skip||r.trackVisibility!==this.props.trackVisibility||r.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},n.componentWillUnmount=function(){this.unobserve(),this.node=null},n.observeNode=function(){if(!(!this.node||this.props.skip)){var r=this.props,s=r.threshold,o=r.root,a=r.rootMargin,l=r.trackVisibility,u=r.delay,h=r.fallbackInView;this._unobserveCb=VM(this.node,this.handleChange,{threshold:s,root:o,rootMargin:a,trackVisibility:l,delay:u},h)}},n.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},n.render=function(){if(!EP(this.props)){var r=this.state,s=r.inView,o=r.entry;return this.props.children({inView:s,entry:o,ref:this.handleNode})}var a=this.props,l=a.children,u=a.as,h=XY(a,qY);return O.createElement(u||"div",cA({ref:this.handleNode},h),l)},e}(O.Component);u0.displayName="InView";u0.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};function ZY(t){var e=t===void 0?{}:t,n=e.threshold,i=e.delay,r=e.trackVisibility,s=e.rootMargin,o=e.root,a=e.triggerOnce,l=e.skip,u=e.initialInView,h=e.fallbackInView,d=O.useRef(),p=O.useState({inView:!!u}),m=p[0],y=p[1],S=O.useCallback(function(g){d.current!==void 0&&(d.current(),d.current=void 0),!l&&g&&(d.current=VM(g,function(x,_){y({inView:x,entry:_}),_.isIntersecting&&a&&d.current&&(d.current(),d.current=void 0)},{root:o,rootMargin:s,threshold:n,trackVisibility:r,delay:i},h))},[Array.isArray(n)?n.toString():n,o,s,a,l,r,h,i]);O.useEffect(function(){!d.current&&m.entry&&!a&&!l&&y({inView:!!u})});var M=[S,m.inView,m.entry];return M.ref=M[0],M.inView=M[1],M.entry=M[2],M}const $Y=Object.freeze(Object.defineProperty({__proto__:null,InView:u0,default:u0,defaultFallbackInView:JY,observe:VM,useInView:ZY},Symbol.toStringTag,{value:"Module"})),eQ=RN($Y);var Ro=WM(O),qt=WM(RD),Xm=WM(I3),tQ=eQ;function WM(t){return t&&t.__esModule?t:{default:t}}const nQ=({children:t="",className:e="",contentArrowStyle:n=null,contentStyle:i=null,date:r="",dateClassName:s="",icon:o=null,iconClassName:a="",iconOnClick:l=null,onTimelineElementClick:u=null,iconStyle:h=null,id:d="",position:p="",style:m=null,textClassName:y="",intersectionObserverProps:S={rootMargin:"0px 0px -40px 0px",triggerOnce:!0},visible:M=!1})=>Ro.default.createElement(tQ.InView,S,({inView:g,ref:x})=>Ro.default.createElement("div",{ref:x,id:d,className:(0,Xm.default)(e,"vertical-timeline-element",{"vertical-timeline-element--left":p==="left","vertical-timeline-element--right":p==="right","vertical-timeline-element--no-children":t===""}),style:m},Ro.default.createElement(Ro.default.Fragment,null,Ro.default.createElement("span",{style:h,onClick:l,className:(0,Xm.default)(a,"vertical-timeline-element-icon",{"bounce-in":g||M,"is-hidden":!(g||M)})},o),Ro.default.createElement("div",{style:i,onClick:u,className:(0,Xm.default)(y,"vertical-timeline-element-content",{"bounce-in":g||M,"is-hidden":!(g||M)})},Ro.default.createElement("div",{style:n,className:"vertical-timeline-element-content-arrow"}),t,Ro.default.createElement("span",{className:(0,Xm.default)(s,"vertical-timeline-element-date")},r)))));nQ.propTypes={children:qt.default.oneOfType([qt.default.arrayOf(qt.default.node),qt.default.node]),className:qt.default.string,contentArrowStyle:qt.default.shape({}),contentStyle:qt.default.shape({}),date:qt.default.node,dateClassName:qt.default.string,icon:qt.default.element,iconClassName:qt.default.string,iconStyle:qt.default.shape({}),iconOnClick:qt.default.func,onTimelineElementClick:qt.default.func,id:qt.default.string,position:qt.default.string,style:qt.default.shape({}),textClassName:qt.default.string,visible:qt.default.bool,intersectionObserverProps:qt.default.shape({root:qt.default.object,rootMargin:qt.default.string,threshold:qt.default.number,triggerOnce:qt.default.bool})};const cl=[],F3=[];Of.map(t=>t.tags.map(e=>{cl.find(n=>n.name===e.name)?cl.find(n=>n.name===e.name).weight+=1:cl.push({...e,weight:1})}));cl.sort((t,e)=>t.name>e.name);cl.sort((t,e)=>t.weight-e.weight);cl.reverse();F3.push("device","platform","language","library","software");const iQ=({name:t,type:e,size:n,onClick:i,filterType:r,weight:s})=>{const o=`text-[${n}px]`,a=`text-[${n-2}px]`,l=()=>j.jsx("span",{className:`ml-1 -mr-1 py-0.5 px-1.5 rounded-full bg-black-200/50 ${a}`,children:s});if(e===r)return j.jsx(j.Fragment,{children:j.jsxs("label",{htmlFor:t,className:`${o} bg-black-100 px-2 text-white rounded-full`,children:[j.jsx("input",{type:"checkbox",className:"hidden",id:t,onClick:i}),j.jsx("span",{className:"hover:text-white",children:"#"}),j.jsx("span",{className:"hover:text-secondary",children:t}),s>1?j.jsx(l,{}):null]})})},rQ=({index:t,name:e,description:n,tags:i,image:r,source_code_link:s})=>j.jsx(j.Fragment,{children:j.jsxs(B3,{options:{max:5,scale:1,speed:450},className:"bg-primary p-5 rounded-2xl sm:w-[360px] w-full flex flex-col",children:[j.jsxs("div",{className:"relative w-full h-[230px]",children:[j.jsx("img",{src:r,alt:e,className:"w-full h-full object-cover rounded-2xl"}),j.jsx("div",{className:"absolute inset-0 flex justify-end m-3 card-img_hover",children:j.jsx("div",{onClick:()=>window.open(s,"_blank"),className:"w-10 h-10 rounded-full flex justify-center items-center cursor-pointer drop-shadow-md bg-black-200/50 hover:bg-black-200",children:j.jsx("p",{className:"font-bold text-[18px]",children:"</>"})})})]}),j.jsxs("div",{className:"mt-5",children:[j.jsx("h3",{className:"text-white font-bold text-[24px]",children:e}),j.jsx("p",{className:"text-black-100 text-[14px]",children:n})]}),j.jsx("div",{className:"mt-4 flex flex-wrap gap-2 self-end justify-self-end justify-end contend-end",children:i.map(o=>j.jsxs("p",{className:"text-[12px] bg-black-100 px-2 text-white rounded-full",children:["#",o.name]},o.name))})]})}),sQ=()=>{const[t,e]=O.useState(Of),n=s=>{s.target.checked?(s.target.parentNode.style.backgroundColor="#bb99ff",s.target.nextSibling.innerHTML="&#x00D7; #"):(s.target.parentNode.style.backgroundColor="#7E57C2",s.target.nextSibling.innerHTML="#"),r()},i=()=>{e(Of),document.querySelectorAll("input[type='checkbox']:checked").forEach(s=>{s.checked=!1,s.parentNode.style.backgroundColor="#7E57C2",s.nextSibling.innerHTML="#"})},r=()=>{const s=[],o=[];document.querySelectorAll("input[type='checkbox']:checked").forEach(a=>o.push(a.id)),o.length===0?e(Of):(s.length=0,Of.forEach(a=>{a.tags.forEach(l=>{o.includes(l.name)&&(s.find(u=>u.name===a.name)||s.push({...a}))})}),e(s))};return j.jsxs(j.Fragment,{children:[j.jsxs(yc.div,{variants:GM(),children:[j.jsx("p",{className:Jr.sectionSubText,children:"My portfolio"}),j.jsx("h2",{className:Jr.sectionHeadText,children:"Projects."})]}),j.jsx("div",{className:"w-full flex"}),j.jsxs("form",{id:"filterTagsForm",className:"my-4 bg-black-200/50 p-4 rounded-2xl flex flex-col gap-2",children:[j.jsxs("div",{className:"flex justify-between items-center",children:[j.jsxs("div",{className:"flex flex-row items-center px-2",children:[j.jsx("img",{src:wY,alt:"filter",className:"w-[26px] h-[26px] object-contain cursor-pointer z-20"}),j.jsx("h3",{className:"px-2 text-[18px]",children:"Filter Projects"})]}),j.jsx("button",{className:"bg-black-200/30 px-3 text-white rounded-full",type:"button",onClick:i,children:"RESET"})]}),j.jsx("div",{className:"flex sm:flex-row flex-col gap-2",children:F3.map(s=>j.jsxs("fieldset",{className:"flex flex-wrap items-start justify-start gap-1 rounded-2xl bg-black-200/30 p-2",id:s,children:[j.jsx("legend",{className:"text-center text-tertiary text-[14px]",children:s.toUpperCase()}),cl.map(o=>j.jsx(iQ,{...o,size:14,onClick:n,filterType:s,weight:o.weight},o.name))]},s))})]}),j.jsx("div",{className:"flex flex-wrap justify-start gap-7",id:"projectGallery",children:t.map(s=>j.jsx(rQ,{...s},s.name))})]})},oQ=zM(sQ,"work"),Yh={_origin:"https://api.emailjs.com"},aQ=(t,e="https://api.emailjs.com")=>{Yh._userID=t,Yh._origin=e},N3=(t,e,n)=>{if(!t)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class TP{constructor(e){this.status=e?e.status:0,this.text=e?e.responseText:"Network Error"}}const U3=(t,e,n={})=>new Promise((i,r)=>{const s=new XMLHttpRequest;s.addEventListener("load",({target:o})=>{const a=new TP(o);a.status===200||a.text==="OK"?i(a):r(a)}),s.addEventListener("error",({target:o})=>{r(new TP(o))}),s.open("POST",Yh._origin+t,!0),Object.keys(n).forEach(o=>{s.setRequestHeader(o,n[o])}),s.send(e)}),lQ=(t,e,n,i)=>{const r=i||Yh._userID;return N3(r,t,e),U3("/api/v1.0/email/send",JSON.stringify({lib_version:"3.11.0",user_id:r,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"})},uQ=t=>{let e;if(typeof t=="string"?e=document.querySelector(t):e=t,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},cQ=(t,e,n,i)=>{const r=i||Yh._userID,s=uQ(n);N3(r,t,e);const o=new FormData(s);return o.append("lib_version","3.11.0"),o.append("service_id",t),o.append("template_id",e),o.append("user_id",r),U3("/api/v1.0/email/send-form",o)},fQ={init:aQ,send:lQ,sendForm:cQ},hQ=t=>j.jsx("input",{type:t.type,name:t.name,id:t.name,onChange:t.handleChange,placeholder:t.placeholder,className:t.className}),dQ=t=>j.jsx("textarea",{rows:"5",name:t.name,id:t.name,onChange:t.handleChange,placeholder:t.placeholder,className:t.className}),Qx=t=>{const e="bg-primary py-3 sm:py-4 px-3 sm:px-6 placeholder:text-secondary text-white rounded-lg outlined-none border-none font-medium z-30";return j.jsxs("label",{htmlFor:t.name,className:"flex flex-col",children:[j.jsx("span",{className:"text-tertiary font-medium mb-1 sm:mb-2",children:t.label}),t.type==="textarea"?j.jsx(dQ,{...t,className:e}):j.jsx(hQ,{...t,className:e})]})},pQ=()=>{const t=O.useRef(),[e,n]=O.useState({name:"",email:"",message:""}),[i,r]=O.useState(!1),s=a=>{const{name:l,value:u}=a.target;n({...e,[l]:u}),console.log("name: "+l+", value: "+u)},o=a=>{a.preventDefault(),r(!0),fQ.send("service_28abtbq","template_hn5qowi",{from_name:e.name,to_name:"Eva Goetzke",from_email:e.email,to_email:"eva.goetzke@gmail.com",message:e.message},"qbyhQVnAB6vPZ1ifL").then(()=>{r(!1),alert("Thank you. I will get back to you as soon as possible."),n({name:"",email:"",message:""})},l=>{console.log(l),alert("Oh no, something went wrong. Please try again!"),r(!1)})};return j.jsxs("div",{className:"xl:flex-row lg:h-screen flex-col-reverse flex gap-10 overflow-hidden pb-10",children:[j.jsxs("div",{className:"flex-[0.75] min-w-[35vw]",children:[j.jsxs(yc.div,{variants:GM(),children:[j.jsx("p",{className:Jr.sectionSubText,children:"Get in touch"}),j.jsx("h2",{className:Jr.sectionHeadText,children:"Contact."})]}),j.jsx("div",{children:j.jsxs("form",{ref:t,onSubmit:o,className:"flex flex-col gap-4 bg-black-200/50 p-8 rounded-2xl border-none",children:[j.jsx(Qx,{label:"Your Name",placeholder:"What's your name?",handleChange:s,name:"name",type:"text"}),j.jsx(Qx,{label:"Your Email",placeholder:"What's your email?",handleChange:s,name:"email",type:"email"}),j.jsx(Qx,{label:"Your Message",placeholder:"What's your message?",handleChange:s,name:"message",type:"textarea"}),j.jsx("button",{type:"submit",className:`bg-tertiary hover:text-primary hover:bg-black-200 py-2 px-6 sm:py-3 sm:px-10 outline-none w-fit text-black-100 font-bold
            shadow-mg shadow-primary rounded-xl self-end`,children:i?"Sending...":"Send"})]})})]}),j.jsx("div",{className:"xl:flex-1 xl:h-auto md:h-[550px] h-[350px]",children:j.jsx(T6,{})})]})},mQ=zM(pQ,"contact"),gQ=()=>{const t=new Date().getFullYear();return j.jsxs("footer",{className:"w-full bg-black-200/50 flex flex-col gap-5 items-center justify-center sm:px-16 px-6 py-10 -mt-10",children:[j.jsxs("div",{className:"flex flex-row gap-7 items-center justify-center",children:[j.jsx("div",{onClick:()=>window.open("https://linkedin.com/in/eva-goetzke","_blank"),className:"w-6 h-6 flex justify-center items-center cursor-pointer drop-shadow-md",children:j.jsx("img",{src:EY,alt:"linkedin",className:"w-full h-full object-contain"})}),j.jsx("div",{onClick:()=>window.open("https://github.com/esgoet","_blank"),className:"w-7 h-7 flex justify-center items-center cursor-pointer drop-shadow-md",children:j.jsx("img",{src:TY,alt:"github",className:"w-full h-full object-contain"})})]}),j.jsxs("small",{children:[" ",t,", Eva Goetzke. All Rights Reserved"]})]})},vQ=()=>j.jsx(_k,{children:j.jsxs("div",{className:"relative z-0 bg-black-100",children:[j.jsx(IY,{}),j.jsx(b6,{}),j.jsx(_Y,{}),j.jsx(zY,{}),j.jsx(oQ,{}),j.jsx(mQ,{}),j.jsx(gQ,{})]})});qx.createRoot(document.getElementById("root")).render(j.jsx(f0.StrictMode,{children:j.jsx(vQ,{})}));
